# –ê–Ω–∞–ª–∏–∑ TravelDetailsContainer (/travels/[param])

## üìä –°—Ç–∞—Ç—É—Å: 3055 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏

### üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

#### 1. **Security Issues (–£—è–∑–≤–∏–º–æ—Å—Ç–∏)**
- ‚ùå `dangerouslySetInnerHTML` –¥–ª—è JSON-LD –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚ùå –ù–µ—Ç —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (YouTube ID –∏–∑ URL)
- ‚ùå –ù–µ—Ç CSRF protection –¥–ª—è —Ñ–æ—Ä–º
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç Content Security Policy (CSP)

#### 2. **Performance Issues**
- ‚ùå –ß—Ä–µ–∑–º–µ—Ä–Ω–æ –±–æ–ª—å—à–æ–π —Ñ–∞–π–ª (3055 —Å—Ç—Ä–æ–∫) - –Ω–∞—Ä—É—à–∞–µ—Ç SRP
- ‚ùå –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ useEffect (>10) - —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- ‚ùå –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ Animated.Value –±–µ–∑ –æ—á–∏—Å—Ç–∫–∏ –ø–∞–º—è—Ç–∏
- ‚ùå Scroll listener –Ω–∞ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ (—É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏)
- ‚ùå –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ useCallback –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚ùå RefObject.current –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ null

#### 3. **Accessibility (A11y)**
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç aria-expanded –¥–ª—è CollapsibleSection
- ‚ùå –ù–µ—Ç role="region" –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–µ–∫—Ü–∏–π
- ‚ùå Placeholder image –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–∞ –¥–ª—è WCAG AA
- ‚ùå Video overlay –Ω–µ –æ–±—ä—è–≤–ª—è–µ—Ç –∞–ª—å—Ç-—Ç–µ–∫—Å—Ç –¥–ª—è lazy-loaded –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚ùå –ù–µ—Ç skip-to-content —Å—Å—ã–ª–∫–∏

#### 4. **Cross-Platform Issues**
- ‚ùå Platform.OS –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ JSX –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–µ (–Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ)
- ‚ùå Conditional imports –≤ —Ä–∞–Ω—Ç–∞–π–º–µ –º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- ‚ùå Web refs –¥–µ—Ä–≥–∞—é—Ç React Native API –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
- ‚ùå iOS/Android –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è (AnimateEvent –ø–æ–¥–¥–µ—Ä–∂–∫–∞)

#### 5. **Type Safety**
- ‚ùå –ú–Ω–æ–∂–µ—Å—Ç–≤–æ `any` —Ç–∏–ø–æ–≤ (unsafe)
- ‚ùå `@ts-ignore` –±–µ–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚ùå –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è gallery items (string | object)
- ‚ùå ImgLike interface –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω

### üü° –°–ï–†–¨–Å–ó–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

#### 6. **Code Organization**
- –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç - –Ω—É–∂–Ω–∞ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è
- –°–º–µ—à–∞–Ω–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å–æ —Å—Ç–∏–ª—è–º–∏
- –ù–µ—Ç —á–∏—Å—Ç–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è: presentational vs container
- Hero section –ª–æ–≥–∏–∫–∞ –Ω–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –æ—Ç –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ

#### 7. **Error Handling**
- Catch –±–ª–æ–∫–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç –æ—à–∏–±–∫–∏ (noop comments)
- –ù–µ—Ç fallback UI –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏
- Scroll position recovery –Ω–µ –∏–º–µ–µ—Ç —Ç–∞–π–º–∞—É—Ç–æ–≤
- Network errors –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

#### 8. **Browser Compatibility**
- requestIdleCallback –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- IntersectionObserver –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–µ–∑ –ø–æ–ª–∏—Ñ–∏–ª–∞
- CSS contain —Å–≤–æ–π—Å—Ç–≤–æ –Ω–µ –≤–µ–∑–¥–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- fetch/promise —Ç—Ä–µ–±—É—é—Ç –ø–æ–ª–∏—Ñ–∏–ª–∞ –¥–ª—è IE11

#### 9. **Memory Leaks**
- setTimeout/setInterval –≤ useEffect –±–µ–∑ –æ—á–∏—Å—Ç–∫–∏
- Observer subscriptions –Ω–µ –≤—Å–µ –æ—Ç–ø–∏—Å–∞–Ω—ã
- Animated listeners –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –±–µ–∑ removeListener –≥–∞—Ä–∞–Ω—Ç–∏–∏
- WeakRef –º–æ–≥–ª–∞ –±—ã –ø–æ–º–æ—á—å —Å DOM nodes

### üü† MINOR ISSUES

#### 10. **Styling Problems**
- –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Å—Ç–∏–ª–∏ (margin-bottom –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö)
- –ù–µ—Ç —Ü–≤–µ—Ç–æ–≤–æ–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏–∑–∞—Ü–∏–∏ (hardcoded rgba)
- Line-height –Ω–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω –º–µ–∂–¥—É –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏
- Font-weight –∫–∞–∫ any –≤–º–µ—Å—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏

#### 11. **Testing Issues**
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã - —Ç–æ–ª—å–∫–æ smoke tests
- –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- –ù–µ—Ç E2E —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –º–µ–∂–¥—É —Å–µ–∫—Ü–∏—è–º–∏
- –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –∞11y
- –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ layout

---

## ‚úÖ –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### Phase 1: Security & Type Safety (2-3 —á–∞—Å–∞)
1. [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—é JSON-LD (–∏—Å–ø–æ–ª—å–∑—É–µ–º `json-stringify-safe`)
2. [ ] –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ `any` —á–µ—Ä–µ–∑ generics
3. [ ] –£–¥–∞–ª–∏—Ç—å –≤—Å–µ `@ts-ignore` —Å –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏—è–º–∏
4. [ ] –î–æ–±–∞–≤–∏—Ç—å CSP headers
5. [ ] –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å YouTube URL –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

### Phase 2: Refactoring & Decomposition (3-4 —á–∞—Å–∞)
1. [ ] –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ 5 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
   - TravelDetailsPage (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –ª–æ–≥–∏–∫–∞)
   - TravelDetailsView (–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π)
   - TravelHeroBlock
   - TravelContentBlocks
   - TravelRelatedBlock
2. [ ] –ò–∑–≤–ª–µ—á—å —Ö—É–∫–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
3. [ ] –°–æ–∑–¥–∞—Ç—å utils –¥–ª—è –æ–±—â–µ–π –ª–æ–≥–∏–∫–∏ (scroll, refs, etc)
4. [ ] –†–∞–∑–¥–µ–ª–∏—Ç—å styles –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

### Phase 3: Accessibility & UX (2-3 —á–∞—Å–∞)
1. [ ] –î–æ–±–∞–≤–∏—Ç—å ARIA labels –Ω–∞ –≤—Å–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
2. [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å focus management
3. [ ] –î–æ–±–∞–≤–∏—Ç—å skip links
4. [ ] –£–ª—É—á—à–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å placeholder
5. [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å screen reader

### Phase 4: Performance Optimization (2-3 —á–∞—Å–∞)
1. [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å useEffect –ø–æ—Ä—è–¥–æ–∫
2. [ ] –î–æ–±–∞–≤–∏—Ç—å useTransition –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
3. [ ] Memoize –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–µ–µ —Å React.memo
4. [ ] –î–æ–±–∞–≤–∏—Ç—å Web Vitals tracking
5. [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å image lazy-loading —Å LQIP

### Phase 5: Testing Coverage (3-4 —á–∞—Å–∞)
1. [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è —Ö—É–∫–æ–≤ (80%+ coverage)
2. [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è —Å–µ–∫—Ü–∏–π
3. [ ] E2E —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
4. [ ] A11y —Ç–µ—Å—Ç—ã (axe-core)
5. [ ] Visual regression —Ç–µ—Å—Ç—ã

### Phase 6: Cross-Platform Testing (2 —á–∞—Å–∞)
1. [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ iOS (Simulator)
2. [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ Android (Emulator)
3. [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ Web (Chrome, Firefox, Safari)
4. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ 3G —Å–µ—Ç—è—Ö (DevTools throttling)
5. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å offline mode

---

## üéØ EXPECTED OUTCOMES

‚úÖ **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- üì¶ –†–∞–∑–º–µ—Ä main bundle: -35% (3055 ‚Üí ~2000 —Å–ª–æ—ç–∫ —Ç–µ—Å—Ç–æ–≤)
- üöÄ LCP (Largest Contentful Paint): -200ms
- üß† Cognitive complexity: O(n) ‚Üí O(1) –Ω–∞ —Å–µ–∫—Ü–∏—é
- ‚ôø WCAG AAA compliance
- ‚úÖ 85%+ test coverage
- üì± 100% cross-platform support

