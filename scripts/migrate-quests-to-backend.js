#!/usr/bin/env node
/**
 * –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –∫–≤–µ—Å—Ç–æ–≤ –∏–∑ —Ö–∞—Ä–¥–∫–æ–¥–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –≤ –±—ç–∫–µ–Ω–¥ –ë–î.
 *
 * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
 *   node scripts/migrate-quests-to-backend.js [--dry-run] [--api-url=http://192.168.50.36]
 *
 * --dry-run   ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞–∑–∞—Ç—å JSON, –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
 * --api-url   ‚Äî –±–∞–∑–æ–≤—ã–π URL –±—ç–∫–µ–Ω–¥–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é http://192.168.50.36)
 * --token     ‚Äî —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –¥–ª—è –∑–∞–ø–∏—Å–∏)
 *
 * –°–∫—Ä–∏–ø—Ç —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç payload –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–≤–µ—Å—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST /api/quests/
 * (–∏–ª–∏ –≤—ã–≤–æ–¥–∏—Ç JSON –ø—Ä–∏ --dry-run).
 */

const args = process.argv.slice(2);
const isDryRun = args.includes('--dry-run');
const apiUrlArg = args.find(a => a.startsWith('--api-url='));
const tokenArg = args.find(a => a.startsWith('--token='));
const API_BASE = apiUrlArg ? apiUrlArg.split('=')[1] : 'http://192.168.50.36';
const TOKEN = tokenArg ? tokenArg.split('=')[1] : null;

// ===================== –î–ê–ù–ù–´–ï –ö–í–ï–°–¢–û–í =====================
// –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –¥–∞–Ω–Ω—ã–µ –∏–∑ registry.ts / data —Ñ–∞–π–ª–æ–≤ –≤ —á–∏—Å—Ç–æ–º JS

function serializeAnswer(answerFn) {
    // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–≤–µ—Ç–∞ –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ JSON-–∫–æ–Ω—Ñ–∏–≥ –¥–ª—è –±—ç–∫–µ–Ω–¥–∞
    const fnStr = answerFn.toString();

    // () => true ‚Äî –ª—é–±–æ–π –æ—Ç–≤–µ—Ç
    if (fnStr.includes('=> true') || fnStr.includes('() => true')) {
        return { type: 'any', value: '' };
    }

    // normalize(s) === 'xxx' ‚Äî —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
    const exactMatch = fnStr.match(/normalize\(s\)\s*===\s*'([^']+)'/);
    if (exactMatch) {
        return { type: 'exact', value: exactMatch[1] };
    }

    // ['a','b','c'].includes(normalize(s)) ‚Äî –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
    const includesMatch = fnStr.match(/\[([^\]]+)\]\.includes\(normalize\(s\)\)/);
    if (includesMatch) {
        const values = includesMatch[1].replace(/'/g, '').split(',').map(v => v.trim());
        return { type: 'exact_any', value: JSON.stringify(values) };
    }

    // parseInt(s,10) === N ‚Äî —Ç–æ—á–Ω–æ–µ —á–∏—Å–ª–æ
    const intExact = fnStr.match(/parseInt\(s,\s*10\)\s*===\s*(\d+)/);
    if (intExact) {
        return { type: 'exact', value: intExact[1] };
    }

    // n >= X && n <= Y ‚Äî –¥–∏–∞–ø–∞–∑–æ–Ω
    const rangeMatch = fnStr.match(/n\s*>=\s*(\d+)\s*&&\s*n\s*<=\s*(\d+)/);
    if (rangeMatch) {
        return { type: 'range', value: JSON.stringify({ min: parseInt(rangeMatch[1]), max: parseInt(rangeMatch[2]) }) };
    }

    // normalize(s).length > N ‚Äî –ª—é–±–æ–π —Ç–µ–∫—Å—Ç –¥–ª–∏–Ω–Ω–µ–µ N
    const lenMatch = fnStr.match(/normalize\(s\)\.length\s*>\s*(\d+)/);
    if (lenMatch) {
        return { type: 'any_text', value: JSON.stringify({ min_length: parseInt(lenMatch[1]) + 1 }) };
    }

    // typeof s === 'string' && s.trim().length>0 ‚Äî –ª—é–±–æ–π –Ω–µ–ø—É—Å—Ç–æ–π
    if (fnStr.includes('s.trim().length>0') || fnStr.includes('s.trim().length > 0')) {
        return { type: 'any', value: '' };
    }

    // Math.abs(parseFloat(...) - X) < Y ‚Äî –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ
    const approxMatch = fnStr.match(/Math\.abs\(parseFloat.*?-\s*([\d.]+)\)\s*<\s*([\d.]+)/);
    if (approxMatch) {
        return { type: 'approx', value: JSON.stringify({ target: parseFloat(approxMatch[1]), tolerance: parseFloat(approxMatch[2]) }) };
    }

    // !Number.isNaN(parseInt(s,10)) ‚Äî –ª—é–±–æ–µ —á–∏—Å–ª–æ
    if (fnStr.includes('!Number.isNaN(parseInt')) {
        return { type: 'any_number', value: '' };
    }

    // –°–ª–æ–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ (minsk dragon step 6, 7)
    const multiExact = [];
    const allExacts = fnStr.matchAll(/n\s*===\s*'([^']+)'/g);
    for (const m of allExacts) {
        multiExact.push(m[1]);
    }
    if (multiExact.length > 0) {
        return { type: 'exact_any', value: JSON.stringify(multiExact) };
    }

    // Fallback: —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç—Ä–æ–∫—É —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä—É—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
    console.warn('‚ö†Ô∏è  –ù–µ —É–¥–∞–ª–æ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å answer:', fnStr.substring(0, 100));
    return { type: 'function', value: fnStr };
}

function serializeStep(step, imageBaseUrl = '') {
    const answer = serializeAnswer(step.answer);
    return {
        id: step.id,
        title: step.title,
        location: step.location,
        story: step.story,
        task: step.task,
        hint: step.hint || null,
        answer_type: answer.type,
        answer_value: answer.value,
        lat: step.lat,
        lng: step.lng,
        maps_url: step.mapsUrl || '',
        image_url: null, // –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
        input_type: step.inputType || 'text',
    };
}

// ===================== –ö–í–ï–°–¢–´ =====================

const QUESTS = [
    {
        quest_id: 'krakow-dragon',
        title: '–¢–∞–π–Ω–∞ –ö—Ä–∞–∫–æ–≤—Å–∫–æ–≥–æ –¥—Ä–∞–∫–æ–Ω–∞',
        city: { name: 'Krak√≥w', lat: 50.0614, lng: 19.9366 },
        meta: {
            lat: 50.0617,
            lng: 19.9371,
            duration_min: 120,
            difficulty: 'easy',
            tags: ['legend', 'citywalk', 'history'],
            pet_friendly: true,
        },
        storage_key: 'quest_krakow_dragon_v1',
        intro: {
            id: 'intro',
            title: '–ö–∞–∫ –ø—Ä–æ–π—Ç–∏ –∫–≤–µ—Å—Ç?',
            location: '–ù–∞—á–∞–ª–æ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è',
            story: `–≠—Ç–æ—Ç –∫–≤–µ—Å—Ç ‚Äî –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –ø–æ –ö—Ä–∞–∫–æ–≤—É, –≥–¥–µ –æ–∂–∏–≤–∞–µ—Ç –ª–µ–≥–µ–Ω–¥–∞ –æ –í–∞–≤–µ–ª—å—Å–∫–æ–º –¥—Ä–∞–∫–æ–Ω–µ.\n\n–ß—Ç–æ –¥–µ–ª–∞—Ç—å:\n1) –ü—Ä–æ—á–∏—Ç–∞–π –ª–µ–≥–µ–Ω–¥—É –∏ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–æ—á–∫–∏.\n2) –ù–∞–π–¥–∏ –º–µ—Å—Ç–æ –Ω–∞ –∫–∞—Ä—Ç–µ.\n3) –û—Å–º–æ—Ç—Ä–∏—Å—å –∏ –≤—ã–ø–æ–ª–Ω–∏ –∑–∞–¥–∞–Ω–∏–µ.\n4) –í–≤–µ–¥–∏ –æ—Ç–≤–µ—Ç ‚Äî –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥.\n\n–ü–æ–¥—Å–∫–∞–∑–∫–∏: –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –Ω–æ –Ω–µ –≤—ã–¥–∞—é—Ç –æ—Ç–≤–µ—Ç.\n\n–§–∏–Ω–∞–ª: –ø–æ—Å–ª–µ –≤—Å–µ—Ö –∏—Å–ø—ã—Ç–∞–Ω–∏–π ‚Äî –≤—Å—Ç—Ä–µ—á–∞ —Å –¥—Ä–∞–∫–æ–Ω–æ–º!`,
            task: '–ù–∞–∂–º–∏ ¬´–ù–∞—á–∞—Ç—å –∫–≤–µ—Å—Ç¬ª, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤ –ø—É—Ç—å.',
            hint: null,
            answer: () => true,
            lat: 0, lng: 0, mapsUrl: '',
        },
        steps: [
            {
                id: '1-rynek', title: '–†—ã–Ω–æ—á–Ω–∞—è –ø–ª–æ—â–∞–¥—å ‚Äî –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –ª–µ–≥–µ–Ω–¥—ã', location: 'Rynek G≈Ç√≥wny',
                story: '–°–µ—Ä–¥—Ü–µ –ö—Ä–∞–∫–æ–≤–∞ –±—å—ë—Ç—Å—è –∑–¥–µ—Å—å. –£ –ø–æ–¥–Ω–æ–∂–∏—è ¬´Eros Bendato¬ª —à–µ–ø—á—É—Ç –æ —á—É–¥–æ–≤–∏—â–µ, —á—Ç–æ –∂–∏–ª –ø–æ–¥ –í–∞–≤–µ–ª–µ–º. –ï—Å–ª–∏ –∑–∞–º–µ—Ç–∏–ª –≥–æ–ª–æ–≤—É ‚Äî —Å–º–æ—Ç—Ä–∏ –Ω–∞ –µ—ë —Å—Ç–æ—Ä–æ–Ω—É: —Ç–∞–º –ø–µ—Ä–≤—ã–π —Å–ª–µ–¥. –≠—Ö–æ –º–µ–ª–æ–¥–∏–∏ —Ç—Ä—É–±–∞—á–∞ –Ω–∞–ø—Ä–∞–≤–∏—Ç –¥–∞–ª—å—à–µ ‚Äî –∫ –ú–∞—Ä–∏–∞—Ü–∫–æ–º—É –∫–æ—Å—Ç—ë–ª—É.',
                task: '–ü–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ –°—É–∫–æ–Ω–Ω—ã–µ —Ä—è–¥—ã –Ω–∞–ø—Ä–æ—Ç–∏–≤ ¬´Eros Bendato¬ª. –°—á–∏—Ç–∞–π –æ–∫–Ω–∞ –Ω–∞–¥ –∞—Ä–∫–∞–¥–∞–º–∏ —Ç–æ–ª—å–∫–æ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã, –≥–¥–µ —Å—Ç–æ–∏—Ç –≥–æ–ª–æ–≤–∞. –°–∫–æ–ª—å–∫–æ –∏—Ö?',
                hint: '–°–º–æ—Ç—Ä–∏ –Ω–∞ ¬´—Å–≤–æ—é¬ª –ø–æ–ª–æ–≤–∏–Ω—É —Ä—è–¥–æ–≤ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –≥–æ–ª–æ–≤—ã. –û–∫–Ω–∞ –∏–¥—É—Ç –ø–æ–¥—Ä—è–¥, –≤—ã—Å–æ–∫–æ.',
                answer: s => { const n = parseInt(s,10); return !Number.isNaN(n) && n >= 21 && n <= 23; },
                lat: 50.061697, lng: 19.937117, mapsUrl: 'https://maps.google.com/?q=Rynek%20G%C5%82%C3%B3wny%20Krak%C3%B3w',
            },
            {
                id: '2-mariacki', title: '–ú–∞—Ä–∏–∞—Ü–∫–∏–π –∫–æ—Å—Ç—ë–ª ‚Äî –æ–±–æ—Ä–≤–∞–Ω–Ω–∞—è –º–µ–ª–æ–¥–∏—è', location: 'Bazylika Mariacka',
                story: '–¢—Ä—É–±–∞—á –∫–∞–∂–¥—ã–π —á–∞—Å –ø–æ–¥–Ω–∏–º–∞–ª —Ç—Ä–µ–≤–æ–≥—É, –Ω–æ —Å—Ç—Ä–µ–ª–∞ –ø—Ä–µ—Ä–≤–∞–ª–∞ –µ–≥–æ –ø–µ—Å–Ω—å. –° —Ç–µ—Ö –ø–æ—Ä –º–µ–ª–æ–¥–∏—è –≤—Å–µ–≥–¥–∞ –æ–±—Ä—ã–≤–∞–µ—Ç—Å—è ‚Äî –∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è —Å–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞. –û—Ç–∑–≤—É–∫–∏ –ø—Ä–∏–≤–µ–¥—É—Ç —Ç–µ–±—è –∫ –ø–µ—á–∞—Ç–∏ –≥–æ—Ä–æ–¥–∞ –≤ –°—É–∫–æ–Ω–Ω—ã—Ö —Ä—è–¥–∞—Ö.',
                task: '–°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –æ–Ω —Å–ª—ã—à–µ–Ω –≤ —Ç–µ—á–µ–Ω–∏–µ —Å—É—Ç–æ–∫?',
                hint: '–ü–æ–¥—É–º–∞–π –æ —Ç–æ–º, —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ —Å–º–µ–Ω—è–µ—Ç—Å—è —á–∞—Å–æ–≤–∞—è —Å—Ç—Ä–µ–ª–∫–∞.',
                answer: s => parseInt(s,10) === 24,
                lat: 50.061721, lng: 19.939094, mapsUrl: 'https://maps.google.com/?q=St%20Mary%27s%20Basilica%20Krakow',
            },
            {
                id: '3-sukiennice', title: '–°—É–∫–æ–Ω–Ω—ã–µ —Ä—è–¥—ã ‚Äî –ø–µ—á–∞—Ç—å –≥–æ—Ä–æ–¥–∞', location: 'Sukiennice',
                story: '–ù–∞ —Ñ–∞—Å–∞–¥–∞—Ö –∏ –≤–Ω—É—Ç—Ä–∏ —Ä—è–¥–æ–≤ ‚Äî –≥–µ—Ä–±-–ø–µ—á–∞—Ç—å, —á—Ç–æ –≤–µ–∫–∞–º–∏ –æ–±–µ—Ä–µ–≥–∞–ª–∞ –≥–æ—Ä–æ–¥ –æ—Ç –±–µ–¥. –í –µ—ë –±–∞—à–Ω—è—Ö –∑–∞–∫–ª—é—á–µ–Ω–∞ —Å–∏–ª–∞. –¢—Ä–∏ —Å—Ç—Ä–∞–∂–∞ —É–∫–∞–∂—É—Ç –ø—É—Ç—å –∫ —Å–µ–≤–µ—Ä–Ω–æ–π –≥—Ä–∞–Ω–∏—Ü–µ ‚Äî –∫ –§–ª–æ—Ä–∏–∞–Ω—Å–∫–∏–º –≤–æ—Ä–æ—Ç–∞–º.',
                task: '–°–∫–æ–ª—å–∫–æ –±–∞—à–µ–Ω –Ω–∞ –≥–µ—Ä–±–µ –≥–æ—Ä–æ–¥–∞? –í–≤–µ–¥–∏ —á–∏—Å–ª–æ.',
                hint: '–ì–µ—Ä–± –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –Ω–µ —Ç–æ–ª—å–∫–æ —Å–Ω–∞—Ä—É–∂–∏ ‚Äî –ø—Ä–æ–π–¥–∏—Å—å –≤–Ω—É—Ç—Ä–∏ –≤–¥–æ–ª—å —Ä—è–¥–æ–≤ –∏ –ø—Ä–∏—Å–º–æ—Ç—Ä–∏—Å—å –∫ —ç–º–±–ª–µ–º–∞–º.',
                answer: s => parseInt(s,10) === 3,
                lat: 50.061667, lng: 19.937373, mapsUrl: 'https://maps.google.com/?q=Sukiennice%20Krakow',
            },
            {
                id: '4-barbakan', title: '–§–ª–æ—Ä–∏–∞–Ω—Å–∫–∏–µ –≤–æ—Ä–æ—Ç–∞ ‚Äî —Å—Ç—Ä–∞–∂ –Ω–∞ —Ä—É–±–µ–∂–µ', location: '–§–ª–æ—Ä–∏–∞–Ω—Å–∫–∏–µ –≤–æ—Ä–æ—Ç–∞',
                story: '–°–µ–≤–µ—Ä–Ω—ã–π –≤—Ö–æ–¥ –≥–æ—Ä–æ–¥–∞ –æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ç–∏—Ü–∞ —Å–∏–ª—ã. –ï—ë –±–∞—Ä–µ–ª—å–µ—Ñ —Å–º–æ—Ç—Ä–∏—Ç –≤ —Å—Ç–æ—Ä–æ–Ω—É –ë–∞—Ä–±–∞–∫–∞ ‚Äî –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ª–∏–Ω–∏—è—Ö –æ–±–æ—Ä–æ–Ω—ã. –ù–∞–π–¥—ë—à—å –µ—ë ‚Äî —Å–≤–µ—Ç –≤ –ö–∞–∑–∏–º–µ–∂e –ø–æ–¥—Å–∫–∞–∂–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —Å–ª–µ–¥.',
                task: '–ù–∞–π–¥–∏ –±–∞—Ä–µ–ª—å–µ—Ñ –Ω–∞–¥ –ø–æ—Ä—Ç–∞–ª–æ–º –§–ª–æ—Ä–∏–∞–Ω—Å–∫–∏—Ö –≤–æ—Ä–æ—Ç. –ö–∞–∫–∞—è –ø—Ç–∏—Ü–∞ –æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Ö–æ–¥ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –ë–∞—Ä–±–∞–∫–∞?',
                hint: '–ö—Ä—ã–ª—å—è —Ä–∞—Å–∫–∏–Ω—É—Ç—ã, –≤–∑–≥–ª—è–¥ —Å—Ç—Ä–æ–≥–∏–π ‚Äî —Å–∏–º–≤–æ–ª –≤–ª–∞—Å—Ç–∏ –∏ –∑–∞—â–∏—Ç—ã.',
                answer: s => s.toLowerCase().replace(/\s+/g,' ').replace(/[.,;:!?'‚Äû""‚Äì‚Äî-]/g,'').replace('—ë','–µ').trim() === '–æ—Ä–µ–ª',
                lat: 50.06551229826169, lng: 19.941680331885227, mapsUrl: 'https://maps.google.com/?q=Florian%20Gate%20Krakow',
            },
            {
                id: '5-kazimierz', title: '–ö–∞–∑–∏–º–µ–∂ ‚Äî –ø–µ—Ä–µ–∫—Ä—ë—Å—Ç–æ–∫ –≥–æ–ª–æ—Å–æ–≤', location: '–°—Ç–∞—Ä–∞—è —Å–∏–Ω–∞–≥–æ–≥–∞',
                story: '–í —ç—Ç–∏—Ö –∫–≤–∞—Ä—Ç–∞–ª–∞—Ö –ª–µ–≥–µ–Ω–¥—É —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–ª–∏ –ø–æ-—Ä–∞–∑–Ω–æ–º—É, –∏ –ø—Ä–∞–≤–¥—É –æ –¥—Ä–∞–∫–æ–Ω–µ –æ—Ç—Ä–∞–∂–∞–ª–∏ –Ω–æ—á–Ω—ã–µ –æ–≥–Ω–∏ –Ω–∞ —Ñ–∞—Å–∞–¥–∞—Ö. –°–≤–µ—Ç —É–∫–∞–∂–µ—Ç –ø—É—Ç—å –∫ –º–æ—Å—Ç—É –º–µ–∂–¥—É –Ω–µ–±–æ–º –∏ –∑–µ–º–ª—ë–π.',
                task: '–°–∫–æ–ª—å–∫–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å–≤–µ—Ç–∞ –æ—Å–≤–µ—â–∞—é—Ç —ç—Ç–æ—Ç —Ñ–∞—Å–∞–¥ –Ω–æ—á—å—é?',
                hint: '–°—á–∏—Ç–∞–π –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ —Å–≤–µ—Ç–∞, –∞ –Ω–µ –±–ª–∏–∫–∏.',
                answer: s => { const n = parseInt(s,10); return !Number.isNaN(n) && n >= 2 && n <= 4; },
                lat: 50.05152733785882, lng: 19.94864899181073, mapsUrl: 'https://maps.google.com/?q=Old%20Synagogue%20Krakow',
            },
            {
                id: '6-wawel', title: '–ú–æ—Å—Ç –º–µ–∂–¥—É –Ω–µ–±–æ–º –∏ –∑–µ–º–ª—ë–π', location: '–ú–æ—Å—Ç (—Å–º. –∫–∞—Ä—Ç—É)',
                story: '–ì–æ–≤–æ—Ä—è—Ç, —ç—Ç–æ—Ç –º–æ—Å—Ç —Å–æ–µ–¥–∏–Ω—è–µ—Ç –∑–µ–º–Ω–æ–µ –∏ –Ω–µ–±–µ—Å–Ω–æ–µ. –î–∞–∂–µ –∑–¥–µ—Å—å —á—É–≤—Å—Ç–≤—É–µ—Ç—Å—è –¥—ã—Ö–∞–Ω–∏–µ –ª–µ–≥–µ–Ω–¥—ã ‚Äî —Å–º–æ—Ç—Ä–∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–µ: –¥—Ä–∞–∫–æ–Ω—å–∏ –º–æ—Ç–∏–≤—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –ø—É—Ç—å –∫ –ª–æ–≥–æ–≤—É.',
                task: '–°–∫–æ–ª—å–∫–æ –¥—Ä–∞–∫–æ–Ω–æ–≤ –æ—Ö—Ä–∞–Ω—è—é—Ç –º–æ—Å—Ç?',
                hint: '–û—Å–º–æ—Ç—Ä–∏—Å—å –ø–æ —Ç–æ—Ä—Ü–∞–º –∏ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–∞–º',
                answer: s => parseInt(s,10) === 1,
                lat: 50.046563, lng: 19.947499, mapsUrl: 'https://maps.google.com/?q=50.046563,19.947499',
            },
            {
                id: '7-smocza-jama', title: 'Smocza Jama ‚Äî –ª–æ–≥–æ–≤–æ —á—É–¥–æ–≤–∏—â–∞', location: '–ü–µ—â–µ—Ä–∞ –¥—Ä–∞–∫–æ–Ω–∞',
                story: '–í–æ—Ç –æ–Ω–∞ ‚Äî Smocza Jama. –î–≤–∏–≥–∞–π—Å—è –∏–º–µ–Ω–Ω–æ –∫ –≤—Ö–æ–¥—É –≤ –ø–µ—â–µ—Ä—É: –∫–æ—Ä–æ—Ç–∫–∞—è –∫–∞–º–µ–Ω–Ω–∞—è –ª–µ—Å—Ç–Ω–∏—Ü–∞ –≤–µ–¥—ë—Ç –ø—Ä—è–º–æ –∫ –ø–æ—Ä–æ–≥—É.',
                task: '–î–æ–π–¥–∏ –¥–æ –≤—Ö–æ–¥–∞ –≤ –ø–µ—â–µ—Ä—É –∏ –ø–æ—Å—á–∏—Ç–∞–π —Å—Ç—É–ø–µ–Ω–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–µ–¥—É—Ç –¥–æ –ø–æ—Ä–æ–≥–∞. –°–∫–æ–ª—å–∫–æ —Å—Ç—É–ø–µ–Ω–µ–π –¥–æ –ø–µ—â–µ—Ä—ã?',
                hint: '–°—á–∏—Ç–∞–π —Ç–æ–ª—å–∫–æ –¥–æ –≤—Ö–æ–¥–∞ (–≤–Ω—É—Ç—Ä–∏ –Ω–µ –Ω—É–∂–Ω–æ). –û—Ç–≤–µ—Ç ‚Äî –¥–≤—É–∑–Ω–∞—á–Ω–æ–µ —á–∏—Å–ª–æ.',
                answer: s => parseInt(s,10) === 12,
                lat: 50.05317524594176, lng: 19.93359915663944, mapsUrl: 'https://maps.google.com/?q=Smocza%20Jama%20Krakow',
            },
        ],
        finale: {
            text: '–¢—ã –ø—Ä–æ—à—ë–ª –ø—É—Ç—å –ª–µ–≥–µ–Ω–¥—ã! –ü–æ–¥ —Ö–æ–ª–º–æ–º —Å–ø–∞–ª –¥—Ä–∞–∫–æ–Ω, –Ω–æ –µ–≥–æ –¥—É—Ö –Ω–µ –∏—Å—á–µ–∑. –û–Ω –∂–∏–≤—ë—Ç –≤ –∫–∞–∂–¥–æ–º –∫–∞–º–Ω–µ, –≤ —à—É–º–µ –í–∏—Å–ª—ã –∏ –≤ —Å–µ—Ä–¥—Ü–µ –ö—Ä–∞–∫–æ–≤–∞. –ü–æ–∫–∞ –∑–≤—É—á–∏—Ç –∏—Å—Ç–æ—Ä–∏—è ‚Äî –¥—Ä–∞–∫–æ–Ω –ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è –≤–Ω–æ–≤—å, –Ω–∞–ø–æ–º–∏–Ω–∞—è: —Å–∏–ª–∞ –≥–æ—Ä–æ–¥–∞ ‚Äî –≤ –µ–¥–∏–Ω—Å—Ç–≤–µ –µ–≥–æ –ª—é–¥–µ–π –∏ –≤ –∏—Ö –ø–∞–º—è—Ç–∏.',
        },
    },
    {
        quest_id: 'pakocim-voices',
        title: '–ì–æ–ª–æ—Å–∞ –ü—Ä–æ–∫–æ—Ü–∏–Ω–∞',
        city: { name: 'Krak√≥w ‚Äì Prokocim', lat: 50.0185, lng: 19.9941 },
        meta: {
            lat: 50.0185,
            lng: 19.9941,
            duration_min: 90,
            difficulty: 'easy',
            tags: ['park', 'history', 'nature', 'family'],
            pet_friendly: true,
        },
        storage_key: 'quest_pakocim_v1',
        intro: {
            id: 'intro', title: '–ì–æ–ª–æ—Å–∞ –ü—Ä–æ–∫–æ—Ü–∏–Ω–∞', location: '–ù–∞—á–∞–ª–æ –ø—É—Ç–∏',
            story: '–¢—ã –¥–µ—Ä–∂–∏—à—å –≤ —Ä—É–∫–∞—Ö –Ω–µ–≤–∏–¥–∏–º—É—é –∫–Ω–∏–≥—É –ü—Ä–æ–∫–æ—Ü–∏–Ω–∞. –ö–∞–∂–¥–∞—è –µ—ë —Å—Ç—Ä–∞–Ω–∏—Ü–∞ ‚Äî —ç—Ç–æ –º–µ—Å—Ç–æ: –≥–µ—Ä–±, –¥–≤–æ—Ä–µ—Ü, –ø—Ä—É–¥, –¥–µ—Ä–µ–≤–æ, –º–∞–ª–µ–Ω—å–∫–∏–π —Å–æ—Å–µ–¥, —Å—Ç–∞—Ä—ã–µ —É–∫—Ä–µ–ø–ª–µ–Ω–∏—è –∏ —Ç—Ä–æ–ø–∏–Ω–∫–∞ –≤ –±—É–¥—É—â–µ–µ. –ú—ã –±—É–¥–µ–º –∏–¥—Ç–∏ –∏ —Å–ª—É—à–∞—Ç—å –∏—Ö –≥–æ–ª–æ—Å–∞. –í–æ–ø—Ä–æ—Å—ã –ø—Ä–æ—Å—Ç—ã–µ, –Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –Ω–∏—Ö –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –∑–¥–µ—Å—å ‚Äî —É–≤–∏–¥–µ–≤ –∏ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–≤.',
            task: '–ù–∞–∂–º–∏ ¬´–ù–∞—á–∞—Ç—å –∫–≤–µ—Å—Ç¬ª –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Å—è –≤ –ø—Ä–æ–≥—É–ª–∫—É.',
            hint: null,
            answer: () => true,
            lat: 0, lng: 0, mapsUrl: '',
        },
        steps: [
            { id: '1-herb', title: '–£ –≤–æ—Ä–æ—Ç', location: '–ö–æ—Å—Ç—ë–ª —Å–≤. –ù–∏–∫–æ–ª–∞—è –∏–∑ –¢–æ–ª–µ–Ω—Ç–∏–Ω–æ', story: '–°–µ–≥–æ–¥–Ω—è –∑–¥–µ—Å—å —Å—Ç–æ–∏—Ç –∫–æ—Å—Ç—ë–ª —Å–≤—è—Ç–æ–≥–æ –ù–∏–∫–æ–ª–∞—è –∏–∑ –¢–æ–ª–µ–Ω—Ç–∏–Ω–æ. –ù–æ —Ä–∞–Ω—å—à–µ –Ω–∞ —ç—Ç–æ–º –º–µ—Å—Ç–µ –Ω–∞—Ö–æ–¥–∏–ª–∞—Å—å —É—Å–∞–¥—å–±–∞ —Ä–æ–¥–∞ –ï—Ä–∂–º–∞–Ω–æ–≤—Å–∫–∏—Ö. –ò—Ö –ø–∞–º—è—Ç—å —Ö—Ä–∞–Ω–∏—Ç –∫–∞–º–µ–Ω–Ω—ã–π –≥–µ—Ä–± Do≈Çƒôga. –ü–æ –ø—Ä–µ–¥–∞–Ω–∏—é, –µ–≥–æ –∏—Å—Ç–æ—Ä–∏—è —É—Ö–æ–¥–∏—Ç –≤ XIV –≤–µ–∫. –í –±–∏—Ç–≤–µ –æ–¥–∏–Ω –∏–∑ —Ä—ã—Ü–∞—Ä–µ–π –ø—É—Å—Ç–∏–ª —Å—Ç—Ä–µ–ª—É —Ç–∞–∫ –º–µ—Ç–∫–æ, —á—Ç–æ –æ–Ω–∞ –ø—Ä–æ–±–∏–ª–∞ –ø–æ–¥–∫–æ–≤—É –≤—Ä–∞–≥–∞. –≠—Ç–æ —Å–æ—á–ª–∏ —á—É–¥–æ–º –∏ –∑–Ω–∞–∫–æ–º –Ω–µ–±–µ—Å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏. –° —Ç–µ—Ö –ø–æ—Ä –ø–æ–¥–∫–æ–≤–∞ —Å—Ç–∞–ª–∞ —Å–∏–º–≤–æ–ª–æ–º –∑–∞—â–∏—Ç—ã –∏ —É–¥–∞—á–∏, –∞ –∑–Ω–∞–∫, –ø—Ä–æ—Ö–æ–¥—è—â–∏–π —Å–∫–≤–æ–∑—å –Ω–µ—ë, ‚Äî –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –æ –≤–æ–∏–Ω—Å–∫–æ–π –¥–æ–±–ª–µ—Å—Ç–∏. –ü–æ—Å–º–æ—Ç—Ä–∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –Ω–∞ –≥–µ—Ä–± —É –∫–æ—Å—Ç—ë–ª–∞ ‚Äî –≤ —Ü–µ–Ω—Ç—Ä–µ —Ç—ã —É–≤–∏–¥–∏—à—å —ç—Ç–æ—Ç –¥—Ä–µ–≤–Ω–∏–π —Å–∏–º–≤–æ–ª.', task: '–ß—Ç–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç —Å–∫–≤–æ–∑—å –ø–æ–¥–∫–æ–≤—É –Ω–∞ –≥–µ—Ä–±–µ –ï—Ä–∂–º–∞–Ω–æ–≤—Å–∫–∏—Ö?', hint: '–≠—Ç–æ –æ—Ä—É–∂–∏–µ, –ª—ë–≥–∫–æ–µ –∏ –±—ã—Å—Ç—Ä–æ–µ, –Ω–æ —Å–º–µ—Ä—Ç–µ–ª—å–Ω–æ —Ç–æ—á–Ω–æ–µ.', answer: s => ['—Å—Ç—Ä–µ–ª–∞','strzala','arrow'].includes(s), lat: 50.018536, lng: 19.994134, mapsUrl: 'https://maps.google.com/?q=50.018536,19.994134' },
            { id: '2-palace', title: '–°–µ—Ä–¥—Ü–µ —É—Å–∞–¥—å–±—ã', location: '–î–≤–æ—Ä–µ—Ü', story: '–ü–µ—Ä–µ–¥ —Ç–æ–±–æ–π –¥–≤–æ—Ä–µ—Ü, –ø–µ—Ä–µ–∂–∏–≤—à–∏–π —Å–º–µ–Ω—É —ç–ø–æ—Ö. –ö–æ–≥–¥–∞-—Ç–æ –∑–¥–µ—Å—å –ø—Ä–∏–Ω–∏–º–∞–ª–∏ –∫–Ω—è–∑—è –Æ–∑–µ—Ñ–∞ –ü–æ–Ω—è—Ç–æ–≤—Å–∫–æ–≥–æ, –ø–æ–∑–∂–µ –≠—Ä–∞–∑–º –ï—Ä–∂–º–∞–Ω–æ–≤—Å–∫–∏–π –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª –µ–≥–æ –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é —Ä–µ–∑–∏–¥–µ–Ω—Ü–∏—é —Å –æ—Ä–∞–Ω–∂–µ—Ä–µ—è–º–∏ –∏ —Ä–µ–¥–∫–∏–º–∏ —Ä–∞—Å—Ç–µ–Ω–∏—è–º–∏. –ù–æ –ø–µ—Ä–≤—ã–º —Ö–æ–∑—è–∏–Ω–æ–º –±—ã–ª —á–µ–ª–æ–≤–µ–∫, —á—å—ë –∏–º—è —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å –Ω–∞ —Ç–∞–±–ª–∏—á–∫–µ.', task: '–ù–∞–∑–æ–≤–∏ –∏–º—è –ø–µ—Ä–≤–æ–≥–æ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –¥–≤–æ—Ä—Ü–∞.', hint: '–ï–≥–æ –∑–≤–∞–ª–∏ Micha≈Ç ‚Ä¶', answer: s => s === 'michal wodzicki', lat: 50.019348, lng: 19.995399, mapsUrl: 'https://maps.google.com/?q=50.019348,19.995399' },
            { id: '3-pond', title: '–ñ–∏–≤–∞—è –≤–æ–¥–∞', location: '–ü—Ä—É–¥', story: '–í XIX –≤–µ–∫–µ —É—Å–∞–¥–µ–±–Ω—ã–µ –ø—Ä—É–¥—ã –±—ã–ª–∏ –º–µ—Å—Ç–æ–º –ø—Ä–æ–≥—É–ª–æ–∫ –∏ –≤—Å—Ç—Ä–µ—á. –°–µ–≥–æ–¥–Ω—è –∑–¥–µ—Å—å –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –ø–ª–∞–≤–∞—é—Ç –ø—Ç–∏—Ü—ã, —Å–ª–æ–≤–Ω–æ –Ω–∞–ø–æ–º–∏–Ω–∞—è: –∂–∏–∑–Ω—å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Å–º–µ–Ω—É —Ö–æ–∑—è–µ–≤. –û–≥–ª—è–Ω–∏—Å—å –≤–æ–∫—Ä—É–≥ –∏ –ø–æ—Å—á–∏—Ç–∞–π –ø–µ—Ä–Ω–∞—Ç—ã—Ö –Ω–∞ –≤–æ–¥–µ.', task: '–°–∫–æ–ª—å–∫–æ —É—Ç–æ–∫ —Ç—ã –≤–∏–¥–∏—à—å –≤ –ø—Ä—É–¥—É?', hint: '–û—Ç–≤–µ—Ç –º–µ–Ω—è–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–Ω—è.', answer: s => !Number.isNaN(parseInt(s,10)), lat: 50.020948, lng: 20.004057, mapsUrl: 'https://maps.google.com/?q=50.020948,20.004057' },
            { id: '4-oak', title: '–°—Ç—Ä–∞–∂ –≤—Ä–µ–º–µ–Ω–∏', location: '–°—Ç–∞—Ä–æ–µ –¥–µ—Ä–µ–≤–æ', story: '–í –∞–ª–ª–µ–µ –≤–æ–∑–≤—ã—à–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª–∏–Ω. –ï–≥–æ —Å—Ç–≤–æ–ª –∏—Å–ø–µ—â—Ä—ë–Ω –≥–ª—É–±–æ–∫–∏–º–∏ —Ç—Ä–µ—â–∏–Ω–∞–º–∏, –∞ –∫—Ä–æ–Ω–∞ —Ä–∞—Å–∫–∏–Ω—É–ª–∞—Å—å, –∫–∞–∫ –∑–µ–ª—ë–Ω—ã–π —à–∞—Ç—ë—Ä. –≠—Ç–æ—Ç –≤–µ–ª–∏–∫–∞–Ω –ø–µ—Ä–µ–∂–∏–ª –±–æ–ª—å—à–µ, —á–µ–º –ª—é–±–æ–π —á–µ–ª–æ–≤–µ–∫ –≤ –æ–∫—Ä—É–≥–µ, –∏ —Ö—Ä–∞–Ω–∏—Ç –ø–∞–º—è—Ç—å –ø–∞—Ä–∫–∞.', task: '–ö–∞–∫–æ–µ –¥–µ—Ä–µ–≤–æ —Å—Ç–æ–∏—Ç –∑–¥–µ—Å—å?', hint: '–°–∏–º–≤–æ–ª —Å–∏–ª—ã –∏ –¥–æ–ª–≥–æ–ª–µ—Ç–∏—è –≤ —Å–ª–∞–≤—è–Ω—Å–∫–∏—Ö —Ç—Ä–∞–¥–∏—Ü–∏—è—Ö.', answer: s => s === '–¥—É–±', lat: 50.017682, lng: 20.012507, mapsUrl: 'https://maps.google.com/?q=50.017682,20.012507' },
            { id: '5-hedgehog', title: '–ú–∞–ª–µ–Ω—å–∫–∏–π —Å–æ—Å–µ–¥', location: '–ó–æ–Ω–∞ ¬´Je≈º na swoim¬ª', story: '–ü–∞—Ä–∫ –∑–∞–±–æ—Ç–∏—Ç—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ –æ –¥–µ—Ä–µ–≤—å—è—Ö, –Ω–æ –∏ –æ —Å–∞–º—ã—Ö –º–∞–ª–µ–Ω—å–∫–∏—Ö. –ó–¥–µ—Å—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —É–∫—Ä—ã—Ç–∏—è –∏ —Ç–∞–±–ª–∏—á–∫–∏ –¥–ª—è –Ω–æ—á–Ω–æ–≥–æ –∂–∏—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç —Å–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å—Å—è –≤ –∫–ª—É–±–æ–∫ –∏ –Ω–µ –±–æ–∏—Ç—Å—è –±–æ–ª—å—à–∏—Ö —Å–æ—Å–µ–¥–µ–π.', task: '–ö—Ç–æ –æ–±–∏—Ç–∞–µ—Ç –≤ —ç—Ç–æ–º –º–µ—Å—Ç–µ?', hint: '–ö–æ–ª—é—á–∏–π –≥–µ—Ä–æ–π –Ω–∞—Ä–æ–¥–Ω—ã—Ö —Å–∫–∞–∑–æ–∫.', answer: s => ['–µ–∂','—ë–∂','jez'].includes(s), lat: 50.013842, lng: 20.01445, mapsUrl: 'https://maps.google.com/?q=50.013842,20.01445' },
            { id: '6-birdhouses', title: '–•–æ—Ä –ø–∞—Ä–∫–∞', location: '–°–∫–≤–æ—Ä–µ—á–Ω–∏–∫–∏ –∏ –∫–∞—á–µ–ª–∏', story: '–í —ç—Ç–æ–º —É–≥–æ–ª–∫–µ –ø–∞—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω—è—é—Ç—Å—è –¥–≤–∞ –≥–æ–ª–æ—Å–∞ ‚Äî —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π –∏ –ø—Ç–∏—á–∏–π. –°—è–¥—å –Ω–∞ –∫–∞—á–µ–ª–∏ –∏ –¥–∞–π —Å–µ–±–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–≥–Ω–æ–≤–µ–Ω–∏–π, —á—Ç–æ–±—ã –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å, –∫–∞–∫ –≤–æ–∑–¥—É—Ö –∏–≥—Ä–∞–µ—Ç –≤ –ª–∏—Å—Ç—å—è—Ö. –ü–æ–∫–∞ —Ç—ã —Ä–∞—Å–∫–∞—á–∏–≤–∞–µ—à—å—Å—è, –ø–æ–¥–Ω–∏–º–∏ –≤–∑–≥–ª—è–¥ –Ω–∞ –¥–µ—Ä–µ–≤—å—è –≤–æ–∫—Ä—É–≥: –∑–¥–µ—Å—å –∂–∏—Ç–µ–ª–∏ —Ä–∞–π–æ–Ω–∞ —Ä–∞–∑–≤–µ—Å–∏–ª–∏ –¥–æ–º–∏–∫–∏ –¥–ª—è –ø—Ç–∏—Ü. –í–µ—Å–Ω–æ–π –∏ –ª–µ—Ç–æ–º –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö –Ω–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–æ–≤—ã–º–∏ –≥–æ–ª–æ—Å–∞–º–∏ ‚Äî —Ö–æ—Ä –ø–∞—Ä–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—Å–æ–±–µ–Ω–Ω–æ –≥—Ä–æ–º–∫–∏–º.', task: '–°–∫–æ–ª—å–∫–æ —Å–∫–≤–æ—Ä–µ—á–Ω–∏–∫–æ–≤ –≤–∏–¥–Ω–æ —Å –∫–∞—á–µ–ª–µ–π?', hint: '–°—á–∏—Ç–∞–π –æ—Ç–¥–µ–ª—å–Ω—ã–µ –¥–æ–º–∏–∫–∏ –¥–ª—è –ø—Ç–∏—Ü, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ –ø—Ä—è—á—É—Ç—Å—è –≤ –ª–∏—Å—Ç–≤–µ.', answer: s => { const n = parseInt(s,10); return !Number.isNaN(n) && n>=0 && n<=20; }, lat: 50.013073, lng: 20.014758, mapsUrl: 'https://maps.google.com/?q=50.013073,20.014758' },
            { id: '7-slona-woda', title: '–°–æ–ª—ë–Ω–∞—è –≤–æ–¥–∞', location: '–ó–∞–∫–∞–∑–Ω–∏–∫', story: '–ú–µ—Å—Ç–æ —Å –Ω–µ–æ–±—ã—á–Ω—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º ‚Äî ¬´S≈Çona Woda¬ª. –õ–µ–≥–µ–Ω–¥–∞ –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ –≤–æ–¥–∞ –∑–¥–µ—Å—å –∫–æ–≥–¥–∞-—Ç–æ –∏–º–µ–ª–∞ —Å–æ–ª—ë–Ω—ã–π –ø—Ä–∏–≤–∫—É—Å. –°–µ–≥–æ–¥–Ω—è —ç—Ç–æ –æ—Ö—Ä–∞–Ω—è–µ–º–∞—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è, –∏ –Ω–∞ —Ç–∞–±–ª–∏—á–∫–µ —É–∫–∞–∑–∞–Ω–∞ –µ—ë —Ç–æ—á–Ω–∞—è –ø–ª–æ—â–∞–¥—å.', task: '–ö–∞–∫–æ–≤–∞ –ø–ª–æ—â–∞–¥—å –∑–∞–∫–∞–∑–Ω–∏–∫–∞ –≤ –≥–µ–∫—Ç–∞—Ä–∞—Ö?', hint: '–ß–∏—Å–ª–æ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–º —â–∏—Ç–µ.', answer: s => Math.abs(parseFloat(s.replace(',','.')) - 13.53) < 0.01, lat: 50.005839, lng: 20.000021, mapsUrl: 'https://maps.google.com/?q=50.005839,20.000021' },
            { id: '8-fort', title: '–ö–∞–º–µ–Ω–Ω—ã–µ —Å—Ç–µ–Ω—ã', location: '–§–æ—Ä—Ç –ü—Ä–æ–∫–æ—Ü–∏–º', story: '–í XIX –≤–µ–∫–µ –ö—Ä–∞–∫–æ–≤ –æ–∫—Ä—É–∂–∏–ª–∏ –∞–≤—Å—Ç—Ä–∏–π—Å–∫–∏–µ —É–∫—Ä–µ–ø–ª–µ–Ω–∏—è. –≠—Ç–æ—Ç —Ñ–æ—Ä—Ç ‚Äî –æ–¥–∏–Ω –∏–∑ –Ω–∏—Ö. –ï–≥–æ —Å—Ç–µ–Ω—ã –¥–æ —Å–∏—Ö –ø–æ—Ä –Ω–æ—Å—è—Ç —Å–ª–µ–¥—ã: –Ω–æ–º–µ—Ä–∞, —Å–∏–º–≤–æ–ª—ã, –∏–Ω–æ–≥–¥–∞ –¥–∞–∂–µ –Ω–∞–¥–ø–∏—Å–∏, –æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–ª–¥–∞—Ç–∞–º–∏.', task: '–ù–∞–π–¥–∏ –∑–Ω–∞–∫ –∏–ª–∏ –Ω–∞–¥–ø–∏—Å—å –Ω–∞ —Å—Ç–µ–Ω–µ –∏ –æ–ø–∏—à–∏ –µ—ë –æ–¥–Ω–∏–º —Å–ª–æ–≤–æ–º.', hint: '–°–º–æ—Ç—Ä–∏ –≤ –∫–∞–º–Ω–µ, –Ω–∞ —Ç–∞–±–ª–∏—á–∫–∞—Ö –∏–ª–∏ –∂–µ–ª–µ–∑–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö.', answer: s => typeof s === 'string' && s.trim().length>0, lat: 50.010556, lng: 19.997223, mapsUrl: 'https://maps.google.com/?q=50.010556,19.997223' },
            { id: '9-bridge', title: '–ü–µ—Ä–µ—Ö–æ–¥', location: '–ú–æ—Å—Ç —á–µ—Ä–µ–∑ —Ä—É—á–µ–π', story: '–ú–∞–ª–µ–Ω—å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ —á–µ—Ä–µ–∑ –ø–æ—Ç–æ–∫ —Å–æ–µ–¥–∏–Ω—è–µ—Ç –¥–≤–µ —Ç—Ä–æ–ø—ã. –û–Ω —Å–¥–µ–ª–∞–Ω –∏–∑ –ø—Ä–æ—Å—Ç–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞, –∑–Ω–∞–∫–æ–º–æ–≥–æ –∫–∞–∂–¥–æ–º—É. –ü—Ä–æ–π–¥—è –ø–æ –Ω–µ–º—É, —Ç—ã —Å–ª–æ–≤–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—à—å –∏–∑ –ø—Ä–æ—à–ª–æ–≥–æ –ü—Ä–æ–∫–æ—Ü–∏–Ω–∞ –≤ –µ–≥–æ –±—É–¥—É—â–µ–µ.', task: '–ò–∑ –∫–∞–∫–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ —Å–¥–µ–ª–∞–Ω –Ω–∞—Å—Ç–∏–ª –º–æ—Å—Ç–∞?', hint: '–ü–æ—Å–º–æ—Ç—Ä–∏ –ø–æ–¥ –Ω–æ–≥–∏.', answer: s => ['–¥–µ—Ä–µ–≤–æ','–¥–µ—Ä–µ–≤—è–Ω–Ω—ã–π','drewniany'].includes(s), lat: 50.015474, lng: 19.991301, mapsUrl: 'https://maps.google.com/?q=50.015474,19.991301' },
            { id: 'bonus-cafe', title: '–°–ª–∞–¥–∫–∞—è –ø–∞—É–∑–∞', location: '–ö–∞–≤—è—Ä–Ω—è —É –ø–∞—Ä–∫–∞', story: '–ò–Ω–æ–≥–¥–∞ –∏—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ –≤ –∫–∞–º–Ω–µ –∏–ª–∏ –¥–µ—Ä–µ–≤—å—è—Ö, –∞ –∏ –≤ –ø—Ä–æ—Å—Ç—ã—Ö —Ä–∞–¥–æ—Å—Ç—è—Ö. –ù–µ –∫–∞–∂–¥–æ–µ –º–µ—Å—Ç–æ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –Ω–∞ –∫–∞—Ä—Ç–µ, –∞ —ç—Ç–æ –∑–Ω–∞—é—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –º–µ—Å—Ç–Ω—ã–µ. –ü–æ —Å—É–±–±–æ—Ç–∞–º –∏ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å—è–º —Ö–æ–∑—è–π–∫–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–≤–µ—Ä–∏ –º–∞–ª–µ–Ω—å–∫–æ–π –∫–∞–≤—è—Ä–Ω–∏. –ì–ª–∞–≤–Ω—ã–π —Ö–∏—Ç ‚Äî –ù–∞–ø–æ–ª–µ–æ–Ω, –∞ –∫ –Ω–µ–º—É –º–æ–∂–Ω–æ –≤–∑—è—Ç—å –≥–æ—Ä—è—á–∏–π –æ–±–ª–µ–ø–∏—Ö–æ–≤—ã–π —á–∞–π. –ö–∞–≤—è—Ä–Ω—è –æ—Ç–∫—Ä—ã—Ç–∞ —Ç–æ–ª—å–∫–æ –ø–æ –≤—ã—Ö–æ–¥–Ω—ã–º, –ø–æ—ç—Ç–æ–º—É –∑–∞–≥–ª—è–Ω—É—Ç—å —Å—é–¥–∞ ‚Äî –æ—Å–æ–±–∞—è —É–¥–∞—á–∞. –≠—Ç–æ –º–µ—Å—Ç–æ —Å–æ–µ–¥–∏–Ω—è–µ—Ç —É—é—Ç —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–≥–æ –¥–Ω—è –∏ —Ç–µ–ø–ª–æ –≥–æ—Å—Ç–µ–ø—Ä–∏–∏–º—Å—Ç–≤–∞.', task: '–ù–∏–∫–∞–∫–∏—Ö –∑–∞–≥–∞–¥–æ–∫ ‚Äî –ø—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞–π –ø–∞—É–∑—É –∏ –Ω–∞—Å–ª–∞–¥–∏—Å—å –º–æ–º–µ–Ω—Ç–æ–º.', hint: null, answer: () => true, lat: 50.018982, lng: 19.994333, mapsUrl: 'https://maps.google.com/?q=50.018982,19.994333' },
        ],
        finale: {
            text: '–¢—ã —Å–æ–±—Ä–∞–ª –≤—Å–µ –≥–æ–ª–æ—Å–∞ –ü—Ä–æ–∫–æ—Ü–∏–º–∞ –≤ –µ–¥–∏–Ω—É—é —Å–∏–º—Ñ–æ–Ω–∏—é! –û—Ç –¥—Ä–µ–≤–Ω–µ–≥–æ –≥–µ—Ä–±–∞ —Å–æ —Å—Ç—Ä–µ–ª–æ–π, –ø—Ä–æ–Ω–∑–∏–≤—à–µ–π –≤—Ä–µ–º—è, –¥–æ –∫–∞–º–µ–Ω–Ω—ã—Ö —Å—Ç–µ–Ω —Ñ–æ—Ä—Ç–∞, —Ö—Ä–∞–Ω—è—â–µ–≥–æ —à–µ–ø–æ—Ç —Å–æ–ª–¥–∞—Ç... –û—Ç –≤–µ–∫–æ–≤–æ–≥–æ –¥—É–±–∞-–∏—Å–ø–æ–ª–∏–Ω–∞ –¥–æ –º–∞–ª–µ–Ω—å–∫–æ–≥–æ –µ–∂–∞, —á—Ç–æ —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ –∫–ª—É–±–æ–∫ –ø–æ–¥ –∑–∞—â–∏—Ç–æ–π –ø–∞—Ä–∫–∞... –¢—ã —É—Å–ª—ã—à–∞–ª –∫–∞–∫ –ø—Ä–æ—à–ª–æ–µ –ø–µ—Ä–µ–ø–ª–µ—Ç–∞–µ—Ç—Å—è —Å –Ω–∞—Å—Ç–æ—è—â–∏–º –≤ –∫–∞–∂–¥–æ–º —É–≥–æ–ª–∫–µ —ç—Ç–æ–≥–æ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ–≥–æ –º–µ—Å—Ç–∞.\n\n–ù–æ —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ ‚Äî —Ç–µ–ø–µ—Ä—å —Ç—ã —Å—Ç–∞–ª —á–∞—Å—Ç—å—é —ç—Ç–æ–π –∏—Å—Ç–æ—Ä–∏–∏. –¢–≤–æ–∏ —à–∞–≥–∏ –ø–æ –º–æ—Å—Ç—É —á–µ—Ä–µ–∑ —Ä—É—á–µ–π ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Ö–æ–¥, –∞ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∏–π –∂–µ—Å—Ç: —Ç—ã –ø—Ä–∏–Ω—è–ª —ç—Å—Ç–∞—Ñ–µ—Ç—É –æ—Ç —Ç–µ—Ö, –∫—Ç–æ —Ö–æ–¥–∏–ª —ç—Ç–∏–º–∏ —Ç—Ä–æ–ø–∞–º–∏ –¥–æ —Ç–µ–±—è.\n\n–ü—Ä–æ–∫–æ—Ü–∏–º –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∂–∏—Ç—å –∏ –º–µ–Ω—è—Ç—å—Å—è, –∏ —Ç–µ–ø–µ—Ä—å —Ç—ã ‚Äî –æ–¥–∏–Ω –∏–∑ –µ–≥–æ –≥–æ–ª–æ—Å–æ–≤. –†–∞—Å—Å–∫–∞–∂–∏ —ç—Ç—É –∏—Å—Ç–æ—Ä–∏—é –¥—Ä—É–≥–∏–º, –≤–µ—Ä–Ω–∏—Å—å —Å—é–¥–∞ –≤ –Ω–æ–≤–æ–º —Å–µ–∑–æ–Ω–µ, –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏ –≤ –ø–∞–º—è—Ç–∏ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ–µ –æ—â—É—â–µ–Ω–∏–µ —Å–≤—è–∑–∏ –≤—Ä–µ–º–µ–Ω, –∫–æ—Ç–æ—Ä–æ–µ –¥–∞—Ä–∏—Ç —ç—Ç–æ –º–µ—Å—Ç–æ.\n\n–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –ø—Ä–æ—à–µ–ª —ç—Ç–æ—Ç –ø—É—Ç—å –¥–æ –∫–æ–Ω—Ü–∞!',
        },
    },
    {
        quest_id: 'barkovshchina-spirits',
        title: '–•—Ä–∞–Ω–∏—Ç–µ–ª—å —Ç–∞–π–Ω –ë–∞—Ä–∫–æ–≤—â–∏–Ω—ã',
        city: { name: '–¢–∞–π–Ω—ã –ë–∞—Ä–∫–æ–≤—â–∏–Ω—Å–∫–æ–≥–æ –ª–µ—Å–∞', lat: 55.101231, lng: 28.603838 },
        meta: {
            lat: 55.101231,
            lng: 28.603838,
            duration_min: 60,
            difficulty: 'easy',
            tags: ['nature', 'forest', 'lake', 'legend'],
            pet_friendly: true,
        },
        storage_key: 'quest_barkov_forest_secrets_v1',
        intro: {
            id: 'intro', title: '–ù–∞—á–∞–ª–æ –ª–µ—Å–Ω–æ–≥–æ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è', location: '–í—Ö–æ–¥ –≤ –∑–∞–ø–æ–≤–µ–¥–Ω—ã–π –ª–µ—Å',
            story: '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ª–µ—Å –ë–∞—Ä–∫–æ–≤—â–∏–Ω—ã! –ì–æ–≤–æ—Ä—è—Ç, –≤ —ç—Ç–∏—Ö –º–µ—Å—Ç–∞—Ö –æ–±–∏—Ç–∞—é—Ç –¥—Ä–µ–≤–Ω–∏–µ –¥—É—Ö–∏ –ø—Ä–∏—Ä–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ—Å—Ç–∞–≤–∏–ª–∏ —Å–≤–æ–∏ —Å–ª–µ–¥—ã –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —É–º–µ–µ—Ç –≤–∏–¥–µ—Ç—å –∏ —Å–ª—ã—à–∞—Ç—å. –¢–µ–±–µ –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç –ø—Ä–æ–π—Ç–∏ –ø–æ —Ç—Ä—ë–º –∑–∞–≥–∞–¥–æ—á–Ω—ã–º —Ç–æ—á–∫–∞–º, –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞–Ω–∏—è –ª–µ—Å–Ω—ã—Ö –¥—É—Ö–æ–≤ –∏ —Ä–∞—Å–∫—Ä—ã—Ç—å —Å–µ–∫—Ä–µ—Ç—ã —ç—Ç–æ–≥–æ –≤–æ–ª—à–µ–±–Ω–æ–≥–æ –º–µ—Å—Ç–∞. –ì–æ—Ç–æ–≤—å—Å—è –∫ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—é!',
            task: '–û—Å–º–æ—Ç—Ä–∏—Å—å –≤–æ–∫—Ä—É–≥, –≤–¥–æ—Ö–Ω–∏ –ª–µ—Å–Ω–æ–π –≤–æ–∑–¥—É—Ö –∏ –Ω–∞–∂–º–∏ "–ù–∞—á–∞—Ç—å –∫–≤–µ—Å—Ç", –∫–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤ –ø—É—Ç—å.',
            hint: null, answer: () => true,
            lat: 55.101231, lng: 28.603838, mapsUrl: 'https://maps.google.com/maps?q=55.101231,28.603838',
        },
        steps: [
            { id: 'point-1', title: '–†–æ–¥–Ω–∏–∫ –ë–∞—Ä–∫–æ–≤—â–∏–Ω–∞', location: '–°–≤—è—Ç–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ —É –¥–µ—Ä–µ–≤–Ω–∏ –ë–∞—Ä–∫–æ–≤—â–∏–Ω–∞', story: '–≠—Ç–æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ –Ω–∞–∑—ã–≤–∞—é—Ç —Å–µ—Ä–¥—Ü–µ–º –ë–∞—Ä–∫–æ–≤—â–∏–Ω—Å–∫–æ–≥–æ –ª–µ—Å–∞. –õ–µ–≥–µ–Ω–¥–∞ –≥–ª–∞—Å–∏—Ç, —á—Ç–æ –∫–æ–≥–¥–∞-—Ç–æ –∑–¥–µ—Å—å —É–ø–∞–ª –∂–µ–∑–ª —Å—Ç–∞—Ä–æ–≥–æ –º—É–¥—Ä–µ—Ü–∞. –ò–∑ –∑–µ–º–ª–∏ –≤ —Ç–æ–º –º–µ—Å—Ç–µ –∑–∞–±–∏–ª —á–∏—Å—Ç—ã–π –∫–ª—é—á, –∫–æ—Ç–æ—Ä—ã–π —Å —Ç–µ—Ö –ø–æ—Ä –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–µ—Ä–µ—Å—ã—Ö–∞–µ—Ç. –õ—é–¥–∏ –≤–µ—Ä—è—Ç, —á—Ç–æ –≤–æ–¥–∞ —Ä–æ–¥–Ω–∏–∫–∞ –ø—Ä–∏–Ω–æ—Å–∏—Ç –∑–¥–æ—Ä–æ–≤—å–µ –∏ —Å–∏–ª—ã, –∞ –¥—É—Ö–∏ –ª–µ—Å–∞ –æ–±–µ—Ä–µ–≥–∞—é—Ç –µ–≥–æ –æ—Ç –≤—Å—è–∫–æ–π –±–µ–¥—ã.', task: '–ü–µ—Ä–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –ø–æ—Å—á–∏—Ç–∞–π, —Å–∫–æ–ª—å–∫–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –≤—ã—Ö–æ–¥–∏—Ç –∑–¥–µ—Å—å –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å? (–í–≤–µ–¥–∏ —á–∏—Å–ª–æ)', hint: '–ü—Ä–∏—Å–ª—É—à–∞–π—Å—è –∫ –∂—É—Ä—á–∞–Ω–∏—é ‚Äî –Ω–µ –æ–¥–∏–Ω –≥–æ–ª–æ—Å —Å–ª—ã—à–µ–Ω —É –≤–æ–¥—ã.', answer: s => parseInt(s,10) === 4, lat: 55.101231, lng: 28.603838, mapsUrl: 'https://maps.google.com/maps?q=55.101231,28.603838', inputType: 'number' },
            { id: 'point-1-2', title: '–¢–∞–π–Ω–∞ —Ä–æ–¥–Ω–∏–∫–∞', location: '–¢–æ—Ç –∂–µ —Å–≤—è—Ç–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫', story: '–ì–æ–≤–æ—Ä—è—Ç, —É —Ä–æ–¥–Ω–∏–∫–∞ —á–∞—Å—Ç–æ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –∫–∞–º–Ω–∏, –ø–æ–∫—Ä—ã—Ç—ã–µ –º—Ö–æ–º. –≠—Ç–æ –∑–Ω–∞–∫ –¥—Ä–µ–≤–Ω–∏—Ö –¥—É—Ö–æ–≤ –≤–æ–¥—ã. –ö–∞–∂–¥—ã–π —Å–æ—Ä—Ç –º—Ö–∞ ‚Äî –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–∞—è –Ω–æ—Ç–∞ –≤ –º–µ–ª–æ–¥–∏–∏ –ª–µ—Å–∞.', task: '–í—Ç–æ—Ä–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –Ω–∞–π–¥–∏ –∫–∞–º–µ–Ω—å —Å–æ –º—Ö–æ–º –∏ –ø–æ—Å—á–∏—Ç–∞–π, —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–Ω—ã—Ö —Å–æ—Ä—Ç–æ–≤ –º—Ö–∞ –Ω–∞ –Ω—ë–º?', hint: '–í–≥–ª—è–¥–∏—Å—å –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–µ: –æ–¥–∏–Ω –∫–∞–º–µ–Ω—å –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –≤ —Å–µ–±–µ –º–∞–ª–µ–Ω—å–∫–∏–π –∑–µ–ª—ë–Ω—ã–π –ª–µ—Å –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –æ–±–∏—Ç–∞—Ç–µ–ª–µ–π.', answer: s => { const n = parseInt(s,10); return Number.isInteger(n) && n >= 1 && n <= 20; }, lat: 55.101231, lng: 28.603838, mapsUrl: 'https://maps.google.com/maps?q=55.101231,28.603838', inputType: 'number' },
            { id: 'point-2', title: '–®–µ–ø—á—É—â–∏–µ —Å–æ—Å–Ω—ã', location: '–†–æ—â–∞ –≤–µ–∫–æ–≤—ã—Ö —Å–æ—Å–µ–Ω', story: '–¢—ã –ø–æ–ø–∞–ª –≤ —Å–≤—è—â–µ–Ω–Ω—É—é —Ä–æ—â—É, –≥–¥–µ –¥–µ—Ä–µ–≤—å—è –ø–æ–º–Ω—è—Ç –∫–∞–∂–¥—É—é –ª–µ–≥–µ–Ω–¥—É —ç—Ç–∏—Ö –º–µ—Å—Ç. –ò—Ö —à–µ–ª–µ—Å—Ç - —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –≤–µ—Ç–µ—Ä, –∞ –Ω–∞—Å—Ç–æ—è—â–∏–π —è–∑—ã–∫ –ø—Ä–∏—Ä–æ–¥—ã. –ü—Ä–∏—Å–ª—É—à–∞–π—Å—è –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ...', task: '–ü–µ—Ä–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ: —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–Ω—ã—Ö –ø—Ç–∏—á—å–∏—Ö –≥–æ–ª–æ—Å–æ–≤ —Ç—ã —Å–ª—ã—à–∏—à—å –≤ —ç—Ç–æ–π —Ä–æ—â–µ? (–í–≤–µ–¥–∏ —á–∏—Å–ª–æ)', hint: '–ó–∞–∫—Ä–æ–π –≥–ª–∞–∑–∞ –Ω–∞ –º–∏–Ω—É—Ç—É –∏ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –∑–≤—É–∫–∞—Ö. –ù–µ –≤—Å–µ –≥–æ–ª–æ—Å–∞ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ç–∏—Ü–∞–º–∏!', answer: s => { const n = parseInt(s,10); return Number.isInteger(n) && n >= 1 && n <= 6; }, lat: 55.112393, lng: 28.603036, mapsUrl: 'https://maps.google.com/maps?q=55.112393,28.603036', inputType: 'number' },
            { id: 'point-2-2', title: '–Ø–∑—ã–∫ –≤–µ—Ç—Ä–∞', location: '–í—Å–µ —Ç–∞ –∂–µ —Ä–æ—â–∞ —Å–æ—Å–µ–Ω', story: '–í–µ—Ç–µ—Ä –∑–¥–µ—Å—å –∏–≥—Ä–∞–µ—Ç –æ—Å–æ–±—É—é –º–µ–ª–æ–¥–∏—é. –û–Ω –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ —Ö–≤–æ—é –∏ —Å–æ–∑–¥–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—É—é –º—É–∑—ã–∫—É –ª–µ—Å–∞. –ú–æ–∂–µ—Ç –±—ã—Ç—å, —Ç—ã —Å–º–æ–∂–µ—à—å –ø–æ–Ω—è—Ç—å, –æ —á–µ–º –ø–æ—é—Ç —ç—Ç–∏ –¥–µ—Ä–µ–≤—å—è?', task: '–í—Ç–æ—Ä–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –∫–∞–∫–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —É —ç—Ç–æ–≥–æ –º–µ—Å—Ç–∞? –û–ø–∏—à–∏ –æ–¥–Ω–∏–º —Å–ª–æ–≤–æ–º.', hint: '–ü—Ä–∏—Å–ª—É—à–∞–π—Å—è –∫ —Å–≤–æ–∏–º –æ—â—É—â–µ–Ω–∏—è–º. –°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ, —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, —Ä–∞–¥–æ—Å—Ç—å, –≥—Ä—É—Å—Ç—å?', answer: s => s.length > 2, lat: 55.112393, lng: 28.603036, mapsUrl: 'https://maps.google.com/maps?q=55.112393,28.603036' },
            { id: 'point-3', title: '–û–∑–µ—Ä–æ –æ—Ç—Ä–∞–∂–µ–Ω–∏–π', location: '–õ–µ—Å–Ω–æ–µ –æ–∑–µ—Ä–æ —É —Ç—Ä–æ–ø—ã', story: '–ü–µ—Ä–µ–¥ —Ç–æ–±–æ–π –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∑–µ—Ä–∫–∞–ª—å–Ω–∞—è –≥–ª–∞–¥—å –ª–µ—Å–Ω–æ–≥–æ –æ–∑–µ—Ä–∞. –ì–æ–≤–æ—Ä—è—Ç, –µ–≥–æ –≤–æ–¥—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–µ –ø—Ä–æ—Å—Ç–æ –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ, –∞ –∏—Å—Ç–∏–Ω–Ω—É—é —Å—É—â–Ω–æ—Å—Ç—å —Å–º–æ—Ç—Ä—è—â–µ–≥–æ. –ß—Ç–æ —Ç—ã —É–≤–∏–¥–∏—à—å –≤ —ç—Ç–æ–π –≤–æ–¥–Ω–æ–π –≥–ª–∞–¥–∏?', task: '–ü–µ—Ä–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ: —Å–∫–æ–ª—å–∫–æ —É—Ç–æ–∫ –ø–ª–∞–≤–∞–µ—Ç –Ω–∞ –æ–∑–µ—Ä–µ?', hint: '–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ –≤–æ–¥–Ω—É—é –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å - —É—Ç–∫–∏ –º–æ–≥—É—Ç –ø—Ä—è—Ç–∞—Ç—å—Å—è –≤ –∫–∞–º—ã—à–∞—Ö!(–ï—Å–ª–∏ —É—Ç–æ–∫ –Ω–µ—Ç, –≤–≤–µ–¥–∏ 0)', answer: s => s.length > 0, lat: 55.119597, lng: 28.605857, mapsUrl: 'https://maps.google.com/maps?q=55.119597,28.605857' },
            { id: 'point-3-2', title: '–¢–∞–π–Ω–∞ –≤–æ–¥–Ω–æ–π –≥–ª–∞–¥–∏', location: '–í—Å–µ —Ç–æ –∂–µ –ª–µ—Å–Ω–æ–µ –æ–∑–µ—Ä–æ', story: '–ü—Ä–∏—Å–º–æ—Ç—Ä–∏—Å—å –∫ –æ—Ç—Ä–∞–∂–µ–Ω–∏—é –≤ –≤–æ–¥–µ. –ò–Ω–æ–≥–¥–∞ –æ–∑–µ—Ä–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —Ç–µ–±—è, –Ω–æ –∏ —Å–∫—Ä—ã—Ç—ã–µ –ø–æ—Å–ª–∞–Ω–∏—è –¥—É—Ö–æ–≤ –ª–µ—Å–∞. –ú–æ–∂–µ—Ç –±—ã—Ç—å, –≤ —Ä—è–±–∏ –≤–æ–¥—ã –∏–ª–∏ –µ–µ –æ—Ç–±–ª–µ—Å–∫–∞—Ö –µ—Å—Ç—å –∫–∞–∫–æ–π-—Ç–æ —Å–µ–∫—Ä–µ—Ç?', task: '–í—Ç–æ—Ä–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –æ–ø–∏—à–∏ —Ü–≤–µ—Ç –≤–æ–¥—ã –≤ –æ–∑–µ—Ä–µ –æ–¥–Ω–∏–º —Å–ª–æ–≤–æ–º.', hint: '–¶–≤–µ—Ç –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ–≥–æ–¥—ã –∏ –≤—Ä–µ–º–µ–Ω–∏ –¥–Ω—è. –ë—É–¥—å –≤–Ω–∏–º–∞—Ç–µ–ª–µ–Ω!', answer: s => s.length > 2, lat: 55.119597, lng: 28.605857, mapsUrl: 'https://maps.google.com/maps?q=55.119597,28.605857' },
        ],
        finale: {
            text: '–ú—ã –≤–∏–¥–µ–ª–∏ —Ç–≤–æ–π –ø—É—Ç—å, –ø—É—Ç–Ω–∏–∫. –£ —Ä–æ–¥–Ω–∏–∫–∞ —Ç—ã —É—Å–ª—ã—à–∞–ª –≥–æ–ª–æ—Å–∞ –≤–æ–¥—ã, —É —Å–æ—Å–µ–Ω ‚Äî —à—ë–ø–æ—Ç –≤–µ—Ç—Ä–∞, —É –æ–∑–µ—Ä–∞ ‚Äî –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ –¥—É—à–∏. –¢—ã –±—ã–ª –≤–Ω–∏–º–∞—Ç–µ–ª–µ–Ω –∏ —á–µ—Å—Ç–µ–Ω, –∏ –ø–æ—Ç–æ–º—É –ª–µ—Å –æ—Ç–∫—Ä—ã–ª —Ç–µ–±–µ —Å–≤–æ–∏ —Ç–∞–π–Ω—ã. –¢–µ–ø–µ—Ä—å –º—ã –∑–Ω–∞–µ–º —Ç–≤–æ—ë –∏–º—è –∏ –±—É–¥–µ–º —Ö—Ä–∞–Ω–∏—Ç—å —Ç–≤–æ–∏ —à–∞–≥–∏, –∫—É–¥–∞ –±—ã —Ç—ã –Ω–∏ –Ω–∞–ø—Ä–∞–≤–∏–ª—Å—è. –í–æ–∑–≤—Ä–∞—â–∞–π—Å—è, –∫–æ–≥–¥–∞ —Å–µ—Ä–¥—Ü–µ –∑–∞—Ö–æ—á–µ—Ç ‚Äî –ë–∞—Ä–∫–æ–≤—â–∏–Ω–∞ –≤—Å–µ–≥–¥–∞ –≤—Å—Ç—Ä–µ—Ç–∏—Ç —Ç–µ–±—è, –∫–∞–∫ —Å—Ç–∞—Ä–æ–≥–æ –¥—Ä—É–≥–∞.',
        },
    },
    {
        quest_id: 'minsk-cmok',
        title: '–¢–∞–π–Ω–∞ –°–≤–∏—Å–ª–æ—á—Å–∫–æ–≥–æ –¶–º–æ–∫–∞: –õ–µ–≥–µ–Ω–¥–∞ –æ–∂–∏–≤–∞–µ—Ç',
        city: { name: '–ú–∏–Ω—Å–∫', lat: 53.9023, lng: 27.5619 },
        meta: {
            lat: 53.9045,
            lng: 27.5615,
            duration_min: 45,
            difficulty: 'easy',
            tags: ['citywalk', 'myth'],
            pet_friendly: false,
        },
        storage_key: 'quest_minsk_smok_awakened_v3',
        intro: {
            id: 'intro', title: '–¢–∞–π–Ω–∞ –°–≤–∏—Å–ª–æ—á—Å–∫–æ–≥–æ –¶–º–æ–∫–∞', location: '–ù–∞—á–∞–ª–æ –ø—É—Ç–∏',
            story: '**–°—Ç–∞—Ä–∏–Ω–Ω–∞—è –±–µ–ª–æ—Ä—É—Å—Å–∫–∞—è –ª–µ–≥–µ–Ω–¥–∞ –≥–ª–∞—Å–∏—Ç:**\n\n–í –≤–æ–¥–∞—Ö –°–≤–∏—Å–ª–æ—á–∏ –∏—Å–ø–æ–∫–æ–Ω –≤–µ–∫–æ–≤ –∂–∏–ª –º–æ–≥—É—á–∏–π –¶–º–æ–∫ ‚Äî –¥—É—Ö-—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å —ç—Ç–∏—Ö –∑–µ–º–µ–ª—å. \n\n–ö–æ–≥–¥–∞-—Ç–æ –µ–≥–æ –¥–æ—á—å, –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞—è —Ä–µ–∫–∞ –°–≤–∏—Å–ª–æ—á—å, –≤–ª—é–±–∏–ª–∞—Å—å –≤ —á–µ–ª–æ–≤–µ–∫–∞ –ø–æ –∏–º–µ–Ω–∏ –ú–µ–Ω–µ—Å–∫. \n–¶–º–æ–∫ –¥–∞—Ä–æ–≤–∞–ª –∏–º –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏–µ, –∏ —Ç–∞–∫ –≤–æ–∑–Ω–∏–∫ –≥–æ—Ä–æ–¥ –ú–∏–Ω—Å–∫.\n\n**–°–µ–π—á–∞—Å:**\n–ü—Ä–æ—à–ª–∏ –≤–µ–∫–∞, –∏ –ª—é–¥–∏ –∑–∞–±—ã–ª–∏ –æ —Å–≤–æ—ë–º –∑–∞—â–∏—Ç–Ω–∏–∫–µ. –¶–º–æ–∫ –ø–æ–≥—Ä—É–∑–∏–ª—Å—è –≤ –º–Ω–æ–≥–æ–≤–µ–∫–æ–≤–æ–π —Å–æ–Ω, \n–∞ –±–µ–∑ –µ–≥–æ –∑–∞—â–∏—Ç—ã –≥–æ—Ä–æ–¥ —Å—Ç–∞–ª —É—è–∑–≤–∏–º –¥–ª—è —Ç—ë–º–Ω—ã—Ö —Å–∏–ª –∑–∞–±–≤–µ–Ω–∏—è.\n\n**–¢–≤–æ—è –º–∏—Å—Å–∏—è:**\n–ü—Ä–æ–π–¥–∏ –ø–æ —Å–µ–º–∏ —Å–∞–∫—Ä–∞–ª—å–Ω—ã–º —Ç–æ—á–∫–∞–º –≥–æ—Ä–æ–¥–∞, —Å–æ–±–µ—Ä–∏ –¥—Ä–µ–≤–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã-–≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è \n–∏ —Ä–∞–∑–±—É–¥–∏ –¶–º–æ–∫–∞ –æ—Ç –º–Ω–æ–≥–æ–≤–µ–∫–æ–≤–æ–≥–æ —Å–Ω–∞!',
            task: '–ù–∞–π–¥–∏ –ø–µ—Ä–≤—É—é —Ç–æ—á–∫—É —É –≤—Ö–æ–¥–∞ –≤ –ü–∞—Ä–∫ –ì–æ—Ä—å–∫–æ–≥–æ –∏ –Ω–∞–∂–º–∏ "–ù–∞—á–∞—Ç—å –∫–≤–µ—Å—Ç"',
            hint: null, answer: () => true,
            lat: 53.9039, lng: 27.5719, mapsUrl: 'https://maps.google.com/?q=53.9039,27.5719',
        },
        steps: [
            { id: '1-forest-memory', title: '–ê—Ä—Ç–µ—Ñ–∞–∫—Ç –õ–µ—Å–∞', location: '–ì–ª–∞–≤–Ω—ã–π –≤—Ö–æ–¥ –≤ –ü–∞—Ä–∫ –ì–æ—Ä—å–∫–æ–≥–æ', story: '–ó–¥–µ—Å—å –Ω–∞—á–∏–Ω–∞–ª—Å—è –¥—Ä–µ–≤–Ω–∏–π –ª–µ—Å, –≥–¥–µ –¶–º–æ–∫ –≤—Å—Ç—Ä–µ—á–∞–ª—Å—è —Å –¥—É—Ö–∞–º–∏ –ø—Ä–∏—Ä–æ–¥—ã. –õ—é–¥–∏ –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª–∏ –µ–≥–æ –≤ —Å–∞–¥, –Ω–æ –¥—Ä–µ–≤–Ω—è—è —ç–Ω–µ—Ä–≥–∏—è –≤—Å—ë –µ—â—ë –∂–∏–≤–∞ –∑–¥–µ—Å—å.\n\n*–ü—Ä–∏–∫–æ—Å–Ω–∏—Å—å –∫ –≤–æ—Ä–æ—Ç–∞–º –∏ –ø–æ—á—É–≤—Å—Ç–≤—É–π –≤–∏–±—Ä–∞—Ü–∏–∏ –¥—Ä–µ–≤–Ω–µ–≥–æ –ª–µ—Å–∞*', task: '–í –∫–∞–∫–æ–º –≥–æ–¥—É –±—ã–ª –æ—Å–Ω–æ–≤–∞–Ω –ì—É–±–µ—Ä–Ω–∞—Ç–æ—Ä—Å–∫–∏–π —Å–∞–¥ (–Ω—ã–Ω–µ –ü–∞—Ä–∫ –ì–æ—Ä—å–∫–æ–≥–æ)? (–≥–æ–¥)', hint: '–ü–æ–¥—Å–∫–∞–∑–∫–∞: –Ω–∞—á–∞–ª–æ XIX –≤–µ–∫–∞', answer: s => parseInt(s,10) === 1805, lat: 53.9039, lng: 27.5719, mapsUrl: 'https://maps.google.com/?q=53.9039,27.5719', inputType: 'number' },
            { id: '2-sun-memory', title: '–ê—Ä—Ç–µ—Ñ–∞–∫—Ç –°–æ–ª–Ω—Ü–∞', location: '–ö–æ–ª–µ—Å–æ –æ–±–æ–∑—Ä–µ–Ω–∏—è', story: '–¶–º–æ–∫ —á–∞—Å—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–ª —Ñ–æ—Ä–º—É —Å–æ–ª–Ω–µ—á–Ω–æ–≥–æ –∑–∞–π—á–∏–∫–∞, –∏–≥—Ä–∞—é—â–µ–≥–æ –Ω–∞ –≤–æ–ª–Ω–∞—Ö –°–≤–∏—Å–ª–æ—á–∏. –≠—Ç–æ –∫–æ–ª–µ—Å–æ ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –≤–æ–ø–ª–æ—â–µ–Ω–∏–µ —Ç–æ–≥–æ —Å–æ–ª–Ω–µ—á–Ω–æ–≥–æ –∫—Ä—É–≥–∞, —á—Ç–æ –≤–∏–¥–µ–ª–∏ –¥—Ä–µ–≤–Ω–∏–µ –∂–∏—Ç–µ–ª–∏.\n\n*–ü–æ–¥–Ω–∏–º–∏—Å—å –Ω–∞ –∫–æ–ª–µ—Å–æ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø—Ä–µ–¥—Å—Ç–∞–≤—å, –∫–∞–∫ –¶–º–æ–∫ –ª—é–±–æ–≤–∞–ª—Å—è –≥–æ—Ä–æ–¥–æ–º —Å –≤—ã—Å–æ—Ç—ã*', task: '–°–∫–æ–ª—å–∫–æ –ø–æ–ª–Ω—ã—Ö –º–µ—Ç—Ä–æ–≤ –≤ –≤—ã—Å–æ—Ç—É –∫–æ–ª–µ—Å–æ –æ–±–æ–∑—Ä–µ–Ω–∏—è? (—Ü–∏—Ñ—Ä–∞)', hint: '–ü–æ–¥—Å–∫–∞–∑–∫–∞: –ø—Ä–∏–º–µ—Ä–Ω–æ –∫–∞–∫ 18-—ç—Ç–∞–∂–Ω—ã–π –¥–æ–º', answer: s => parseInt(s,10) === 54, lat: 53.9034, lng: 27.5744, mapsUrl: 'https://maps.google.com/?q=53.9034,27.5744', inputType: 'number' },
            { id: '3-star-memory', title: '–ê—Ä—Ç–µ—Ñ–∞–∫—Ç –ó–≤—ë–∑–¥', location: '–ú–∏–Ω—Å–∫–∏–π –ø–ª–∞–Ω–µ—Ç–∞—Ä–∏–π', story: '–ü–æ –Ω–æ—á–∞–º –¶–º–æ–∫ –ø—Ä–µ–≤—Ä–∞—â–∞–ª—Å—è –≤ —Å–æ–∑–≤–µ–∑–¥–∏–µ –∏ –∫—É–ø–∞–ª—Å—è –≤ –≤–æ–¥–∞—Ö –°–≤–∏—Å–ª–æ—á–∏, –æ—Ç—Ä–∞–∂–∞—é—â–µ–π –∑–≤—ë–∑–¥—ã. –ó–¥–µ—Å—å –ª—é–¥–∏ –ø–æ—Å—Ç—Ä–æ–∏–ª–∏ —Ö—Ä–∞–º –∑–≤—ë–∑–¥–∞–º.\n\n*–ü–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ –∫—É–ø–æ–ª –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤—å, –∫–∞–∫ –¶–º–æ–∫-—Å–æ–∑–≤–µ–∑–¥–∏–µ –ø–∞—Ä–∏—Ç –Ω–∞–¥ –≥–æ—Ä–æ–¥–æ–º*', task: '–í –∫–∞–∫–æ–º –≥–æ–¥—É –æ—Ç–∫—Ä—ã–ª—Å—è –ø–ª–∞–Ω–µ—Ç–∞—Ä–∏–π? (–≥–æ–¥)', hint: '–ü–æ–¥—Å–∫–∞–∑–∫–∞: —ç–ø–æ—Ö–∞ –∫–æ—Å–º–æ–Ω–∞–≤—Ç–∏–∫–∏, 1960-–µ', answer: s => parseInt(s,10) === 1965, lat: 53.9045, lng: 27.5745, mapsUrl: 'https://maps.google.com/?q=53.9045,27.5745', inputType: 'number' },
            { id: '4-voice-memory', title: '–ê—Ä—Ç–µ—Ñ–∞–∫—Ç –ì–æ–ª–æ—Å–∞', location: '–ë–æ–ª—å—à–æ–π —Ç–µ–∞—Ç—Ä –æ–ø–µ—Ä—ã –∏ –±–∞–ª–µ—Ç–∞', story: '–ì–æ–ª–æ—Å –¶–º–æ–∫–∞ –±—ã–ª –ø–æ–¥–æ–±–µ–Ω —Å–∞–º–æ–π –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–π –º—É–∑—ã–∫–µ. –û–Ω –ø–µ–ª –¥—Ä–µ–≤–Ω–∏–µ –ø–µ—Å–Ω–∏ –Ω–∞ –±–µ—Ä–µ–≥–∞—Ö –°–≤–∏—Å–ª–æ—á–∏, –∏ —ç—Ç–∏ –º–µ–ª–æ–¥–∏–∏ –¥–æ —Å–∏—Ö –ø–æ—Ä –∑–≤—É—á–∞—Ç –≤ —Å—Ç–µ–Ω–∞—Ö —ç—Ç–æ–≥–æ —Ç–µ–∞—Ç—Ä–∞.\n\n*–ü—Ä–∏—Å–ª—É—à–∞–π—Å—è ‚Äî –º–æ–∂–µ—Ç –±—ã—Ç—å, —É—Å–ª—ã—à–∏—à—å –æ—Ç–≥–æ–ª–æ—Å–∫–∏ –¥—Ä–µ–≤–Ω–µ–π –ø–µ—Å–Ω–∏ –¶–º–æ–∫–∞*', task: '–í –∫–∞–∫–æ–º –≥–æ–¥—É —Å–æ—Å—Ç–æ—è–ª–∞—Å—å –ø–µ—Ä–≤–∞—è –ø—Ä–µ–º—å–µ—Ä–∞ –≤ —Ç–µ–∞—Ç—Ä–µ (¬´–ö–∞—Ä–º–µ–Ω¬ª)? (–≥–æ–¥)', hint: '–ü–æ–¥—Å–∫–∞–∑–∫–∞: 1930-–µ –≥–æ–¥—ã', answer: s => parseInt(s,10) === 1933, lat: 53.9104, lng: 27.5617, mapsUrl: 'https://maps.google.com/?q=53.9104,27.5617', inputType: 'number' },
            { id: '5-memory-memory', title: '–ê—Ä—Ç–µ—Ñ–∞–∫—Ç –ü–∞–º—è—Ç–∏', location: '–û—Å—Ç—Ä–æ–≤ —Å–ª—ë–∑', story: '–¶–º–æ–∫ –ø–ª–∞–∫–∞–ª —Å–ª–µ–∑–∞–º–∏ –∏–∑ —á–∏—Å—Ç–æ–≥–æ —Ö—Ä—É—Å—Ç–∞–ª—è, –∫–æ–≥–¥–∞ —Ç–µ—Ä—è–ª —Ç–µ—Ö, –∫–æ–≥–æ –∑–∞—â–∏—â–∞–ª. –≠—Ç–∏ —Å–ª–µ–∑—ã –ø—Ä–µ–≤—Ä–∞—â–∞–ª–∏—Å—å –≤ –æ—Å—Ç—Ä–æ–≤–∞ –ø–∞–º—è—Ç–∏.\n\n*–ü–æ—á—Ç–∏ –ø–∞–º—è—Ç—å –≤–æ–∏–Ω–æ–≤ ‚Äî –¶–º–æ–∫ —É–≤–∞–∂–∞–µ—Ç –º—É–∂–µ—Å—Ç–≤–æ –∏ —Å–∫–æ—Ä–±–∏—Ç —Å —Ç–µ–º–∏, –∫—Ç–æ –ø–æ–º–Ω–∏—Ç*', task: '–í –∫–∞–∫–æ–º –≥–æ–¥—É –æ—Ç–∫—Ä—ã–ª–∏ –º–µ–º–æ—Ä–∏–∞–ª? (–≥–æ–¥)', hint: '–ü–æ–¥—Å–∫–∞–∑–∫–∞: 1990-–µ, –ø–æ—Å–ª–µ –ê—Ñ–≥–∞–Ω—Å–∫–æ–π –≤–æ–π–Ω—ã', answer: s => parseInt(s,10) === 1996, lat: 53.9072, lng: 27.5585, mapsUrl: 'https://maps.google.com/?q=53.9072,27.5585', inputType: 'number' },
            { id: '6-word-memory', title: '–ê—Ä—Ç–µ—Ñ–∞–∫—Ç –°–ª–æ–≤–∞', location: '–¢—Ä–æ–∏—Ü–∫–æ–µ –ø—Ä–µ–¥–º–µ—Å—Ç—å–µ, –ø–∞–º—è—Ç–Ω–∞—è —Å–∫–∞–º–µ–π–∫–∞', story: '–¶–º–æ–∫ –≤–¥–æ—Ö–Ω–æ–≤–ª—è–ª –ø–æ—ç—Ç–æ–≤ —á–µ—Ä–µ–∑ —à–µ–ø–æ—Ç –°–≤–∏—Å–ª–æ—á–∏. –ù–∞–π–¥–∏—Ç–µ —Å–∫–∞–º–µ–π–∫—É, –≥–¥–µ –∑–∞–ø–µ—á–∞—Ç–ª–µ–Ω—ã —Å—Ç—Ä–æ–∫–∏ —Ç–æ–≥–æ, –∫—Ç–æ —Å–ª—ã—à–∞–ª –≥–æ–ª–æ—Å —Ä–µ—á–Ω–æ–≥–æ –¥—É—Ö–∞.', task: '–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –≤ –ø–µ—Ä–≤–æ–π –∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–æ–∫–µ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏—è –Ω–∞ —Å–∫–∞–º–µ–π–∫–µ?', hint: '–ü–æ–¥—Å–∫–∞–∑–∫–∞: —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º, —á—Ç–æ —Ç–µ—á—ë—Ç –∏ –∏–º–µ–µ—Ç –≥–æ–ª–æ—Å', answer: s => ['—Ä–∞–∫–∞','—Ä–∞–∫—ñ','—Ä–µ–∫–∞','—Ä–µ–∫–∏'].includes(s), lat: 53.9079, lng: 27.5575, mapsUrl: 'https://maps.google.com/?q=53.9079,27.5575' },
            { id: '7-water-memory', title: '–ü–æ—Å–ª–µ–¥–Ω–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç', location: '–ù–∞–±–µ—Ä–µ–∂–Ω–∞—è –°–≤–∏—Å–ª–æ—á–∏ —É –¢—Ä–æ–∏—Ü–∫–æ–≥–æ', story: '–¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å –≤—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã! –õ–µ—Å, –°–æ–ª–Ω—Ü–µ, –ó–≤—ë–∑–¥—ã, –ì–æ–ª–æ—Å, –ü–∞–º—è—Ç—å –∏ –°–ª–æ–≤–æ.\n\n–í—ã–π–¥–∏ –Ω–∞ –Ω–∞–±–µ—Ä–µ–∂–Ω—É—é, –≤—Å—Ç–∞–Ω—å –ª–∏—Ü–æ–º –∫ –≤–æ–¥–µ –∏ –ø—Ä–æ–∏–∑–Ω–µ—Å–∏:\n"–¶–º–æ–∫ –°–≤–∏—Å–ª–æ—á—Å–∫–∏–π, —è –ø—Ä–∏–Ω—ë—Å —Ç–µ–±–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è —Ç–≤–æ–µ–≥–æ –≥–æ—Ä–æ–¥–∞!"\n\n*–ë—Ä–æ—Å—å –≤–æ–æ–±—Ä–∞–∂–∞–µ–º—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤ –≤–æ–¥—É –∏ –∂–¥–∏ –∑–Ω–∞–∫–∞*', task: '–ö–∞–∫–æ–µ –Ω–∞—Å—Ç–æ—è—â–µ–µ –∏–º—è –¶–º–æ–∫–∞ –∏–∑ –¥—Ä–µ–≤–Ω–∏—Ö –ª–µ–≥–µ–Ω–¥? (–ø–æ–¥—Å–∫–∞–∑–∫–∞: –∏—â–∏ –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —â–∏—Ç–∞—Ö)', hint: '–ü–æ–¥—Å–∫–∞–∑–∫–∞: –¥–≤–∞ —Å–ª–æ–≤–∞: ¬´–°–≤–∏—Å–ª–æ—á—Å–∫–∏–π ‚Ä¶¬ª / ¬´–°–≤—ñ—Å–ª–∞—Ü–∫—ñ ‚Ä¶¬ª', answer: s => ['—Å–≤–∏—Å–ª–æ—á—Å–∫–∏–π —Ü–º–æ–∫','—Ü–º–æ–∫ —Å–≤–∏—Å–ª–æ—á—Å–∫–∏–π','—Å–≤—ñ—Å–ª–∞—Ü–∫—ñ —Ü–º–æ–∫','—Ü–º–æ–∫ —Å–≤—ñ—Å–ª–∞—Ü–∫—ñ'].includes(s), lat: 53.9080, lng: 27.5570, mapsUrl: 'https://maps.google.com/?q=53.9080,27.5570' },
        ],
        finale: {
            text: '**–í–æ–¥—ã –°–≤–∏—Å–ª–æ—á–∏ –≤–¥—Ä—É–≥ –∑–∞–±—É—Ä–ª–∏–ª–∏, –∏ –∏–∑ –≥–ª—É–±–∏–Ω—ã –ø–æ–¥–Ω—è–ª—Å—è –≤–µ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –¶–º–æ–∫!**\n\n*"–ë–ª–∞–≥–æ–¥–∞—Ä—é —Ç–µ–±—è, —Ö—Ä–∞–Ω–∏—Ç–µ–ª—å –ø–∞–º—è—Ç–∏. –¢—ã –≤–µ—Ä–Ω—É–ª –º–Ω–µ —Å–∏–ª—É, —Å–æ–±—Ä–∞–≤ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π."*\n\n*"–ü–æ–∫–∞ –∂–∏–≤—ë—Ç –ø–∞–º—è—Ç—å ‚Äî –∂–∏–≤ –≥–æ—Ä–æ–¥. –ü–æ–∫–∞ —Ç–µ—á—ë—Ç –°–≤–∏—Å–ª–æ—á—å ‚Äî –∂–∏–≤ —è."*\n\n*"–†–∞—Å—Å–∫–∞–∂–∏ –¥—Ä—É–≥–∏–º —ç—Ç—É –ª–µ–≥–µ–Ω–¥—É, —á—Ç–æ–±—ã –Ω–µ –∑–∞–±—ã–≤–∞–ª–∏..."*\n\n–¶–º–æ–∫ –º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ –≤–æ–¥—ã, –Ω–æ —Ç–µ–ø–µ—Ä—å —Ç—ã –∑–Ω–∞–µ—à—å ‚Äî –æ–Ω –±–æ–¥—Ä—Å—Ç–≤—É–µ—Ç –∏ –∑–∞—â–∏—â–∞–µ—Ç –≥–æ—Ä–æ–¥.\n\n**–ö–≤–µ—Å—Ç –∑–∞–≤–µ—Ä—à—ë–Ω! –¢—ã —Ä–∞–∑–±—É–¥–∏–ª —Ö—Ä–∞–Ω–∏—Ç–µ–ª—è –ú–∏–Ω—Å–∫–∞!**',
        },
    },
];

// ===================== –§–û–†–ú–ò–†–û–í–ê–ù–ò–ï PAYLOAD =====================

function buildPayload(quest) {
    const stepsPayload = quest.steps.map(s => serializeStep(s));
    const introPayload = quest.intro ? serializeStep(quest.intro) : null;

    return {
        quest_id: quest.quest_id,
        title: quest.title,
        city_name: quest.city.name,
        city_lat: quest.city.lat,
        city_lng: quest.city.lng,
        lat: quest.meta.lat,
        lng: quest.meta.lng,
        duration_min: quest.meta.duration_min,
        difficulty: quest.meta.difficulty,
        tags: quest.meta.tags ? quest.meta.tags.reduce((acc, t) => { acc[t] = true; return acc; }, {}) : {},
        pet_friendly: quest.meta.pet_friendly,
        storage_key: quest.storage_key,
        steps: JSON.stringify(stepsPayload),
        intro: introPayload ? JSON.stringify(introPayload) : null,
        finale_text: quest.finale.text,
        // video/poster –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
    };
}

// ===================== –û–¢–ü–†–ê–í–ö–ê =====================

async function sendQuest(payload) {
    const url = `${API_BASE}/api/quests/`;
    const headers = {
        'Content-Type': 'application/json',
    };
    if (TOKEN) {
        headers['Authorization'] = `Token ${TOKEN}`;
    }

    const response = await fetch(url, {
        method: 'POST',
        headers,
        body: JSON.stringify(payload),
    });

    if (!response.ok) {
        const text = await response.text();
        throw new Error(`HTTP ${response.status}: ${text}`);
    }

    return response.json();
}

// ===================== MAIN =====================

async function main() {
    console.log('üöÄ –ú–∏–≥—Ä–∞—Ü–∏—è –∫–≤–µ—Å—Ç–æ–≤ –≤ –±—ç–∫–µ–Ω–¥');
    console.log(`   API: ${API_BASE}`);
    console.log(`   –†–µ–∂–∏–º: ${isDryRun ? 'DRY RUN (—Ç–æ–ª—å–∫–æ –≤—ã–≤–æ–¥ JSON)' : '–û–¢–ü–†–ê–í–ö–ê –ù–ê –°–ï–†–í–ï–†'}`);
    console.log(`   –ö–≤–µ—Å—Ç–æ–≤: ${QUESTS.length}`);
    console.log('');

    for (const quest of QUESTS) {
        const payload = buildPayload(quest);
        console.log(`üìã ${quest.quest_id}: "${quest.title}" (${quest.steps.length} —à–∞–≥–æ–≤)`);

        if (isDryRun) {
            console.log(JSON.stringify(payload, null, 2));
            console.log('');
        } else {
            try {
                const result = await sendQuest(payload);
                console.log(`   ‚úÖ –°–æ–∑–¥–∞–Ω: id=${result.id}`);
            } catch (err) {
                console.error(`   ‚ùå –û—à–∏–±–∫–∞: ${err.message}`);
            }
        }
    }

    console.log('\n‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
}

main().catch(err => {
    console.error('–û—à–∏–±–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏:', err);
    process.exit(1);
});
