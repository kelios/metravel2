# PRD / ТЗ: Новая стартовая страница «Твоя книга путешествий» + явный переход в «Поиск»

## 0) Решение (зафиксировано)
- Новая страница **Home** становится **дефолтной для всех** пользователей.
- Текущая страница со списком путешествий (поиск + фильтры + сетка) остаётся как отдельный режим/экран: **«Поиск»**.
- С Home должен быть **очень явный** переход в «Поиск» (в 1 клик) и в глобальной навигации пункт **«Поиск»** должен быть всегда виден.

---

## 1) Контекст и проблема
Сейчас пользователь попадает на страницу поиска/листинга. Она сильная как инструмент, но:
- не объясняет «зачем» пользоваться системой (ценность)
- не ведёт в ключевую «вау»-функцию продукта: **сборка своей книги путешествий и сохранение в PDF**
- не помогает новичкам начать (высокий порог)

---

## 2) Цели
### 2.1 Продуктовые цели
- Повысить долю пользователей, которые создают первое путешествие.
- Повысить долю пользователей, которые доходят до сценария «Книга → PDF».
- Сохранить (не ухудшить) «горячий» сценарий: быстро открыть **Поиск** и фильтры.

### 2.2 KPI
Основные:
- `AuthSuccess` (с Home)
- `CreateTravelCompleted`
- `ExportViewed`, `ExportStart`

Guardrails:
- `SearchStarted` и `SearchFilterApplied` не должны значительно упасть (порог фиксируется командой до запуска).

---

## 3) Сущности и ограничения
### 3.1 Регистрация
- Email/пароль.

### 3.2 Создание путешествия
- Уже существует отдельный экран/форма.

### 3.3 Книга / PDF
- Экспорт книги возможен **только если у пользователя есть ≥1 путешествие**.
- Функционально экспорт реализован через HTML preview + печать браузера (`Cmd/Ctrl+P → Save as PDF`) в web.

### 3.4 Типы контента
- Статейного раздела нет.
- Используем контент путешествий и существующие секции:
  - «Рекомендации месяца»
  - «Популярные»
  - «Рядом с тобой»

---

## 4) Экраны и навигация
### 4.1 `Home` (новый экран, дефолтный)
Назначение:
- объяснить ценность
- обучить «как пользоваться»
- привести к действиям: создать путешествие → собрать книгу/PDF
- при этом дать быстрый выход в «Поиск»

### 4.2 `Поиск` (существующий экран)
Назначение:
- поиск и фильтры (как сейчас)
- сетка карточек путешествий

### 4.3 `Экспорт` (`/export`, существующий)
Назначение:
- выбрать путешествия
- настроить книгу
- сохранить/распечатать PDF

### 4.4 `Создание путешествия` (существующий)
Назначение:
- добавить/отредактировать путешествие

### 4.5 `Auth` (существующий)
Назначение:
- вход/регистрация (email/пароль)

---

## 5) UX-спецификация Home (структура)

### Блок A — Hero (первый экран, must-have)
**Цель:** показать «вау» (книга → PDF) и дать 2 траектории: «создать» и «искать».

Текст (рекомендация):
- Заголовок: **«Твоя книга путешествий»**
- Подзаголовок: «Добавляй поездки, фото и заметки — и собирай красивую книгу в PDF для печати.»

CTA (по состоянию):
- Гость:
  - Primary: `Создать свою книгу` → `Auth`
  - Secondary: `Открыть Поиск`
- Авторизован, 0 путешествий:
  - Primary: `Добавить первое путешествие` → `CreateTravel`
  - Secondary: `Открыть Поиск`
- Авторизован, ≥1 путешествие:
  - Primary: `Собрать PDF‑книгу` → `/export`
  - Secondary: `Открыть Поиск`

Дополнительно:
- На первом экране должен присутствовать визуальный пример результата (скрин/мини-превью страницы книги).

### Блок B — «Как это работает» (3 шага, must-have)
1) Добавь путешествие
2) Настрой книгу (стиль/обложка)
3) Сохрани в PDF (Cmd/Ctrl+P → Save as PDF)

### Блок C — «Примеры оформления»
- Галерея/слайдер с примерами:
  - обложка
  - оглавление
  - карта
  - галерея
- Цель: показать «вау» без печати «чужих маршрутов».

### Блок D — «Вдохновение» (на основе существующих данных)
Секции:
- `Рекомендации месяца`
- `Популярные`
- `Рядом с тобой` (если гео недоступно — fallback на «Популярные»)

У каждой секции:
- CTA `Смотреть в Поиске` (ведёт на экран «Поиск»)

### Блок E — Финальный CTA
- Текст: «Готов(а) начать книгу?»
- Кнопка: `Добавить путешествие` / `Создать свою книгу` (зависит от auth)

---

## 6) «Очень явный переход на Поиск» (Acceptance Criteria)
- **AC-Search-1:** В верхнем меню есть пункт **«Поиск»** (иконка лупы + текст).
- **AC-Search-2:** На Home в первом экране есть заметная кнопка **`Открыть Поиск`**.
- **AC-Search-3:** Переход Home → Поиск происходит **в 1 клик**, без промежуточных экранов.
- **AC-Search-4:** Текущий UX поиска/фильтров остаётся как есть (минимальные изменения).

Рекомендация (не обязательна, но желательна):
- На Home можно добавить мини-поле поиска (read-only), которое при клике открывает «Поиск».

---

## 7) Авторизация и возврат в intent
Если гость нажимает:
- `Создать свою книгу`
- `Добавить путешествие`
- `Собрать PDF‑книгу`

Требования:
- Открыть `Auth`
- После успешного входа вернуть пользователя **в исходное действие** (intent/returnTo).

---

## 8) Пустые состояния (обязательные)

### 8.1 `/export` при 0 путешествий
- Заголовок: **«Чтобы собрать PDF‑книгу, добавьте хотя бы одно путешествие»**
- Primary CTA: `Добавить путешествие`
- Secondary CTA: `Открыть Поиск`

### 8.2 Home (авторизован, 0 путешествий)
- Подсказка возле CTA: «Добавь первое путешествие — и сможешь собрать книгу в PDF.»

---

## 9) Аналитика (MVP события)
- `HomeViewed` (authState, travelsCountBucket: 0 / 1-3 / 4+)
- `HomeClick_OpenSearch`
- `HomeClick_CreateBook`
- `HomeClick_AddFirstTravel`
- `HomeClick_BuildPdf`
- `AuthViewed` (source=home, intent)
- `AuthSuccess` (source=home, intent)
- `CreateTravelStarted` / `CreateTravelCompleted` (source=home)
- `ExportViewed`
- `ExportEmptyStateShown`
- `ExportStart` (нажатие Preview/Save)
- Guardrail: `SearchStarted`, `SearchFilterApplied`

---

## 10) Этапы внедрения

### MVP
- Home (новый дефолтный экран)
- Явный переход в «Поиск» (пункт меню + CTA на первом экране)
- Intent-редиректы после auth
- Empty state для `/export` при 0 путешествий
- Секции вдохновения: «месяц / популярные / рядом»
- Минимальная аналитика событий

### v1
- «Прогресс книги» (например: 0/1 путешествий → 1/1 → «можно собирать PDF»)
- Персонализация (если нужно): упорядочивание секций по интересам/стране

---

## 11) Чеклист готовности (Definition of Done)
- Все acceptance criteria из разделов 6–8 выполнены.
- Home доступен как дефолтный вход.
- Переход в «Поиск» понятен и видим (в меню и на первом экране Home).
- `/export` не выглядит «сломано» при отсутствии путешествий.
- События аналитики отправляются.
