# Правила отображения карточек путешествий

## Общие принципы

### Единая высота карточек
- Все карточки должны иметь одинаковую высоту независимо от количества контента
- Высота определяется фиксированным размером изображения + высотой контентной области
- Контентная область имеет фиксированную (или минимальную) высоту, чтобы карточки не "прыгали"
- Место под мета-информацию (например, локация) резервируется даже если данные временно отсутствуют

### Структура карточки

#### 1. Изображение (всегда)
- Фиксированная высота (общий ориентир): 220px (мобайл), 200px (веб)
- Для TabTravelCard (вкладки/подборки): фиксированная высота задаётся пропсом `imageHeight` (сейчас: 150 native / 168 web)
- `fit="contain"` + `blurBackground=true`
- Вариант для табов/подборок (TabTravelCard): заголовок показывается в контентной части карточки (не overlay)

#### 2. Контентная область
Контентная область должна быть стабильной по высоте и включать как минимум:
- Заголовок (до 2 строк)
- Мета-строку (например, локация) — место зарезервировано всегда
- Строку действия (например, "Открыть") — место зарезервировано всегда

Мета-строка (локация) должна корректно работать с тем, что реально приходит с бэкенда:
- `countryName` обычно есть
- `city` может отсутствовать

### Правила отображения элементов контента

#### Автор
- Показывается если: `user.name` или `user.display_name` не пустые
- Иконка: `user` (Feather)
- Формат: "Имя автора"
- Кликабельный на вебе, открывает профиль автора

#### Страна
- Показывается если: `countryName` не пустая
- Отображается через компонент `CountriesList`
- Поддерживает список стран с форматированием "Страна1, Страна2, +N"

#### Просмотры
- Показываются если: `countUnicIpView` > 0
- Иконка: `eye` (Feather)
- Формат: отформатированное число (1K, 2.5K, etc.)

#### Бейджи
- **Новое**: если `created_at` < 7 дней
- **Популярное**: если `countUnicIpView` > порога популярности
- Отображаются в одной строке с gap: 8px

### Визуальная иерархия

1. **Изображение с названием** (всегда)
2. **Контентная область** (только при наличии данных)
   - Страна (если есть)
   - Автор + Просмотры (в одной строке)
   - Бейджи (отдельной строкой)

### Условия скрытия контентной области

Контентная область НЕ отображается если:
- Нет автора (`!user.name && !user.display_name`)
- Нет страны (`!countryName`)
- Нет просмотров (`!countUnicIpView || countUnicIpView === 0`)
- Нет бейджей (`!isNew && !isPopular`)

### Тестовые сценарии

1. **Полная карточка**: есть все элементы
2. **Карточка без автора**: есть страна, просмотры, бейджи
3. **Карточка без страны**: есть автор, просмотры, бейджи
4. **Карточка без просмотров**: есть автор, страна, бейджи
5. **Карточка без бейджей**: есть автор, страна, просмотры
6. **Карточка только с изображением**: нет никакой информации
7. **Карточка с частичной информацией**: комбинации различных элементов

### Регрессионные тесты

Каждый сценарий должен иметь тесты:
- Проверка отображения нужных элементов
- Проверка скрытия ненужных элементов
- Проверка одинаковой высоты карточек
- Проверка корректного форматирования данных
