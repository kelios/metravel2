# Тест-кейсы: Главная страница (/)

## Общая информация
- **Страница**: Главная (Home/Index)
- **URL**: `/` или `/index`
- **Компонент**: `app/(tabs)/index.tsx`
- **Приоритет**: P1 (Critical)

---

## TC-HOME-001: Загрузка главной страницы
**Приоритет**: P1  
**Предусловия**: Пользователь открывает приложение

### Шаги:
1. Открыть URL `/`
2. Дождаться полной загрузки страницы

### Ожидаемый результат:
- Страница загружается без ошибок
- Отображается заголовок "Твоя книга путешествий | Metravel"
- Видны основные элементы интерфейса
- Нет ошибок в консоли браузера

### Проверки:
- [ ] Страница отображается корректно
- [ ] SEO метатеги установлены правильно
- [ ] Canonical URL: `https://metravel.by/`
- [ ] Время загрузки < 3 сек

---

## TC-HOME-002: Отображение популярных путешествий
**Приоритет**: P1  
**Предусловия**: API доступен, есть данные о путешествиях

### Шаги:
1. Открыть главную страницу
2. Дождаться загрузки блока "Популярные путешествия"
3. Проверить отображение карточек

### Ожидаемый результат:
- Блок популярных путешествий отображается
- Видны карточки с изображениями
- Каждая карточка содержит: название, страну, изображение
- Карточки кликабельны

### Проверки:
- [ ] Отображается минимум 3 карточки
- [ ] Изображения загружаются корректно
- [ ] Клик по карточке открывает детальную страницу

---

## TC-HOME-003: Отображение путешествий месяца
**Приоритет**: P2  
**Предусловия**: API доступен, настроены путешествия месяца

### Шаги:
1. Открыть главную страницу
2. Найти блок "Путешествия месяца"
3. Проверить содержимое

### Ожидаемый результат:
- Блок "Путешествия месяца" отображается
- Карточки содержат актуальную информацию
- Данные загружаются через API `/api/travels/of-month/`

### Проверки:
- [ ] Блок виден на странице
- [ ] Карточки рендерятся без ошибок
- [ ] Переход на детальную страницу работает

---

## TC-HOME-004: Отображение случайных путешествий
**Приоритет**: P2  
**Предусловия**: В базе есть путешествия

### Шаги:
1. Открыть главную страницу
2. Найти блок со случайными путешествиями
3. Обновить страницу несколько раз

### Ожидаемый результат:
- Отображаются случайные путешествия
- При обновлении страницы карточки могут меняться
- Данные загружаются через API `/api/travels/random/`

### Проверки:
- [ ] Блок отображается
- [ ] Карточки разные при обновлении
- [ ] Нет дублирующихся карточек

---

## TC-HOME-005: Кнопка "Рассказать о путешествии"
**Приоритет**: P1  
**Предусловия**: Пользователь на главной странице

### Шаги:
1. Открыть главную страницу
2. Найти кнопку "Рассказать о путешествии"
3. Кликнуть на кнопку

### Ожидаемый результат:
- Кнопка видна и доступна
- При клике происходит одно из действий:
  - Переход на страницу логина (если не авторизован)
  - Открытие визарда создания путешествия (если авторизован)

### Проверки:
- [ ] Кнопка отображается
- [ ] Кнопка кликабельна
- [ ] Переход работает корректно

---

## TC-HOME-006: Навигация из главного меню
**Приоритет**: P1  
**Предусловия**: Пользователь на главной странице

### Шаги:
1. Открыть главную страницу
2. Найти навигационное меню
3. Кликнуть по каждому пункту меню

### Ожидаемый результат:
- Меню отображается корректно
- Все пункты кликабельны:
  - Главная
  - Беларусь (Путешествия)
  - Карта
  - Рулетка
  - Квесты

### Проверки:
- [ ] Все пункты меню видны
- [ ] Навигация работает без перезагрузки (SPA)
- [ ] Активный пункт меню выделен

---

## TC-HOME-007: Футер на главной странице
**Приоритет**: P2  
**Предусловия**: Страница полностью загружена

### Шаги:
1. Открыть главную страницу
2. Прокрутить до футера
3. Проверить все ссылки в футере

### Ожидаемый результат:
- Футер отображается внизу страницы
- Ссылки работают:
  - Политика конфиденциальности
  - Настройки cookies
  - О нас / Связаться

### Проверки:
- [ ] Футер виден
- [ ] Все ссылки кликабельны
- [ ] Переходы работают корректно

---

## TC-HOME-008: Cookie consent баннер
**Приоритет**: P1  
**Предусловия**: Первый визит пользователя (нет сохраненного согласия)

### Шаги:
1. Очистить cookies
2. Открыть главную страницу
3. Проверить отображение баннера

### Ожидаемый результат:
- Cookie баннер отображается
- Баннер не блокирует основной контент
- Доступны кнопки: "Принять все" и "Только необходимые"

### Проверки:
- [ ] Баннер виден при первом визите
- [ ] Кнопки работают
- [ ] После принятия баннер исчезает
- [ ] Согласие сохраняется в localStorage

---

## TC-HOME-009: Мобильная версия главной страницы
**Приоритет**: P1  
**Предусловия**: Открыто на мобильном устройстве или эмуляции

### Viewport для тестирования:
- 375x667 (iPhone SE)
- 390x844 (iPhone 12/13)
- 414x896 (iPhone 11)

### Шаги:
1. Открыть главную страницу на мобильном устройстве
2. Проверить адаптивность всех элементов
3. Прокрутить страницу вниз

### Ожидаемый результат:
- Все элементы адаптированы под мобильный экран
- Нет горизонтальной прокрутки
- Изображения загружаются в оптимальном размере
- Кнопки и ссылки достаточно большие для клика

### Проверки:
- [ ] Layout корректный
- [ ] Карточки отображаются в одну колонку
- [ ] Нижнее меню (Bottom Dock) работает
- [ ] Нет наложения элементов

---

## TC-HOME-010: SEO метатеги на главной
**Приоритет**: P2  
**Предусловия**: Доступ к просмотру исходного кода

### Шаги:
1. Открыть главную страницу
2. Проверить исходный код (View Source)
3. Найти SEO метатеги

### Ожидаемый результат:
Присутствуют метатеги:
```html
<title>Твоя книга путешествий | Metravel</title>
<meta name="description" content="Добавляй поездки, фото и заметки..." />
<link rel="canonical" href="https://metravel.by/" />
<meta property="og:title" content="..." />
<meta property="og:description" content="..." />
<meta property="og:image" content="..." />
<meta property="og:type" content="website" />
```

### Проверки:
- [ ] Title корректный
- [ ] Description заполнен
- [ ] Canonical URL правильный
- [ ] Open Graph теги присутствуют

---

## TC-HOME-011: Производительность главной страницы
**Приоритет**: P2  
**Предусловия**: Инструменты измерения (Lighthouse, WebPageTest)

### Шаги:
1. Открыть главную страницу
2. Запустить Lighthouse audit
3. Проанализировать метрики

### Ожидаемый результат:
- Performance score > 80
- First Contentful Paint < 1.5s
- Largest Contentful Paint < 2.5s
- Cumulative Layout Shift < 0.1
- Time to Interactive < 3.5s

### Проверки:
- [ ] Performance метрики в пределах нормы
- [ ] Нет блокирующих ресурсов
- [ ] Изображения оптимизированы

---

## TC-HOME-012: Обработка ошибок API
**Приоритет**: P1  
**Предусловия**: API недоступен или возвращает ошибку

### Шаги:
1. Имитировать недоступность API (DevTools Network → Offline)
2. Открыть главную страницу
3. Наблюдать поведение

### Ожидаемый результат:
- Страница не падает с ошибкой
- Отображается сообщение об ошибке или заглушка
- Есть возможность повторить запрос
- ErrorBoundary ловит ошибки

### Проверки:
- [ ] Graceful degradation работает
- [ ] Пользователь видит понятное сообщение
- [ ] Есть кнопка "Повторить"
- [ ] Консоль не содержит uncaught errors

---

## TC-HOME-013: Accessibility (a11y) главной страницы
**Приоритет**: P3  
**Предусловия**: Screen reader включен / Keyboard navigation

### Шаги:
1. Открыть главную страницу
2. Использовать Tab для навигации
3. Проверить через screen reader

### Ожидаемый результат:
- Все интерактивные элементы доступны через Tab
- Focus ring видим
- Alt текст на изображениях
- ARIA атрибуты корректны
- Логичный порядок фокуса

### Проверки:
- [ ] Keyboard navigation работает
- [ ] Focus visible
- [ ] Screen reader читает содержимое
- [ ] ARIA roles корректны

---

## TC-HOME-014: Browser Back Button
**Приоритет**: P2  
**Предусловия**: SPA режим

### Шаги:
1. Открыть главную страницу
2. Перейти на другую страницу (например, /travelsby)
3. Нажать кнопку "Назад" в браузере

### Ожидаемый результат:
- Возврат на главную страницу происходит без перезагрузки
- Состояние страницы восстанавливается
- URL в адресной строке: `/`

### Проверки:
- [ ] Навигация назад работает
- [ ] Нет полной перезагрузки страницы
- [ ] История браузера корректна

---

## TC-HOME-015: Загрузка при медленном интернете
**Приоритет**: P2  
**Предусловия**: Network throttling (Slow 3G)

### Шаги:
1. Включить Network Throttling → Slow 3G в DevTools
2. Открыть главную страницу
3. Наблюдать процесс загрузки

### Ожидаемый результат:
- Отображается индикатор загрузки / skeleton
- Страница не зависает
- Контент загружается постепенно (progressive loading)
- Нет бесконечных спиннеров

### Проверки:
- [ ] Loading state отображается
- [ ] Timeout не происходит
- [ ] Пользователь видит прогресс загрузки
- [ ] Контент рендерится по мере загрузки

---

## Покрытие автоматизацией

### Jest unit tests:
- Рендеринг компонента Home
- SEO метатеги
- Обработка ошибок

### Playwright E2E:
- `e2e/home-page.spec.ts` (если существует)
- Проверка основных элементов
- Навигация

### Связанные файлы:
- `app/(tabs)/index.tsx`
- `components/home/Home.tsx`
- `__tests__/app/index.test.tsx`
