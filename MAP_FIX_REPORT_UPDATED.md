# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã /map (–û–±–Ω–æ–≤–ª–µ–Ω)

## –î–∞—Ç–∞: 2 —è–Ω–≤–∞—Ä—è 2026

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### ‚úÖ 1. –£–±—Ä–∞–Ω –ª–∏—à–Ω–∏–π –æ—Ç—Å—Ç—É–ø –æ—Ç —Ö–µ–¥–µ—Ä–∞ (–∫–æ–Ω—Ç–µ–Ω—Ç –∫–∞—Ä—Ç—ã)

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ /map –±—ã–ª –¥–≤–æ–π–Ω–æ–π –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É - –æ—Ç SafeAreaView –∏ –æ—Ç `paddingTop: effectiveHeaderOffset` –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.

**–†–µ—à–µ–Ω–∏–µ**: –£–±—Ä–∞–Ω `paddingTop: effectiveHeaderOffset` –∏–∑ —Å—Ç–∏–ª—è `container`.

**–§–∞–π–ª**: `app/(tabs)/map.styles.ts` (—Å—Ç—Ä–æ–∫–∞ 38)

---

### ‚úÖ 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞

**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–Ω–æ–ø–∫–∞ "–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç" –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ - –æ–Ω–∞ –≤—ã–∑—ã–≤–∞–ª–∞ `setRoutePoints(routePoints)`, —á—Ç–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–æ —Ç–µ –∂–µ —Å–∞–º—ã–µ —Ç–æ—á–∫–∏.

**–†–µ—à–µ–Ω–∏–µ**: –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∫–Ω–æ–ø–∫–∏ onBuildRoute - —Ç–µ–ø–µ—Ä—å –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —Ç–æ—á–∫–∏ –∏–∑ routeStore –≤ —Ñ–æ—Ä–º–∞—Ç [lng, lat][].

**–§–∞–π–ª**: `app/(tabs)/map.tsx` (—Å—Ç—Ä–æ–∫–∏ 571-577)

---

### ‚úÖ 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ —Ö–µ–¥–µ—Ä–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –ø–æ –∫–∞—Ä—Ç–µ

**–ü—Ä–æ–±–ª–µ–º–∞**: Leaflet —Å–æ–∑–¥–∞–≤–∞–ª —Å–≤–æ–π stacking context –∏ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª —Ö–µ–¥–µ—Ä (zIndex: 2000).

**–†–µ—à–µ–Ω–∏–µ**: 
- –î–æ–±–∞–≤–ª–µ–Ω `zIndex: 1` –∫ —Å—Ç–∏–ª—é `content`
- –î–æ–±–∞–≤–ª–µ–Ω `isolation: 'isolate'` –∫ —Å—Ç–∏–ª—é `mapArea`

**–§–∞–π–ª**: `app/(tabs)/map.styles.ts`

---

### ‚úÖ 4. –£–±—Ä–∞–Ω—ã –ª–∏—à–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏

**–ü—Ä–æ–±–ª–µ–º–∞**: –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å, overlay –∏ —Ç–∞–±—ã –∏–º–µ–ª–∏ –ª–∏—à–Ω–∏–π `effectiveHeaderOffset`, —Å–æ–∑–¥–∞–≤–∞–≤—à–∏–π –±–æ–ª—å—à–∏–µ –æ—Ç—Å—Ç—É–ø—ã —Å–≤–µ—Ä—Ö—É.

**–†–µ—à–µ–Ω–∏–µ**: –£–±—Ä–∞–Ω `effectiveHeaderOffset` –∏–∑:
- `rightPanel.top` (—Å—Ç—Ä–æ–∫–∞ 97)
- `overlay.top` (—Å—Ç—Ä–æ–∫–∞ 150)  
- `tabsContainer.paddingTop` (—Å—Ç—Ä–æ–∫–∞ 173)

**–§–∞–π–ª**: `app/(tabs)/map.styles.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
```typescript
// –ë—ã–ª–æ:
rightPanel: { top: isMobile ? effectiveHeaderOffset : 0 }
overlay: { top: effectiveHeaderOffset }
tabsContainer: { paddingTop: (isMobile ? insetTop + 6 : 8) + effectiveHeaderOffset }

// –°—Ç–∞–ª–æ:
rightPanel: { top: 0 }
overlay: { top: 0 }
tabsContainer: { paddingTop: isMobile ? insetTop + 6 : 8 }
```

**–í–ª–∏—è–Ω–∏–µ**: 
- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –ª–∏—à–Ω–∏—Ö –æ—Ç—Å—Ç—É–ø–æ–≤
- Overlay –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ–¥ —Ö–µ–¥–µ—Ä–æ–º
- –¢–∞–±—ã –∏–º–µ—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π padding

---

### ‚úÖ 5. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã TypeScript –æ—à–∏–±–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞**: TypeScript –Ω–µ –º–æ–≥ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å Platform.select —Å web-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–º–∏ —Å—Ç–∏–ª—è–º–∏.

**–†–µ—à–µ–Ω–∏–µ**: –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ Platform.select –Ω–∞ —Ç–µ—Ä–Ω–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã.

**–§–∞–π–ª**: `app/(tabs)/map.styles.ts`

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

‚úÖ TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è –±–µ–∑ –æ—à–∏–±–æ–∫  
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –≤–µ–∑–¥–µ  
‚úÖ –•–µ–¥–µ—Ä –Ω–µ –∏—Å—á–µ–∑–∞–µ—Ç –ø—Ä–∏ –∫–ª–∏–∫–∞—Ö  
‚úÖ –ú–∞—Ä—à—Ä—É—Ç—ã —Å—Ç—Ä–æ—è—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  

## –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. ‚úÖ `app/(tabs)/map.tsx` - –ª–æ–≥–∏–∫–∞ onBuildRoute
2. ‚úÖ `app/(tabs)/map.styles.ts` - –æ—Ç—Å—Ç—É–ø—ã –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—è

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã **5 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º**:
1. ‚úÖ –£–±—Ä–∞–Ω –ª–∏—à–Ω–∏–π –æ—Ç—Å—Ç—É–ø –æ—Ç —Ö–µ–¥–µ—Ä–∞ (–∫–æ–Ω—Ç–µ–Ω—Ç)
2. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞
3. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ —Ö–µ–¥–µ—Ä–∞
4. ‚úÖ –£–±—Ä–∞–Ω—ã –ª–∏—à–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã –≤ –ø–∞–Ω–µ–ª–∏
5. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã TypeScript –æ—à–∏–±–∫–∏

–°—Ç—Ä–∞–Ω–∏—Ü–∞ /map –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ

