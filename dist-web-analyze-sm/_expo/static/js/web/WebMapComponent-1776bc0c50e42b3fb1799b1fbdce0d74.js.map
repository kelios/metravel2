{"version":3,"sources":["/components/travel/WebMapComponent.tsx","/components/MarkersListComponent.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback, useMemo } from 'react';\n// CSS загружается через CDN в Map.web.tsx\nimport MarkersListComponent from '../MarkersListComponent';\nimport { DESIGN_TOKENS } from '@/constants/designSystem';\n\ntype LeafletNS = any;\ntype ReactLeafletNS = typeof import('react-leaflet');\n\nconst reverseGeocode = async (latlng: any) => {\n    const response = await fetch(\n        `https://nominatim.openstreetmap.org/reverse?format=json&lat=${latlng.lat}&lon=${latlng.lng}&addressdetails=1`\n    );\n    return await response.json();\n};\n\ntype WebMapComponentProps = {\n    markers: any[];\n    onMarkersChange: (markers: any[]) => void;\n    categoryTravelAddress: any[];\n    countrylist: any[];\n    onCountrySelect: (countryId: any) => void;\n    onCountryDeselect: (countryId: any) => void;\n    travelId?: any;\n};\n\nconst WebMapComponent = ({\n    markers,\n    onMarkersChange,\n    categoryTravelAddress,\n    countrylist,\n    onCountrySelect,\n    onCountryDeselect,\n    travelId,\n}: WebMapComponentProps) => {\n    const [L, setL] = useState<LeafletNS | null>(null);\n    const [rl, setRl] = useState<ReactLeafletNS | null>(null);\n\n    useEffect(() => {\n        let cancelled = false;\n        if (typeof window === 'undefined') return;\n\n        const ensureLeafletCSS = () => {\n            const href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';\n            if (!document.querySelector(`link[href=\"${href}\"]`)) {\n                const link = document.createElement('link');\n                link.rel = 'stylesheet';\n                link.href = href;\n                document.head.appendChild(link);\n            }\n        };\n\n        const ensureLeaflet = async (): Promise<any> => {\n            const w = window as any;\n            if (w.L) return w.L;\n\n            ensureLeafletCSS();\n\n            if (!(ensureLeaflet as any)._loader) {\n                (ensureLeaflet as any)._loader = new Promise<void>((resolve, reject) => {\n                    const script = document.createElement('script');\n                    script.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';\n                    script.async = true;\n                    script.onload = () => resolve();\n                    script.onerror = (err) => {\n                        (ensureLeaflet as any)._loader = null;\n                        reject(err);\n                    };\n                    document.body.appendChild(script);\n                });\n            }\n\n            await (ensureLeaflet as any)._loader;\n            return w.L;\n        };\n\n        const load = async () => {\n            try {\n                const L = await ensureLeaflet();\n                const rlMod = await import('react-leaflet');\n                if (!cancelled) {\n                    setL(L);\n                    setRl(rlMod);\n                }\n            } catch {\n                if (!cancelled) {\n                    setL(null);\n                    setRl(null);\n                }\n            }\n        };\n\n        load();\n\n        return () => {\n            cancelled = true;\n        };\n    }, []);\n\n    const [editingIndex, setEditingIndex] = useState<number | null>(null);\n    const [activeIndex, setActiveIndex] = useState<number | null>(null);\n    const [isExpanded, setIsExpanded] = useState(false);\n    const [isWideLayout, setIsWideLayout] = useState(() => {\n        if (typeof window === 'undefined') return false;\n        return window.innerWidth >= 1024;\n    });\n    \n    // Локальное состояние маркеров для немедленного отображения изменений\n    const [localMarkers, setLocalMarkers] = useState(markers);\n    const updateTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n    const lastMarkersRef = useRef(markers);\n    \n    // Синхронизируем локальное состояние с пропсами только при реальных изменениях\n    useEffect(() => {\n        // Проверяем, действительно ли маркеры изменились (по длине и первому элементу)\n        const markersChanged = \n            markers.length !== lastMarkersRef.current.length ||\n            (markers.length > 0 && lastMarkersRef.current.length > 0 && \n             markers[0] !== lastMarkersRef.current[0]);\n        \n        if (markersChanged) {\n            setLocalMarkers(markers);\n            lastMarkersRef.current = markers;\n        }\n    }, [markers]);\n    \n    // Debounced обновление родительского компонента\n    const debouncedMarkersChange = useCallback((updatedMarkers: any[]) => {\n        // Обновляем локальное состояние немедленно для UI\n        setLocalMarkers(updatedMarkers);\n        \n        // Отменяем предыдущий таймер\n        if (updateTimeoutRef.current) {\n            clearTimeout(updateTimeoutRef.current);\n        }\n        \n        // Увеличен debounce до 1000ms для синхронизации с UpsertTravel\n        updateTimeoutRef.current = setTimeout(() => {\n            onMarkersChange(updatedMarkers);\n            lastMarkersRef.current = updatedMarkers;\n        }, 1000);\n    }, [onMarkersChange]);\n    \n    // Cleanup при размонтировании\n    useEffect(() => {\n        return () => {\n            if (updateTimeoutRef.current) {\n                clearTimeout(updateTimeoutRef.current);\n            }\n        };\n    }, []);\n\n    useEffect(() => {\n        if (typeof window === 'undefined') return;\n\n        const handleResize = () => {\n            setIsWideLayout(window.innerWidth >= 1024);\n        };\n\n        window.addEventListener('resize', handleResize);\n        return () => window.removeEventListener('resize', handleResize);\n    }, []);\n\n    const isValidCoordinates = ({ lat, lng }: { lat: number; lng: number }) =>\n        lat >= -90 && lat <= 90 && lng >= -180 && lng <= 180;\n\n    const markerIcon = useMemo(() => {\n        if (!L) return null;\n        return new (L as any).Icon({\n            iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-orange.png',\n            iconRetinaUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-orange.png',\n            shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n            iconSize: [25, 41],\n            iconAnchor: [12, 41],\n            popupAnchor: [0, -41],\n            shadowSize: [41, 41],\n            shadowAnchor: [12, 41],\n        });\n    }, [L]);\n\n    const addMarker = async (latlng: any) => {\n        if (!isValidCoordinates(latlng)) return;\n\n        const geocodeData = await reverseGeocode(latlng);\n        const address = geocodeData?.display_name || '';\n        const country = geocodeData?.address?.country || '';\n\n        const newMarker = {\n            id: null,\n            lat: latlng.lat,\n            lng: latlng.lng,\n            address,\n            categories: [],\n            image: null,\n            country: null,\n        };\n\n        if (country) {\n            const foundCountry = countrylist.find((c: any) => c.title_ru === country);\n            if (foundCountry) {\n                newMarker.country = foundCountry.country_id;\n                onCountrySelect(foundCountry.country_id);\n            }\n        }\n\n        debouncedMarkersChange([...localMarkers, newMarker]);\n        setActiveIndex(localMarkers.length);\n    };\n\n    const handleEditMarker = (index: number) => {\n        setEditingIndex(index);\n        setActiveIndex(index);\n        setIsExpanded(true);\n    };\n\n    const handleMarkerChange = (index: number, field: string, value: any) => {\n        const updated = [...localMarkers];\n        updated[index] = { ...updated[index], [field]: value };\n        debouncedMarkersChange(updated);\n    };\n\n    const handleImageUpload = (index: number, imageUrl: string) => {\n        const updated = [...localMarkers];\n        updated[index].image = imageUrl;\n        debouncedMarkersChange(updated);\n    };\n\n    const handleMarkerRemove = (index: number) => {\n        const removed = localMarkers[index];\n        const updated = localMarkers.filter((_: any, i: any) => i !== index);\n        debouncedMarkersChange(updated);\n\n        if (removed.country) {\n            const stillExists = updated.some((m: any) => m.country === removed.country);\n            if (!stillExists) onCountryDeselect(removed.country);\n        }\n\n        if (editingIndex === index) setEditingIndex(null);\n    };\n\n    if (!L || !rl || !markerIcon) {\n        return (\n            <div style={{ padding: DESIGN_TOKENS.spacing.lg, color: DESIGN_TOKENS.colors.textMuted }}>\n                Загрузка карты…\n            </div>\n        );\n    }\n\n    const MapContainer: any = (rl as any).MapContainer;\n    const TileLayer: any = (rl as any).TileLayer;\n    const Marker: any = (rl as any).Marker;\n    const Popup: any = (rl as any).Popup;\n    const useMap: any = (rl as any).useMap;\n    const useMapEvents: any = (rl as any).useMapEvents;\n\n    const FitBounds = ({ markers }: { markers: any[] }) => {\n        const map = useMap();\n        const hasFit = useRef(false);\n\n        useEffect(() => {\n            if (!hasFit.current && markers.length > 0) {\n                const bounds = (L as any).latLngBounds(markers.map((m: any) => [m.lat, m.lng]));\n                map.fitBounds(bounds, { padding: [50, 50], maxZoom: 6 });\n                hasFit.current = true;\n            }\n        }, [markers, map]);\n\n        return null;\n    };\n\n    const MapClickHandler = ({ addMarker }: { addMarker: (latlng: any) => void }) => {\n        useMapEvents({\n            click(e: any) {\n                addMarker(e.latlng);\n            }\n        });\n        return null;\n    };\n\n    return (\n        <div style={{ padding: DESIGN_TOKENS.spacing.xxs }}>\n            <div style={isWideLayout ? styles.splitLayout : undefined}>\n                <div style={isWideLayout ? styles.mapPane : undefined}>\n                    <div style={isWideLayout ? styles.mapCard : undefined}>\n                        <div style={!isWideLayout ? styles.mobileMapShell : undefined}>\n                            {!isWideLayout && (\n                                <button\n                                    onClick={() => setIsExpanded(!isExpanded)}\n                                    style={styles.mobileToggleButton}\n                                    type=\"button\"\n                                >\n                                    {isExpanded\n                                        ? `Скрыть точки (${localMarkers.length})`\n                                        : `Точки (${localMarkers.length})`}\n                                </button>\n                            )}\n\n                            <MapContainer\n                                center={[51.505, -0.09]}\n                                zoom={13}\n                                style={{ height: isWideLayout ? 600 : 460, width: '100%' }}\n                            >\n                                <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\n                                <MapClickHandler addMarker={addMarker} />\n                                <FitBounds markers={localMarkers} />\n                                {localMarkers.map((marker: any, idx: number) => (\n                                    <Marker\n                                        key={idx}\n                                        position={[marker.lat, marker.lng]}\n                                        icon={markerIcon}\n                                        eventHandlers={{\n                                            click: () => {\n                                                setActiveIndex(idx);\n                                                setIsExpanded(true);\n                                            },\n                                        }}\n                                    >\n                                        <Popup>\n                                            <div style={styles.popupContent}>\n                                                {marker.image && (\n                                                    <img src={marker.image} alt=\"Фото\" style={styles.popupImage} />\n                                                )}\n                                                <p><strong>Адрес:</strong> {marker.address || 'Не указан'}</p>\n                                                <p><strong>Категории:</strong>\n                                                    {marker.categories.length > 0\n                                                        ? marker.categories\n                                                            .map((catId: any) => {\n                                                                const found = categoryTravelAddress.find((c: any) => c.id === catId);\n                                                                return found ? found.name : `ID: ${catId}`;\n                                                            })\n                                                            .join(', ')\n                                                        : 'Не выбрано'}\n                                                </p>\n                                                <div style={styles.popupButtons}>\n                                                    <button\n                                                        onClick={(e) => {\n                                                            e.stopPropagation();\n                                                            handleEditMarker(idx);\n                                                        }}\n                                                        style={styles.editButton}\n                                                    >\n                                                        Редактировать\n                                                    </button>\n                                                    <button\n                                                        onClick={(e) => {\n                                                            e.stopPropagation();\n                                                            handleMarkerRemove(idx);\n                                                        }}\n                                                        style={styles.deleteButton}\n                                                    >\n                                                        Удалить\n                                                    </button>\n                                                </div>\n                                            </div>\n                                        </Popup>\n                                    </Marker>\n                                ))}\n                            </MapContainer>\n\n                            {!isWideLayout && isExpanded && (\n                                <div style={styles.mobileSheet}>\n                                    <div style={styles.mobileSheetHandleRow}>\n                                        <div style={styles.mobileSheetHandle} />\n                                    </div>\n                                    <div style={styles.mobileSheetHeader}>\n                                        <div style={styles.mobileSheetTitle}>Точки</div>\n                                        <button\n                                            type=\"button\"\n                                            onClick={() => setIsExpanded(false)}\n                                            style={styles.mobileSheetClose}\n                                        >\n                                            ✕\n                                        </button>\n                                    </div>\n                                    <div style={styles.mobileSheetBody}>\n                                        <MarkersListComponent\n                                            markers={localMarkers}\n                                            categoryTravelAddress={categoryTravelAddress}\n                                            handleMarkerChange={handleMarkerChange}\n                                            handleImageUpload={handleImageUpload}\n                                            handleMarkerRemove={handleMarkerRemove}\n                                            editingIndex={editingIndex}\n                                            setEditingIndex={setEditingIndex}\n                                            activeIndex={activeIndex}\n                                            setActiveIndex={setActiveIndex}\n                                            travelId={travelId}\n                                        />\n                                    </div>\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                </div>\n\n                <div\n                    id=\"markers-list-root\"\n                    style={isWideLayout ? styles.listPane : { marginTop: DESIGN_TOKENS.spacing.lg }}\n                >\n                    {isWideLayout ? (\n                        <div style={styles.listScrollArea}>\n                            <MarkersListComponent\n                                markers={localMarkers}\n                                categoryTravelAddress={categoryTravelAddress}\n                                handleMarkerChange={handleMarkerChange}\n                                handleImageUpload={handleImageUpload}\n                                handleMarkerRemove={handleMarkerRemove}\n                                editingIndex={editingIndex}\n                                setEditingIndex={setEditingIndex}\n                                activeIndex={activeIndex}\n                                setActiveIndex={setActiveIndex}\n                                travelId={travelId}\n                            />\n                        </div>\n                    ) : null}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst styles: any = {\n    splitLayout: {\n        display: 'flex',\n        flexDirection: 'row',\n        gap: '16px',\n        alignItems: 'flex-start',\n    },\n    mapPane: {\n        flex: '1 1 60%',\n        minWidth: 0,\n    },\n    listPane: {\n        flex: '0 0 420px',\n        maxWidth: '420px',\n        border: `1px solid ${DESIGN_TOKENS.colors.border}`,\n        borderRadius: `${DESIGN_TOKENS.radii.md}px`,\n        padding: `${DESIGN_TOKENS.spacing.md}px`,\n        height: '600px',\n        overflow: 'hidden',\n        backgroundColor: DESIGN_TOKENS.colors.backgroundSecondary,\n        boxShadow: DESIGN_TOKENS.shadows.card,\n    },\n    listScrollArea: {\n        height: '100%',\n        overflowY: 'auto',\n        paddingRight: '6px',\n    },\n    mapCard: {\n        border: `1px solid ${DESIGN_TOKENS.colors.border}`,\n        borderRadius: `${DESIGN_TOKENS.radii.md}px`,\n        overflow: 'hidden',\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        boxShadow: DESIGN_TOKENS.shadows.card,\n    },\n    popupContent: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '8px',\n        width: '240px',\n    },\n    popupImage: {\n        width: '100%',\n        height: '120px',\n        objectFit: 'cover',\n        borderRadius: `${DESIGN_TOKENS.radii.sm}px`,\n        backgroundColor: DESIGN_TOKENS.colors.backgroundSecondary,\n    },\n    popupButtons: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        gap: '8px',\n    },\n    editButton: {\n        backgroundColor: DESIGN_TOKENS.colors.primary,\n        color: DESIGN_TOKENS.colors.textInverse,\n        border: 'none',\n        padding: '6px 12px',\n        borderRadius: `${DESIGN_TOKENS.radii.sm}px`,\n        cursor: 'pointer',\n    },\n    deleteButton: {\n        backgroundColor: DESIGN_TOKENS.colors.danger,\n        color: DESIGN_TOKENS.colors.textInverse,\n        border: 'none',\n        padding: '6px 12px',\n        borderRadius: `${DESIGN_TOKENS.radii.sm}px`,\n        cursor: 'pointer',\n    },\n    toggleButton: {\n        padding: '8px 16px',\n        backgroundColor: DESIGN_TOKENS.colors.primary,\n        color: DESIGN_TOKENS.colors.textInverse,\n        border: 'none',\n        borderRadius: `${DESIGN_TOKENS.radii.sm}px`,\n        cursor: 'pointer',\n        marginBottom: '8px',\n        fontWeight: 'bold',\n        fontSize: '14px',\n    },\n    mobileMapShell: {\n        position: 'relative',\n    },\n    mobileToggleButton: {\n        position: 'absolute',\n        zIndex: 1001,\n        top: '10px',\n        right: '10px',\n        padding: '8px 12px',\n        backgroundColor: DESIGN_TOKENS.colors.primary,\n        color: DESIGN_TOKENS.colors.textInverse,\n        border: 'none',\n        borderRadius: `${DESIGN_TOKENS.radii.pill}px`,\n        cursor: 'pointer',\n        fontWeight: 700,\n        fontSize: '13px',\n        boxShadow: DESIGN_TOKENS.shadows.hover,\n    },\n    mobileSheet: {\n        position: 'absolute',\n        zIndex: 1002,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        maxHeight: '72%',\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        borderTopLeftRadius: `${DESIGN_TOKENS.radii.lg}px`,\n        borderTopRightRadius: `${DESIGN_TOKENS.radii.lg}px`,\n        borderTop: `1px solid ${DESIGN_TOKENS.colors.border}`,\n        boxShadow: DESIGN_TOKENS.shadows.modal,\n        overflow: 'hidden',\n    },\n    mobileSheetHandleRow: {\n        display: 'flex',\n        justifyContent: 'center',\n        paddingTop: '8px',\n        paddingBottom: '6px',\n    },\n    mobileSheetHandle: {\n        width: '44px',\n        height: '4px',\n        borderRadius: '999px',\n        backgroundColor: DESIGN_TOKENS.colors.border,\n    },\n    mobileSheetHeader: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        padding: '10px 12px',\n        borderBottom: `1px solid ${DESIGN_TOKENS.colors.border}`,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n    },\n    mobileSheetTitle: {\n        fontSize: '14px',\n        fontWeight: 800,\n        color: DESIGN_TOKENS.colors.text,\n    },\n    mobileSheetClose: {\n        border: 'none',\n        background: 'transparent',\n        cursor: 'pointer',\n        fontSize: '18px',\n        lineHeight: '18px',\n        padding: '4px 6px',\n        color: DESIGN_TOKENS.colors.textMuted,\n    },\n    mobileSheetBody: {\n        overflowY: 'auto',\n        WebkitOverflowScrolling: 'touch',\n        padding: '10px 10px 18px',\n        maxHeight: 'calc(72vh - 52px)',\n    },\n};\n\nexport default WebMapComponent;\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { Feather } from '@expo/vector-icons';\nimport { DESIGN_TOKENS } from '@/constants/designSystem';\nimport { MarkerData } from \"@/src/types/types\";\nimport ImageUploadComponent from '@/components/imageUpload/ImageUploadComponent';\nimport MultiSelectField from '@/components/MultiSelectField';\n\nconst MultiSelectFieldAny: any = MultiSelectField;\n\ninterface MarkersListComponentProps {\n    markers: MarkerData[];\n    categoryTravelAddress: { id: number; name: string }[];\n    handleMarkerChange: (index: number, field: string, value: string | string[]) => void;\n    handleImageUpload: (index: number, imageUrl: string) => void;\n    handleMarkerRemove: (index: number) => void;\n    editingIndex: number | null;\n    setEditingIndex: (index: number | null) => void;\n    activeIndex?: number | null;\n    setActiveIndex?: (index: number | null) => void;\n    travelId?: string | null;\n}\n\nconst MarkersListComponent: React.FC<MarkersListComponentProps> = ({\n                                                                       markers,\n                                                                       categoryTravelAddress,\n                                                                       handleMarkerChange,\n                                                                       handleImageUpload,\n                                                                       handleMarkerRemove,\n                                                                       editingIndex,\n                                                                       setEditingIndex,\n                                                                       activeIndex,\n                                                                       setActiveIndex,\n                                                                   }) => {\n    const [search, setSearch] = useState('');\n    const onRemove = useCallback((index: number) => handleMarkerRemove(index), [handleMarkerRemove]);\n    const onEdit = useCallback((index: number) => {\n        setEditingIndex(index);\n        setActiveIndex?.(index);\n    }, [setEditingIndex, setActiveIndex]);\n\n    const filteredMarkers = useMemo(\n        () =>\n            markers\n                .map((marker, index) => ({ marker, index }))\n                .filter(({ marker }) => {\n                    if (!search.trim()) return true;\n                    const q = search.toLowerCase();\n                    return (marker.address || '').toLowerCase().includes(q);\n                }),\n        [markers, search],\n    );\n\n    useEffect(() => {\n        if (activeIndex == null) return;\n        const el = document.getElementById(`marker-${activeIndex}`);\n        if (el) {\n            el.scrollIntoView({ behavior: 'smooth', block: 'center' });\n        }\n    }, [activeIndex]);\n\n    return (\n        <div style={styles.container}>\n            <div style={styles.headerRow}>\n                <div style={styles.headerTitle}>Точки</div>\n                <div style={styles.headerBadge}>{markers.length}</div>\n            </div>\n            {markers.length > 0 && (\n                <div style={styles.searchRow}>\n                    <Feather name=\"search\" size={14} color={palette.textMuted} />\n                    <input\n                        type=\"text\"\n                        value={search}\n                        onChange={e => setSearch(e.target.value)}\n                        placeholder=\"Поиск по адресу\"\n                        style={styles.searchInput}\n                    />\n                </div>\n            )}\n            {markers.length === 0 ? (\n                <p style={styles.emptyText}>\n                    Пока нет ни одной точки маршрута. Нажмите на карту, чтобы добавить первую.\n                </p>\n            ) : (\n                <div style={styles.list}>\n                    {filteredMarkers.map(({ marker, index }) => {\n                        const isEditing = editingIndex === index;\n\n                        const hasCategories = marker.categories && marker.categories.length > 0;\n                        const categoriesLabel = hasCategories\n                            ? `${marker.categories.length} ${marker.categories.length === 1 ? 'категория' : 'категории'}`\n                            : 'Категории не выбраны';\n                        const hasImage = !!marker.image;\n\n                        const isActive = activeIndex === index;\n\n                        return (\n                            <div\n                                key={index}\n                                id={`marker-${index}`}\n                                style={{\n                                    ...(styles.markerItem as React.CSSProperties),\n                                    ...(isEditing ? (styles.editingItem as React.CSSProperties) : {}),\n                                    ...(isActive ? (styles.activeItem as React.CSSProperties) : {}),\n                                }}\n                                onClick={() => setActiveIndex?.(index)}\n                            >\n                                <div style={styles.row}>\n                                    <div style={styles.indexBadge}>{index + 1}</div>\n                                    <div style={styles.thumbnailWrapper}>\n                                        {hasImage ? (\n                                            <img src={marker.image} alt=\"Фото\" style={styles.previewImage} />\n                                        ) : (\n                                            <div style={styles.placeholderImage}>Нет фото</div>\n                                        )}\n                                    </div>\n                                    <div style={styles.previewText}>\n                                        <div style={styles.markerTitle} title={marker.address || 'Без адреса'}>\n                                            {marker.address || 'Без адреса'}\n                                        </div>\n                                        <div style={styles.metaRow}>\n                                            <span style={styles.badge}>{categoriesLabel}</span>\n                                            {hasImage && <span style={styles.badgeMuted}>Есть фото</span>}\n                                        </div>\n                                    </div>\n                                    <div style={styles.actions}>\n                                        <button\n                                            onClick={(e) => {\n                                                e.stopPropagation();\n                                                onEdit(index);\n                                            }}\n                                            style={styles.editButton}\n                                            type=\"button\"\n                                        >\n                                            <Feather name=\"edit-2\" size={13} color={palette.primaryDark} />\n                                            <span>Редактировать</span>\n                                        </button>\n                                        <button\n                                            onClick={(e) => {\n                                                e.stopPropagation();\n                                                onRemove(index);\n                                            }}\n                                            style={styles.deleteButton}\n                                            type=\"button\"\n                                        >\n                                            <Feather name=\"trash-2\" size={13} color={palette.dangerDark} />\n                                            <span>Удалить</span>\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n            )}\n\n            {editingIndex !== null && markers[editingIndex] && (\n                <EditMarkerModal\n                    marker={markers[editingIndex]}\n                    index={editingIndex}\n                    categoryTravelAddress={categoryTravelAddress}\n                    handleMarkerChange={handleMarkerChange}\n                    handleImageUpload={handleImageUpload}\n                    onClose={() => setEditingIndex(null)}\n                    onRemove={onRemove}\n                />\n            )}\n        </div>\n    );\n};\n\ninterface EditMarkerModalProps {\n    marker: MarkerData;\n    index: number;\n    categoryTravelAddress: { id: number; name: string }[];\n    handleMarkerChange: (index: number, field: string, value: string | string[]) => void;\n    handleImageUpload: (index: number, imageUrl: string) => void;\n    onClose: () => void;\n    onRemove: (index: number) => void;\n}\n\nconst EditMarkerModal: React.FC<EditMarkerModalProps> = ({\n                                                             marker,\n                                                             index,\n                                                             categoryTravelAddress,\n                                                             handleMarkerChange,\n                                                             handleImageUpload,\n                                                             onClose,\n                                                             onRemove,\n                                                         }) => {\n    const [address, setAddress] = useState<string>(marker.address || '');\n    const [categories, setCategories] = useState<any[]>(marker.categories || []);\n\n    useEffect(() => {\n        setAddress(marker.address || '');\n        setCategories(marker.categories || []);\n    }, [marker, index]);\n\n    if (typeof document === 'undefined') return null;\n\n    const handleSave = () => {\n        handleMarkerChange(index, 'address', address);\n        handleMarkerChange(index, 'categories', categories);\n        onClose();\n    };\n\n    const handleDelete = () => {\n        const shortAddr = address || marker.address || 'эту точку';\n        // eslint-disable-next-line no-alert\n        const confirmed = window.confirm(`Удалить точку \"${shortAddr}\" из маршрута? Это действие нельзя отменить.`);\n        if (!confirmed) return;\n        onRemove(index);\n        onClose();\n    };\n\n    return ReactDOM.createPortal(\n        <div style={styles.modalOverlay}>\n            <div style={styles.modalBackdrop} onClick={onClose} />\n            <div style={styles.modalContent}>\n                <div style={styles.editForm}>\n                    <div style={styles.editHeader}>\n                        <div>\n                            <div style={styles.editTitle}>Точка #{index + 1}</div>\n                            <div style={styles.editSubtitle}>{marker.address || 'Без адреса'}</div>\n                        </div>\n                        <button\n                            type=\"button\"\n                            onClick={onClose}\n                            style={styles.closeIconButton}\n                        >\n                            ×\n                        </button>\n                    </div>\n\n                    <div style={styles.helperText}>\n                        Опишите место так, чтобы вы сами через год быстро поняли, что здесь смотреть или делать.\n                    </div>\n\n                    <div style={styles.field}>\n                        <label style={styles.fieldLabel}>Адрес точки</label>\n                        <input\n                            type=\"text\"\n                            value={address}\n                            onChange={(e) => setAddress(e.target.value)}\n                            style={styles.input}\n                            placeholder=\"Например: Парковка у озера Sucha\"\n                        />\n                        <div style={styles.fieldHint}>\n                            Можно оставить адрес из карты или сократить до понятного названия места.\n                        </div>\n                    </div>\n\n                    <div style={styles.field}>\n                        <label style={styles.fieldLabel}>Категории точки</label>\n                        <MultiSelectFieldAny\n                            label=\"\"\n                            items={categoryTravelAddress}\n                            value={categories}\n                            onChange={(selected: any) => setCategories(selected as any[])}\n                            labelField=\"name\"\n                            valueField=\"id\"\n                        />\n                        <div style={styles.fieldHint}>\n                            Например: смотровая площадка, кемпинг, парковка, заправка, кафе.\n                        </div>\n                    </div>\n\n                    <div style={styles.field}>\n                        <label style={styles.fieldLabel}>Изображение точки</label>\n                        {marker.id == null ? (\n                            <div style={styles.fieldHint}>\n                                Фото можно будет добавить после сохранения маршрута.\n                                Нажмите «Сохранить маршрут» внизу шага и затем откройте точку снова.\n                            </div>\n                        ) : (\n                            <>\n                                <ImageUploadComponent\n                                    collection=\"travelImageAddress\"\n                                    idTravel={String(marker.id)}\n                                    oldImage={marker.image}\n                                    onUpload={(imageUrl) => handleImageUpload(index, imageUrl)}\n                                />\n                                <div style={styles.fieldHint}>\n                                    Фото поможет путешественникам узнать место. Можно загрузить одно главное изображение.\n                                </div>\n                            </>\n                        )}\n                    </div>\n\n                    <div style={styles.actionsRow}>\n                        <div style={styles.primaryActions}>\n                            <button\n                                type=\"button\"\n                                onClick={handleSave}\n                                style={styles.primaryButton}\n                            >\n                                Сохранить\n                            </button>\n                            <button\n                                type=\"button\"\n                                onClick={onClose}\n                                style={styles.secondaryButton}\n                            >\n                                Отмена\n                            </button>\n                        </div>\n                        <button\n                            type=\"button\"\n                            onClick={handleDelete}\n                            style={styles.deleteTextButton}\n                        >\n                            <Feather name=\"trash-2\" size={14} color={palette.danger} />\n                            <span>Удалить точку</span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>,\n        document.body,\n    );\n};\n\nconst palette = DESIGN_TOKENS.colors;\n\nconst styles: any = {\n    container: {\n        backgroundColor: 'transparent',\n        padding: '0',\n    },\n    headerRow: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        marginBottom: '10px',\n    },\n    headerTitle: {\n        fontSize: '14px',\n        fontWeight: 700,\n        letterSpacing: '0.2px',\n        color: palette.text,\n    },\n    headerBadge: {\n        fontSize: '12px',\n        fontWeight: 700,\n        padding: '2px 10px',\n        borderRadius: '999px',\n        backgroundColor: palette.primarySoft,\n        color: palette.primaryDark,\n    },\n    searchRow: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: '8px',\n        padding: '10px 12px',\n        borderRadius: '10px',\n        border: `1px solid ${palette.border}`,\n        backgroundColor: palette.surface,\n        marginBottom: '12px',\n    },\n    searchInput: {\n        width: '100%',\n        border: 'none',\n        outline: 'none',\n        fontSize: '13px',\n        color: palette.text,\n        backgroundColor: 'transparent',\n    },\n    emptyText: {\n        textAlign: 'center',\n        color: palette.textMuted,\n        fontSize: '13px',\n        lineHeight: 1.4,\n    },\n    list: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '8px',\n    },\n    markerItem: {\n        border: `1px solid ${palette.border}`,\n        borderRadius: '12px',\n        padding: '10px 12px',\n        backgroundColor: palette.surface,\n        boxShadow: DESIGN_TOKENS.shadows.card,\n        cursor: 'pointer',\n        transition: 'border-color 0.15s ease, box-shadow 0.15s ease',\n    },\n    editingItem: {\n        border: `1px solid ${palette.borderAccent}`,\n        boxShadow: `0 0 0 3px ${palette.primarySoft}`,\n    },\n    activeItem: {\n        border: `1px solid ${palette.borderAccent}`,\n        boxShadow: `0 0 0 3px ${palette.accentSoft}`,\n    },\n    row: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: '8px',\n    },\n    indexBadge: {\n        width: '26px',\n        height: '26px',\n        borderRadius: '999px',\n        backgroundColor: palette.backgroundSecondary,\n        color: palette.text,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        fontSize: '12px',\n        fontWeight: 700,\n        flexShrink: 0,\n    },\n    thumbnailWrapper: {\n        width: '48px',\n        height: '48px',\n        borderRadius: '12px',\n        overflow: 'hidden',\n        backgroundColor: palette.backgroundSecondary,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        flexShrink: 0,\n    },\n    previewImage: {\n        width: '100%',\n        height: '100%',\n        objectFit: 'contain',\n    },\n    placeholderImage: {\n        fontSize: '10px',\n        color: palette.textSubtle,\n        textAlign: 'center',\n        padding: '4px',\n        lineHeight: 1.2,\n    },\n    previewText: {\n        flex: 1,\n        minWidth: 0,\n    },\n    markerTitle: {\n        fontSize: '13px',\n        fontWeight: 700,\n        color: palette.text,\n        lineHeight: 1.25,\n        marginBottom: '4px',\n        display: '-webkit-box',\n        WebkitLineClamp: 2,\n        WebkitBoxOrient: 'vertical',\n        overflow: 'hidden',\n    },\n    metaRow: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        gap: '4px',\n    },\n    badge: {\n        fontSize: '11px',\n        padding: '2px 6px',\n        borderRadius: '999px',\n        backgroundColor: palette.accentSoft,\n        color: palette.accentDark,\n    },\n    badgeMuted: {\n        fontSize: '11px',\n        padding: '2px 6px',\n        borderRadius: '999px',\n        backgroundColor: palette.backgroundSecondary,\n        color: palette.textMuted,\n    },\n    actions: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '4px',\n        marginLeft: '8px',\n        flexShrink: 0,\n    },\n    editButton: {\n        backgroundColor: palette.primarySoft,\n        color: palette.text,\n        border: `1px solid ${palette.border}`,\n        padding: '6px 10px',\n        borderRadius: '10px',\n        cursor: 'pointer',\n        fontSize: '11px',\n        whiteSpace: 'nowrap',\n        display: 'inline-flex',\n        alignItems: 'center',\n        gap: '6px',\n        fontWeight: 600,\n    },\n    deleteButton: {\n        backgroundColor: palette.dangerSoft,\n        color: palette.dangerDark,\n        border: `1px solid ${palette.dangerLight}`,\n        padding: '6px 10px',\n        borderRadius: '10px',\n        cursor: 'pointer',\n        fontSize: '11px',\n        whiteSpace: 'nowrap',\n        display: 'inline-flex',\n        alignItems: 'center',\n        gap: '6px',\n        fontWeight: 600,\n    },\n    editForm: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '12px',\n    },\n    editHeader: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        marginBottom: '4px',\n    },\n    editTitle: {\n        fontSize: '14px',\n        fontWeight: 600,\n        color: palette.text,\n    },\n    editSubtitle: {\n        fontSize: '12px',\n        color: palette.textMuted,\n        marginTop: '2px',\n        maxWidth: '260px',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n    },\n    closeIconButton: {\n        border: 'none',\n        backgroundColor: 'transparent',\n        fontSize: '16px',\n        lineHeight: 1,\n        cursor: 'pointer',\n        color: palette.textMuted,\n        padding: '2px 6px',\n        borderRadius: '999px',\n    },\n    helperText: {\n        fontSize: '12px',\n        color: palette.textMuted,\n        lineHeight: 1.4,\n    },\n    field: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '4px',\n        fontSize: '12px',\n    },\n    fieldLabel: {\n        fontWeight: 500,\n        color: palette.text,\n    },\n    fieldHint: {\n        fontSize: '11px',\n        color: palette.textMuted,\n        lineHeight: 1.4,\n    },\n    input: {\n        width: '100%',\n        padding: '8px',\n        border: `1px solid ${palette.border}`,\n        borderRadius: '6px',\n        fontSize: '13px',\n        color: palette.text,\n        backgroundColor: palette.surface,\n    },\n    imagePreview: {\n        width: '100px',\n        height: '100px',\n        objectFit: 'cover',\n        borderRadius: '6px',\n        backgroundColor: palette.backgroundSecondary,\n        marginTop: '4px',\n    },\n    actionsRow: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        gap: '8px',\n        marginTop: '4px',\n        flexWrap: 'wrap',\n    },\n    primaryActions: {\n        display: 'flex',\n        gap: '8px',\n        flexWrap: 'wrap',\n    },\n    primaryButton: {\n        backgroundColor: palette.primary,\n        color: palette.textInverse,\n        border: 'none',\n        padding: '6px 14px',\n        borderRadius: '6px',\n        cursor: 'pointer',\n        fontSize: '13px',\n        fontWeight: 500,\n    },\n    secondaryButton: {\n        backgroundColor: palette.surface,\n        color: palette.text,\n        border: `1px solid ${palette.border}`,\n        padding: '6px 12px',\n        borderRadius: '6px',\n        cursor: 'pointer',\n        fontSize: '13px',\n    },\n    deleteTextButton: {\n        backgroundColor: 'transparent',\n        color: palette.danger,\n        border: 'none',\n        padding: '4px 0',\n        cursor: 'pointer',\n        fontSize: '12px',\n        display: 'inline-flex',\n        alignItems: 'center',\n        gap: '4px',\n        whiteSpace: 'nowrap',\n    },\n    modalOverlay: {\n        position: 'fixed',\n        inset: 0,\n        zIndex: 1000,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    modalBackdrop: {\n        position: 'absolute',\n        inset: 0,\n        backgroundColor: DESIGN_TOKENS.colors.overlay,\n    },\n    modalContent: {\n        position: 'relative',\n        backgroundColor: palette.surface,\n        borderRadius: '12px',\n        maxWidth: '720px',\n        width: '90%',\n        maxHeight: '90vh',\n        padding: '20px 24px',\n        boxShadow: DESIGN_TOKENS.shadows.modal,\n        overflowY: 'auto',\n    },\n};\n\nexport default React.memo(MarkersListComponent);\n"],"x_facebook_sources":[[{"names":["<global>","reverseGeocode","WebMapComponent","useEffect$argument_0","ensureLeafletCSS","ensureLeaflet","Promise$argument_0","script.onload","script.onerror","load","<anonymous>","useState$argument_0","debouncedMarkersChange","setTimeout$argument_0","handleResize","isValidCoordinates","useMemo$argument_0","addMarker","countrylist.find$argument_0","handleEditMarker","handleMarkerChange","handleImageUpload","handleMarkerRemove","localMarkers.filter$argument_0","updated.some$argument_0","FitBounds","markers.map$argument_0","MapClickHandler","useMapEvents$argument_0.click","button.props.onClick","localMarkers.map$argument_0","Marker.props.eventHandlers.click","marker.categories.map$argument_0","categoryTravelAddress.find$argument_0"],"mappings":"AAA;uBCQ;CDK;wBEY;cCY;iCCI;SDQ;8BEE;mECO;oCCI,eD;qCEC;qBFG;iBDE;SFK;qBME;SNc;eOI;SPE;KDC;qDSK;KTG;cCQ;KDW;+CUG;8CCU;SDG;KVC;cCG;eOC;SPI;KDC;cCE;6BWG;SXE;eOG,wDP;KDC;+BaE;4DbC;+BcE;KdY;sBeE;kDCkB,kCD;KfS;6BiBE;KjBI;+BkBE;KlBI;8BmBE;KnBI;+BoBE;4CCE,+BD;6CEI,yCF;KpBK;sBuBiB;kBtBI;mEuBE,0BvB;SsBI;KvBG;4ByBE;YCE;aDE;KzBG;6C2BU,gC3B;kD4BkB;mDCM;6CDG;iEEY;yGCC,0BD;6DFE;iEDM;yDCG;iEDM;yDCG;iC5BS;qD2BY,0B3B;CFkD"}],[{"names":["<global>","MarkersListComponent","onRemove","onEdit","useMemo$argument_0","markers.map$argument_0","markers.map.filter$argument_0","useEffect$argument_0","input.props.onChange","filteredMarkers.map$argument_0","div.props.onClick","button.props.onClick","EditMarkerModal.props.onClose","EditMarkerModal","handleSave","handleDelete","MultiSelectFieldAny.props.onChange","ImageUploadComponent.props.onUpload"],"mappings":"AAA;kECuB;iCCY,4CD;+BEC;KFG;QGG;qBCE,sCD;wBEC;iBFI,CH;cMI;KNM;kCOc,8BP;yCQY;yCCoB,6BD;qDEsB;6CFG;qDEQ;6CFG;qBRW;6BWW,2BX;CDM;wDaY;cNY;KMG;uBCI;KDI;yBEE;KFO;sCL8B,iCK;sCGe,mDH;8CIsB,gDJ;CbwC"}]],"names":["_react","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_interopRequireWildcard","_r","d","_MarkersListComponent","_interopRequireDefault","_designSystem","_jsxRuntime","reverseGeocode","async","response","fetch","latlng","lat","lng","json","styles","splitLayout","display","flexDirection","gap","alignItems","mapPane","flex","minWidth","listPane","maxWidth","border","DESIGN_TOKENS","colors","borderRadius","radii","md","padding","spacing","height","overflow","backgroundColor","backgroundSecondary","boxShadow","shadows","card","listScrollArea","overflowY","paddingRight","mapCard","surface","popupContent","width","popupImage","objectFit","sm","popupButtons","justifyContent","editButton","primary","color","textInverse","cursor","deleteButton","danger","toggleButton","marginBottom","fontWeight","fontSize","mobileMapShell","position","mobileToggleButton","zIndex","top","right","pill","hover","mobileSheet","left","bottom","maxHeight","borderTopLeftRadius","lg","borderTopRightRadius","borderTop","modal","mobileSheetHandleRow","paddingTop","paddingBottom","mobileSheetHandle","mobileSheetHeader","borderBottom","mobileSheetTitle","text","mobileSheetClose","background","lineHeight","textMuted","mobileSheetBody","WebkitOverflowScrolling","_e","WebMapComponent","markers","onMarkersChange","categoryTravelAddress","countrylist","onCountrySelect","onCountryDeselect","travelId","L","setL","useState","rl","setRl","useEffect","cancelled","ensureLeafletCSS","href","document","querySelector","link","createElement","rel","head","appendChild","ensureLeaflet","w","window","_loader","Promise","resolve","reject","script","src","onload","onerror","err","body","rlMod","paths","load","editingIndex","setEditingIndex","activeIndex","setActiveIndex","isExpanded","setIsExpanded","isWideLayout","setIsWideLayout","innerWidth","localMarkers","setLocalMarkers","updateTimeoutRef","useRef","lastMarkersRef","length","current","debouncedMarkersChange","useCallback","updatedMarkers","clearTimeout","setTimeout","handleResize","addEventListener","removeEventListener","isValidCoordinates","markerIcon","useMemo","Icon","iconUrl","iconRetinaUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","shadowAnchor","handleMarkerChange","index","field","value","updated","handleImageUpload","imageUrl","image","handleMarkerRemove","removed","filter","_","country","some","m","jsx","style","children","MapContainer","TileLayer","Marker","Popup","useMap","useMapEvents","FitBounds","map","hasFit","bounds","latLngBounds","fitBounds","maxZoom","MapClickHandler","addMarker","click","xxs","jsxs","undefined","onClick","type","center","zoom","url","geocodeData","address","display_name","newMarker","id","categories","foundCountry","find","c","title_ru","country_id","marker","idx","icon","eventHandlers","alt","catId","found","name","join","stopPropagation","marginTop","_reactDom","_vectorIcons","_ImageUploadComponent","_MultiSelectField","MultiSelectFieldAny","MultiSelectField","MarkersListComponent","search","setSearch","onRemove","onEdit","filteredMarkers","trim","q","toLowerCase","includes","el","getElementById","scrollIntoView","behavior","block","container","headerRow","headerTitle","headerBadge","searchRow","Feather","size","palette","onChange","target","placeholder","searchInput","emptyText","list","isEditing","categoriesLabel","hasImage","isActive","markerItem","editingItem","activeItem","row","indexBadge","thumbnailWrapper","previewImage","placeholderImage","previewText","markerTitle","title","metaRow","badge","badgeMuted","actions","primaryDark","dangerDark","EditMarkerModal","onClose","setAddress","setCategories","ReactDOM","createPortal","modalOverlay","modalBackdrop","modalContent","editForm","editHeader","editTitle","editSubtitle","closeIconButton","helperText","fieldLabel","input","fieldHint","label","items","selected","labelField","valueField","Fragment","collection","idTravel","String","oldImage","onUpload","actionsRow","primaryActions","handleSave","primaryButton","secondaryButton","handleDelete","shortAddr","confirm","deleteTextButton","letterSpacing","primarySoft","outline","textAlign","transition","borderAccent","accentSoft","flexShrink","textSubtle","WebkitLineClamp","WebkitBoxOrient","flexWrap","accentDark","marginLeft","whiteSpace","dangerSoft","dangerLight","textOverflow","imagePreview","inset","overlay","React","memo"],"mappings":"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","debugId":"d0f8eea9-83ce-463e-91ca-2fdf0636f95c"}