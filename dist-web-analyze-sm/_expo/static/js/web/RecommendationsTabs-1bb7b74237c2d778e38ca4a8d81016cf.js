__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var t=(function(e,t){if("function"==typeof WeakMap)var o=new WeakMap,r=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var n,i,l={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return l;if(n=t?r:o){if(n.has(e))return n.get(e);n.set(e,l)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((i=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(i.get||i.set)?n(l,t,i):l[t]=e[t]);return l})(e,t)})(_r(d[1])),o=e(_r(d[2])),r=e(_r(d[3])),n=e(_r(d[4])),i=e(_r(d[5])),l=e(_r(d[6])),s=(e(_r(d[7])),e(_r(d[8]))),c=e(_r(d[9])),u=_r(d[10]),f=_r(d[11]),h=_r(d[12]),y=_r(d[13]),x=_r(d[14]),b=_r(d[15]),p=e(_r(d[16])),j=_r(d[17]);const S=(0,t.lazy)(()=>_r(d[19])(d[18],d.paths)),C=(0,t.lazy)(()=>_r(d[19])(d[20],d.paths)),T=({message:e,onLogin:t})=>(0,j.jsx)(o.default,{style:N.gateContainer,children:(0,j.jsxs)(o.default,{style:N.gateCard,children:[(0,j.jsx)(o.default,{style:N.gateIcon,children:(0,j.jsx)(u.MaterialIcons,{name:"lock",size:24,color:h.DESIGN_TOKENS.colors.primary})}),(0,j.jsx)(o.default,{style:N.gateCopy,children:(0,j.jsx)(r.default,{style:N.gateText,children:e})}),(0,j.jsxs)(i.default,{style:N.gateButton,onPress:t,accessibilityRole:"button",children:[(0,j.jsx)(r.default,{style:N.gateButtonText,children:"\u0412\u043e\u0439\u0442\u0438"}),(0,j.jsx)(u.MaterialIcons,{name:"arrow-forward",size:18,color:h.DESIGN_TOKENS.colors.primary,style:{marginLeft:6}})]})]})}),w=()=>(0,j.jsxs)(o.default,{style:N.skeletonCard,children:[(0,j.jsx)(o.default,{style:N.skeletonImage}),(0,j.jsxs)(o.default,{style:N.skeletonContent,children:[(0,j.jsx)(o.default,{style:[N.skeletonLine,{width:'80%'}]}),(0,j.jsx)(o.default,{style:[N.skeletonLine,{width:'60%',marginTop:8}]})]})]}),E=()=>(0,j.jsxs)(o.default,{style:N.placeholderContainer,children:[(0,j.jsx)(o.default,{style:[N.skeletonLine,{width:160,height:20,marginBottom:12}]}),(0,j.jsx)(l.default,{horizontal:!0,showsHorizontalScrollIndicator:!1,children:[1,2,3,4].map(e=>(0,j.jsx)(w,{},e))})]}),I=(0,t.memo)(({forceVisible:e=!1,onVisibilityChange:n})=>{const[b,w]=(0,t.useState)('highlights'),[I,v]=(0,t.useState)(!1),[k,R]=(0,t.useState)(!1),_=(0,f.useRouter)(),{favorites:B=[],viewHistory:D=[],clearFavorites:H,clearHistory:L}=(0,y.useFavorites)(),{isAuthenticated:O}=(0,x.useAuth)(),P=(0,t.useCallback)(async()=>{try{if('function'!=typeof H)return;if(window.confirm){if(!window.confirm('\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435?'))return}await H()}catch(e){console.error('Error clearing favorites:',e)}},[H]),A=(0,t.useCallback)(async()=>{try{if('function'!=typeof L)return;if(window.confirm){if(!window.confirm('\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432?'))return}await L()}catch(e){console.error('Error clearing history:',e)}},[L]),G=(0,t.useRef)({}).current,K=(0,t.useRef)(new s.default.Value(0)).current,W=(0,t.useRef)(null),M=(0,t.useMemo)(()=>[{id:'highlights',label:'\u041f\u043e\u0434\u0431\u043e\u0440\u043a\u0430 \u043c\u0435\u0441\u044f\u0446\u0430',icon:'auto-awesome'},{id:'recommendations',label:'\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438',icon:'star'},{id:'favorites',label:'\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435',icon:'favorite',count:O?B.length:0},{id:'history',label:'\u0418\u0441\u0442\u043e\u0440\u0438\u044f',icon:'history',count:O?D.length:0}],[B.length,O,D.length]);(0,t.useEffect)(()=>{const e=M.findIndex(e=>e.id===b);if(-1===e)return;const{x:t=0,width:o=100}=G[M[e].id]||{};s.default.spring(K,{toValue:t+o/2,useNativeDriver:!0,friction:8}).start()},[b,G,M,K]);const V=(e,t)=>{const{x:o,width:r}=t.nativeEvent.layout;G[e]={x:o,width:r},e===b&&W.current&&W.current.scrollTo({x:Math.max(0,o-50),animated:!0})},F=()=>{const e=!I;v(e),n?.(!e)};if(!e&&I)return(0,j.jsxs)(o.default,{style:[N.container,N.containerFixedHeight],children:[(0,j.jsx)(o.default,{style:N.collapsedHeader,children:(0,j.jsxs)(i.default,{onPress:F,style:N.expandButton,accessibilityRole:"button",children:[(0,j.jsx)(u.Feather,{name:"chevron-down",size:20,color:h.DESIGN_TOKENS.colors.primary}),(0,j.jsx)(r.default,{style:N.expandText,children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438"})]})}),(0,j.jsx)(o.default,{style:N.collapsedSpacer})]});const U=e=>(0,j.jsx)(o.default,{style:N.tabPane,children:(0,j.jsx)(l.default,{style:N.tabPaneScroll,contentContainerStyle:N.tabPaneContent,showsVerticalScrollIndicator:!1,bounces:!1,children:e})});return(0,j.jsxs)(o.default,{style:[N.container,N.containerFixedHeight],children:[(0,j.jsxs)(o.default,{style:N.header,children:[(0,j.jsxs)(l.default,{ref:W,horizontal:!0,showsHorizontalScrollIndicator:!1,contentContainerStyle:N.tabsContainer,children:[M.map(e=>(0,j.jsxs)(i.default,{onPress:()=>w(e.id),onLayout:t=>V(e.id,t),style:[N.tab,b===e.id&&N.activeTab],children:[(0,j.jsx)(u.MaterialIcons,{name:e.icon,size:18,color:b===e.id?h.DESIGN_TOKENS.colors.primary:'#666'}),(0,j.jsx)(r.default,{style:[N.tabLabel,b===e.id&&N.activeTabLabel],children:e.label}),void 0!==e.count&&e.count>0&&(0,j.jsx)(o.default,{style:N.badge,children:(0,j.jsx)(r.default,{style:N.badgeText,children:e.count>99?'99+':e.count})})]},e.id)),(0,j.jsx)(s.default.View,{style:[N.tabUnderline,{width:24,transform:[{translateX:K.interpolate({inputRange:[0,1e3],outputRange:[0,1e3],extrapolate:'clamp'})}]}]})]}),(0,j.jsx)(i.default,{onPress:F,hitSlop:10,style:N.collapseButton,children:(0,j.jsx)(u.Feather,{name:"chevron-up",size:20,color:"#666"})})]}),(0,j.jsx)(o.default,{style:N.content,children:(()=>{switch(b){case'highlights':return U((0,j.jsx)(t.Suspense,{fallback:(0,j.jsx)(E,{}),children:(0,j.jsx)(C,{showHeader:!1})}));case'recommendations':return U((0,j.jsx)(t.Suspense,{fallback:(0,j.jsx)(E,{}),children:(0,j.jsx)(S,{showHeader:!O,onlyRecommendations:!0})}));case'favorites':return U(O?0===B.length?(0,j.jsx)(z,{message:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435 \u043f\u0443\u0441\u0442\u043e",icon:"favorite-border"}):(0,j.jsxs)(o.default,{children:[(0,j.jsxs)(o.default,{style:N.favoritesHeaderRow,children:[(0,j.jsxs)(o.default,{style:N.headerTitleBlock,children:[(0,j.jsx)(r.default,{style:N.favoritesHeaderTitle,children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),(0,j.jsxs)(r.default,{style:N.headerSubtitle,children:[B.length," \u0448\u0442."]})]}),(0,j.jsxs)(o.default,{style:N.headerActions,children:[(0,j.jsxs)(i.default,{style:N.seeAllButton,onPress:()=>_.push('/favorites'),accessibilityRole:"button",accessibilityLabel:"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0441\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",children:[(0,j.jsx)(r.default,{style:N.seeAllButtonText,children:"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0441\u0435"}),(0,j.jsx)(u.Feather,{name:"chevron-right",size:16,color:h.DESIGN_TOKENS.colors.primary})]}),'function'==typeof H&&B.length>0&&(0,j.jsxs)(i.default,{style:N.favoritesClearButton,onPress:P,accessibilityRole:"button",accessibilityLabel:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",children:[(0,j.jsx)(u.Feather,{name:"trash-2",size:16,color:h.DESIGN_TOKENS.colors.danger}),(0,j.jsx)(r.default,{style:N.favoritesClearButtonText,children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"})]})]})]}),(0,j.jsx)(c.default,{horizontal:!0,data:B,renderItem:({item:e})=>(0,j.jsx)(p.default,{item:{id:e.id,title:e.title,imageUrl:e.imageUrl,city:e.city??null,country:e.country??e.countryName??null},onPress:()=>_.push(e.url)}),keyExtractor:e=>`${e.type||'item'}-${e.id}`,showsHorizontalScrollIndicator:!1,style:N.horizontalList,contentContainerStyle:N.horizontalListContent})]}):(0,j.jsx)(T,{message:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435 \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e \u043f\u043e\u0441\u043b\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0438\u043b\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",onLogin:()=>_.push('/login')}));case'history':return U(O?0===D.length?(0,j.jsx)(z,{message:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432 \u043f\u0443\u0441\u0442\u0430",icon:"history"}):(0,j.jsxs)(o.default,{children:[(0,j.jsxs)(o.default,{style:N.favoritesHeaderRow,children:[(0,j.jsxs)(o.default,{style:N.headerTitleBlock,children:[(0,j.jsx)(r.default,{style:N.favoritesHeaderTitle,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f"}),(0,j.jsxs)(r.default,{style:N.headerSubtitle,children:[D.length," \u0448\u0442."]})]}),(0,j.jsxs)(o.default,{style:N.headerActions,children:[(0,j.jsxs)(i.default,{style:N.seeAllButton,onPress:()=>_.push('/history'),accessibilityRole:"button",accessibilityLabel:"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0441\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432",children:[(0,j.jsx)(r.default,{style:N.seeAllButtonText,children:"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0441\u0435"}),(0,j.jsx)(u.Feather,{name:"chevron-right",size:16,color:h.DESIGN_TOKENS.colors.primary})]}),'function'==typeof L&&D.length>0&&(0,j.jsxs)(i.default,{style:N.favoritesClearButton,onPress:A,accessibilityRole:"button",accessibilityLabel:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432",children:[(0,j.jsx)(u.Feather,{name:"trash-2",size:16,color:h.DESIGN_TOKENS.colors.danger}),(0,j.jsx)(r.default,{style:N.favoritesClearButtonText,children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"})]})]})]}),(0,j.jsx)(c.default,{horizontal:!0,data:D,renderItem:({item:e})=>(0,j.jsx)(p.default,{item:{id:e.id,title:e.title,imageUrl:e.imageUrl,city:e.city??null,country:e.country??e.countryName??null},badge:{icon:'history',backgroundColor:'rgba(0,0,0,0.7)',iconColor:'#fff'},onPress:()=>_.push(e.url)}),keyExtractor:e=>`history-${e.id}-${e.viewedAt}`,showsHorizontalScrollIndicator:!1,style:N.horizontalList,contentContainerStyle:N.horizontalListContent})]}):(0,j.jsx)(T,{message:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432 \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u043f\u043e\u0441\u043b\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0438\u043b\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",onLogin:()=>_.push('/login')}));default:return U(null)}})()})]})});I.displayName='RecommendationsTabs';const z=({message:e,icon:t})=>(0,j.jsxs)(o.default,{style:N.emptyState,children:[(0,j.jsx)(u.MaterialIcons,{name:t,size:48,color:"#ccc"}),(0,j.jsx)(r.default,{style:N.emptyText,children:e})]}),N=n.default.create({container:{backgroundColor:'#fff',borderRadius:16,overflow:'hidden',elevation:2,shadowColor:'#000',shadowOffset:{width:0,height:1},shadowOpacity:.05,shadowRadius:4},containerFixedHeight:{height:376},header:{flexDirection:'row',alignItems:'center',borderBottomWidth:1,borderBottomColor:'#eee',minHeight:56},tabsContainer:{paddingHorizontal:8,paddingVertical:8},tab:{flexDirection:'row',alignItems:'center',paddingHorizontal:12,paddingVertical:8,borderRadius:20,marginRight:8,minHeight:40},activeTab:{backgroundColor:'#f0f8ff'},tabLabel:{marginLeft:6,fontSize:14,color:'#666'},activeTabLabel:{color:h.DESIGN_TOKENS.colors.primary,fontWeight:'600'},badge:{backgroundColor:h.DESIGN_TOKENS.colors.primary,borderRadius:10,minWidth:18,height:18,justifyContent:'center',alignItems:'center',marginLeft:6},badgeText:{color:'#fff',fontSize:11,fontWeight:'600'},tabUnderline:{position:'absolute',bottom:4,height:3,backgroundColor:h.DESIGN_TOKENS.colors.primary,borderRadius:2},collapseButton:{padding:12},content:{height:320,paddingVertical:8},collapsedHeader:{height:56,justifyContent:'center',paddingHorizontal:16,borderBottomWidth:1,borderBottomColor:'#eee',backgroundColor:'#fff'},collapsedSpacer:{height:320},tabPane:{height:320,flex:1},tabPaneScroll:{flex:1},tabPaneContent:{flexGrow:1,paddingVertical:4},gateContainer:{paddingHorizontal:16,paddingVertical:12},gateCard:{flexDirection:'row',alignItems:'center',padding:14,borderRadius:16,backgroundColor:'#fdf8f3',borderWidth:1,borderColor:'rgba(255, 159, 90, 0.25)'},gateIcon:{width:40,height:40,borderRadius:12,backgroundColor:'#fff',justifyContent:'center',alignItems:'center',borderWidth:1,borderColor:'rgba(15,23,42,0.08)'},gateCopy:{flex:1,marginLeft:12,marginRight:12},gateText:{fontSize:14,color:'#6b7280',lineHeight:20,fontWeight:'500'},gateButton:{flexDirection:'row',alignItems:'center',paddingHorizontal:12,paddingVertical:10,borderRadius:999,borderWidth:1,borderColor:h.DESIGN_TOKENS.colors.primary,backgroundColor:'#fff'},gateButtonText:{color:h.DESIGN_TOKENS.colors.primary,fontSize:14,fontWeight:'600'},collapsedContainer:{paddingVertical:12,paddingHorizontal:16,backgroundColor:'#f8f8f8',borderRadius:16},expandButton:{flexDirection:'row',alignItems:'center',justifyContent:'center'},expandText:{marginLeft:8,fontSize:15,color:h.DESIGN_TOKENS.colors.primary,fontWeight:'500'},placeholderContainer:{padding:16},skeletonCard:{width:b.TAB_CARD_TEMPLATE.container.width||208,marginRight:16,backgroundColor:'#fff',borderRadius:b.TAB_CARD_TEMPLATE.container.borderRadius||12,overflow:'hidden'},skeletonImage:{height:b.TAB_CARD_TEMPLATE.imageContainer.height||136,backgroundColor:'#eee'},skeletonContent:{padding:12},skeletonLine:{height:12,backgroundColor:'#eee',borderRadius:6},horizontalList:{marginBottom:8},horizontalListContent:{paddingHorizontal:16,paddingBottom:6,paddingBottom:12},favoritesHeaderRow:{paddingHorizontal:16,paddingTop:4,paddingBottom:10,flexDirection:'row',alignItems:'center',justifyContent:'space-between',gap:12},headerTitleBlock:{flex:1},headerSubtitle:{marginTop:2,fontSize:12,color:h.DESIGN_TOKENS.colors.textMuted},headerActions:{flexDirection:'row',alignItems:'center',gap:10},seeAllButton:{flexDirection:'row',alignItems:'center',justifyContent:'center',gap:6,paddingHorizontal:10,paddingVertical:8,borderRadius:12,backgroundColor:h.DESIGN_TOKENS.colors.primarySoft},seeAllButtonText:{fontSize:13,fontWeight:'600',color:h.DESIGN_TOKENS.colors.primary},favoritesHeaderTitle:{fontSize:16,fontWeight:'700',color:h.DESIGN_TOKENS.colors.text},favoritesClearButton:{flexDirection:'row',alignItems:'center',justifyContent:'center',gap:8,paddingHorizontal:12,paddingVertical:8,borderRadius:12,borderWidth:1,borderColor:h.DESIGN_TOKENS.colors.border,backgroundColor:h.DESIGN_TOKENS.colors.surface},favoritesClearButtonText:{fontSize:13,fontWeight:'600',color:h.DESIGN_TOKENS.colors.danger},emptyState:{flex:1,justifyContent:'center',alignItems:'center',padding:40},emptyText:{marginTop:12,fontSize:16,color:'#999'},errorContainer:{padding:32,alignItems:'center',justifyContent:'center'},errorText:{marginTop:12,fontSize:15,color:'#666',textAlign:'center'}});_e.default=I},1752,{"0":23,"1":4,"2":315,"3":132,"4":145,"5":422,"6":322,"7":123,"8":309,"9":313,"10":2651,"11":457,"12":1013,"13":904,"14":888,"15":1753,"16":1754,"17":2,"18":1755,"19":1756,"20":1757,"paths":{"1755":"/_expo/static/js/web/PersonalizedRecommendations-2f5925ce73602c02870d2343bb11b55f.js","1757":"/_expo/static/js/web/WeeklyHighlights-66d5a22175e7d71a4c83359175595a17.js"}});
//# sourceMappingURL=/_expo/static/js/web/RecommendationsTabs-1bb7b74237c2d778e38ca4a8d81016cf.js.map
//# debugId=9336dabf-4f1f-40b0-b037-cc32ac622489