{"version":3,"sources":["/components/travel/UpsertTravel.tsx","/utils/formValidation.ts","/src/utils/analytics.ts","/hooks/useOptimizedFormState.ts","/hooks/useImprovedAutoSave.ts","/components/travel/TravelWizardStepBasic.tsx","/components/travel/ContentUpsertSection.tsx","/components/TextInputComponent.tsx","/components/ArticleEditor.web.tsx","/components/travel/TravelWizardHeader.tsx","/components/travel/TravelWizardFooter.tsx","/components/travel/TravelWizardStepRoute.tsx","/components/travel/TravelWizardStepMedia.tsx","/components/YoutubeLinkComponent.tsx","/components/travel/TravelWizardStepDetails.tsx","/components/CheckboxComponent.tsx","/components/travel/TravelWizardStepExtras.tsx","/components/travel/FiltersUpsertComponent.tsx","/components/travel/TravelWizardStepPublish.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useState, useMemo, useRef } from 'react';\nimport { StyleSheet, View, Dimensions, Platform } from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { Button } from 'react-native-paper';\nimport { useRouter, useLocalSearchParams } from 'expo-router';\nimport Toast from 'react-native-toast-message';\n\nimport { fetchTravel } from '@/src/api/travelsApi';\nimport { fetchFilters, saveFormData, fetchAllCountries } from '@/src/api/misc';\nimport { TravelFormData, MarkerData, Travel } from '@/src/types/types';\nimport { useAuth } from '@/context/AuthContext';\nimport { validateStep, type ValidationError, type ModerationIssue } from '@/utils/formValidation';\nimport { trackWizardEvent } from '@/src/utils/analytics';\nimport { useOptimizedFormState } from '@/hooks/useOptimizedFormState';\nimport { useImprovedAutoSave } from '@/hooks/useImprovedAutoSave';\n\nimport TravelWizardStepBasic from '@/components/travel/TravelWizardStepBasic';\nimport TravelWizardStepRoute from '@/components/travel/TravelWizardStepRoute';\nimport TravelWizardStepMedia from '@/components/travel/TravelWizardStepMedia';\nimport TravelWizardStepDetails from '@/components/travel/TravelWizardStepDetails';\nimport TravelWizardStepExtras from '@/components/travel/TravelWizardStepExtras';\nimport TravelWizardStepPublish from '@/components/travel/TravelWizardStepPublish';\nimport { DESIGN_TOKENS } from '@/constants/designSystem';\nimport { METRICS } from '@/constants/layout';\n\ntype StepMeta = {\n    id: number;\n    title: string;\n    subtitle: string;\n    tipTitle: string;\n    tipBody: string;\n    nextLabel: string;\n};\n\nconst STEP_CONFIG: StepMeta[] = [\n    {\n        id: 1,\n        title: '–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è',\n        subtitle: '–ù–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è',\n        tipTitle: '–°–æ–≤–µ—Ç',\n        tipBody: '–ù–∞—á–Ω–∏—Ç–µ —Å –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è. –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∑–∂–µ ‚Äî –æ–Ω–∏ –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏.',\n        nextLabel: '–î–∞–ª–µ–µ: –ú–∞—Ä—à—Ä—É—Ç (—à–∞–≥ 2 –∏–∑ 6)',\n    },\n    {\n        id: 2,\n        title: '–ú–∞—Ä—à—Ä—É—Ç –Ω–∞ –∫–∞—Ä—Ç–µ',\n        subtitle: '–î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á–µ–≤—ã–µ —Ç–æ—á–∫–∏ –∏ —Å—Ç—Ä–∞–Ω—ã –º–∞—Ä—à—Ä—É—Ç–∞',\n        tipTitle: '–õ–∞–π—Ñ—Ö–∞–∫',\n        tipBody: '',\n        nextLabel: '–ö –º–µ–¥–∏–∞ (—à–∞–≥ 3 –∏–∑ 6)',\n    },\n    {\n        id: 3,\n        title: '–ú–µ–¥–∏–∞ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è',\n        subtitle: '–î–æ–±–∞–≤—å—Ç–µ –æ–±–ª–æ–∂–∫—É, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏ –≤–∏–¥–µ–æ ‚Äî —ç—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç –¥–æ–≤–µ—Ä–∏–µ –∏ –∫–æ–Ω–≤–µ—Ä—Å–∏—é',\n        tipTitle: '–ü–æ–¥—Å–∫–∞–∑–∫–∞',\n        tipBody: '–ï—Å–ª–∏ –µ—Å—Ç—å –≤—ã–±–æ—Ä, –Ω–∞—á–Ω–∏—Ç–µ —Å –æ–±–ª–æ–∂–∫–∏: –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –∫–∞–¥—Ä –±–µ–∑ –∫–æ–ª–ª–∞–∂–µ–π –æ–±—ã—á–Ω–æ —Å–º–æ—Ç—Ä–∏—Ç—Å—è –ª—É—á—à–µ –≤ —Å–ø–∏—Å–∫–∞—Ö.',\n        nextLabel: '–ö –¥–µ—Ç–∞–ª—è–º (—à–∞–≥ 4 –∏–∑ 6)',\n    },\n    {\n        id: 4,\n        title: '–î–µ—Ç–∞–ª–∏ –∏ —Å–æ–≤–µ—Ç—ã',\n        subtitle: '–ü–ª—é—Å—ã/–º–∏–Ω—É—Å—ã, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –±—é–¥–∂–µ—Ç ‚Äî —á—Ç–æ–±—ã –º–∞—Ä—à—Ä—É—Ç –±—ã–ª –ø–æ–ª–µ–∑–Ω–µ–µ',\n        tipTitle: '–ü–æ–¥—Å–∫–∞–∑–∫–∞',\n        tipBody: '–ö–æ—Ä–æ—Ç–∫–∏–µ —Å–ø–∏—Å–∫–∏ –∏ –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –ª—É—á—à–µ, —á–µ–º –æ–±—â–∏–π —Ç–µ–∫—Å—Ç. –ü–∏—à–∏—Ç–µ —Ç–∞–∫, –∫–∞–∫ —Å–æ–≤–µ—Ç–æ–≤–∞–ª–∏ –±—ã –¥—Ä—É–≥—É.',\n        nextLabel: '–ö –¥–æ–ø. –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º (—à–∞–≥ 5 –∏–∑ 6)',\n    },\n    {\n        id: 5,\n        title: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã',\n        subtitle: '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç, —Å–ª–æ–∂–Ω–æ—Å—Ç—å, —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å, –≤–∏–∑–∞ –∏ –¥—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏',\n        tipTitle: '–ü–æ–¥—Å–∫–∞–∑–∫–∞',\n        tipBody: '–≠—Ç–∏ –ø–æ–ª—è –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –ø–æ —à–∞–≥–∞–º, –Ω–æ –ø–æ–º–æ–≥–∞—é—Ç —á–∏—Ç–∞—Ç–µ–ª—è–º –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å —É—Å–ª–æ–≤–∏—è –º–∞—Ä—à—Ä—É—Ç–∞.',\n        nextLabel: '–ö –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (—à–∞–≥ 6 –∏–∑ 6)',\n    },\n    {\n        id: 6,\n        title: '–ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è',\n        subtitle: '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç—É—Å ‚Äî —á–µ—Ä–Ω–æ–≤–∏–∫ –∏–ª–∏ –º–æ–¥–µ—Ä–∞—Ü–∏—è',\n        tipTitle: '–ü–æ–¥—Å–∫–∞–∑–∫–∞',\n        tipBody: '–ü–µ—Ä–µ–¥ –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ, —Å—Ç—Ä–∞–Ω—ã, –º–∏–Ω–∏–º—É–º –æ–¥–Ω–∞ —Ç–æ—á–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –æ–±–ª–æ–∂–∫–∞/—Ñ–æ—Ç–æ.',\n        nextLabel: '–ó–∞–≤–µ—Ä—à–∏—Ç—å',\n    },\n];\n\nexport default function UpsertTravel() {\n    const router = useRouter();\n    const { id } = useLocalSearchParams();\n    const { userId, isAuthenticated, isSuperuser } = useAuth();\n    const isSuperAdmin = isSuperuser;\n    const isNew = !id;\n    \n    // Responsive design with memoization\n    const windowWidth = useMemo(() => Dimensions.get('window').width, []);\n    const isMobile = useMemo(() => windowWidth <= METRICS.breakpoints.tablet, [windowWidth]);\n\n    const [currentStep, setCurrentStep] = useState(1);\n    const totalSteps = 6;\n    const [markers, setMarkers] = useState<MarkerData[]>([]);\n    const [travelDataOld, setTravelDataOld] = useState<Travel | null>(null);\n    const markersUpdateTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n    const [filters, setFilters] = useState<ReturnType<typeof initFilters> | null>(null);\n    const [isInitialLoading, setIsInitialLoading] = useState(true);\n    const [hasAccess, setHasAccess] = useState(false);\n\n    const [step1SubmitErrors, setStep1SubmitErrors] = useState<ValidationError[]>([]);\n\n    const pendingIssueNavRef = useRef<{ step: number; anchorId?: string } | null>(null);\n    const [focusAnchorId, setFocusAnchorId] = useState<string | null>(null);\n    \n    // Optimized form state management\n    const initialFormData = useMemo(() => getEmptyFormData(isNew ? null : String(id)), [isNew, id]);\n    \n    // Ref to track current form data without causing re-renders\n    const formDataRef = useRef<TravelFormData>(initialFormData);\n    const formState = useOptimizedFormState(initialFormData, {\n        debounce: 5000,\n        validateOnChange: true,\n        validationDebounce: 300,\n    });\n    \n    // Keep ref in sync with form data\n    useEffect(() => {\n        formDataRef.current = formState.data as TravelFormData;\n    }, [formState.data]);\n\n    useEffect(() => {\n        const pending = pendingIssueNavRef.current;\n        if (!pending) {\n            if (focusAnchorId) setFocusAnchorId(null);\n            return;\n        }\n        if (pending.step !== currentStep) return;\n\n        const anchorId = pending.anchorId;\n        setFocusAnchorId(anchorId ?? null);\n\n        if (!anchorId) return;\n        if (Platform.OS !== 'web' || typeof document === 'undefined') return;\n\n        // Wait a tick to ensure the new step has mounted\n        setTimeout(() => {\n            const el = document.getElementById(anchorId);\n            if (el && typeof (el as any).scrollIntoView === 'function') {\n                (el as any).scrollIntoView({ behavior: 'smooth', block: 'start' });\n            }\n            pendingIssueNavRef.current = null;\n            setFocusAnchorId(null);\n        }, 50);\n    }, [currentStep, focusAnchorId]);\n\n    const handleNavigateToIssue = useCallback((issue: ModerationIssue) => {\n        pendingIssueNavRef.current = { step: issue.targetStep, anchorId: issue.anchorId };\n        setCurrentStep(issue.targetStep);\n    }, []);\n\n    const handleAnchorHandled = useCallback(() => {\n        pendingIssueNavRef.current = null;\n        setFocusAnchorId(null);\n    }, []);\n    \n    // Stable toast notification (no dependencies on autosave)\n    const showToast = useCallback((message: string, type: 'success' | 'error' = 'success') => {\n        Toast.show({\n            type,\n            text1: message,\n        });\n    }, []);\n    \n    // Stable callbacks for autosave\n    const handleSaveSuccess = useCallback((savedData: TravelFormData) => {\n        if (isNew && savedData.id) {\n            router.replace(`/travel/${savedData.id}`);\n        }\n        // Don't show success toast on autosave to avoid annoying notifications\n        // Toast will still show on manual save\n    }, [isNew, router]);\n    \n    const handleSaveError = useCallback((error: Error) => {\n        showToast('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è', 'error');\n        console.error('Autosave error:', error);\n    }, [showToast]);\n    \n    // Improved autosave with stable callbacks\n    const autosave = useImprovedAutoSave(\n        formState.data,\n        initialFormData,\n        {\n            debounce: 5000,\n            onSave: async (data) => {\n                const cleanedData = cleanEmptyFields({\n                    ...data,\n                    id: normalizeTravelId(data.id),\n                });\n                return await saveFormData(cleanedData);\n            },\n            onSuccess: handleSaveSuccess,\n            onError: handleSaveError,\n        }\n    );\n    \n    // Apply saved data with markers synchronization\n    const applySavedData = useCallback((savedData: TravelFormData) => {\n        const markersFromData = (savedData.coordsMeTravel as any) || [];\n        const syncedCountries = syncCountriesFromMarkers(markersFromData, savedData.countries || []);\n\n        formState.updateFields({\n            ...savedData,\n            countries: syncedCountries,\n        });\n        setMarkers(markersFromData);\n    }, []); // formState.updateFields is stable, no need to include it\n\n    // Load travel data from server\n    const loadTravelData = useCallback(async (travelId: string) => {\n        try {\n            const travelData = await fetchTravel(Number(travelId));\n\n            // ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\n            if (!isNew && travelData) {\n                const travelUserId = travelData.userIds || travelData.user?.id?.toString() || '';\n                const currentUserIdStr = userId?.toString() || '';\n\n                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –∏–ª–∏ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–æ–º\n                const isOwner = travelUserId === currentUserIdStr;\n                const canEdit = isOwner || isSuperAdmin;\n\n                if (!canEdit) {\n                    Toast.show({\n                        type: 'error',\n                        text1: '–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞',\n                        text2: '–í—ã –º–æ–∂–µ—Ç–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è',\n                    });\n                    router.replace('/');\n                    return;\n                }\n\n                setHasAccess(true);\n            } else if (isNew) {\n                // –î–ª—è –Ω–æ–≤–æ–≥–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è: –¥–æ—Å—Ç—É–ø –∫ –º–∞—Å—Ç–µ—Ä—É —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.\n                // –í–º–µ—Å—Ç–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–æ—Å—Ç–µ–≤–æ–π —ç–∫—Ä–∞–Ω —Å CTA.\n                setHasAccess(true);\n            }\n\n            const transformed = transformTravelToFormData(travelData);\n            const markersFromData = (transformed.coordsMeTravel as any) || [];\n            const syncedCountries = syncCountriesFromMarkers(markersFromData, transformed.countries || []);\n\n            const finalData = {\n                ...transformed,\n                countries: syncedCountries,\n            };\n\n            setTravelDataOld(travelData);\n            formState.updateFields(finalData);\n            setMarkers(markersFromData);\n            \n            // Update autosave baseline to prevent immediate autosave after loading\n            autosave.updateBaseline(finalData);\n        } catch (error) {\n            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è:', error);\n            Toast.show({\n                type: 'error',\n                text1: '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏',\n                text2: '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ',\n            });\n            router.replace('/');\n        } finally {\n            setIsInitialLoading(false);\n        }\n    }, [isNew, isAuthenticated, userId, isSuperAdmin, router, autosave.updateBaseline]); // Added dependencies for useCallback\n\n    useEffect(() => {\n        let isMounted = true;\n        (async () => {\n            try {\n                const [filtersData, countryData] = await Promise.all([\n                    fetchFilters(),\n                    fetchAllCountries(),\n                ]);\n                if (isMounted) {\n                    setFilters({ ...filtersData, countries: countryData } as any);\n                }\n            } catch (error) {\n                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤:', error);\n                if (isMounted) {\n                    setFilters(initFilters());\n                }\n            }\n        })();\n        if (!isNew && id) {\n            loadTravelData(id as string);\n        } else if (isNew) {\n            // –î–ª—è –Ω–æ–≤–æ–≥–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –Ω–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏–º –≥–æ—Å—Ç—è ‚Äî –ø–æ–∫–∞–∂–µ–º –≥–æ—Å—Ç–µ–≤–æ–π —ç–∫—Ä–∞–Ω.\n            setHasAccess(true);\n            setIsInitialLoading(false);\n        }\n        return () => {\n            isMounted = false;\n        };\n    }, [id, isNew, isAuthenticated, userId, router, loadTravelData]);\n\n    const handleManualSave = useCallback(async (): Promise<TravelFormData | void> => {\n        try {\n            await trackWizardEvent('wizard_manual_save', {\n                step: currentStep,\n                is_new: isNew,\n                is_edit: !isNew,\n                status: formState.data.moderation ? 'moderation' : 'draft',\n            });\n\n            const savedData = await autosave.saveNow();\n            applySavedData(savedData);\n\n            showToast('–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ');\n            return savedData;\n        } catch (error) {\n            showToast('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è', 'error');\n            console.error('Manual save error:', error);\n            return;\n        }\n    }, [currentStep, isNew, formState.data.moderation, autosave.saveNow, applySavedData, showToast]);\n\n    const handleFinishWizard = useCallback(async () => {\n        await handleManualSave();\n    }, [handleManualSave]);\n\n    // Track step views in a dedicated effect instead of inside render\n    useEffect(() => {\n        trackWizardEvent('wizard_step_view', {\n            step: currentStep,\n        });\n    }, [currentStep]);\n\n    const handleCountrySelect = useCallback((countryId: string) => {\n        if (countryId && !formState.data.countries.includes(countryId)) {\n            formState.updateField('countries', [...formState.data.countries, countryId]);\n        }\n    }, [formState.data.countries]); // Only depend on the data we read\n\n    const handleCountryDeselect = useCallback((countryId: string) => {\n        formState.updateField('countries', formState.data.countries.filter(id => id !== countryId));\n    }, [formState.data.countries]); // Only depend on the data we read\n\n    // Create a stable wrapper for setFormData that works with all wizard steps\n    // Uses ref to access current data without causing recreations\n    const setFormData = useCallback<React.Dispatch<React.SetStateAction<TravelFormData>>>((updater) => {\n        if (typeof updater === 'function') {\n            const next = updater(formDataRef.current);\n            formState.updateFields(next);\n        } else {\n            formState.updateFields(updater as Partial<TravelFormData>);\n        }\n    }, []); // No dependencies - uses ref for current data\n\n    const handleNextFromBasic = useCallback(() => {\n        const result = validateStep(1, {\n            name: formState.data.name ?? '',\n        } as any);\n\n        const hadErrors = !result.isValid;\n        const errorFields = result.errors.map((e: ValidationError) => e.field);\n        trackWizardEvent('wizard_step_next_click', {\n            step_from: 1,\n            step_to: 2,\n            had_errors: hadErrors,\n            error_fields: errorFields,\n        });\n\n        if (!result.isValid) {\n            setStep1SubmitErrors(result.errors);\n            showToast('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –¥–∞–ª—å—à–µ.', 'error');\n            return;\n        }\n\n        setStep1SubmitErrors([]);\n\n        setCurrentStep(2);\n    }, [formState.data, showToast]);\n\n    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –∏–ª–∏ –±–ª–æ–∫–∏—Ä—É–µ–º –¥–æ—Å—Ç—É–ø\n    if (isInitialLoading) {\n        return (\n            <SafeAreaView style={styles.safeContainer}>\n                <View style={styles.loadingContainer}>\n                    <View style={styles.loadingSkeletonHeader} />\n                    <View style={styles.loadingSkeletonSubheader} />\n                    <View style={styles.loadingSkeletonBlock} />\n                </View>\n            </SafeAreaView>\n        );\n    }\n\n    if (!hasAccess) {\n        return null; // –†–µ–¥–∏—Ä–µ–∫—Ç —É–∂–µ –ø—Ä–æ–∏–∑–æ—à–µ–ª\n    }\n\n    if (isNew && !isAuthenticated) {\n        const redirect = encodeURIComponent('/travel/new');\n        return (\n            <SafeAreaView style={styles.safeContainer}>\n                <View style={[styles.loadingContainer, { justifyContent: 'center' }]}>\n                    <Button\n                        mode=\"contained\"\n                        onPress={() => router.push(`/login?redirect=${redirect}` as any)}\n                        style={styles.saveButtonMobile}\n                    >\n                        –í–æ–π—Ç–∏, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç\n                    </Button>\n                    <Button\n                        mode=\"outlined\"\n                        onPress={() => router.push(`/registration?redirect=${redirect}` as any)}\n                        style={styles.filterButton}\n                    >\n                        –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è\n                    </Button>\n                </View>\n            </SafeAreaView>\n        );\n    }\n\n    const stepMeta = STEP_CONFIG.find((step) => step.id === currentStep);\n    const progressValue = currentStep / totalSteps;\n    const countries = (filters?.countries ?? []) as any[];\n    const selectedCountryIds = (formState.data.countries ?? []) as any[];\n    const isFiltersLoading = !filters;\n    const autosaveBadge = (() => {\n        if (autosave.status === 'saving' || autosave.status === 'debouncing') {\n            return '–°–æ—Ö—Ä–∞–Ω—è–µ–º —á–µ—Ä–Ω–æ–≤–∏–∫‚Ä¶';\n        }\n        if (autosave.status === 'error') {\n            return '–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è ‚Äî –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ';\n        }\n        if (autosave.lastSaved) {\n            return `–ß–µ—Ä–Ω–æ–≤–∏–∫ —Å–æ—Ö—Ä–∞–Ω—ë–Ω ${autosave.lastSaved.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;\n        }\n        return '–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–∫–∞ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã';\n    })();\n\n    if (currentStep === 1) {\n        const firstErrorFieldForContent = (() => {\n            const field = step1SubmitErrors[0]?.field;\n            if (field === 'name') {\n                return field;\n            }\n            return null;\n        })();\n\n        return (\n            <TravelWizardStepBasic\n                currentStep={currentStep}\n                totalSteps={totalSteps}\n                formData={formState.data}\n                setFormData={setFormData}\n                isMobile={isMobile}\n                onManualSave={handleManualSave}\n                snackbarVisible={autosave.status === 'error'}\n                snackbarMessage={autosave.error?.message || ''}\n                onDismissSnackbar={autosave.clearError}\n                onGoNext={handleNextFromBasic}\n                stepErrors={step1SubmitErrors.map(e => e.message)}\n                firstErrorField={firstErrorFieldForContent}\n                autosaveStatus={autosave.status as 'idle' | 'saving' | 'saved' | 'error'}\n                autosaveBadge={autosaveBadge}\n                stepMeta={stepMeta}\n                progress={progressValue}\n                focusAnchorId={focusAnchorId}\n                onAnchorHandled={handleAnchorHandled}\n            />\n        );\n    }\n\n    if (currentStep === 2) {\n        // Debounced marker update to prevent constant autosave\n        const handleMarkersUpdate = (updatedMarkers: MarkerData[]) => {\n            // Update UI immediately\n            setMarkers(updatedMarkers);\n            \n            // Clear previous timeout\n            if (markersUpdateTimeoutRef.current) {\n                clearTimeout(markersUpdateTimeoutRef.current);\n            }\n            \n            // Update formState after 1 second of inactivity to prevent constant autosave\n            markersUpdateTimeoutRef.current = setTimeout(() => {\n                formState.updateField('coordsMeTravel', updatedMarkers as any);\n            }, 1000);\n        };\n\n        return (\n            <TravelWizardStepRoute\n                currentStep={currentStep}\n                totalSteps={totalSteps}\n                markers={markers}\n                setMarkers={handleMarkersUpdate}\n                categoryTravelAddress={filters?.categoryTravelAddress ?? []}\n                countries={countries}\n                travelId={formState.data.id}\n                selectedCountryIds={selectedCountryIds}\n                onCountrySelect={handleCountrySelect}\n                onCountryDeselect={handleCountryDeselect}\n                onBack={() => {\n                    trackWizardEvent('wizard_step_back_click', {\n                        step_from: 2,\n                        step_to: 1,\n                    });\n                    setCurrentStep(1);\n                }}\n                onNext={() => {\n                    trackWizardEvent('wizard_step_next_click', {\n                        step_from: 2,\n                        step_to: 3,\n                        had_errors: false,\n                        error_fields: [],\n                    });\n                    setCurrentStep(3);\n                }}\n                isFiltersLoading={isFiltersLoading}\n                onManualSave={handleManualSave}\n                stepMeta={stepMeta}\n                progress={progressValue}\n                autosaveBadge={autosaveBadge}\n                focusAnchorId={focusAnchorId}\n                onAnchorHandled={handleAnchorHandled}\n            />\n        );\n    }\n\n    if (currentStep === 3) {\n        return (\n            <TravelWizardStepMedia\n                currentStep={currentStep}\n                totalSteps={totalSteps}\n                formData={formState.data}\n                setFormData={setFormData}\n                travelDataOld={travelDataOld}\n                onManualSave={handleManualSave}\n                onBack={() => {\n                    trackWizardEvent('wizard_step_back_click', {\n                        step_from: 3,\n                        step_to: 2,\n                    });\n                    setCurrentStep(2);\n                }}\n                onNext={() => {\n                    trackWizardEvent('wizard_step_next_click', {\n                        step_from: 3,\n                        step_to: 4,\n                        had_errors: false,\n                        error_fields: [],\n                    });\n                    setCurrentStep(4);\n                }}\n                stepMeta={stepMeta}\n                progress={progressValue}\n                autosaveBadge={autosaveBadge}\n                focusAnchorId={focusAnchorId}\n                onAnchorHandled={handleAnchorHandled}\n            />\n        );\n    }\n\n    if (currentStep === 4) {\n        return (\n            <TravelWizardStepDetails\n                currentStep={currentStep}\n                totalSteps={totalSteps}\n                formData={formState.data}\n                setFormData={setFormData}\n                onManualSave={handleManualSave}\n                onBack={() => {\n                    trackWizardEvent('wizard_step_back_click', {\n                        step_from: 4,\n                        step_to: 3,\n                    });\n                    setCurrentStep(3);\n                }}\n                onNext={() => {\n                    trackWizardEvent('wizard_step_next_click', {\n                        step_from: 4,\n                        step_to: 5,\n                        had_errors: false,\n                        error_fields: [],\n                    });\n                    setCurrentStep(5);\n                }}\n                stepMeta={stepMeta}\n                progress={progressValue}\n                autosaveBadge={autosaveBadge}\n            />\n        );\n    }\n\n    if (currentStep === 5) {\n        return (\n            <TravelWizardStepExtras\n                currentStep={currentStep}\n                totalSteps={totalSteps}\n                formData={formState.data}\n                setFormData={setFormData}\n                filters={filters}\n                travelDataOld={travelDataOld}\n                isSuperAdmin={isSuperAdmin}\n                onManualSave={handleManualSave}\n                onBack={() => {\n                    trackWizardEvent('wizard_step_back_click', {\n                        step_from: 5,\n                        step_to: 4,\n                    });\n                    setCurrentStep(4);\n                }}\n                onNext={() => {\n                    trackWizardEvent('wizard_step_next_click', {\n                        step_from: 5,\n                        step_to: 6,\n                        had_errors: false,\n                        error_fields: [],\n                    });\n                    setCurrentStep(6);\n                }}\n                stepMeta={stepMeta}\n                progress={progressValue}\n                autosaveBadge={autosaveBadge}\n                focusAnchorId={focusAnchorId}\n                onAnchorHandled={handleAnchorHandled}\n            />\n        );\n    }\n\n    return (\n        <TravelWizardStepPublish\n            currentStep={currentStep}\n            totalSteps={totalSteps}\n            formData={formState.data}\n            setFormData={setFormData}\n            filters={filters}\n            travelDataOld={travelDataOld}\n            isSuperAdmin={isSuperAdmin}\n            onManualSave={handleManualSave}\n            onGoBack={() => setCurrentStep(5)}\n            onFinish={handleFinishWizard}\n            onNavigateToIssue={handleNavigateToIssue}\n            stepMeta={stepMeta}\n            progress={progressValue}\n            autosaveBadge={autosaveBadge}\n        />\n    );\n}\n\nconst styles = StyleSheet.create({\n    safeContainer: { flex: 1, backgroundColor: DESIGN_TOKENS.colors.background },\n    mainWrapper: { flex: 1, flexDirection: 'row' },\n    mainWrapperMobile: { flexDirection: 'column' },\n    contentColumn: { flex: 1 },\n    filtersColumn: {\n        width: 320,\n        borderLeftWidth: 1,\n        padding: DESIGN_TOKENS.spacing.md,\n        borderColor: DESIGN_TOKENS.colors.border,\n    },\n    filtersScroll: { maxHeight: '80%' },\n    mobileFiltersWrapper: { padding: DESIGN_TOKENS.spacing.md },\n    saveButtonMobile: {\n        backgroundColor: DESIGN_TOKENS.colors.primary,\n        borderRadius: DESIGN_TOKENS.radii.pill,\n        minWidth: 150,\n    },\n    filterButton: {\n        borderColor: DESIGN_TOKENS.colors.primary,\n        borderRadius: DESIGN_TOKENS.radii.pill,\n        minWidth: 100,\n    },\n    loadingContainer: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'stretch',\n        paddingHorizontal: DESIGN_TOKENS.spacing.lg,\n        gap: DESIGN_TOKENS.spacing.md,\n    },\n    loadingSkeletonHeader: {\n        height: 20,\n        borderRadius: 6,\n        backgroundColor: DESIGN_TOKENS.colors.border,\n        marginBottom: 4,\n    },\n    loadingSkeletonSubheader: {\n        height: 14,\n        borderRadius: 6,\n        backgroundColor: DESIGN_TOKENS.colors.border,\n        width: '70%',\n        marginBottom: 12,\n    },\n    loadingSkeletonBlock: {\n        height: 160,\n        borderRadius: 10,\n        backgroundColor: DESIGN_TOKENS.colors.border,\n    },\n});\n\nfunction initFilters() {\n    return {\n        countries: [],\n        categories: [],\n        companions: [],\n        complexity: [],\n        month: [],\n        over_nights_stay: [],\n        transports: [],\n        categoryTravelAddress: [],\n    };\n}\n\nfunction getEmptyFormData(id: string | null): TravelFormData {\n    return {\n        id: id || null,\n        name: '',\n        categories: [],\n        transports: [],\n        month: [],\n        complexity: [],\n        over_nights_stay: [],\n        cities: [],\n        countries: [],\n        budget: '',\n        year: '',\n        number_peoples: '',\n        number_days: '',\n        minus: '',\n        plus: '',\n        recommendation: '',\n        description: '',\n        publish: false,\n        moderation: false,\n        visa: false,\n        coordsMeTravel: [],\n        thumbs200ForCollectionArr: [],\n        travelImageThumbUrlArr: [],\n        travelImageAddress: [],\n        gallery: [],\n        youtube_link: '',\n        companions: [],\n        countryIds: [],\n        travelAddressIds: [],\n        travelAddressCity: [],\n        travelAddressCountry: [],\n        travelAddressAdress: [],\n        travelAddressCategory: [],\n        categoriesIds: [],\n    };\n}\n\n// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–∞–Ω –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ –Ω–∞ –∫–∞—Ä—Ç–µ —Ç–æ—á–∫–∞–º–∏\nfunction syncCountriesFromMarkers(markers: MarkerData[], existingCountries: string[]): string[] {\n    const markerCountryIds = Array.from(\n        new Set(\n            (markers || [])\n                .map(m => (m.country != null ? String(m.country) : null))\n                .filter((id): id is string => !!id),\n        ),\n    );\n\n    const result = new Set<string>([...existingCountries, ...markerCountryIds]);\n    return Array.from(result);\n}\n\nfunction transformTravelToFormData(travel: Travel): TravelFormData {\n    const yearStr = travel.year != null ? String(travel.year) : '';\n    const daysStr = (travel as any).number_days != null ? String((travel as any).number_days) : '';\n    const peoplesStr = (travel as any).number_peoples != null ? String((travel as any).number_peoples) : '';\n\n    return {\n        ...getEmptyFormData(String(travel.id)),\n        ...travel,\n        // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º —á–∏—Å–ª–æ–≤—ã–µ –ø–æ–ª—è –∫ —Å—Ç—Ä–æ–∫–∞–º –¥–ª—è —Ñ–æ—Ä–º—ã\n        id: String(travel.id),\n        year: yearStr,\n        number_days: daysStr,\n        number_peoples: peoplesStr,\n        moderation: (travel as any).moderation ?? false,\n        publish: (travel as any).publish ?? false,\n        visa: (travel as any).visa ?? false,\n        companions: (travel.companions || []).map(c => String(c)),\n    };\n}\n\nfunction cleanEmptyFields(obj: any): any {\n    return Object.fromEntries(\n        Object.entries(obj).map(([key, value]) => {\n            if (value === '') return [key, null];\n            if (value === false) return [key, false];\n            return [key, value];\n        }),\n    );\n}\n\nfunction normalizeTravelId(id: unknown): number | null {\n    if (id == null) return null;\n    if (typeof id === 'number') return Number.isFinite(id) ? id : null;\n    if (typeof id === 'string') {\n        const trimmed = id.trim();\n        if (!trimmed) return null;\n        const parsed = Number(trimmed);\n        return Number.isFinite(parsed) ? parsed : null;\n    }\n    return null;\n}\n","// utils/formValidation.ts\n// ‚úÖ –£–õ–£–ß–®–ï–ù–ò–ï: –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º—ã —Å–æ–∑–¥–∞–Ω–∏—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è\n\nexport interface ValidationError {\n  field: string;\n  message: string;\n}\n\nexport interface ValidationResult {\n  isValid: boolean;\n  errors: ValidationError[];\n}\n\nexport interface TravelFormValidation {\n  name?: string;\n  description?: string;\n  countries?: string[];\n  categories?: string[];\n  coordsMeTravel?: any[];\n  year?: string;\n  number_days?: string;\n  number_peoples?: string;\n}\n\n// –£–ø—Ä–æ—â—ë–Ω–Ω—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —à–∞–≥–æ–≤–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏\nexport interface TravelFormLike {\n  name?: string | null;\n  description?: string | null;\n  countries?: string[] | null;\n  categories?: string[] | null;\n  coordsMeTravel?: any[] | null;\n  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —á–µ–∫-–ª–∏—Å—Ç–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏\n  gallery?: any[] | null;\n  travel_image_thumb_small_url?: string | null;\n}\n\nexport type ModerationIssueKey =\n  | 'name'\n  | 'description'\n  | 'countries'\n  | 'categories'\n  | 'route'\n  | 'photos';\n\nexport interface ModerationIssue {\n  key: ModerationIssueKey;\n  label: string;\n  targetStep: number;\n  anchorId?: string;\n}\n\n/**\n * –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è\n */\nexport function validateName(name: string | undefined | null): ValidationError | null {\n  if (!name || name.trim().length === 0) {\n    return {\n      field: 'name',\n      message: '–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è',\n    };\n  }\n  if (name.trim().length < 3) {\n    return {\n      field: 'name',\n      message: '–ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞',\n    };\n  }\n  if (name.trim().length > 200) {\n    return {\n      field: 'name',\n      message: '–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å 200 —Å–∏–º–≤–æ–ª–æ–≤',\n    };\n  }\n  return null;\n}\n\n/**\n * –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —à–∞–≥–æ–≤ –º–∞—Å—Ç–µ—Ä–∞\n *\n * –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ –¢–ó:\n *  - –®–∞–≥ 1: –±–ª–æ–∫–∏—Ä—É–µ–º –ø–µ—Ä–µ—Ö–æ–¥ —Ç–æ–ª—å–∫–æ –±–µ–∑ name\n *  - –®–∞–≥–∏ 2‚Äì4: –ø–µ—Ä–µ—Ö–æ–¥—ã –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è (–ø–æ–ª—è –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é)\n *  - –®–∞–≥ 5: –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (—Å–º. getModerationErrors)\n */\nexport function validateStep(\n  step: number,\n  formData: TravelFormLike,\n  markers?: any[] | null,\n): ValidationResult {\n  const errors: ValidationError[] = [];\n\n  if (step === 1) {\n    const nameError = validateName(formData.name ?? undefined);\n    if (nameError) errors.push(nameError);\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n    };\n  }\n\n  // –î–ª—è —à–∞–≥–æ–≤ 2‚Äì4 –ø–æ –¢–ó –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –¥–æ–ª–∂–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥\n  return {\n    isValid: true,\n    errors: [],\n  };\n}\n\n/**\n * –ü–æ–ª—É—á–∏—Ç—å –æ—à–∏–±–∫–∏ –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (—à–∞–≥ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏)\n *\n * –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–æ–ª—è –ø–æ –¢–ó:\n *  - –ù–∞–∑–≤–∞–Ω–∏–µ (name)\n *  - –û–ø–∏—Å–∞–Ω–∏–µ (description)\n *  - –°—Ç—Ä–∞–Ω—ã (countries)\n *  - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (categories)\n *  - –ú–∞—Ä—à—Ä—É—Ç (–º–∏–Ω–∏–º—É–º –æ–¥–Ω–∞ —Ç–æ—á–∫–∞: coordsMeTravel –∏–ª–∏ markers)\n *  - –§–æ—Ç–æ (–æ–±–ª–æ–∂–∫–∞ –∏–ª–∏ ‚â•1 —Ñ–æ—Ç–æ –≤ –≥–∞–ª–µ—Ä–µ–µ)\n */\nexport function getModerationErrors(\n  formData: TravelFormLike,\n  markers?: any[] | null,\n): string[] {\n  return getModerationIssues(formData, markers).map((i) => i.label);\n}\n\nexport function getModerationIssues(\n  formData: TravelFormLike,\n  markers?: any[] | null,\n): ModerationIssue[] {\n  const missing: ModerationIssue[] = [];\n\n  const nameError = validateName(formData.name ?? undefined);\n  if (nameError) {\n    missing.push({\n      key: 'name',\n      label: '–ù–∞–∑–≤–∞–Ω–∏–µ',\n      targetStep: 1,\n      anchorId: 'travelwizard-basic-name',\n    });\n  }\n\n  const descriptionError = validateDescription(formData.description ?? undefined);\n  if (descriptionError) {\n    missing.push({\n      key: 'description',\n      label: '–û–ø–∏—Å–∞–Ω–∏–µ',\n      targetStep: 1,\n      anchorId: 'travelwizard-basic-description',\n    });\n  }\n\n  const countriesError = validateCountries((formData.countries ?? []) as string[]);\n  if (countriesError) {\n    missing.push({\n      key: 'countries',\n      label: '–°—Ç—Ä–∞–Ω—ã (–º–∏–Ω–∏–º—É–º –æ–¥–Ω–∞)',\n      targetStep: 2,\n      anchorId: 'travelwizard-route-countries',\n    });\n  }\n\n  const categoriesError = validateCategories((formData.categories ?? []) as string[]);\n  if (categoriesError) {\n    missing.push({\n      key: 'categories',\n      label: '–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (–º–∏–Ω–∏–º—É–º –æ–¥–Ω–∞)',\n      targetStep: 5,\n      anchorId: 'travelwizard-extras-categories',\n    });\n  }\n\n  // –ï—Å–ª–∏ markers –ø–µ—Ä–µ–¥–∞–Ω –∏ –Ω–µ –ø—É—Å—Ç–æ–π ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ.\n  // –ï—Å–ª–∏ —ç—Ç–æ –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∏–ª–∏ undefined/null ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º coordsMeTravel –∏–∑ —Ñ–æ—Ä–º—ã.\n  const markersSource = Array.isArray(markers) && markers.length > 0 ? markers : (formData.coordsMeTravel ?? []);\n  const markersError = validateMarkers(markersSource as any[]);\n  if (markersError) {\n    missing.push({\n      key: 'route',\n      label: '–ú–∞—Ä—à—Ä—É—Ç (–º–∏–Ω–∏–º—É–º –æ–¥–Ω–∞ —Ç–æ—á–∫–∞)',\n      targetStep: 2,\n      anchorId: 'markers-list-root',\n    });\n  }\n\n  const gallery = (formData.gallery ?? []) as any[];\n  const hasCover = !!(formData.travel_image_thumb_small_url && formData.travel_image_thumb_small_url.trim().length > 0);\n  const hasPhotos = hasCover || gallery.length > 0;\n  if (!hasPhotos) {\n    missing.push({\n      key: 'photos',\n      label: '–§–æ—Ç–æ –∏–ª–∏ –æ–±–ª–æ–∂–∫–∞',\n      targetStep: 3,\n      anchorId: 'travelwizard-media-cover',\n    });\n  }\n\n  return missing;\n}\n\n/**\n * –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏—è\n */\nexport function validateDescription(description: string | undefined | null): ValidationError | null {\n  if (!description || description.trim().length === 0) {\n    return {\n      field: 'description',\n      message: '–û–ø–∏—Å–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è',\n    };\n  }\n  if (description.trim().length < 50) {\n    return {\n      field: 'description',\n      message: '–û–ø–∏—à–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç —á—É—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ (–º–∏–Ω–∏–º—É–º 50 —Å–∏–º–≤–æ–ª–æ–≤), —á—Ç–æ–±—ã –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞–º –±—ã–ª–æ –ø–æ–Ω—è—Ç–Ω–æ, —á–µ–≥–æ –æ–∂–∏–¥–∞—Ç—å.',\n    };\n  }\n  return null;\n}\n\n/**\n * –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω\n */\nexport function validateCountries(countries: string[] | undefined | null): ValidationError | null {\n  if (!countries || countries.length === 0) {\n    return {\n      field: 'countries',\n      message: '–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Å—Ç—Ä–∞–Ω—É',\n    };\n  }\n  return null;\n}\n\n/**\n * –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π\n */\nexport function validateCategories(categories: string[] | undefined | null): ValidationError | null {\n  if (!categories || categories.length === 0) {\n    return {\n      field: 'categories',\n      message: '–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –∫–∞—Ç–µ–≥–æ—Ä–∏—é',\n    };\n  }\n  return null;\n}\n\n/**\n * –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ—á–µ–∫ –º–∞—Ä—à—Ä—É—Ç–∞\n */\nexport function validateMarkers(markers: any[] | undefined | null): ValidationError | null {\n  if (!markers || markers.length === 0) {\n    return {\n      field: 'coordsMeTravel',\n      message: '–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Ç–æ—á–∫—É –º–∞—Ä—à—Ä—É—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–µ',\n    };\n  }\n  return null;\n}\n\n/**\n * –í–∞–ª–∏–¥–∞—Ü–∏—è –≥–æ–¥–∞\n */\nexport function validateYear(year: string | number | undefined | null): ValidationError | null {\n  if (year === undefined || year === null) {\n    return null; // –ì–æ–¥ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω\n  }\n\n  const yearStr = typeof year === 'number' ? String(year) : String(year ?? '').trim();\n  if (yearStr.length === 0) {\n    return null; // –ü—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º\n  }\n\n  const yearNum = parseInt(yearStr, 10);\n  const currentYear = new Date().getFullYear();\n  if (isNaN(yearNum) || yearNum < 1900 || yearNum > currentYear + 1) {\n    return {\n      field: 'year',\n      message: `–ì–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 1900 –¥–æ ${currentYear + 1}`,\n    };\n  }\n  return null;\n}\n\n/**\n * –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–Ω–µ–π\n */\nexport function validateDays(days: string | number | undefined | null): ValidationError | null {\n  if (days === undefined || days === null) {\n    return null; // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ\n  }\n\n  const daysStr = typeof days === 'number' ? String(days) : String(days ?? '').trim();\n  if (daysStr.length === 0) {\n    return null; // –ü—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º\n  }\n\n  const daysNum = parseInt(daysStr, 10);\n  if (isNaN(daysNum) || daysNum < 1 || daysNum > 365) {\n    return {\n      field: 'number_days',\n      message: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 365',\n    };\n  }\n  return null;\n}\n\n/**\n * –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ª—é–¥–µ–π\n */\nexport function validatePeople(people: string | number | undefined | null): ValidationError | null {\n  if (people === undefined || people === null) {\n    return null; // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª—é–¥–µ–π –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ\n  }\n\n  const peopleStr = typeof people === 'number' ? String(people) : String(people ?? '').trim();\n  if (peopleStr.length === 0) {\n    return null; // –ü—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º\n  }\n\n  const peopleNum = parseInt(peopleStr, 10);\n  if (isNaN(peopleNum) || peopleNum < 1 || peopleNum > 100) {\n    return {\n      field: 'number_peoples',\n      message: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª—é–¥–µ–π –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 100',\n    };\n  }\n  return null;\n}\n\n/**\n * –í–∞–ª–∏–¥–∞—Ü–∏—è YouTube —Å—Å—ã–ª–∫–∏\n */\nexport function validateYouTubeLink(link: string | undefined | null): ValidationError | null {\n  if (!link || link.trim().length === 0) {\n    return null; // YouTube —Å—Å—ã–ª–∫–∞ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞\n  }\n  const youtubeRegex = /^(https?:\\/\\/)?(www\\.)?(youtube\\.com|youtu\\.be)\\/.+$/;\n  if (!youtubeRegex.test(link.trim())) {\n    return {\n      field: 'youtube_link',\n      message: '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Å—ã–ª–∫—É –Ω–∞ YouTube',\n    };\n  }\n  return null;\n}\n\n/**\n * –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è\n */\nexport function validateTravelForm(data: TravelFormValidation): ValidationResult {\n  const errors: ValidationError[] = [];\n\n  const nameError = validateName(data.name);\n  if (nameError) errors.push(nameError);\n\n  const descriptionError = validateDescription(data.description);\n  if (descriptionError) errors.push(descriptionError);\n\n  const countriesError = validateCountries(data.countries);\n  if (countriesError) errors.push(countriesError);\n\n  const categoriesError = validateCategories(data.categories);\n  if (categoriesError) errors.push(categoriesError);\n\n  const markersError = validateMarkers(data.coordsMeTravel);\n  if (markersError) errors.push(markersError);\n\n  const yearError = validateYear(data.year);\n  if (yearError) errors.push(yearError);\n\n  const daysError = validateDays(data.number_days);\n  if (daysError) errors.push(daysError);\n\n  const peopleError = validatePeople(data.number_peoples);\n  if (peopleError) errors.push(peopleError);\n\n  const youtubeError = validateYouTubeLink((data as any).youtube_link);\n  if (youtubeError) errors.push(youtubeError);\n\n  return {\n    isValid: errors.length === 0,\n    errors,\n  };\n}\n\n/**\n * –ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –¥–ª—è –ø–æ–ª—è\n */\nexport function getFieldError(field: string, errors: ValidationError[]): string | null {\n  const error = errors.find(e => e.field === field);\n  return error ? error.message : null;\n}\n\n","const MEASUREMENT_ID = process.env.EXPO_PUBLIC_GOOGLE_GA4;\nconst API_SECRET = process.env.EXPO_PUBLIC_GOOGLE_API_SECRET;\n\nconst generateClientId = () => `${Date.now()}.${Math.floor(Math.random() * 1e9)}`;\n\nexport const sendAnalyticsEvent = async (\n    eventName: string,\n    eventParams: Record<string, unknown> = {}\n) => {\n    if (!MEASUREMENT_ID || !API_SECRET) {\n        console.warn('GA4: Missing MEASUREMENT_ID or API_SECRET');\n        return;\n    }\n\n    const url = `https://www.google-analytics.com/mp/collect?measurement_id=${MEASUREMENT_ID}&api_secret=${API_SECRET}`;\n    const body = {\n        client_id: generateClientId(),\n        events: [\n            {\n                name: eventName,\n                params: eventParams,\n            },\n        ],\n    };\n\n    try {\n        const res = await fetch(url, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(body),\n        });\n\n        if (!res.ok) {\n            console.error(`GA4 Error [${res.status}]:`, await res.text());\n        } else {\n            console.log(`üìä GA Event: ${eventName}`, eventParams);\n        }\n    } catch (error) {\n        console.error('GA4 Fetch Error:', error);\n    }\n};\n\nexport const trackWizardEvent = async (\n    eventName: string,\n    params: Record<string, unknown> = {}\n) => {\n    return sendAnalyticsEvent(eventName, params);\n};\n","import { useCallback, useRef, useEffect, useState } from 'react';\nimport _isEqual from 'lodash/isEqual';\n\ninterface UseOptimizedFormStateOptions<T> {\n  debounce?: number;\n  onSave?: (data: T) => Promise<T>;\n  onSuccess?: (savedData: T) => void;\n  onError?: (error: any) => void;\n  onStart?: () => void;\n  validateOnChange?: boolean;\n  validationDebounce?: number;\n}\n\ninterface FormState<T> {\n  data: T;\n  errors: Record<string, string>;\n  touched: Set<string>;\n  isDirty: boolean;\n  isValid: boolean;\n  isSubmitting: boolean;\n}\n\nexport function useOptimizedFormState<T extends Record<string, any>>(\n  initialData: T,\n  options: UseOptimizedFormStateOptions<T> = {}\n) {\n  const {\n    debounce = 5000,\n    onSave,\n    onSuccess,\n    onError,\n    onStart,\n    validateOnChange = true,\n    validationDebounce = 300,\n  } = options;\n\n  // State management with minimal re-renders\n  const [state, setState] = useState<FormState<T>>({\n    data: initialData,\n    errors: {},\n    touched: new Set(),\n    isDirty: false,\n    isValid: true,\n    isSubmitting: false,\n  });\n\n  // Refs for performance optimization\n  const originalDataRef = useRef<T>(initialData);\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const validationTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const mountedRef = useRef(true);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      mountedRef.current = false;\n      if (timeoutRef.current) clearTimeout(timeoutRef.current);\n      if (validationTimeoutRef.current) clearTimeout(validationTimeoutRef.current);\n    };\n  }, []);\n\n  // Optimized field update with minimal re-renders\n  const updateField = useCallback(<K extends keyof T>(\n    field: K,\n    value: T[K]\n  ) => {\n    setState(prevState => {\n      const newData = { ...prevState.data, [field]: value };\n      const isDirty = !_isEqual(newData, originalDataRef.current);\n      \n      return {\n        ...prevState,\n        data: newData,\n        touched: new Set(prevState.touched).add(field as string),\n        isDirty,\n      };\n    });\n\n    // Debounced validation\n    if (validateOnChange && validationDebounce > 0) {\n      if (validationTimeoutRef.current) {\n        clearTimeout(validationTimeoutRef.current);\n      }\n      \n      validationTimeoutRef.current = setTimeout(() => {\n        if (mountedRef.current) {\n          validateField(field as string, value);\n        }\n      }, validationDebounce);\n    }\n  }, [validateOnChange, validationDebounce]);\n\n  // Batch update for multiple fields\n  const updateFields = useCallback((updates: Partial<T>) => {\n    setState(prevState => {\n      const newData = { ...prevState.data, ...updates };\n      const isDirty = !_isEqual(newData, originalDataRef.current);\n      const newTouched = new Set(prevState.touched);\n      \n      Object.keys(updates).forEach(key => newTouched.add(key));\n      \n      return {\n        ...prevState,\n        data: newData,\n        touched: newTouched,\n        isDirty,\n      };\n    });\n  }, []);\n\n  // Validation functions\n  const validateField = useCallback((field: string, value: any) => {\n    // This would be injected with validation rules\n    // For now, just clear errors for the field\n    setState(prevState => ({\n      ...prevState,\n      errors: { ...prevState.errors, [field]: '' },\n    }));\n  }, []);\n\n  const validateAll = useCallback(() => {\n    // Validate all fields and update errors\n    setState(prevState => ({\n      ...prevState,\n      errors: {}, // Reset errors\n      isValid: true, // Would be calculated based on validation\n    }));\n  }, []);\n\n  // Autosave functionality\n  useEffect(() => {\n    if (!onSave || !state.isDirty) return;\n\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n\n    onStart?.();\n\n    timeoutRef.current = setTimeout(async () => {\n      if (!mountedRef.current) return;\n\n      try {\n        setState(prev => ({ ...prev, isSubmitting: true }));\n        const savedData = await onSave(state.data);\n        \n        if (mountedRef.current) {\n          originalDataRef.current = savedData;\n          setState(prev => ({\n            ...prev,\n            isDirty: false,\n            isSubmitting: false,\n          }));\n          onSuccess?.(savedData);\n        }\n      } catch (error) {\n        if (mountedRef.current) {\n          setState(prev => ({ ...prev, isSubmitting: false }));\n          onError?.(error);\n        }\n      }\n    }, debounce);\n\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, [state.data, state.isDirty, debounce, onSave, onSuccess, onError, onStart]);\n\n  // Manual save\n  const save = useCallback(async (): Promise<T> => {\n    if (!onSave) {\n      throw new Error('No onSave function provided');\n    }\n\n    setState(prev => ({ ...prev, isSubmitting: true }));\n\n    try {\n      const savedData = await onSave(state.data);\n      \n      if (mountedRef.current) {\n        originalDataRef.current = savedData;\n        setState(prev => ({\n          ...prev,\n          isDirty: false,\n          isSubmitting: false,\n        }));\n        onSuccess?.(savedData);\n      }\n      \n      return savedData;\n    } catch (error) {\n      if (mountedRef.current) {\n        setState(prev => ({ ...prev, isSubmitting: false }));\n        onError?.(error);\n      }\n      throw error;\n    }\n  }, [onSave, state.data, onSuccess, onError]);\n\n  // Reset form\n  const reset = useCallback((newData?: T) => {\n    const dataToReset = newData || initialData;\n    originalDataRef.current = dataToReset;\n    setState({\n      data: dataToReset,\n      errors: {},\n      touched: new Set(),\n      isDirty: false,\n      isValid: true,\n      isSubmitting: false,\n    });\n  }, [initialData]);\n\n  // Clear errors\n  const clearErrors = useCallback(() => {\n    setState(prev => ({ ...prev, errors: {}, isValid: true }));\n  }, []);\n\n  // Set field error\n  const setFieldError = useCallback((field: string, error: string) => {\n    setState(prev => ({\n      ...prev,\n      errors: { ...prev.errors, [field]: error },\n      isValid: false,\n    }));\n  }, []);\n\n  return {\n    // State\n    data: state.data,\n    errors: state.errors,\n    touched: state.touched,\n    isDirty: state.isDirty,\n    isValid: state.isValid,\n    isSubmitting: state.isSubmitting,\n    \n    // Actions\n    updateField,\n    updateFields,\n    validateField,\n    validateAll,\n    save,\n    reset,\n    clearErrors,\n    setFieldError,\n    \n    // Utilities\n    getFieldError: (field: string) => state.errors[field] || '',\n    isTouched: (field: string) => state.touched.has(field),\n    hasError: (field: string) => !!state.errors[field],\n  };\n}\n","import { useCallback, useEffect, useRef, useState } from 'react';\nimport _isEqual from 'lodash/isEqual';\n\ninterface UseImprovedAutoSaveOptions<T> {\n  debounce?: number;\n  onSave: (data: T) => Promise<T>;\n  onSuccess?: (savedData: T) => void;\n  onError?: (error: Error) => void;\n  onStart?: () => void;\n  maxRetries?: number;\n  retryDelay?: number;\n  enableRetry?: boolean;\n}\n\ntype AutosaveStatus = 'idle' | 'debouncing' | 'saving' | 'saved' | 'error';\n\ninterface AutosaveState {\n  status: AutosaveStatus;\n  lastSaved: Date | null;\n  error: Error | null;\n  retryCount: number;\n  isOnline: boolean;\n}\n\nexport function useImprovedAutoSave<T>(\n  data: T,\n  originalData: T,\n  options: UseImprovedAutoSaveOptions<T>\n) {\n  const {\n    debounce = 5000,\n    onSave,\n    onSuccess,\n    onError,\n    onStart,\n    maxRetries = 3,\n    retryDelay = 1000,\n    enableRetry = true,\n  } = options;\n\n  const [state, setState] = useState<AutosaveState>({\n    status: 'idle',\n    lastSaved: null,\n    error: null,\n    retryCount: 0,\n    isOnline: true,\n  });\n\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const retryTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const mountedRef = useRef(true);\n  const lastSavedDataRef = useRef<T>(originalData);\n  const latestDataRef = useRef<T>(data);\n  const isOnlineRef = useRef<boolean>(true);\n  const abortControllerRef = useRef<AbortController | null>(null);\n\n  // Cleanup function\n  const cleanup = useCallback(() => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n      timeoutRef.current = null;\n    }\n    if (retryTimeoutRef.current) {\n      clearTimeout(retryTimeoutRef.current);\n      retryTimeoutRef.current = null;\n    }\n    if (abortControllerRef.current) {\n      abortControllerRef.current.abort();\n      abortControllerRef.current = null;\n    }\n  }, []);\n\n  // Network status monitoring\n  useEffect(() => {\n    const handleOnline = () => {\n      isOnlineRef.current = true;\n      setState(prev => ({ ...prev, isOnline: true }));\n    };\n    const handleOffline = () => {\n      isOnlineRef.current = false;\n      setState(prev => ({ ...prev, isOnline: false }));\n    };\n\n    if (typeof window !== 'undefined') {\n      window.addEventListener('online', handleOnline);\n      window.addEventListener('offline', handleOffline);\n    }\n\n    return () => {\n      if (typeof window !== 'undefined') {\n        window.removeEventListener('online', handleOnline);\n        window.removeEventListener('offline', handleOffline);\n      }\n    };\n  }, []);\n\n  // Main cleanup on unmount\n  useEffect(() => {\n    return () => {\n      mountedRef.current = false;\n      cleanup();\n    };\n  }, [cleanup]);\n\n  // Check if data has changed - inline function, not in dependencies\n  const hasDataChanged = (): boolean => {\n    return !_isEqual(data, lastSavedDataRef.current);\n  };\n\n  // Save function with retry logic\n  const performSave = useCallback(async (dataToSave: T, retryAttempt = 0): Promise<T> => {\n    // Create new abort controller for this save attempt\n    abortControllerRef.current = new AbortController();\n    \n    try {\n      setState(prev => ({\n        ...prev,\n        status: 'saving',\n        error: null,\n      }));\n\n      const result = await onSave(dataToSave);\n      \n      if (!mountedRef.current) {\n        // Component is gone (e.g. user navigated away). Do not update state or\n        // fire callbacks; just resolve to avoid surfacing a spurious error.\n        return result;\n      }\n\n      // Update refs and state on success\n      lastSavedDataRef.current = result;\n      latestDataRef.current = result;\n      setState(prev => ({\n        ...prev,\n        status: 'saved',\n        lastSaved: new Date(),\n        error: null,\n        retryCount: 0,\n      }));\n\n      onSuccess?.(result);\n      return result;\n\n    } catch (error) {\n      if (!mountedRef.current) {\n        // Component is gone; avoid propagating errors that would otherwise show\n        // up as console noise or user-facing toasts during navigation.\n        return dataToSave;\n      }\n\n      const saveError = error instanceof Error ? error : new Error('Save failed');\n      \n      // Retry logic (—Å–æ—Ö—Ä–∞–Ω—ë–Ω, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏,\n      // —á—Ç–æ–±—ã –Ω–µ —É—Å–ª–æ–∂–Ω—è—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É –∞–≤—Ç–æ—Å–µ–π–≤–∞)\n      if (enableRetry && retryAttempt < maxRetries && isOnlineRef.current) {\n        setState(prev => ({\n          ...prev,\n          error: saveError,\n          retryCount: retryAttempt + 1,\n        }));\n\n        // Schedule retry\n        retryTimeoutRef.current = setTimeout(() => {\n          if (mountedRef.current) {\n            performSave(dataToSave, retryAttempt + 1).catch(() => {\n              // Error handled in recursive call\n            });\n          }\n        }, retryDelay * Math.pow(2, retryAttempt)); // Exponential backoff\n\n        throw saveError;\n      }\n\n      // Final error state\n      setState(prev => ({\n        ...prev,\n        status: 'error',\n        error: saveError,\n        retryCount: 0,\n      }));\n\n      onError?.(saveError);\n      throw saveError;\n    }\n  }, [onSave, onSuccess, onError, enableRetry, maxRetries, retryDelay]);\n\n  // –£–ø—Ä–æ—â—ë–Ω–Ω—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∞–≤—Ç–æ—Å–µ–π–≤:\n  // —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Ä–µ–∞–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ\n  // –∏ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø–æ—Å–ª–µ –¥–µ–±–∞—É–Ω—Å–∞.\n  useEffect(() => {\n    // –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –ø–ª–∞–Ω–∏—Ä—É–µ–º.\n    const isEqual = _isEqual(data, lastSavedDataRef.current);\n    \n    // Debug logging\n    if (!isEqual) {\n      console.log('[useImprovedAutoSave] Data changed, scheduling save', {\n        hasId: !!(data as any)?.id,\n        dataKeys: Object.keys(data || {}),\n      });\n    }\n    \n    if (isEqual) {\n      return;\n    }\n\n    // –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–∞–±–ª—é–¥–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ.\n    latestDataRef.current = data;\n\n    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–µ—Ä, –µ—Å–ª–∏ –æ–Ω –±—ã–ª.\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n      timeoutRef.current = null;\n    }\n\n    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –Ω–∞ debouncing —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω –Ω–µ —É–∂–µ debouncing\n    setState(prev => {\n      if (prev.status === 'debouncing') {\n        return prev; // –ù–µ –≤—ã–∑—ã–≤–∞–µ–º setState –µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å —É–∂–µ debouncing\n      }\n      return {\n        ...prev,\n        status: 'debouncing',\n        error: null,\n      };\n    });\n\n    timeoutRef.current = setTimeout(() => {\n      if (!mountedRef.current) return;\n\n      // –ï—Å–ª–∏ –∫ –º–æ–º–µ–Ω—Ç—É —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞ –¥–∞–Ω–Ω—ã–µ —É–∂–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º,\n      // —Ç–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –Ω–µ—á–µ–≥–æ.\n      const current = latestDataRef.current;\n      if (_isEqual(current, lastSavedDataRef.current)) {\n        return;\n      }\n\n      // –ù–µ —Å–æ—Ö—Ä–∞–Ω—è–µ–º, –µ—Å–ª–∏ –æ—Ñ—Ñ–ª–∞–π–Ω.\n      if (!isOnlineRef.current) {\n        return;\n      }\n\n      // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–ª–ª–±–µ–∫ –Ω–∞—á–∞–ª–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.\n      onStart?.();\n\n      // –ó–∞–ø—É—Å–∫–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ. –û—à–∏–±–∫—É –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤–Ω—É—Ç—Ä–∏ performSave.\n      performSave(current).catch(() => {\n        // –û—à–∏–±–∫–∞ —É–∂–µ –æ—Ç—Ä–∞–∂–µ–Ω–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —á–µ—Ä–µ–∑ performSave.\n      });\n    }, debounce);\n\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n        timeoutRef.current = null;\n      }\n    };\n  }, [data, debounce, performSave, onStart]); // Removed hasDataChanged from dependencies\n\n  // Manual save function\n  const saveNow = useCallback(async (): Promise<T> => {\n    if (!state.isOnline) {\n      throw new Error('Cannot save while offline');\n    }\n\n    cleanup();\n    return performSave(data);\n  }, [data, performSave, cleanup, state.isOnline]);\n\n  // Reset to original data\n  const resetToOriginal = useCallback(() => {\n    cleanup();\n    lastSavedDataRef.current = originalData;\n    setState({\n      status: 'idle',\n      lastSaved: null,\n      error: null,\n      retryCount: 0,\n      isOnline: state.isOnline,\n    });\n  }, [originalData, cleanup, state.isOnline]);\n\n  // Clear error\n  const clearError = useCallback(() => {\n    setState(prev => ({ ...prev, error: null, status: 'idle' }));\n  }, []);\n\n  // Retry failed save\n  const retrySave = useCallback((): Promise<T> => {\n    if (state.status !== 'error' || !state.error) {\n      throw new Error('No failed save to retry');\n    }\n    return performSave(data);\n  }, [state.status, state.error, data, performSave]);\n\n  // Update baseline data (e.g., after loading from server)\n  const updateBaseline = useCallback((newBaseline: T) => {\n    lastSavedDataRef.current = newBaseline;\n    latestDataRef.current = newBaseline;\n    console.log('[useImprovedAutoSave] Baseline updated', {\n      hasId: !!(newBaseline as any)?.id,\n    });\n  }, []);\n\n  return {\n    // State\n    status: state.status,\n    lastSaved: state.lastSaved,\n    error: state.error,\n    retryCount: state.retryCount,\n    isOnline: state.isOnline,\n    hasUnsavedChanges: hasDataChanged(),\n\n    // Actions\n    saveNow,\n    resetToOriginal,\n    clearError,\n    retrySave,\n    updateBaseline,\n\n    // Utilities\n    canSave: state.isOnline && state.status !== 'saving',\n    isSaving: state.status === 'saving',\n    hasError: state.status === 'error',\n    timeSinceLastSave: state.lastSaved \n      ? Date.now() - state.lastSaved.getTime() \n      : null,\n  };\n}\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { KeyboardAvoidingView, Platform, ScrollView, StyleSheet, View, Text, Dimensions, LayoutChangeEvent } from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { Snackbar } from 'react-native-paper';\n\nimport ContentUpsertSection from '@/components/travel/ContentUpsertSection';\nimport { TravelFormData } from '@/src/types/types';\nimport TravelWizardHeader from '@/components/travel/TravelWizardHeader';\nimport TravelWizardFooter from '@/components/travel/TravelWizardFooter';\nimport { DESIGN_TOKENS } from '@/constants/designSystem';\nimport { METRICS } from '@/constants/layout';\n\nconst { width: windowWidth, height: windowHeight } = Dimensions.get('window');\nconst isMobileDefault = windowWidth <= METRICS.breakpoints.tablet;\nconst FILTERS_SCROLL_MAX_HEIGHT = windowHeight * 0.8;\n\ninterface TravelWizardStepBasicProps {\n    currentStep: number;\n    totalSteps: number;\n    formData: TravelFormData;\n    setFormData: React.Dispatch<React.SetStateAction<TravelFormData>>;\n    isMobile?: boolean;\n    onManualSave: () => Promise<TravelFormData | void>;\n    snackbarVisible: boolean;\n    snackbarMessage: string;\n    onDismissSnackbar: () => void;\n    onGoNext: () => void;\n    stepErrors?: string[];\n    firstErrorField?: string | null;\n    autosaveStatus?: 'idle' | 'saving' | 'saved' | 'error';\n    autosaveBadge?: string;\n    focusAnchorId?: string | null;\n    onAnchorHandled?: () => void;\n    stepMeta?: {\n        title?: string;\n        subtitle?: string;\n        tipTitle?: string;\n        tipBody?: string;\n        nextLabel?: string;\n    };\n    progress?: number;\n}\n\nconst TravelWizardStepBasic: React.FC<TravelWizardStepBasicProps> = ({\n    currentStep,\n    totalSteps,\n    formData,\n    setFormData,\n    isMobile = isMobileDefault,\n    onManualSave,\n    snackbarVisible,\n    snackbarMessage,\n    onDismissSnackbar,\n    onGoNext,\n    stepErrors,\n    firstErrorField,\n    autosaveStatus,\n    autosaveBadge,\n    focusAnchorId,\n    onAnchorHandled,\n    stepMeta,\n    progress = currentStep / totalSteps,\n}) => {\n    const progressValue = Math.min(Math.max(progress, 0), 1);\n    const progressPercent = Math.round(progressValue * 100);\n    const [footerHeight, setFooterHeight] = useState(0);\n\n    const handleFooterLayout = useCallback((event: LayoutChangeEvent) => {\n        const next = Math.ceil(event.nativeEvent.layout.height);\n        setFooterHeight(prev => (prev === next ? prev : next));\n    }, []);\n\n    const contentPaddingBottom = useMemo(() => {\n        return footerHeight > 0 ? footerHeight + 16 : 180;\n    }, [footerHeight]);\n\n    return (\n        <SafeAreaView style={styles.safeContainer}>\n            <KeyboardAvoidingView\n                style={styles.keyboardAvoid}\n                behavior={Platform.OS === 'ios' ? 'padding' : undefined}\n                keyboardVerticalOffset={0}\n            >\n                <TravelWizardHeader\n                    title={stepMeta?.title ?? '–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è'}\n                    subtitle={stepMeta?.subtitle ?? `–®–∞–≥ ${currentStep} –∏–∑ ${totalSteps}`}\n                    progressPercent={progressPercent}\n                    autosaveBadge={autosaveBadge}\n                    tipTitle={stepMeta?.tipTitle}\n                    tipBody={stepMeta?.tipBody}\n                />\n                {stepErrors && stepErrors.length > 0 && (\n                    <View style={styles.errorSummaryContainer}>\n                        {stepErrors.map((err, idx) => (\n                            <Text key={idx} style={styles.errorSummaryText}>\n                                ‚Ä¢ {err}\n                            </Text>\n                        ))}\n                        <Text style={styles.errorSummaryHelper}>\n                            –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—è ‚Äî –±–µ–∑ –Ω–∏—Ö –º–∞—Ä—à—Ä—É—Ç –Ω–µ–ª—å–∑—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é.\n                        </Text>\n                    </View>\n                )}\n                <View style={[styles.mainWrapper, isMobile && styles.mainWrapperMobile]}>\n                    <ScrollView\n                        style={styles.contentColumn}\n                        contentContainerStyle={[styles.contentContainer, { paddingBottom: contentPaddingBottom }]}\n                        keyboardShouldPersistTaps=\"handled\"\n                    >\n                        <View style={styles.contentInner}>\n                            <ContentUpsertSection\n                                formData={formData}\n                                setFormData={setFormData}\n                                firstErrorField={firstErrorField}\n                                autosaveStatus={autosaveStatus}\n                                focusAnchorId={focusAnchorId}\n                                onAnchorHandled={onAnchorHandled}\n                                visibleFields={['name', 'description']}\n                                showProgress={false}\n                            />\n                        </View>\n                    </ScrollView>\n                </View>\n                <TravelWizardFooter\n                    canGoBack={false}\n                    onPrimary={onGoNext}\n                    primaryLabel={stepMeta?.nextLabel ?? '–î–∞–ª–µ–µ'}\n                    onSave={onManualSave}\n                    onLayout={handleFooterLayout}\n                />\n                <Snackbar visible={snackbarVisible} onDismiss={onDismissSnackbar}>\n                    {snackbarMessage}\n                </Snackbar>\n            </KeyboardAvoidingView>\n        </SafeAreaView>\n    );\n};\n\nconst styles = StyleSheet.create({\n    safeContainer: { flex: 1, backgroundColor: DESIGN_TOKENS.colors.background },\n    keyboardAvoid: { flex: 1 },\n    mainWrapper: { flex: 1, flexDirection: 'row' },\n    mainWrapperMobile: { flexDirection: 'column' },\n    contentColumn: { flex: 1 },\n    filtersScroll: { maxHeight: FILTERS_SCROLL_MAX_HEIGHT },\n    mobileFiltersWrapper: { padding: DESIGN_TOKENS.spacing.md },\n    contentContainer: {\n        paddingHorizontal: 8,\n        paddingTop: DESIGN_TOKENS.spacing.sm,\n        alignItems: 'center',\n    },\n    contentInner: {\n        width: '100%',\n        maxWidth: 980,\n    },\n    errorSummaryContainer: {\n        paddingHorizontal: DESIGN_TOKENS.spacing.lg,\n        paddingVertical: 8,\n        backgroundColor: DESIGN_TOKENS.colors.errorSoft,\n        borderTopWidth: 1,\n        borderBottomWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.dangerLight,\n    },\n    errorSummaryText: {\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        color: DESIGN_TOKENS.colors.dangerDark,\n    },\n    errorSummaryHelper: {\n        marginTop: 4,\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        color: DESIGN_TOKENS.colors.dangerDark,\n    },\n});\n\nexport default React.memo(TravelWizardStepBasic);\n","import React, { useCallback, useMemo, useState, useEffect, useRef } from 'react';\nimport { View, SafeAreaView, StyleSheet, ScrollView, Text, NativeSyntheticEvent, LayoutChangeEvent, Modal, TouchableOpacity, Platform, Dimensions } from 'react-native';\nimport { TravelFormData } from '@/src/types/types';\nimport TextInputComponent from '@/components/TextInputComponent';\nimport ArticleEditor from '@/components/ArticleEditor';\nimport { validateTravelForm, getFieldError, type ValidationError } from '@/utils/formValidation';\nimport { DESIGN_TOKENS } from '@/constants/designSystem';\nimport { METRICS } from '@/constants/layout';\n\ninterface ContentUpsertSectionProps {\n    formData: TravelFormData;\n    setFormData: React.Dispatch<React.SetStateAction<TravelFormData>>;\n    firstErrorField?: string | null;\n    autosaveStatus?: 'idle' | 'saving' | 'saved' | 'error';\n    focusAnchorId?: string | null;\n    onAnchorHandled?: () => void;\n    visibleFields?: Array<'name' | 'description' | 'plus' | 'minus' | 'recommendation'>;\n    showProgress?: boolean;\n}\n\nconst ContentUpsertSection: React.FC<ContentUpsertSectionProps> = ({\n                                                                       formData,\n                                                                       setFormData,\n                                                                       firstErrorField,\n                                                                       autosaveStatus,\n                                                                       focusAnchorId,\n                                                                       onAnchorHandled,\n                                                                       visibleFields,\n                                                                       showProgress = true,\n                                                                   }) => {\n    // ‚úÖ –£–õ–£–ß–®–ï–ù–ò–ï: –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏\n    const [validationErrors, setValidationErrors] = useState<ValidationError[]>([]);\n    const [touchedFields, setTouchedFields] = useState<Set<string>>(new Set());\n    const [fieldPositions, setFieldPositions] = useState<Record<string, number>>({});\n    const scrollRef = useRef<ScrollView>(null);\n    const [isDescriptionFullscreen, setIsDescriptionFullscreen] = useState(false);\n\n    const isMobile = useMemo(() => {\n        if (Platform.OS === 'web') return false;\n        const { width } = Dimensions.get('window');\n        return width <= METRICS.breakpoints.tablet;\n    }, []);\n\n    useEffect(() => {\n        const result = validateTravelForm({\n            name: formData.name,\n            description: formData.description,\n            countries: formData.countries,\n            categories: formData.categories,\n            year: formData.year,\n            number_days: formData.number_days,\n            number_peoples: formData.number_peoples,\n            youtube_link: formData.youtube_link,\n        } as any);\n        setValidationErrors(result.errors);\n    }, [\n        formData.name,\n        formData.description,\n        formData.countries,\n        formData.categories,\n        formData.year,\n        formData.number_days,\n        formData.number_peoples,\n        formData.youtube_link,\n    ]);\n\n    const descriptionPlainLength = useMemo(() => {\n        const raw = formData.description ?? '';\n        const withoutTags = String(raw)\n            .replace(/<[^>]*>/g, ' ')\n            .replace(/&nbsp;/gi, ' ')\n            .replace(/\\s+/g, ' ')\n            .trim();\n        return withoutTags.length;\n    }, [formData.description]);\n\n    const descriptionPlainText = useMemo(() => {\n        const raw = formData.description ?? '';\n        return String(raw)\n            .replace(/<[^>]*>/g, ' ')\n            .replace(/&nbsp;/gi, ' ')\n            .replace(/\\s+/g, ' ')\n            .trim();\n    }, [formData.description]);\n\n    const descriptionStatusText = useMemo(() => {\n        if (descriptionPlainLength === 0) {\n            return '–û–ø–∏—à–∏—Ç–µ, –¥–ª—è –∫–æ–≥–æ —ç—Ç–æ—Ç –º–∞—Ä—à—Ä—É—Ç, —á—Ç–æ –≤ –Ω—ë–º –≥–ª–∞–≤–Ω–æ–µ –∏ —á–µ–≥–æ –æ–∂–∏–¥–∞—Ç—å. –ú–∏–Ω–∏–º—É–º 50 —Å–∏–º–≤–æ–ª–æ–≤.';\n        }\n        if (descriptionPlainLength < 50) {\n            return '–û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–∫–∞ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ. –î–æ–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ–∫—Å—Ç (–º–∏–Ω–∏–º—É–º 50 —Å–∏–º–≤–æ–ª–æ–≤).';\n        }\n        if (descriptionPlainLength <= 150) {\n            return '–•–æ—Ä–æ—à–µ–µ –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —á—É—Ç—å –±–æ–ª—å—à–µ –¥–µ—Ç–∞–ª–µ–π (–ø–æ –∂–µ–ª–∞–Ω–∏—é).';\n        }\n        return '–û–ø–∏—Å–∞–Ω–∏–µ –≤—ã–≥–ª—è–¥–∏—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–¥—Ä–æ–±–Ω—ã–º.';\n    }, [descriptionPlainLength]);\n\n    const handleChange = useCallback(\n        <T extends keyof TravelFormData>(name: T, value: TravelFormData[T]) => {\n            setFormData(prev => ({ ...prev, [name]: value }));\n            // –û—Ç–º–µ—á–∞–µ–º –ø–æ–ª–µ –∫–∞–∫ \"—Ç—Ä–æ–Ω—É—Ç–æ–µ\" –¥–ª—è –ø–æ–∫–∞–∑–∞ –æ—à–∏–±–æ–∫\n            setTouchedFields(prev => new Set(prev).add(name as string));\n        },\n        [setFormData]\n    );\n\n    // –ü–æ–ª—É—á–∏—Ç—å –æ—à–∏–±–∫—É –¥–ª—è –ø–æ–ª—è (–ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–ª–µ –±—ã–ª–æ \"—Ç—Ä–æ–Ω—É—Ç–æ\")\n    const getError = useCallback((field: string) => {\n        if (!touchedFields.has(field)) return null;\n        return getFieldError(field, validationErrors);\n    }, [touchedFields, validationErrors]);\n\n    const formProgress = useMemo(() => {\n        const requiredFields = ['name', 'description', 'countries', 'categories'];\n        const filledFields = requiredFields.filter(field => {\n            const value = (formData as any)[field];\n            if (Array.isArray(value)) return value.length > 0;\n            return value && String(value).trim().length > 0;\n        });\n        return Math.round((filledFields.length / requiredFields.length) * 100);\n    }, [formData]);\n\n    const idTravelStr = useMemo(\n        () => (formData?.id != null ? String(formData.id) : undefined),\n        [formData?.id]\n    );\n\n    const renderEditorSection = useCallback(\n        (\n            title: string, \n            content: string | undefined | null, \n            onChange: (val: string) => void,\n            error: string | null = null,\n            required: boolean = false,\n            hint?: string,\n            fieldKey?: string,\n        ) => {\n            const key = fieldKey ?? (title === '–û–ø–∏—Å–∞–Ω–∏–µ' ? 'description' : undefined);\n            const handleLayout = (event: NativeSyntheticEvent<LayoutChangeEvent['nativeEvent']>) => {\n                if (!key) return;\n                const y = event.nativeEvent.layout.y;\n                setFieldPositions(prev => ({ ...prev, [key]: y }));\n            };\n\n            const isDescription = title === '–û–ø–∏—Å–∞–Ω–∏–µ';\n\n            return (\n                <View style={styles.sectionEditor} onLayout={handleLayout}>\n                    <View style={styles.editorHeader}>\n                        <Text style={styles.editorLabel}>\n                            {title}\n                            {required && <Text style={styles.required}> *</Text>}\n                        </Text>\n                        {hint && (\n                            <Text style={styles.editorHint}>{hint}</Text>\n                        )}\n                    </View>\n                    {isDescription && isMobile ? (\n                        <>\n                            <TouchableOpacity\n                                style={styles.descriptionPreview}\n                                activeOpacity={0.9}\n                                onPress={() => setIsDescriptionFullscreen(true)}\n                            >\n                                <Text style={styles.descriptionPreviewText} numberOfLines={4}>\n                                    {descriptionPlainText.length > 0\n                                        ? descriptionPlainText\n                                        : (hint ?? '–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ‚Ä¶')}\n                                </Text>\n                                <View style={styles.descriptionPreviewFooter}>\n                                    <Text style={styles.descriptionCounterText}>{descriptionPlainLength} —Å–∏–º–≤–æ–ª–æ–≤</Text>\n                                    <View style={styles.descriptionEditChip}>\n                                        <Text style={styles.descriptionEditChipText}>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</Text>\n                                    </View>\n                                </View>\n                            </TouchableOpacity>\n\n                            <Modal\n                                visible={isDescriptionFullscreen}\n                                animationType=\"slide\"\n                                presentationStyle=\"fullScreen\"\n                                onRequestClose={() => setIsDescriptionFullscreen(false)}\n                            >\n                                <SafeAreaView style={styles.modalSafeArea}>\n                                    <View style={styles.modalHeader}>\n                                        <TouchableOpacity\n                                            onPress={() => setIsDescriptionFullscreen(false)}\n                                            hitSlop={{ top: 10, bottom: 10, left: 10, right: 10 }}\n                                        >\n                                            <Text style={styles.modalHeaderAction}>–ó–∞–∫—Ä—ã—Ç—å</Text>\n                                        </TouchableOpacity>\n                                        <Text style={styles.modalHeaderTitle}>–û–ø–∏—Å–∞–Ω–∏–µ</Text>\n                                        <TouchableOpacity\n                                            onPress={() => setIsDescriptionFullscreen(false)}\n                                            hitSlop={{ top: 10, bottom: 10, left: 10, right: 10 }}\n                                        >\n                                            <Text style={styles.modalHeaderAction}>–ì–æ—Ç–æ–≤–æ</Text>\n                                        </TouchableOpacity>\n                                    </View>\n                                    <View style={styles.modalBody}>\n                                        <ArticleEditor\n                                            key={`description-fullscreen-${idTravelStr ?? 'new'}`}\n                                            label={title}\n                                            content={content ?? ''}\n                                            onChange={onChange}\n                                            idTravel={idTravelStr}\n                                            variant=\"default\"\n                                        />\n                                    </View>\n                                </SafeAreaView>\n                            </Modal>\n                        </>\n                    ) : (\n                        <ArticleEditor\n                            key={`${title}-${idTravelStr ?? 'new'}`}\n                            label={title}\n                            content={content ?? ''}\n                            onChange={onChange}\n                            idTravel={idTravelStr}\n                            variant={isDescription ? 'default' : 'compact'}\n                        />\n                    )}\n                    {isDescription && (\n                        <View style={styles.descriptionStatusRow}>\n                            <Text style={styles.descriptionStatusText}>{descriptionStatusText}</Text>\n                            <Text style={styles.descriptionCounterText}>{descriptionPlainLength} —Å–∏–º–≤–æ–ª–æ–≤</Text>\n                        </View>\n                    )}\n                    {isDescription && autosaveStatus && (\n                        <View style={styles.autosaveRow}>\n                            {autosaveStatus === 'saving' && (\n                                <Text style={styles.autosaveText}>–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ‚Ä¶</Text>\n                            )}\n                            {autosaveStatus === 'saved' && (\n                                <Text style={styles.autosaveSuccess}>–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã</Text>\n                            )}\n                            {autosaveStatus === 'error' && (\n                                <Text style={styles.autosaveError}>\n                                    –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.\n                                </Text>\n                            )}\n                        </View>\n                    )}\n                    {error && (\n                        <View style={styles.errorContainer}>\n                            <Text style={styles.errorText}>{error}</Text>\n                        </View>\n                    )}\n                </View>\n            );\n        },\n        [descriptionPlainLength, descriptionPlainText, descriptionStatusText, idTravelStr, isDescriptionFullscreen, isMobile]\n    );\n\n    useEffect(() => {\n        if (!firstErrorField) return;\n        const y = fieldPositions[firstErrorField];\n        if (y == null || !scrollRef.current) return;\n        scrollRef.current.scrollTo({ y: Math.max(y - 40, 0), animated: true });\n    }, [firstErrorField, fieldPositions]);\n\n    useEffect(() => {\n        if (!focusAnchorId) return;\n\n        const key = (() => {\n            if (focusAnchorId === 'travelwizard-basic-name') return 'name';\n            if (focusAnchorId === 'travelwizard-basic-description') return 'description';\n            return null;\n        })();\n\n        if (!key) return;\n\n        if (Platform.OS === 'web') {\n            onAnchorHandled?.();\n            return;\n        }\n\n        const y = fieldPositions[key];\n        if (y == null || !scrollRef.current) {\n            onAnchorHandled?.();\n            return;\n        }\n\n        scrollRef.current.scrollTo({ y: Math.max(y - 40, 0), animated: true });\n        onAnchorHandled?.();\n    }, [fieldPositions, focusAnchorId, onAnchorHandled]);\n\n    return (\n        <SafeAreaView style={styles.safeArea}>\n            <ScrollView\n                contentContainerStyle={styles.container}\n                keyboardShouldPersistTaps=\"handled\"\n                showsVerticalScrollIndicator={false}\n                ref={scrollRef}\n            >\n                {/* ‚úÖ –£–õ–£–ß–®–ï–ù–ò–ï: –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—ã */}\n                {showProgress && (\n                    <View style={styles.progressSection}>\n                        <View style={styles.progressHeader}>\n                            <Text style={styles.progressLabel}>–ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è</Text>\n                            <Text style={styles.progressPercent}>{formProgress}%</Text>\n                        </View>\n                        <View style={styles.progressBarContainer}>\n                            <View style={[styles.progressBar, { width: `${formProgress}%` }]} />\n                        </View>\n                    </View>\n                )}\n\n                {(visibleFields == null || visibleFields.includes('name')) && (\n                    <View\n                        style={styles.section}\n                        nativeID=\"travelwizard-basic-name\"\n                        onLayout={event => {\n                            const y = event.nativeEvent.layout.y;\n                            setFieldPositions(prev => ({ ...prev, name: y }));\n                        }}\n                    >\n                        <TextInputComponent\n                            label=\"–ù–∞–∑–≤–∞–Ω–∏–µ\"\n                            value={formData.name ?? ''}\n                            onChange={value => handleChange('name', value)}\n                            error={getError('name')}\n                            required={true}\n                            hint=\"–ö—Ä–∞—Ç–∫–æ–µ –∏ –ø–æ–Ω—è—Ç–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (–Ω–µ –º–µ–Ω–µ–µ 3 —Å–∏–º–≤–æ–ª–æ–≤). –ü–æ –Ω–µ–º—É –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏ –±—É–¥—É—Ç –∏—Å–∫–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç.\"\n                        />\n                    </View>\n                )}\n\n                {(visibleFields == null || visibleFields.includes('description')) &&\n                    <View\n                        nativeID=\"travelwizard-basic-description\"\n                        onLayout={event => {\n                            const y = event.nativeEvent.layout.y;\n                            setFieldPositions(prev => ({ ...prev, description: y }));\n                        }}\n                    >\n                        {renderEditorSection(\n                            '–û–ø–∏—Å–∞–Ω–∏–µ',\n                            formData.description,\n                            val => handleChange('description', val),\n                            getError('description'),\n                            true,\n                            '–û–ø–∏—à–∏—Ç–µ, –¥–ª—è –∫–æ–≥–æ —ç—Ç–æ—Ç –º–∞—Ä—à—Ä—É—Ç, —á—Ç–æ –≤ –Ω—ë–º –≥–ª–∞–≤–Ω–æ–µ –∏ —á–µ–≥–æ –æ–∂–∏–¥–∞—Ç—å. –ú–∏–Ω–∏–º—É–º 50 —Å–∏–º–≤–æ–ª–æ–≤.'\n                        )}\n                    </View>}\n\n                {(visibleFields == null || visibleFields.includes('plus')) &&\n                    renderEditorSection('–ü–ª—é—Å—ã', formData.plus, val => handleChange('plus', val), null, false, '–ß—Ç–æ –≤–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å –≤ —ç—Ç–æ–º –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–∏')}\n\n                {(visibleFields == null || visibleFields.includes('minus')) &&\n                    renderEditorSection('–ú–∏–Ω—É—Å—ã', formData.minus, val => handleChange('minus', val), null, false, '–ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å')}\n\n                {(visibleFields == null || visibleFields.includes('recommendation')) &&\n                    renderEditorSection('–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏', formData.recommendation, val => handleChange('recommendation', val), null, false, '–í–∞—à–∏ —Å–æ–≤–µ—Ç—ã –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤')}\n            </ScrollView>\n        </SafeAreaView>\n    );\n};\n\nconst styles = StyleSheet.create({\n    safeArea: { flex: 1, backgroundColor: DESIGN_TOKENS.colors.background },\n    container: { padding: DESIGN_TOKENS.spacing.xxs, paddingBottom: 40 },\n    modalSafeArea: { flex: 1, backgroundColor: DESIGN_TOKENS.colors.background },\n    modalHeader: {\n        paddingHorizontal: DESIGN_TOKENS.spacing.md,\n        paddingVertical: DESIGN_TOKENS.spacing.sm,\n        borderBottomWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.border,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n    },\n    modalHeaderTitle: {\n        fontSize: DESIGN_TOKENS.typography.sizes.md,\n        fontWeight: '700',\n        color: DESIGN_TOKENS.colors.text,\n    },\n    modalHeaderAction: {\n        fontSize: DESIGN_TOKENS.typography.sizes.sm,\n        fontWeight: '600',\n        color: DESIGN_TOKENS.colors.primary,\n    },\n    modalBody: {\n        flex: 1,\n        padding: DESIGN_TOKENS.spacing.xxs,\n    },\n    descriptionPreview: {\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.border,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        borderRadius: 12,\n        padding: DESIGN_TOKENS.spacing.md,\n        minHeight: 140,\n    },\n    descriptionPreviewText: {\n        fontSize: DESIGN_TOKENS.typography.sizes.sm,\n        color: DESIGN_TOKENS.colors.text,\n        lineHeight: 18,\n        marginBottom: DESIGN_TOKENS.spacing.sm,\n    },\n    descriptionPreviewFooter: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n    },\n    descriptionEditChip: {\n        paddingHorizontal: DESIGN_TOKENS.spacing.sm,\n        paddingVertical: DESIGN_TOKENS.spacing.xxs,\n        borderRadius: 999,\n        backgroundColor: DESIGN_TOKENS.colors.primarySoft,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.borderAccent,\n    },\n    descriptionEditChipText: {\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        fontWeight: '600',\n        color: DESIGN_TOKENS.colors.primary,\n    },\n    progressSection: {\n        marginBottom: DESIGN_TOKENS.spacing.xs,\n        padding: DESIGN_TOKENS.spacing.lg,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        borderRadius: 12,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.border,\n    },\n    progressHeader: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: 8,\n    },\n    progressLabel: {\n        fontSize: DESIGN_TOKENS.typography.sizes.sm,\n        fontWeight: '600',\n        color: DESIGN_TOKENS.colors.text,\n    },\n    progressPercent: {\n        fontSize: DESIGN_TOKENS.typography.sizes.md,\n        fontWeight: '700',\n        color: DESIGN_TOKENS.colors.primary,\n    },\n    progressBarContainer: {\n        height: 8,\n        backgroundColor: DESIGN_TOKENS.colors.border,\n        borderRadius: 4,\n        overflow: 'hidden',\n    },\n    progressBar: {\n        height: '100%',\n        backgroundColor: DESIGN_TOKENS.colors.primary,\n        borderRadius: 4,\n    },\n    section: {\n        marginBottom: DESIGN_TOKENS.spacing.xxs,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        borderRadius: DESIGN_TOKENS.radii.md,\n        padding: DESIGN_TOKENS.spacing.lg,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.border,\n        ...(Platform.OS === 'web'\n            ? ({ boxShadow: DESIGN_TOKENS.shadows.card } as any)\n            : (DESIGN_TOKENS.shadowsNative.light as any)),\n    },\n    descriptionStatusRow: {\n        marginTop: 8,\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n    },\n    descriptionStatusText: {\n        flex: 1,\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        color: DESIGN_TOKENS.colors.textMuted,\n        marginRight: 8,\n    },\n    descriptionCounterText: {\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        fontWeight: '600',\n        color: DESIGN_TOKENS.colors.text,\n    },\n    autosaveRow: {\n        marginTop: 4,\n    },\n    autosaveText: {\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        color: DESIGN_TOKENS.colors.textMuted,\n    },\n    autosaveSuccess: {\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        color: DESIGN_TOKENS.colors.successDark,\n    },\n    autosaveError: {\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        color: DESIGN_TOKENS.colors.dangerDark,\n    },\n    sectionEditor: {\n        marginBottom: DESIGN_TOKENS.spacing.xxs,\n        paddingBottom: DESIGN_TOKENS.spacing.xs,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        borderRadius: DESIGN_TOKENS.radii.md,\n        padding: DESIGN_TOKENS.spacing.lg,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.border,\n        ...(Platform.OS === 'web'\n            ? ({ boxShadow: DESIGN_TOKENS.shadows.card } as any)\n            : (DESIGN_TOKENS.shadowsNative.light as any)),\n    },\n    editorHeader: {\n        marginBottom: 12,\n    },\n    editorLabel: {\n        fontSize: DESIGN_TOKENS.typography.sizes.sm,\n        fontWeight: '600',\n        color: DESIGN_TOKENS.colors.text,\n        marginBottom: 4,\n    },\n    required: {\n        color: DESIGN_TOKENS.colors.danger,\n    },\n    editorHint: {\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        color: DESIGN_TOKENS.colors.textMuted,\n        marginTop: 4,\n    },\n    errorContainer: {\n        marginTop: 8,\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: DESIGN_TOKENS.spacing.xs,\n    },\n    errorText: {\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        color: DESIGN_TOKENS.colors.danger,\n    },\n});\n\nexport default React.memo(ContentUpsertSection);\n","import React from 'react';\nimport { StyleSheet, Text, TextInput, View, Platform } from 'react-native';\nimport { DESIGN_TOKENS } from '@/constants/designSystem';\n\ninterface TextInputComponentProps {\n    label: string;\n    value: string;\n    onChange: (value: string) => void;\n    secureTextEntry?: boolean;\n    placeholder?: string;\n    error?: string | null;\n    hint?: string;\n    required?: boolean;\n    multiline?: boolean;\n    numberOfLines?: number;\n    disabled?: boolean; // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ disabled —Å–æ—Å—Ç–æ—è–Ω–∏—è\n}\n\nconst palette = DESIGN_TOKENS.colors;\n\nconst TextInputComponent: React.FC<TextInputComponentProps> = ({\n                                                                   label,\n                                                                   value,\n                                                                   onChange,\n                                                                   secureTextEntry = false,\n                                                                   placeholder,\n                                                                   error,\n                                                                   hint,\n                                                                   required = false,\n                                                                   multiline = false,\n                                                                   numberOfLines = 1,\n                                                                   disabled = false, // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï\n                                                               }) => {\n    return (\n        <View style={styles.container}>\n            {label && (\n                <View style={styles.labelRow}>\n                    <Text style={styles.label}>\n                        {label}\n                        {required && <Text style={styles.required}> *</Text>}\n                    </Text>\n                </View>\n            )}\n            <TextInput\n                style={[\n                    styles.input,\n                    error && styles.inputError,\n                    disabled && styles.inputDisabled, // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –î–æ–±–∞–≤–ª–µ–Ω disabled —Å—Ç–∏–ª—å\n                    multiline && styles.inputMultiline,\n                ]}\n                value={value}\n                onChangeText={onChange}\n                placeholder={placeholder || `–í–≤–µ–¥–∏—Ç–µ ${label?.toLowerCase?.() || ''}`}\n                placeholderTextColor={palette.textMuted}\n                secureTextEntry={secureTextEntry}\n                multiline={multiline}\n                numberOfLines={numberOfLines}\n                editable={!disabled} // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï\n                {...Platform.select({\n                    web: {\n                        outlineWidth: 0,\n                        // @ts-ignore\n                        ':focus': {\n                            borderColor: error ? '#ef4444' : palette.primary,\n                            outlineWidth: 2,\n                            outlineColor: error ? '#ef4444' : palette.primary,\n                            outlineStyle: 'solid',\n                            outlineOffset: 2,\n                        },\n                    },\n                })}\n            />\n            {hint && !error && (\n                <Text style={styles.hint}>{hint}</Text>\n            )}\n            {error && (\n                <View style={styles.errorContainer}>\n                    <Text style={styles.errorText}>{error}</Text>\n                </View>\n            )}\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: { marginBottom: 16 },\n    labelRow: {\n        marginBottom: 6,\n    },\n    label: { \n        fontSize: 14, \n        color: palette.text, \n        fontWeight: '600' \n    },\n    required: {\n        color: palette.danger,\n    },\n    input: {\n        // ‚úÖ –£–õ–£–ß–®–ï–ù–ò–ï: –£–±—Ä–∞–Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ–Ω—å\n        borderRadius: 12,\n        paddingHorizontal: 14,\n        paddingVertical: 12,\n        fontSize: 15,\n        backgroundColor: palette.surface,\n        color: palette.text,\n        minHeight: 44, // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–ª—è touch-—Ü–µ–ª–µ–π\n        shadowColor: '#1f1f1f',\n        shadowOffset: { width: 0, height: 1 },\n        shadowOpacity: 0.04,\n        shadowRadius: 3,\n        elevation: 1,\n        ...Platform.select({\n            web: {\n                transition: 'all 0.2s cubic-bezier(0.4, 0, 0.2, 1)',\n                boxShadow: DESIGN_TOKENS.shadows.light,\n                ':focus': {\n                    boxShadow: `0 0 0 3px ${palette.focus}, ${DESIGN_TOKENS.shadows.medium}`,\n                },\n            },\n        }),\n    },\n    inputError: {\n        backgroundColor: palette.dangerLight,\n        // ‚úÖ –£–õ–£–ß–®–ï–ù–ò–ï: –£–±—Ä–∞–Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ñ–æ–Ω –∏ —Ç–µ–Ω—å\n        ...Platform.select({\n            web: {\n                boxShadow: `0 0 0 2px ${palette.danger}, ${DESIGN_TOKENS.shadows.light}`,\n            },\n        }),\n    },\n    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –î–æ–±–∞–≤–ª–µ–Ω —Å—Ç–∏–ª—å –¥–ª—è disabled —Å–æ—Å—Ç–æ—è–Ω–∏—è\n    inputDisabled: {\n        opacity: 0.6,\n        backgroundColor: palette.mutedBackground,\n        color: palette.textMuted,\n        ...Platform.select({\n            web: {\n                cursor: 'not-allowed',\n            },\n        }),\n    },\n    inputMultiline: {\n        minHeight: 100,\n        textAlignVertical: 'top',\n    },\n    hint: {\n        fontSize: 12,\n        color: palette.textMuted,\n        marginTop: 4,\n    },\n    errorContainer: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 6,\n        marginTop: 6,\n        padding: 10,\n        backgroundColor: palette.dangerLight,\n        borderRadius: 8,\n        borderLeftWidth: 3,\n        borderLeftColor: palette.danger,\n    },\n    errorText: {\n        fontSize: 13,\n        color: palette.dangerDark,\n        fontWeight: '500',\n        flex: 1,\n    },\n});\n\nexport default React.memo(TextInputComponent);\n","import React, {\n    useCallback,\n    useEffect,\n    useRef,\n    useState,\n    Suspense,\n    forwardRef,\n    type Ref,\n} from 'react';\nimport {\n    View,\n    Text,\n    StyleSheet,\n    TouchableOpacity,\n    TextInput,\n    Alert,\n    Modal,\n    SafeAreaView,\n    Platform,\n} from 'react-native';\nimport MaterialIcons from '@expo/vector-icons/MaterialIcons';\nimport { uploadImage } from '@/src/api/misc';\nimport { useAuth } from '@/context/AuthContext';\n\nconst isWeb = Platform.OS === 'web';\nconst win = isWeb && typeof window !== 'undefined' ? window : undefined;\n\nfunction useDebounce<T extends unknown[]>(fn: (...args: T) => void, ms = 300) {\n    const timeout = useRef<ReturnType<typeof setTimeout>>();\n    const fnRef = useRef(fn);\n    fnRef.current = fn;\n    return useCallback((...args: T) => {\n        if (timeout.current) clearTimeout(timeout.current);\n        timeout.current = setTimeout(() => fnRef.current(...args), ms);\n    }, [ms]);\n}\n\nfunction sanitizeHtml(html: string): string {\n    if (!html) return '';\n    let result = String(html);\n    // –£–¥–∞–ª—è–µ–º –∏–Ω–ª–∞–π–Ω-—Å—Ç–∏–ª–∏ –∏ –ª–∏—à–Ω–∏–µ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –∏–∑ Word/Google Docs\n    result = result.replace(/ style=\"[^\"]*\"/gi, '');\n    result = result.replace(/ (color|face|size)=\"[^\"]*\"/gi, '');\n    result = result.replace(/ class=\"[^\"]*\"/gi, '');\n    // –£–±–∏—Ä–∞–µ–º HTML-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏\n    result = result.replace(/<!--[\\s\\S]*?-->/g, '');\n    return result;\n}\n\n// –í–∞–∂–Ω–æ: –≥—Ä—É–∑–∏–º –¢–û–õ–¨–ö–û default-—ç–∫—Å–ø–æ—Ä—Ç ‚Äî —ç—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π —á–∞–Ω–∫\nconst QuillEditor =\n    isWeb && win\n        ? (React.lazy(async () => ({ default: (await import('react-quill')).default })) as any)\n        : undefined;\n\n// CSS —Ç–µ–º—ã –ø–æ–¥–∫–ª—é—á–∞–µ–º –æ–¥–∏–Ω —Ä–∞–∑ –∏ —Ç–æ–ª—å–∫–æ –Ω–∞ web\nif (isWeb && win) {\n    const href = 'https://cdn.jsdelivr.net/npm/react-quill@2/dist/quill.snow.css';\n    if (!win.document.querySelector(`link[href=\"${href}\"]`)) {\n        const link = win.document.createElement('link');\n        link.rel = 'stylesheet';\n        link.href = href;\n        win.document.head.appendChild(link);\n    }\n}\n\nconst quillModulesDefault = {\n    toolbar: [\n        ['bold', 'italic', 'underline', 'strike'],\n        [{ header: [1, 2, 3, false] }],\n        [{ list: 'ordered' }, { list: 'bullet' }],\n        ['link', 'image'],\n        ['clean'],\n    ],\n    history: { delay: 2000, maxStack: 100, userOnly: true },\n    clipboard: { matchVisual: false },\n} as const;\n\nconst quillModulesCompact = {\n    toolbar: [\n        ['bold', 'italic', 'underline'],\n        [{ list: 'bullet' }],\n        ['link'],\n        ['clean'],\n    ],\n    history: { delay: 2000, maxStack: 100, userOnly: true },\n    clipboard: { matchVisual: false },\n} as const;\n\nexport interface ArticleEditorProps {\n    label?: string;\n    placeholder?: string;\n    content: string;\n    onChange: (html: string) => void;\n    onAutosave?: (html: string) => Promise<void>;\n    autosaveDelay?: number;\n    idTravel?: string;\n    editorRef?: Ref<any>;\n    variant?: 'default' | 'compact';\n}\n\nconst WebEditor: React.FC<ArticleEditorProps> = ({\n                                                     label = '–û–ø–∏—Å–∞–Ω–∏–µ',\n                                                     placeholder = '–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ‚Ä¶',\n                                                     content,\n                                                     onChange,\n                                                     onAutosave,\n                                                     autosaveDelay = 5000,\n                                                     idTravel,\n                                                     editorRef,\n                                                     variant = 'default',\n                                                 }) => {\n    const [html, setHtml] = useState(content);\n    const [fullscreen, setFullscreen] = useState(false);\n    const [showHtml, setShowHtml] = useState(false);\n\n    const quillRef = useRef<any>(null);\n    const tmpStoredRange = useRef<{ index: number; length: number } | null>(null);\n    const { isAuthenticated } = useAuth();\n\n    useEffect(() => {\n        if (!editorRef) return;\n        if (typeof editorRef === 'function') editorRef(quillRef.current);\n        else (editorRef as any).current = quillRef.current;\n    });\n\n    const debouncedParentChange = useDebounce(onChange, 250);\n\n    useEffect(() => {\n        if (content !== html) setHtml(content);\n    }, [content]); // eslint-disable-line react-hooks/exhaustive-deps\n\n    useEffect(() => {\n        if (!win) return;\n        const style = win.document.createElement('style');\n        style.innerHTML = `\n      :root{--bg:#fff;--fg:#333;--bar:#f5f5f5}\n      @media(prefers-color-scheme:dark){:root{--bg:#1e1e1e;--fg:#e0e0e0;--bar:#2a2a2a}}\n      .ql-editor{background:var(--bg);color:var(--fg)}\n      .ql-toolbar{background:var(--bar);position:sticky;top:0;z-index:10;max-width:100%}\n      .ql-toolbar.ql-snow{display:flex;flex-wrap:wrap;gap:6px;align-items:center}\n      .ql-toolbar.ql-snow .ql-formats{display:flex;flex-wrap:wrap;gap:4px;margin-right:6px}\n      .ql-toolbar.ql-snow .ql-picker{max-width:100%}\n      .ql-toolbar.ql-snow button{flex:0 0 auto}\n      .ql-container{max-width:100%}\n      .ql-editor{max-width:100%;overflow-wrap:anywhere}\n      .ql-editor img{max-width:100%;height:auto;max-height:60vh;display:block;margin:12px auto;object-fit:contain}\n    `;\n        win.document.head.appendChild(style);\n        return () => { win.document.head.removeChild(style); };\n    }, []);\n\n    useEffect(() => {\n        if (!onAutosave) return;\n        const t = setTimeout(() => onAutosave(html), autosaveDelay);\n        return () => clearTimeout(t);\n    }, [html, onAutosave, autosaveDelay]);\n\n    const fireChange = useCallback((val: string) => {\n        const clean = sanitizeHtml(val);\n        setHtml(clean);\n        debouncedParentChange(clean);\n    }, [debouncedParentChange]);\n\n    const insertImage = useCallback((url: string) => {\n        if (!quillRef.current) return;\n        const editor = quillRef.current.getEditor();\n        const range = editor.getSelection() || { index: editor.getLength(), length: 0 };\n        editor.insertEmbed(range.index, 'image', url);\n        editor.setSelection(range.index + 1, 0, 'silent');\n        fireChange(editor.root.innerHTML);\n    }, [fireChange]);\n\n    const uploadAndInsert = useCallback(async (file: File) => {\n        if (!isAuthenticated) {\n            Alert.alert('–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è', '–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è');\n            return;\n        }\n        try {\n            const form = new FormData();\n            form.append('file', file);\n            form.append('collection', 'description');\n            if (idTravel) form.append('id', idTravel);\n            const res = await uploadImage(form);\n            if (!res?.url) throw new Error('no url');\n            insertImage(res.url);\n        } catch {\n            Alert.alert('–û—à–∏–±–∫–∞', '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ');\n        }\n    }, [idTravel, insertImage, isAuthenticated]);\n\n    useEffect(() => {\n        if (!quillRef.current) return;\n        const root = quillRef.current.getEditor().root as HTMLElement;\n        const onDrop = (e: DragEvent) => {\n            if (!e.dataTransfer?.files?.length) return;\n            e.preventDefault();\n            uploadAndInsert(e.dataTransfer.files[0]);\n        };\n        const onPaste = (e: ClipboardEvent) => {\n            const file = Array.from(e.clipboardData?.files ?? [])[0];\n            if (file) { e.preventDefault(); uploadAndInsert(file); }\n        };\n        root.addEventListener('drop', onDrop);\n        root.addEventListener('paste', onPaste);\n        return () => {\n            root.removeEventListener('drop', onDrop);\n            root.removeEventListener('paste', onPaste);\n        };\n    }, [uploadAndInsert]);\n\n    const IconButton = React.memo(function IconButton({\n                                                          name,\n                                                          onPress,\n                                                          label,\n                                                      }: { name: keyof typeof MaterialIcons.glyphMap; onPress: () => void; label: string }) {\n        return (\n            <TouchableOpacity\n                onPress={onPress}\n                style={styles.btn}\n                accessibilityRole=\"button\"\n                accessibilityLabel={label}\n            >\n                <MaterialIcons name={name} size={20} color=\"#555\" />\n            </TouchableOpacity>\n        );\n    });\n\n    const Toolbar = () => (\n        <View style={styles.bar}>\n            <Text style={styles.label}>{label}</Text>\n            <View style={styles.row}>\n                <IconButton\n                    name=\"undo\"\n                    onPress={() => quillRef.current?.getEditor().history.undo()}\n                    label=\"–û—Ç–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ\"\n                />\n                <IconButton\n                    name=\"redo\"\n                    onPress={() => quillRef.current?.getEditor().history.redo()}\n                    label=\"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ\"\n                />\n                <IconButton\n                    name=\"code\"\n                    onPress={() => {\n                        tmpStoredRange.current = quillRef.current?.getEditor().getSelection() ?? null;\n                        setShowHtml(v => !v);\n                    }}\n                    label={showHtml ? '–°–∫—Ä—ã—Ç—å HTML-–∫–æ–¥' : '–ü–æ–∫–∞–∑–∞—Ç—å HTML-–∫–æ–¥'}\n                />\n                <IconButton\n                    name={fullscreen ? 'fullscreen-exit' : 'fullscreen'}\n                    onPress={() => {\n                        tmpStoredRange.current = quillRef.current?.getEditor().getSelection() ?? null;\n                        setFullscreen(v => !v);\n                    }}\n                    label={fullscreen ? '–í—ã–π—Ç–∏ –∏–∑ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞' : '–ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º'}\n                />\n                <IconButton\n                    name=\"format-clear\"\n                    onPress={() => {\n                        if (!quillRef.current) return;\n                        const editor = quillRef.current.getEditor();\n                        const sel = editor.getSelection() || { index: 0, length: editor.getLength() };\n                        editor.removeFormat(sel.index, sel.length);\n                        fireChange(editor.root.innerHTML);\n                    }}\n                    label=\"–û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ\"\n                />\n                <IconButton\n                    name=\"image\"\n                    onPress={() => {\n                        if (!win) return;\n                        const input = win.document.createElement('input');\n                        input.type = 'file';\n                        input.accept = 'image/*';\n                        input.onchange = () => {\n                            const file = input.files?.[0];\n                            if (file) uploadAndInsert(file);\n                        };\n                        input.click();\n                    }}\n                    label=\"–í—Å—Ç–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ\"\n                />\n            </View>\n        </View>\n    );\n\n    useEffect(() => {\n        if (!fullscreen && !showHtml && tmpStoredRange.current && quillRef.current) {\n            quillRef.current.getEditor().setSelection(tmpStoredRange.current, 'silent');\n        }\n    }, [fullscreen, showHtml]);\n\n    const Loader = () => (\n        <View style={styles.loadBox}>\n            <Text style={styles.loadTxt}>–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</Text>\n        </View>\n    );\n\n    if (!QuillEditor) return <Loader />;\n\n    const modules = variant === 'compact' ? quillModulesCompact : quillModulesDefault;\n\n    const editorArea = showHtml ? (\n        <TextInput\n            style={styles.html}\n            multiline\n            value={html}\n            onChangeText={text => fireChange(text)}\n            placeholder={placeholder}\n            placeholderTextColor=\"#999\"\n        />\n    ) : (\n        <Suspense fallback={<Loader />}>\n            <QuillEditor\n                ref={quillRef}\n                theme=\"snow\"\n                value={html}\n                onChange={(val: string) => fireChange(val)}\n                modules={modules}\n                placeholder={placeholder}\n                style={styles.editor}\n            />\n        </Suspense>\n    );\n\n    const body = (\n        <>\n            <Toolbar />\n            {editorArea}\n        </>\n    );\n\n    return fullscreen ? (\n        <Modal visible animationType=\"slide\">\n            <SafeAreaView style={styles.fullWrap}>{body}</SafeAreaView>\n        </Modal>\n    ) : (\n        <View style={styles.wrap}>{body}</View>\n    );\n};\n\nconst NativeEditor: React.FC<ArticleEditorProps> = ({\n                                                        label = '–û–ø–∏—Å–∞–Ω–∏–µ',\n                                                        placeholder = '–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ‚Ä¶',\n                                                        content,\n                                                        onChange,\n                                                        onAutosave,\n                                                        autosaveDelay = 5000,\n                                                    }) => {\n    const [text, setText] = useState(content);\n    const debouncedParentChange = useDebounce(onChange, 250);\n\n    useEffect(() => {\n        if (content !== text) setText(content);\n    }, [content]); // eslint-disable-line react-hooks/exhaustive-deps\n\n    useEffect(() => {\n        if (!onAutosave) return;\n        const t = setTimeout(() => onAutosave(text), autosaveDelay);\n        return () => clearTimeout(t);\n    }, [text, onAutosave, autosaveDelay]);\n\n    const onEdit = (t: string) => {\n        setText(t);\n        debouncedParentChange(t);\n    };\n\n    return (\n        <View style={styles.wrap}>\n            <Text style={[styles.label, { padding: 8 }]}>{label}</Text>\n            <TextInput\n                multiline\n                value={text}\n                onChangeText={onEdit}\n                placeholder={placeholder}\n                placeholderTextColor=\"#999\"\n                style={styles.html}\n                textAlignVertical=\"top\"\n            />\n        </View>\n    );\n};\n\nconst ArticleEditor = forwardRef<any, ArticleEditorProps>((props, ref) => {\n    return isWeb ? <WebEditor {...props} editorRef={ref} /> : <NativeEditor {...props} />;\n});\n\nexport default React.memo(ArticleEditor);\n\nconst styles = StyleSheet.create({\n    wrap: {\n        borderWidth: 1,\n        borderColor: '#ddd',\n        borderRadius: 6,\n        marginVertical: 8,\n        backgroundColor: Platform.OS === 'web' ? ('var(--bg)' as any) : '#fff',\n        width: '100%',\n        maxWidth: '100%',\n        overflow: 'hidden',\n    },\n    bar: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        paddingHorizontal: 12,\n        paddingVertical: 8,\n        borderBottomWidth: 1,\n        borderBottomColor: '#ddd',\n        backgroundColor: Platform.OS === 'web' ? ('var(--bar)' as any) : '#f5f5f5',\n    },\n    label: {\n        fontSize: 15,\n        fontWeight: '600',\n        color: Platform.OS === 'web' ? ('var(--fg)' as any) : '#333',\n    },\n    row: { flexDirection: 'row' },\n    btn: { marginLeft: 12, padding: 4 },\n    editor: { minHeight: 200 },\n    html: {\n        minHeight: 200,\n        padding: 12,\n        fontSize: 14,\n        color: Platform.OS === 'web' ? ('var(--fg)' as any) : '#333',\n    },\n    loadBox: { padding: 20, alignItems: 'center', justifyContent: 'center' },\n    loadTxt: { color: '#999' },\n    fullWrap: { flex: 1, backgroundColor: Platform.OS === 'web' ? ('var(--bg)' as any) : '#fff' },\n});\n","import React, { useMemo, useState } from 'react';\nimport { View, StyleSheet, Text, useWindowDimensions, Pressable, Platform } from 'react-native';\nimport { Feather } from '@expo/vector-icons';\n\nimport { DESIGN_TOKENS } from '@/constants/designSystem';\n\ntype TravelWizardHeaderProps = {\n    canGoBack?: boolean;\n    onBack?: () => void;\n    title: string;\n    subtitle: string;\n    progressPercent: number;\n    autosaveBadge?: string;\n    extraBelowProgress?: React.ReactNode;\n    tipTitle?: string;\n    tipBody?: string;\n};\n\nconst TravelWizardHeader: React.FC<TravelWizardHeaderProps> = ({\n    canGoBack = false,\n    onBack,\n    title,\n    subtitle,\n    progressPercent,\n    autosaveBadge,\n    extraBelowProgress,\n    tipTitle,\n    tipBody,\n}) => {\n    const { width } = useWindowDimensions();\n    const isMobile = width <= DESIGN_TOKENS.breakpoints.mobile;\n    const clamped = Math.min(Math.max(progressPercent, 0), 100);\n\n    const [isTipOpen, setIsTipOpen] = useState(false);\n    const hasTip = !!tipBody && tipBody.trim().length > 0;\n    const resolvedTipTitle = useMemo(() => tipTitle ?? '–°–æ–≤–µ—Ç', [tipTitle]);\n\n    const TipTrigger = hasTip ? (\n        isMobile ? (\n            <Pressable\n                onPress={() => setIsTipOpen(v => !v)}\n                style={[styles.tipIconButton, isTipOpen && styles.tipIconButtonActive]}\n                accessibilityRole=\"button\"\n                accessibilityLabel={isTipOpen ? '–°–∫—Ä—ã—Ç—å —Å–æ–≤–µ—Ç' : '–ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–≤–µ—Ç'}\n            >\n                <Feather\n                    name=\"info\"\n                    size={16}\n                    color={isTipOpen ? DESIGN_TOKENS.colors.primary : DESIGN_TOKENS.colors.textSubtle}\n                />\n            </Pressable>\n        ) : (\n            <Pressable\n                onPress={() => setIsTipOpen(v => !v)}\n                style={[styles.tipToggleButton, isTipOpen && styles.tipToggleButtonActive]}\n                accessibilityRole=\"button\"\n                accessibilityLabel={isTipOpen ? '–°–∫—Ä—ã—Ç—å —Å–æ–≤–µ—Ç' : '–ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–≤–µ—Ç'}\n                {...Platform.select({ web: { cursor: 'pointer' } })}\n            >\n                <Feather\n                    name=\"info\"\n                    size={16}\n                    color={isTipOpen ? DESIGN_TOKENS.colors.primary : DESIGN_TOKENS.colors.textSubtle}\n                />\n                <Text style={[styles.tipToggleText, isTipOpen && styles.tipToggleTextActive]} numberOfLines={1}>\n                    {resolvedTipTitle}\n                </Text>\n            </Pressable>\n        )\n    ) : null;\n\n    const BackButton = canGoBack ? (\n        <Pressable\n            onPress={onBack}\n            style={styles.backButton}\n            accessibilityRole=\"button\"\n            accessibilityLabel=\"–ù–∞–∑–∞–¥\"\n            disabled={!onBack}\n            {...Platform.select({ web: { cursor: 'pointer' } })}\n        >\n            <Feather name=\"arrow-left\" size={16} color={DESIGN_TOKENS.colors.text} />\n            <Text style={styles.backButtonText}>–ù–∞–∑–∞–¥</Text>\n        </Pressable>\n    ) : null;\n\n    return (\n        <View style={[styles.headerWrapper, isMobile && styles.headerWrapperMobile]}>\n            <View style={[styles.headerRow, isMobile && styles.headerRowMobile]}>\n                {BackButton}\n                <View style={styles.titleColumn}>\n                    <Text style={[styles.headerTitle, isMobile && styles.headerTitleMobile]} numberOfLines={2}>\n                        {title}\n                    </Text>\n                    <Text style={[styles.headerSubtitle, isMobile && styles.headerSubtitleMobile]} numberOfLines={2}>\n                        {subtitle}\n                    </Text>\n                </View>\n                {!isMobile ? (\n                    <View style={styles.headerRightRow}>\n                        {TipTrigger}\n                        {autosaveBadge ? (\n                            <View style={styles.autosaveBadge}>\n                                <Text style={styles.autosaveBadgeText}>{autosaveBadge}</Text>\n                            </View>\n                        ) : null}\n                    </View>\n                ) : null}\n            </View>\n\n            {isMobile && (autosaveBadge || TipTrigger) ? (\n                <View style={styles.mobileMetaRow}>\n                    {autosaveBadge ? (\n                        <View style={styles.autosaveBadge}>\n                            <Text style={styles.autosaveBadgeText}>{autosaveBadge}</Text>\n                        </View>\n                    ) : null}\n                    {TipTrigger}\n                </View>\n            ) : null}\n\n            <View style={styles.progressBarTrack}>\n                <View style={[styles.progressBarFill, { width: `${clamped}%` }]} />\n            </View>\n            {!isMobile && <Text style={styles.progressLabel}>–ì–æ—Ç–æ–≤–æ –Ω–∞ {clamped}%</Text>}\n\n            {hasTip && isTipOpen ? (\n                <View style={styles.tipPanel}>\n                    <Text style={styles.tipPanelTitle}>{resolvedTipTitle}</Text>\n                    <Text style={styles.tipPanelBody}>{tipBody}</Text>\n                </View>\n            ) : null}\n\n            {extraBelowProgress}\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    headerWrapper: {\n        paddingHorizontal: DESIGN_TOKENS.spacing.md,\n        paddingTop: 8,\n        paddingBottom: 8,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        borderBottomWidth: 1,\n        borderBottomColor: DESIGN_TOKENS.colors.borderLight,\n    },\n    headerWrapperMobile: {\n        paddingHorizontal: DESIGN_TOKENS.spacing.sm,\n        paddingTop: 6,\n        paddingBottom: 6,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        borderBottomWidth: 1,\n        borderBottomColor: DESIGN_TOKENS.colors.borderLight,\n    },\n    headerRow: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: DESIGN_TOKENS.spacing.sm,\n    },\n    headerRowMobile: {\n        flexDirection: 'column',\n        alignItems: 'stretch',\n        gap: DESIGN_TOKENS.spacing.xs,\n    },\n    headerRightRow: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: DESIGN_TOKENS.spacing.xs,\n    },\n    backButton: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 6,\n        height: 34,\n        paddingHorizontal: 10,\n        borderRadius: DESIGN_TOKENS.radii.pill,\n        backgroundColor: DESIGN_TOKENS.colors.surfaceMuted,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.borderLight,\n    },\n    backButtonText: {\n        fontSize: 12,\n        fontWeight: '700',\n        color: DESIGN_TOKENS.colors.text,\n    },\n    titleColumn: {\n        flex: 1,\n        minWidth: 0,\n    },\n    headerTitle: {\n        fontSize: 18,\n        fontWeight: '700',\n        color: DESIGN_TOKENS.colors.text,\n        marginBottom: 4,\n    },\n    headerTitleMobile: {\n        fontSize: 17,\n        marginBottom: 2,\n    },\n    headerSubtitle: {\n        fontSize: 12,\n        color: DESIGN_TOKENS.colors.textMuted,\n    },\n    headerSubtitleMobile: {\n        fontSize: 12,\n    },\n    autosaveBadge: {\n        paddingHorizontal: DESIGN_TOKENS.spacing.sm,\n        paddingVertical: DESIGN_TOKENS.spacing.xxs,\n        borderRadius: DESIGN_TOKENS.radii.pill,\n        backgroundColor: DESIGN_TOKENS.colors.primarySoft,\n    },\n    mobileMetaRow: {\n        marginTop: 0,\n        alignSelf: 'flex-start',\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: DESIGN_TOKENS.spacing.xs,\n    },\n    autosaveBadgeText: {\n        fontSize: 11,\n        color: DESIGN_TOKENS.colors.primaryDark,\n        fontWeight: '600',\n    },\n    tipIconButton: {\n        width: 28,\n        height: 28,\n        borderRadius: 10,\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: DESIGN_TOKENS.colors.surfaceMuted,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.borderLight,\n    },\n    tipIconButtonActive: {\n        backgroundColor: DESIGN_TOKENS.colors.primarySoft,\n        borderColor: DESIGN_TOKENS.colors.primary,\n    },\n    tipToggleButton: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 6,\n        paddingHorizontal: 10,\n        height: 34,\n        borderRadius: DESIGN_TOKENS.radii.pill,\n        backgroundColor: DESIGN_TOKENS.colors.surfaceMuted,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.borderLight,\n    },\n    tipToggleButtonActive: {\n        backgroundColor: DESIGN_TOKENS.colors.primarySoft,\n        borderColor: DESIGN_TOKENS.colors.primary,\n    },\n    tipToggleText: {\n        fontSize: 12,\n        fontWeight: '600',\n        color: DESIGN_TOKENS.colors.textSubtle,\n    },\n    tipToggleTextActive: {\n        color: DESIGN_TOKENS.colors.primary,\n    },\n    progressBarTrack: {\n        marginTop: 6,\n        width: '100%',\n        height: 4,\n        borderRadius: DESIGN_TOKENS.radii.pill,\n        backgroundColor: DESIGN_TOKENS.colors.borderLight,\n    },\n    progressBarFill: {\n        height: 4,\n        borderRadius: DESIGN_TOKENS.radii.pill,\n        backgroundColor: DESIGN_TOKENS.colors.primary,\n    },\n    progressLabel: {\n        marginTop: 6,\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        color: DESIGN_TOKENS.colors.textMuted,\n    },\n    tipPanel: {\n        marginTop: DESIGN_TOKENS.spacing.sm,\n        padding: DESIGN_TOKENS.spacing.sm,\n        borderRadius: DESIGN_TOKENS.radii.md,\n        backgroundColor: DESIGN_TOKENS.colors.surfaceMuted,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.borderLight,\n    },\n    tipPanelTitle: {\n        fontSize: 12,\n        fontWeight: '700',\n        color: DESIGN_TOKENS.colors.text,\n        marginBottom: 4,\n    },\n    tipPanelBody: {\n        fontSize: 12,\n        color: DESIGN_TOKENS.colors.textMuted,\n        lineHeight: 16,\n    },\n});\n\nexport default React.memo(TravelWizardHeader);\n","import React from 'react';\nimport { View, StyleSheet, Dimensions, Platform, LayoutChangeEvent, useWindowDimensions } from 'react-native';\nimport { Button } from 'react-native-paper';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport { DESIGN_TOKENS } from '@/constants/designSystem';\n\ninterface TravelWizardFooterProps {\n    canGoBack?: boolean;\n    onBack?: () => void;\n    onPrimary: () => void;\n    onSave?: () => void;\n    primaryLabel: string;\n    saveLabel?: string;\n    primaryDisabled?: boolean;\n    onLayout?: (event: LayoutChangeEvent) => void;\n}\n\nconst TravelWizardFooter: React.FC<TravelWizardFooterProps> = ({\n    canGoBack = true,\n    onBack,\n    onPrimary,\n    onSave,\n    primaryLabel,\n    saveLabel = '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å',\n    primaryDisabled = false,\n    onLayout,\n}) => {\n    const { width } = useWindowDimensions();\n    const isMobile = width <= DESIGN_TOKENS.breakpoints.mobile;\n    const isNarrowMobile = width <= 380;\n    const isWeb = Platform.OS === 'web';\n    const insets = useSafeAreaInsets();\n\n    return (\n        <View\n            style={[\n                styles.footer,\n                isMobile && (isWeb ? styles.footerMobileWeb : styles.footerMobileNative),\n                isMobile && !isWeb ? { paddingBottom: 12 + insets.bottom } : null,\n            ]}\n            onLayout={onLayout}\n        >\n            {isMobile ? (\n                <>\n                    <View style={isNarrowMobile ? styles.mobileColumn : styles.mobileRow}>\n                        {canGoBack ? (\n                            <Button\n                                mode=\"outlined\"\n                                onPress={onBack}\n                                style={isNarrowMobile ? styles.mobileButtonFull : styles.mobileButton}\n                            >\n                                –ù–∞–∑–∞–¥\n                            </Button>\n                        ) : (\n                            <View style={styles.footerButtonPlaceholder} />\n                        )}\n\n                        <Button\n                            mode=\"contained\"\n                            onPress={onPrimary}\n                            style={isNarrowMobile ? styles.mobileButtonFull : styles.mobileButton}\n                            disabled={primaryDisabled}\n                        >\n                            {primaryLabel}\n                        </Button>\n                    </View>\n\n                    <Button\n                        mode=\"text\"\n                        onPress={onSave}\n                        style={styles.footerSaveButtonMobile}\n                        disabled={!onSave}\n                    >\n                        {saveLabel}\n                    </Button>\n                </>\n            ) : (\n                <>\n                    {canGoBack ? (\n                        <Button\n                            mode=\"outlined\"\n                            onPress={onBack}\n                            style={styles.footerButton}\n                        >\n                            –ù–∞–∑–∞–¥\n                        </Button>\n                    ) : (\n                        <View style={styles.footerButtonPlaceholder} />\n                    )}\n\n                    <Button\n                        mode=\"contained\"\n                        onPress={onPrimary}\n                        style={styles.footerButton}\n                        disabled={primaryDisabled}\n                    >\n                        {primaryLabel}\n                    </Button>\n\n                    <Button\n                        mode=\"text\"\n                        onPress={onSave}\n                        style={styles.footerSaveButton}\n                        disabled={!onSave}\n                    >\n                        {saveLabel}\n                    </Button>\n                </>\n            )}\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    footer: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        paddingHorizontal: DESIGN_TOKENS.spacing.lg,\n        paddingVertical: 12,\n        borderTopWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.border,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        zIndex: DESIGN_TOKENS.zIndex.sticky,\n    },\n    footerMobileNative: {\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        bottom: 0,\n    },\n    footerMobileWeb: {\n        position: 'sticky' as any,\n        left: 0,\n        right: 0,\n        bottom: 0,\n    },\n    footerButton: {\n        flex: 1,\n        marginHorizontal: 4,\n    },\n    footerSaveButton: {\n        marginLeft: 4,\n    },\n    mobileRow: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        width: '100%',\n    },\n    mobileColumn: {\n        flexDirection: 'column',\n        width: '100%',\n        gap: 8,\n    },\n    mobileButton: {\n        flex: 1,\n        marginHorizontal: 4,\n    },\n    mobileButtonFull: {\n        width: '100%',\n        marginHorizontal: 0,\n    },\n    footerSaveButtonMobile: {\n        marginTop: 6,\n        alignSelf: 'center',\n    },\n    footerButtonPlaceholder: {\n        flex: 1,\n        marginHorizontal: 4,\n    },\n});\n\nexport default TravelWizardFooter;\n","import React, { Suspense, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { KeyboardAvoidingView, View, StyleSheet, Text, ScrollView, Dimensions, TextInput, Platform, findNodeHandle, UIManager, LayoutChangeEvent, useWindowDimensions } from 'react-native';\nimport { Button } from 'react-native-paper';\n\nimport TravelWizardHeader from '@/components/travel/TravelWizardHeader';\nimport TravelWizardFooter from '@/components/travel/TravelWizardFooter';\nimport { MarkerData, TravelFormData } from '@/src/types/types';\nimport MultiSelectField from '@/components/MultiSelectField';\nimport { DESIGN_TOKENS } from '@/constants/designSystem';\n\nconst WebMapComponent = Platform.OS === 'web'\n    ? React.lazy(() => import('@/components/travel/WebMapComponent'))\n    : null;\n\ninterface TravelWizardStepRouteProps {\n    currentStep: number;\n    totalSteps: number;\n    markers: MarkerData[];\n    setMarkers: (data: MarkerData[]) => void;\n    categoryTravelAddress: any[];\n    countries: any[];\n    travelId?: string | null;\n    selectedCountryIds: string[];\n    onCountrySelect: (countryId: string) => void;\n    onCountryDeselect: (countryId: string) => void;\n    onBack: () => void;\n    onNext: () => void;\n    isFiltersLoading?: boolean;\n    onManualSave?: () => Promise<TravelFormData | void>;\n    stepMeta?: {\n        title?: string;\n        subtitle?: string;\n        tipTitle?: string;\n        tipBody?: string;\n        nextLabel?: string;\n    };\n    progress?: number;\n    autosaveBadge?: string;\n    focusAnchorId?: string | null;\n    onAnchorHandled?: () => void;\n}\n\nconst MultiSelectFieldAny: any = MultiSelectField;\n\nconst MAP_COACHMARK_STORAGE_KEY = 'travelWizardRouteMapCoachmarkDismissed';\n\nconst TravelWizardStepRoute: React.FC<TravelWizardStepRouteProps> = ({\n    currentStep,\n    totalSteps,\n    markers,\n    setMarkers,\n    categoryTravelAddress,\n    countries,\n    travelId,\n    selectedCountryIds,\n    onCountrySelect,\n    onCountryDeselect,\n    onBack,\n    onNext,\n    isFiltersLoading,\n    onManualSave,\n    stepMeta,\n    progress = currentStep / totalSteps,\n    autosaveBadge,\n    focusAnchorId,\n    onAnchorHandled,\n}) => {\n    const { width } = useWindowDimensions();\n    const isMobile = width <= DESIGN_TOKENS.breakpoints.mobile;\n\n    const [footerHeight, setFooterHeight] = useState(0);\n\n    const handleFooterLayout = useCallback((event: LayoutChangeEvent) => {\n        const next = Math.ceil(event.nativeEvent.layout.height);\n        setFooterHeight(prev => (prev === next ? prev : next));\n    }, []);\n\n    const contentPaddingBottom = useMemo(() => {\n        return footerHeight > 0 ? footerHeight + 16 : 180;\n    }, [footerHeight]);\n\n    const scrollRef = useRef<ScrollView | null>(null);\n    const markersListAnchorRef = useRef<View | null>(null);\n    const countriesAnchorRef = useRef<View | null>(null);\n\n    const progressValue = Math.min(Math.max(progress, 0), 1);\n    const progressPercent = Math.round(progressValue * 100);\n\n    const hasAtLeastOnePoint = useMemo(() => markers && markers.length > 0, [markers]);\n\n    const [isCoachmarkVisible, setIsCoachmarkVisible] = useState(false);\n    const [isManualPointVisible, setIsManualPointVisible] = useState(false);\n    const [manualCoords, setManualCoords] = useState('');\n    const [manualLat, setManualLat] = useState('');\n    const [manualLng, setManualLng] = useState('');\n    const [countriesSyncedVisible, setCountriesSyncedVisible] = useState(false);\n\n    useEffect(() => {\n        if (!focusAnchorId) return;\n        if (focusAnchorId !== 'markers-list-root' && focusAnchorId !== 'travelwizard-route-countries') return;\n\n        if (Platform.OS === 'web') {\n            onAnchorHandled?.();\n            return;\n        }\n\n        const scrollNode = scrollRef.current;\n        const anchorNode = focusAnchorId === 'travelwizard-route-countries'\n            ? countriesAnchorRef.current\n            : markersListAnchorRef.current;\n        if (!scrollNode || !anchorNode) {\n            onAnchorHandled?.();\n            return;\n        }\n\n        const scrollHandle = findNodeHandle(scrollNode);\n        const anchorHandle = findNodeHandle(anchorNode);\n        if (!scrollHandle || !anchorHandle) {\n            onAnchorHandled?.();\n            return;\n        }\n\n        setTimeout(() => {\n            UIManager.measureLayout(\n                anchorHandle,\n                scrollHandle,\n                () => onAnchorHandled?.(),\n                (_x, y) => {\n                    scrollRef.current?.scrollTo({ y: Math.max(y - 12, 0), animated: true });\n                    onAnchorHandled?.();\n                },\n            );\n        }, 50);\n    }, [focusAnchorId, onAnchorHandled]);\n\n    const parseCoordsPair = (raw: string): { lat: number; lng: number } | null => {\n        // Accept common copy/paste formats:\n        // - \"49.609645, 18.845693\"\n        // - \"49.609645 18.845693\"\n        // - \"49.609645;18.845693\"\n        const normalized = String(raw || '').trim();\n        if (!normalized) return null;\n\n        const parts = normalized\n            .split(/[\\s,;]+/)\n            .map(p => p.trim())\n            .filter(Boolean);\n\n        if (parts.length < 2) return null;\n\n        const lat = Number(parts[0]);\n        const lng = Number(parts[1]);\n\n        const latOk = Number.isFinite(lat) && lat >= -90 && lat <= 90;\n        const lngOk = Number.isFinite(lng) && lng >= -180 && lng <= 180;\n        if (!latOk || !lngOk) return null;\n\n        return { lat, lng };\n    };\n\n    useEffect(() => {\n        if (hasAtLeastOnePoint) {\n            setIsCoachmarkVisible(false);\n            return;\n        }\n\n        if (typeof window === 'undefined') {\n            setIsCoachmarkVisible(true);\n            return;\n        }\n\n        try {\n            const dismissed = window.localStorage.getItem(MAP_COACHMARK_STORAGE_KEY) === '1';\n            setIsCoachmarkVisible(!dismissed);\n        } catch {\n            setIsCoachmarkVisible(true);\n        }\n    }, [hasAtLeastOnePoint]);\n\n    const handleMarkersChange = (updated: MarkerData[]) => {\n        setMarkers(updated);\n    };\n\n    const dismissCoachmark = () => {\n        setIsCoachmarkVisible(false);\n        if (typeof window === 'undefined') return;\n        try {\n            window.localStorage.setItem(MAP_COACHMARK_STORAGE_KEY, '1');\n        } catch {\n            // ignore\n        }\n    };\n\n    const reverseGeocode = async (lat: number, lng: number) => {\n        const response = await fetch(\n            `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&addressdetails=1`\n        );\n        return await response.json();\n    };\n\n    const handleAddManualPoint = async () => {\n        const parsedFromPair = parseCoordsPair(manualCoords);\n        const lat = parsedFromPair?.lat ?? Number(manualLat);\n        const lng = parsedFromPair?.lng ?? Number(manualLng);\n\n        const latOk = Number.isFinite(lat) && lat >= -90 && lat <= 90;\n        const lngOk = Number.isFinite(lng) && lng >= -180 && lng <= 180;\n        if (!latOk || !lngOk) return;\n\n        let address = '';\n        let derivedCountryId: string | null = null;\n\n        try {\n            const data = await reverseGeocode(lat, lng);\n            address = data?.display_name || '';\n            const countryName = data?.address?.country || '';\n            if (countryName) {\n                const foundCountry = (countries || []).find((c: any) => c?.title_ru === countryName);\n                if (foundCountry?.country_id) {\n                    derivedCountryId = foundCountry.country_id;\n                }\n            }\n        } catch {\n            // ignore\n        }\n\n        const newMarker: MarkerData = {\n            id: null,\n            lat,\n            lng,\n            address,\n            categories: [],\n            image: '',\n            country: derivedCountryId ? Number(derivedCountryId) : null,\n        };\n\n        if (derivedCountryId && !selectedCountryIds.includes(derivedCountryId)) {\n            onCountrySelect(derivedCountryId);\n            setCountriesSyncedVisible(true);\n            setTimeout(() => setCountriesSyncedVisible(false), 3000);\n        }\n\n        handleMarkersChange([...(markers || []), newMarker]);\n        setManualCoords('');\n        setManualLat('');\n        setManualLng('');\n        setIsManualPointVisible(false);\n    };\n\n    const handleCountriesFilterChange = (values: string[]) => {\n        const prev = selectedCountryIds || [];\n        const next = values || [];\n\n        const added = next.filter(id => !prev.includes(id));\n        const removed = prev.filter(id => !next.includes(id));\n\n        added.forEach(onCountrySelect);\n\n        if (removed.length) {\n            const removedSet = new Set(removed.map(String));\n            const updatedMarkers = (markers || []).filter((m: any) => {\n                const markerCountry = m?.country;\n                if (markerCountry == null) return true;\n                return !removedSet.has(String(markerCountry));\n            });\n\n            if (updatedMarkers.length !== (markers || []).length) {\n                setMarkers(updatedMarkers);\n            }\n        }\n\n        removed.forEach(onCountryDeselect);\n    };\n\n    const handleNext = () => {\n        onNext();\n    };\n\n    const handleScrollToMarkers = () => {\n        if (typeof document === 'undefined') return;\n        const el = document.getElementById('markers-list-root');\n        if (!el) return;\n        el.scrollIntoView({ behavior: 'smooth', block: 'start' });\n    };\n\n    return (\n        <SafeAreaView style={styles.safeContainer}>\n            <KeyboardAvoidingView\n                style={styles.keyboardAvoid}\n                behavior={Platform.OS === 'ios' ? 'padding' : undefined}\n                keyboardVerticalOffset={0}\n            >\n                <TravelWizardHeader\n                    canGoBack={true}\n                    onBack={onBack}\n                    title={stepMeta?.title ?? '–ú–∞—Ä—à—Ä—É—Ç –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è'}\n                    subtitle={stepMeta?.subtitle ?? `–®–∞–≥ ${currentStep} –∏–∑ ${totalSteps}`}\n                    progressPercent={progressPercent}\n                    autosaveBadge={autosaveBadge}\n                    tipTitle={stepMeta?.tipTitle}\n                    tipBody={stepMeta?.tipBody}\n                />\n\n                <ScrollView\n                    ref={scrollRef}\n                    style={styles.content}\n                    contentContainerStyle={[styles.contentContainer, { paddingBottom: contentPaddingBottom }]}\n                    keyboardShouldPersistTaps=\"handled\"\n                >\n                    <View style={styles.contentInner}>\n                        <View style={styles.card}>\n                            <View style={[styles.mapHeader, isMobile && styles.mapHeaderMobile]}>\n                                <View style={{ flex: 1 }}>\n                                    <Text style={styles.mapTitle}>–ö–ª—é—á–µ–≤—ã–µ —Ç–æ—á–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∞</Text>\n                                    <Text style={styles.mapHint}>\n                                        –î–æ–±–∞–≤—å—Ç–µ —Ç–æ—á–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–µ. –î–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º –æ–¥–Ω–∞ —Ç–æ—á–∫–∞.\n                                    </Text>\n                                </View>\n                                <Text style={styles.mapCount}>–¢–æ—á–µ–∫: {markers?.length ?? 0}</Text>\n                            </View>\n\n                            {isCoachmarkVisible && !hasAtLeastOnePoint && (\n                                <View style={styles.coachmark}>\n                                    <View style={{ flex: 1 }}>\n                                        <Text style={styles.coachmarkTitle}>–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—É—é —Ç–æ—á–∫—É</Text>\n                                        <Text style={styles.coachmarkBody}>\n                                            –ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –∫–∞—Ä—Ç–µ ‚Äî —Ç–æ—á–∫–∞ –¥–æ–±–∞–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.\n                                        </Text>\n                                    </View>\n                                    <Button mode=\"text\" onPress={dismissCoachmark} compact>\n                                        –ü–æ–Ω—è—Ç–Ω–æ\n                                    </Button>\n                                </View>\n                            )}\n\n                            <View style={[styles.manualPointRow, isMobile && styles.manualPointRowMobile]}>\n                                <Button\n                                    mode={isManualPointVisible ? 'contained' : 'outlined'}\n                                    onPress={() => setIsManualPointVisible(v => !v)}\n                                    compact\n                                >\n                                    –î–æ–±–∞–≤–∏—Ç—å —Ç–æ—á–∫—É –≤—Ä—É—á–Ω—É—é\n                                </Button>\n                            </View>\n\n                            {isManualPointVisible && (\n                                <View style={styles.manualPointCard}>\n                                    <View style={styles.manualCoordsWrapper}>\n                                        <Text style={styles.manualPointLabel}>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (lat, lng)</Text>\n                                        <TextInput\n                                            value={manualCoords}\n                                            onChangeText={(value) => {\n                                                setManualCoords(value);\n                                                const parsed = parseCoordsPair(value);\n                                                if (parsed) {\n                                                    setManualLat(String(parsed.lat));\n                                                    setManualLng(String(parsed.lng));\n                                                }\n                                            }}\n                                            placeholder=\"49.609645, 18.845693\"\n                                            style={styles.manualPointInput}\n                                            inputMode=\"text\"\n                                        />\n                                    </View>\n\n                                    <View style={styles.manualPointInputsRow}>\n                                        <View style={styles.manualPointInputWrapper}>\n                                            <Text style={styles.manualPointLabel}>–®–∏—Ä–æ—Ç–∞</Text>\n                                            <TextInput\n                                                value={manualLat}\n                                                onChangeText={setManualLat}\n                                                placeholder=\"–Ω–∞–ø—Ä–∏–º–µ—Ä 53.90\"\n                                                style={styles.manualPointInput}\n                                                inputMode=\"decimal\"\n                                            />\n                                        </View>\n                                        <View style={styles.manualPointInputWrapper}>\n                                            <Text style={styles.manualPointLabel}>–î–æ–ª–≥–æ—Ç–∞</Text>\n                                            <TextInput\n                                                value={manualLng}\n                                                onChangeText={setManualLng}\n                                                placeholder=\"–Ω–∞–ø—Ä–∏–º–µ—Ä 27.56\"\n                                                style={styles.manualPointInput}\n                                                inputMode=\"decimal\"\n                                            />\n                                        </View>\n                                    </View>\n                                    <View style={styles.manualPointActionsRow}>\n                                        <Button mode=\"contained\" onPress={handleAddManualPoint} compact>\n                                            –î–æ–±–∞–≤–∏—Ç—å\n                                        </Button>\n                                        <Button mode=\"text\" onPress={() => setIsManualPointVisible(false)} compact>\n                                            –û—Ç–º–µ–Ω–∞\n                                        </Button>\n                                    </View>\n                                </View>\n                            )}\n\n                            <View style={[styles.filtersRow, isMobile && styles.filtersRowMobile]}>\n                                <View ref={countriesAnchorRef} nativeID=\"travelwizard-route-countries\" />\n                                <View style={styles.filterItem}>\n                                    {isFiltersLoading ? (\n                                        <View style={styles.filtersSkeleton}>\n                                            <View style={styles.filtersSkeletonLabel} />\n                                            <View style={styles.filtersSkeletonInput} />\n                                        </View>\n                                    ) : (\n                                        <MultiSelectFieldAny\n                                            label=\"–°—Ç—Ä–∞–Ω—ã –º–∞—Ä—à—Ä—É—Ç–∞\"\n                                            items={countries}\n                                            value={selectedCountryIds}\n                                            onChange={handleCountriesFilterChange}\n                                            labelField=\"title_ru\"\n                                            valueField=\"country_id\"\n                                        />\n                                    )}\n                                </View>\n                            </View>\n                        </View>\n\n                        <View style={styles.card}>\n                            <View ref={markersListAnchorRef} nativeID=\"markers-list-root\" />\n                            <View style={[styles.mapContainer, isMobile && styles.mapContainerMobile]}>\n                                {Platform.OS === 'web' && WebMapComponent ? (\n                                    <Suspense\n                                        fallback={\n                                            <View style={styles.lazyFallback}>\n                                                <Text style={styles.lazyFallbackText}>–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç—ã‚Ä¶</Text>\n                                            </View>\n                                        }\n                                    >\n                                        <WebMapComponent\n                                            markers={markers || []}\n                                            onMarkersChange={handleMarkersChange}\n                                            categoryTravelAddress={categoryTravelAddress}\n                                            countrylist={countries}\n                                            onCountrySelect={onCountrySelect}\n                                            onCountryDeselect={onCountryDeselect}\n                                            travelId={travelId ?? undefined}\n                                        />\n                                    </Suspense>\n                                ) : (\n                                    <View style={styles.nativeMapPlaceholder}>\n                                        <Text style={styles.nativeMapTitle}>–ö–∞—Ä—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ</Text>\n                                        <Text style={styles.nativeMapBody}>\n                                            –ù–∞ –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –¥–æ–±–∞–≤—å—Ç–µ —Ç–æ—á–∫–∏ –≤—Ä—É—á–Ω—É—é (–∫–Ω–æ–ø–∫–∞ –≤—ã—à–µ) –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç.\n                                        </Text>\n                                    </View>\n                                )}\n                            </View>\n                        </View>\n                    </View>\n                </ScrollView>\n\n                <TravelWizardFooter\n                    canGoBack={false}\n                    onPrimary={handleNext}\n                    primaryLabel=\"–ö –º–µ–¥–∏–∞\"\n                    onSave={onManualSave}\n                    saveLabel=\"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç\"\n                    onLayout={handleFooterLayout}\n                />\n            </KeyboardAvoidingView>\n        </SafeAreaView>\n    );\n};\n\nconst styles = StyleSheet.create({\n    safeContainer: { flex: 1, backgroundColor: DESIGN_TOKENS.colors.background },\n    keyboardAvoid: { flex: 1 },\n    syncBadge: {\n        marginTop: 8,\n        alignSelf: 'flex-start',\n        paddingHorizontal: DESIGN_TOKENS.spacing.sm,\n        paddingVertical: DESIGN_TOKENS.spacing.xxs,\n        borderRadius: 999,\n        backgroundColor: DESIGN_TOKENS.colors.successSoft,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.successLight,\n    },\n    syncBadgeText: {\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        color: DESIGN_TOKENS.colors.successDark,\n        fontWeight: '700',\n    },\n    headerActions: {\n        marginTop: 8,\n        flexDirection: 'row',\n        justifyContent: 'flex-end',\n    },\n    content: {\n        flex: 1,\n        paddingHorizontal: 8,\n    },\n    contentContainer: {\n        paddingBottom: 0,\n        paddingTop: DESIGN_TOKENS.spacing.sm,\n        alignItems: 'center',\n    },\n    contentInner: {\n        width: '100%',\n        maxWidth: 980,\n    },\n    card: {\n        marginTop: DESIGN_TOKENS.spacing.lg,\n        padding: DESIGN_TOKENS.spacing.lg,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        borderRadius: DESIGN_TOKENS.radii.md,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.border,\n        ...(Platform.OS === 'web'\n            ? ({ boxShadow: DESIGN_TOKENS.shadows.card } as any)\n            : (DESIGN_TOKENS.shadowsNative.light as any)),\n        overflow: 'hidden',\n    },\n    mapHeader: {\n        paddingTop: 2,\n        paddingBottom: 10,\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n    },\n    mapHeaderMobile: {\n        paddingTop: 10,\n        paddingBottom: 8,\n        alignItems: 'flex-start',\n        gap: DESIGN_TOKENS.spacing.sm,\n    },\n    coachmark: {\n        marginBottom: 8,\n        padding: DESIGN_TOKENS.spacing.md,\n        borderRadius: DESIGN_TOKENS.radii.md,\n        backgroundColor: DESIGN_TOKENS.colors.infoSoft,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.infoLight,\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: DESIGN_TOKENS.spacing.sm,\n    },\n    coachmarkTitle: {\n        fontSize: DESIGN_TOKENS.typography.sizes.sm,\n        fontWeight: '700',\n        color: DESIGN_TOKENS.colors.infoDark,\n        marginBottom: 2,\n    },\n    coachmarkBody: {\n        fontSize: DESIGN_TOKENS.typography.sizes.sm,\n        color: DESIGN_TOKENS.colors.text,\n    },\n    manualPointRow: {\n        paddingBottom: 8,\n        flexDirection: 'row',\n        justifyContent: 'flex-start',\n    },\n    manualPointRowMobile: {\n        paddingBottom: 10,\n    },\n    manualPointCard: {\n        marginBottom: 8,\n        padding: DESIGN_TOKENS.spacing.md,\n        borderRadius: DESIGN_TOKENS.radii.md,\n        backgroundColor: DESIGN_TOKENS.colors.surfaceElevated,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.border,\n    },\n    manualCoordsWrapper: {\n        marginBottom: DESIGN_TOKENS.spacing.sm,\n    },\n    manualPointInputsRow: {\n        flexDirection: 'row',\n        gap: DESIGN_TOKENS.spacing.sm,\n    },\n    manualPointInputWrapper: {\n        flex: 1,\n    },\n    manualPointLabel: {\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        color: DESIGN_TOKENS.colors.textMuted,\n        marginBottom: 6,\n        fontWeight: '600',\n    },\n    manualPointInput: {\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.border,\n        borderRadius: 10,\n        paddingHorizontal: DESIGN_TOKENS.spacing.md,\n        paddingVertical: 10,\n        fontSize: DESIGN_TOKENS.typography.sizes.sm,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n    },\n    manualPointActionsRow: {\n        marginTop: DESIGN_TOKENS.spacing.sm,\n        flexDirection: 'row',\n        justifyContent: 'flex-end',\n        gap: DESIGN_TOKENS.spacing.sm,\n    },\n    mapTitle: {\n        fontSize: DESIGN_TOKENS.typography.sizes.md,\n        fontWeight: '600',\n        color: DESIGN_TOKENS.colors.text,\n        marginBottom: DESIGN_TOKENS.spacing.xxs,\n    },\n    mapHint: {\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        color: DESIGN_TOKENS.colors.textMuted,\n    },\n    mapCount: {\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        fontWeight: '600',\n        color: DESIGN_TOKENS.colors.primary,\n    },\n    mapContainer: {\n        marginTop: 4,\n        paddingHorizontal: DESIGN_TOKENS.spacing.md,\n        paddingBottom: DESIGN_TOKENS.spacing.lg,\n    },\n    mapContainerMobile: {\n        marginTop: 6,\n        paddingBottom: DESIGN_TOKENS.spacing.md,\n    },\n    lazyFallback: {\n        padding: DESIGN_TOKENS.spacing.lg,\n        borderRadius: DESIGN_TOKENS.radii.md,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.border,\n        alignItems: 'center',\n        justifyContent: 'center',\n        minHeight: 240,\n    },\n    lazyFallbackText: {\n        fontSize: DESIGN_TOKENS.typography.sizes.sm,\n        color: DESIGN_TOKENS.colors.textMuted,\n        fontWeight: '600',\n    },\n    nativeMapPlaceholder: {\n        padding: DESIGN_TOKENS.spacing.lg,\n        borderRadius: DESIGN_TOKENS.radii.md,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.border,\n    },\n    nativeMapTitle: {\n        fontSize: DESIGN_TOKENS.typography.sizes.md,\n        fontWeight: '700',\n        color: DESIGN_TOKENS.colors.text,\n        marginBottom: 6,\n    },\n    nativeMapBody: {\n        fontSize: DESIGN_TOKENS.typography.sizes.sm,\n        color: DESIGN_TOKENS.colors.textMuted,\n        lineHeight: 18,\n    },\n    filtersRow: {\n        paddingHorizontal: DESIGN_TOKENS.spacing.md,\n        paddingBottom: 8,\n    },\n    filtersRowMobile: {\n        paddingBottom: 10,\n    },\n    filterItem: {\n        flex: 1,\n    },\n    filtersSkeleton: {\n        marginTop: 4,\n        paddingVertical: 4,\n    },\n    filtersSkeletonLabel: {\n        width: 120,\n        height: 12,\n        borderRadius: 4,\n        backgroundColor: DESIGN_TOKENS.colors.borderLight,\n        marginBottom: 8,\n    },\n    filtersSkeletonInput: {\n        width: '100%',\n        height: 40,\n        borderRadius: 8,\n        backgroundColor: DESIGN_TOKENS.colors.borderLight,\n    },\n});\n\nexport default React.memo(TravelWizardStepRoute);\n","import React, { Suspense, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { KeyboardAvoidingView, Platform, View, StyleSheet, Text, ScrollView, findNodeHandle, UIManager, LayoutChangeEvent } from 'react-native';\n\nimport YoutubeLinkComponent from '@/components/YoutubeLinkComponent';\nimport ImageUploadComponent from '@/components/imageUpload/ImageUploadComponent';\nimport { TravelFormData, Travel } from '@/src/types/types';\nimport TravelWizardHeader from '@/components/travel/TravelWizardHeader';\nimport TravelWizardFooter from '@/components/travel/TravelWizardFooter';\nimport { DESIGN_TOKENS } from '@/constants/designSystem';\n\nconst GallerySectionLazy = Platform.OS === 'web'\n    ? React.lazy(() => import('@/components/travel/GallerySection'))\n    : null;\n\n// Native (and other platforms) should keep direct rendering for stability.\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst GallerySectionNative = Platform.OS !== 'web' ? require('@/components/travel/GallerySection').default : null;\n\ninterface TravelWizardStepMediaProps {\n    currentStep: number;\n    totalSteps: number;\n    formData: TravelFormData;\n    setFormData: (data: TravelFormData) => void;\n    travelDataOld: Travel | null;\n    onManualSave: () => Promise<TravelFormData | void>;\n    onBack: () => void;\n    onNext: () => void;\n    stepMeta?: {\n        title?: string;\n        subtitle?: string;\n        tipTitle?: string;\n        tipBody?: string;\n        nextLabel?: string;\n    };\n    progress?: number;\n    autosaveBadge?: string;\n    focusAnchorId?: string | null;\n    onAnchorHandled?: () => void;\n}\n\nconst TravelWizardStepMedia: React.FC<TravelWizardStepMediaProps> = ({\n    currentStep,\n    totalSteps,\n    formData,\n    setFormData,\n    travelDataOld,\n    onManualSave,\n    onBack,\n    onNext,\n    stepMeta,\n    progress = currentStep / totalSteps,\n    autosaveBadge,\n    focusAnchorId,\n    onAnchorHandled,\n}) => {\n    const progressValue = Math.min(Math.max(progress, 0), 1);\n    const progressPercent = Math.round(progressValue * 100);\n    const [footerHeight, setFooterHeight] = useState(0);\n\n    const handleFooterLayout = useCallback((event: LayoutChangeEvent) => {\n        const next = Math.ceil(event.nativeEvent.layout.height);\n        setFooterHeight(prev => (prev === next ? prev : next));\n    }, []);\n\n    const contentPaddingBottom = useMemo(() => {\n        return footerHeight > 0 ? footerHeight + 16 : 180;\n    }, [footerHeight]);\n\n    const scrollRef = useRef<ScrollView | null>(null);\n    const coverAnchorRef = useRef<View | null>(null);\n\n    useEffect(() => {\n        if (!focusAnchorId) return;\n        if (focusAnchorId !== 'travelwizard-media-cover') return;\n\n        if (Platform.OS === 'web') {\n            onAnchorHandled?.();\n            return;\n        }\n\n        const scrollNode = scrollRef.current;\n        const anchorNode = coverAnchorRef.current;\n        if (!scrollNode || !anchorNode) {\n            onAnchorHandled?.();\n            return;\n        }\n\n        const scrollHandle = findNodeHandle(scrollNode);\n        const anchorHandle = findNodeHandle(anchorNode);\n        if (!scrollHandle || !anchorHandle) {\n            onAnchorHandled?.();\n            return;\n        }\n\n        setTimeout(() => {\n            UIManager.measureLayout(\n                anchorHandle,\n                scrollHandle,\n                () => onAnchorHandled?.(),\n                (_x, y) => {\n                    scrollRef.current?.scrollTo({ y: Math.max(y - 12, 0), animated: true });\n                    onAnchorHandled?.();\n                },\n            );\n        }, 50);\n    }, [focusAnchorId, onAnchorHandled]);\n\n    const handleYoutubeChange = (value: string) => {\n        setFormData({ ...formData, youtube_link: value });\n    };\n\n    return (\n        <SafeAreaView style={styles.safeContainer}>\n            <KeyboardAvoidingView\n                style={styles.keyboardAvoid}\n                behavior={Platform.OS === 'ios' ? 'padding' : undefined}\n                keyboardVerticalOffset={0}\n            >\n                <TravelWizardHeader\n                    canGoBack={true}\n                    onBack={onBack}\n                    title={stepMeta?.title ?? '–ú–µ–¥–∏–∞ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è'}\n                    subtitle={stepMeta?.subtitle ?? `–®–∞–≥ ${currentStep} –∏–∑ ${totalSteps}`}\n                    progressPercent={progressPercent}\n                    autosaveBadge={autosaveBadge}\n                    tipTitle={stepMeta?.tipTitle}\n                    tipBody={stepMeta?.tipBody}\n                />\n\n                <ScrollView\n                    ref={scrollRef}\n                    style={styles.content}\n                    contentContainerStyle={[styles.contentContainer, { paddingBottom: contentPaddingBottom }]}\n                    keyboardShouldPersistTaps=\"handled\"\n                >\n                    <View style={styles.contentInner}>\n                        <View ref={coverAnchorRef} style={styles.section} nativeID=\"travelwizard-media-cover\">\n                            <Text style={styles.sectionTitle}>–ì–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</Text>\n                            <Text style={styles.sectionHint}>\n                                –û–±–ª–æ–∂–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∞, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–∞—Ö –∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è.\n                            </Text>\n                            {formData.id ? (\n                                <View style={styles.coverWrapper}>\n                                    <ImageUploadComponent\n                                        collection=\"travelMainImage\"\n                                        idTravel={formData.id}\n                                        oldImage={\n                                            (formData as any).travel_image_thumb_small_url?.length\n                                                ? (formData as any).travel_image_thumb_small_url\n                                                : (travelDataOld as any)?.travel_image_thumb_small_url ?? null\n                                        }\n                                    />\n                                </View>\n                            ) : (\n                                <Text style={styles.infoText}>\n                                    –ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –æ–±–ª–æ–∂–∫—É, —Å–Ω–∞—á–∞–ª–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ —á–µ—Ä–Ω–æ–≤–∏–∫ (–∫–Ω–æ–ø–∫–∞ ¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å¬ª –≤–Ω–∏–∑—É).\n                                </Text>\n                            )}\n                        </View>\n\n                        <View style={styles.section}>\n                            <Text style={styles.sectionTitle}>–ì–∞–ª–µ—Ä–µ—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</Text>\n                            <Text style={styles.sectionHint}>\n                                –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø–æ–≤—ã—à–∞—é—Ç –¥–æ–≤–µ—Ä–∏–µ –∏ –ø–æ–º–æ–≥–∞—é—Ç —á–∏—Ç–∞—Ç–µ–ª—è–º –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å –º–∞—Ä—à—Ä—É—Ç. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –¥–æ–±–∞–≤–∏—Ç—å 3‚Äì10 —Å–Ω–∏–º–∫–æ–≤.\n                            </Text>\n                            {Platform.OS === 'web' && GallerySectionLazy ? (\n                                <Suspense\n                                    fallback={\n                                        <View style={styles.lazyFallback}>\n                                            <Text style={styles.lazyFallbackText}>–ó–∞–≥—Ä—É–∑–∫–∞ –≥–∞–ª–µ—Ä–µ–∏‚Ä¶</Text>\n                                        </View>\n                                    }\n                                >\n                                    <GallerySectionLazy formData={formData} travelDataOld={travelDataOld} />\n                                </Suspense>\n                            ) : GallerySectionNative ? (\n                                <GallerySectionNative formData={formData} travelDataOld={travelDataOld} />\n                            ) : null}\n                        </View>\n\n                        <View style={styles.section}>\n                            <YoutubeLinkComponent\n                                label=\"–í–∏–¥–µ–æ –æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–∏ (YouTube-—Å—Å—ã–ª–∫–∞)\"\n                                value={formData.youtube_link ?? ''}\n                                onChange={handleYoutubeChange}\n                                hint=\"–í—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ä–æ–ª–∏–∫ –Ω–∞ YouTube, –Ω–∞–ø—Ä–∏–º–µ—Ä: https://www.youtube.com/watch?v=...\"\n                            />\n                        </View>\n                    </View>\n                </ScrollView>\n\n                <TravelWizardFooter\n                    canGoBack={false}\n                    onPrimary={onNext}\n                    onSave={onManualSave}\n                    primaryLabel=\"–ö –¥–µ—Ç–∞–ª—è–º\"\n                    onLayout={handleFooterLayout}\n                />\n            </KeyboardAvoidingView>\n        </SafeAreaView>\n    );\n};\n\nconst styles = StyleSheet.create({\n    safeContainer: { flex: 1, backgroundColor: DESIGN_TOKENS.colors.background },\n    keyboardAvoid: { flex: 1 },\n    content: {\n        flex: 1,\n    },\n    contentContainer: {\n        paddingHorizontal: 8,\n        paddingBottom: 0,\n        paddingTop: DESIGN_TOKENS.spacing.sm,\n        alignItems: 'center',\n    },\n    contentInner: {\n        width: '100%',\n        maxWidth: 980,\n    },\n    section: {\n        marginTop: DESIGN_TOKENS.spacing.lg,\n        padding: DESIGN_TOKENS.spacing.lg,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        borderRadius: DESIGN_TOKENS.radii.md,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.border,\n        ...(Platform.OS === 'web'\n            ? ({ boxShadow: DESIGN_TOKENS.shadows.card } as any)\n            : (DESIGN_TOKENS.shadowsNative.light as any)),\n    },\n    lazyFallback: {\n        marginTop: 8,\n        padding: DESIGN_TOKENS.spacing.md,\n        borderRadius: DESIGN_TOKENS.radii.md,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.border,\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    lazyFallbackText: {\n        fontSize: DESIGN_TOKENS.typography.sizes.sm,\n        color: DESIGN_TOKENS.colors.textMuted,\n        fontWeight: '600',\n    },\n    sectionTitle: {\n        fontSize: DESIGN_TOKENS.typography.sizes.md,\n        fontWeight: '700',\n        color: DESIGN_TOKENS.colors.text,\n        marginBottom: 4,\n    },\n    sectionHint: {\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        color: DESIGN_TOKENS.colors.textMuted,\n        marginBottom: 8,\n    },\n    coverWrapper: {\n        marginTop: 8,\n        alignItems: 'center',\n    },\n    infoText: {\n        marginTop: 8,\n        fontSize: DESIGN_TOKENS.typography.sizes.sm,\n        color: DESIGN_TOKENS.colors.textMuted,\n    },\n});\n\nexport default React.memo(TravelWizardStepMedia);\n","import React, {useEffect, useState} from 'react';\nimport {StyleSheet, Text, TextInput, View, Platform} from 'react-native';\nimport { DESIGN_TOKENS } from '@/constants/designSystem';\n\ninterface YoutubeLinkComponentProps {\n    label: string;\n    value: string;\n    onChange: (value: string) => void;\n    error?: string | null;\n    hint?: string;\n}\n\nconst palette = DESIGN_TOKENS.colors;\n\nconst YoutubeLinkComponent: React.FC<YoutubeLinkComponentProps> = ({ \n    label, \n    value, \n    onChange,\n    error,\n    hint,\n}) => {\n    const [inputValue, setInputValue] = useState(value);\n    const [localError, setLocalError] = useState<string | null>(null);\n\n    useEffect(() => {\n        setInputValue(value);\n        setLocalError(null);\n    }, [value]);\n\n    const handleChange = (text: string) => {\n        setInputValue(text);\n        onChange(text);\n        if (localError) {\n            setLocalError(null);\n        }\n    };\n\n    const validateLink = (text: string): string | null => {\n        if (!text.trim()) {\n            return null;\n        }\n        const youtubeRegex =\n            /^(https?:\\/\\/)?(www\\.)?(youtube\\.com|youtu\\.be)\\/(watch\\?v=|shorts\\/)?[A-Za-z0-9_-]{11}/;\n        return youtubeRegex.test(text.trim()) ? null : '–ù–µ–≤–µ—Ä–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ YouTube';\n    };\n\n    useEffect(() => {\n        if (!inputValue || !inputValue.trim()) {\n            setLocalError(null);\n            return;\n        }\n\n        const timeout = setTimeout(() => {\n            setLocalError(validateLink(inputValue));\n        }, 400);\n\n        return () => clearTimeout(timeout);\n    }, [inputValue]);\n\n    const handleBlur = () => {\n        setLocalError(validateLink(inputValue));\n    };\n\n    const displayError = error ?? localError ?? null;\n\n    return (\n        <View style={styles.container}>\n            <Text style={styles.label}>{label}</Text>\n            {hint && !displayError && (\n                <Text style={styles.hint}>{hint}</Text>\n            )}\n            <TextInput\n                style={[\n                    styles.input,\n                    displayError && styles.invalidInput,\n                ]}\n                value={inputValue}\n                onChangeText={handleChange}\n                onBlur={handleBlur}\n                placeholder=\"–í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ YouTube\"\n                placeholderTextColor={palette.textMuted}\n                {...Platform.select({\n                    web: {\n                        outlineWidth: 0,\n                        // @ts-ignore\n                        ':focus': {\n                            borderColor: displayError ? '#ef4444' : palette.primary,\n                        },\n                    },\n                })}\n            />\n            {displayError && (\n                <View style={styles.errorContainer}>\n                    <Text style={styles.errorText}>{displayError}</Text>\n                </View>\n            )}\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        marginBottom: 16,\n    },\n    label: {\n        marginBottom: 6,\n        fontSize: 14,\n        fontWeight: '600',\n        color: palette.text,\n    },\n    hint: {\n        fontSize: 12,\n        color: palette.textMuted,\n        marginBottom: 6,\n    },\n    input: {\n        borderWidth: 1,\n        borderColor: palette.border,\n        borderRadius: 8,\n        paddingHorizontal: 12,\n        paddingVertical: 10,\n        fontSize: 15,\n        backgroundColor: palette.surface,\n        color: palette.text,\n        minHeight: 44,\n        ...Platform.select({\n            web: {\n                transition: 'border-color 0.2s ease',\n            },\n        }),\n    },\n    invalidInput: {\n        borderColor: '#ef4444',\n    },\n    errorContainer: {\n        marginTop: 4,\n    },\n    errorText: {\n        fontSize: 12,\n        color: '#ef4444',\n    },\n});\n\nexport default YoutubeLinkComponent;\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { KeyboardAvoidingView, Platform, View, StyleSheet, Text, ScrollView, LayoutChangeEvent } from 'react-native';\n\nimport ArticleEditor from '@/components/ArticleEditor';\nimport TextInputComponent from '@/components/TextInputComponent';\nimport CheckboxComponent from '@/components/CheckboxComponent';\nimport TravelWizardHeader from '@/components/travel/TravelWizardHeader';\nimport TravelWizardFooter from '@/components/travel/TravelWizardFooter';\nimport { TravelFormData } from '@/src/types/types';\nimport { DESIGN_TOKENS } from '@/constants/designSystem';\n\ninterface TravelWizardStepDetailsProps {\n    currentStep: number;\n    totalSteps: number;\n    formData: TravelFormData;\n    setFormData: React.Dispatch<React.SetStateAction<TravelFormData>>;\n    onBack: () => void;\n    onNext: () => void;\n    onManualSave?: () => Promise<TravelFormData | void>;\n    stepMeta?: {\n        title?: string;\n        subtitle?: string;\n        tipTitle?: string;\n        tipBody?: string;\n        nextLabel?: string;\n    };\n    progress?: number;\n    autosaveBadge?: string;\n}\n\nconst TravelWizardStepDetails: React.FC<TravelWizardStepDetailsProps> = ({\n    currentStep,\n    totalSteps,\n    formData,\n    setFormData,\n    onBack,\n    onNext,\n    onManualSave,\n    stepMeta,\n    progress = currentStep / totalSteps,\n    autosaveBadge,\n}) => {\n    const progressValue = Math.min(Math.max(progress, 0), 1);\n    const progressPercent = Math.round(progressValue * 100);\n    const [footerHeight, setFooterHeight] = useState(0);\n\n    const handleFooterLayout = useCallback((event: LayoutChangeEvent) => {\n        const next = Math.ceil(event.nativeEvent.layout.height);\n        setFooterHeight(prev => (prev === next ? prev : next));\n    }, []);\n\n    const contentPaddingBottom = useMemo(() => {\n        return footerHeight > 0 ? footerHeight + 16 : 180;\n    }, [footerHeight]);\n\n    const idTravelStr = useMemo(\n        () => (formData?.id != null ? String(formData.id) : undefined),\n        [formData?.id]\n    );\n\n    const handleChange = <T extends keyof TravelFormData>(name: T, value: TravelFormData[T]) => {\n        setFormData(prev => ({ ...prev, [name]: value }));\n    };\n\n    const recommendationFieldsFilled = useMemo(() => {\n        const keys: (keyof TravelFormData)[] = ['plus', 'minus', 'recommendation', 'budget', 'visa'];\n        let filled = 0;\n        keys.forEach(key => {\n            const value = (formData as any)[key];\n            if (key === 'visa') {\n                if (value === true || value === false) filled += 1;\n                return;\n            }\n            if (Array.isArray(value)) {\n                if (value.length > 0) filled += 1;\n                return;\n            }\n            if (value && String(value).trim().length > 0) filled += 1;\n        });\n        return { filled, total: keys.length };\n    }, [formData]);\n\n    return (\n        <SafeAreaView style={styles.safeContainer}>\n            <KeyboardAvoidingView\n                style={styles.keyboardAvoid}\n                behavior={Platform.OS === 'ios' ? 'padding' : undefined}\n                keyboardVerticalOffset={0}\n            >\n                <TravelWizardHeader\n                    canGoBack={true}\n                    onBack={onBack}\n                    title={stepMeta?.title ?? '–î–µ—Ç–∞–ª–∏ –º–∞—Ä—à—Ä—É—Ç–∞'}\n                    subtitle={stepMeta?.subtitle ?? `–®–∞–≥ ${currentStep} –∏–∑ ${totalSteps}`}\n                    progressPercent={progressPercent}\n                    autosaveBadge={autosaveBadge}\n                    tipTitle={stepMeta?.tipTitle}\n                    tipBody={stepMeta?.tipBody}\n                />\n                <ScrollView\n                    style={styles.content}\n                    contentContainerStyle={[styles.contentContainer, { paddingBottom: contentPaddingBottom }]}\n                    keyboardShouldPersistTaps=\"handled\"\n                >\n                    <View style={styles.contentInner}>\n                        <View style={styles.card}>\n                            <View style={styles.progressHeader}>\n                                <Text style={styles.progressCardLabel}>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–æ–ª—è</Text>\n                                <Text style={styles.progressValue}>\n                                    {recommendationFieldsFilled.filled} –∏–∑ {recommendationFieldsFilled.total} –∑–∞–ø–æ–ª–Ω–µ–Ω–æ\n                                </Text>\n                            </View>\n                        </View>\n\n                        <View style={styles.card}>\n                            <Text style={styles.sectionTitle}>–î–ª—è –∫–æ–≥–æ —ç—Ç–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ</Text>\n                            <Text style={styles.sectionHint}>\n                                –û–ø–∏—à–∏—Ç–µ –ø–ª—é—Å—ã –∏ –º–∏–Ω—É—Å—ã –º–∞—Ä—à—Ä—É—Ç–∞, –≤–∞—à–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –ª–∞–π—Ñ—Ö–∞–∫–∏. –≠—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç —Ü–µ–Ω–Ω–æ—Å—Ç—å –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –¥–ª—è —á–∏—Ç–∞—Ç–µ–ª–µ–π.\n                            </Text>\n                        </View>\n\n                        <View style={styles.card}>\n                            <Text style={styles.editorLabel}>–ü–ª—é—Å—ã</Text>\n                            <ArticleEditor\n                                key={`plus-${idTravelStr ?? 'new'}`}\n                                label=\"–ü–ª—é—Å—ã\"\n                                content={formData.plus ?? ''}\n                                onChange={val => handleChange('plus', val as any)}\n                                idTravel={idTravelStr}\n                                variant=\"compact\"\n                            />\n                        </View>\n\n                        <View style={styles.card}>\n                            <Text style={styles.editorLabel}>–ú–∏–Ω—É—Å—ã</Text>\n                            <ArticleEditor\n                                key={`minus-${idTravelStr ?? 'new'}`}\n                                label=\"–ú–∏–Ω—É—Å—ã\"\n                                content={formData.minus ?? ''}\n                                onChange={val => handleChange('minus', val as any)}\n                                idTravel={idTravelStr}\n                                variant=\"compact\"\n                            />\n                        </View>\n\n                        <View style={styles.card}>\n                            <Text style={styles.editorLabel}>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –ª–∞–π—Ñ—Ö–∞–∫–∏</Text>\n                            <ArticleEditor\n                                key={`rec-${idTravelStr ?? 'new'}`}\n                                label=\"–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏\"\n                                content={formData.recommendation ?? ''}\n                                onChange={val => handleChange('recommendation', val as any)}\n                                idTravel={idTravelStr}\n                                variant=\"compact\"\n                            />\n                        </View>\n\n                        <View style={styles.card}>\n                            <TextInputComponent\n                                label=\"–ë—é–¥–∂–µ—Ç (—Å—É–º–º–∞ –∏–ª–∏ –¥–∏–∞–ø–∞–∑–æ–Ω)\"\n                                value={(formData.budget as any)?.toString?.() ?? ''}\n                                onChange={value => handleChange('budget', value as any)}\n                                hint=\"–ù–∞–ø—Ä–∏–º–µ—Ä: 700‚Äì900 ‚Ç¨ –Ω–∞ —á–µ–ª–æ–≤–µ–∫–∞ –±–µ–∑ –ø–µ—Ä–µ–ª—ë—Ç–∞\"\n                            />\n                        </View>\n\n                        <View style={styles.card}>\n                            <CheckboxComponent\n                                label=\"–¢—Ä–µ–±—É–µ—Ç—Å—è –≤–∏–∑–∞\"\n                                value={formData.visa ?? false}\n                                onChange={value => handleChange('visa', value as any)}\n                            />\n                        </View>\n                    </View>\n                </ScrollView>\n\n                <TravelWizardFooter\n                    canGoBack={false}\n                    onPrimary={onNext}\n                    onSave={onManualSave}\n                    saveLabel=\"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å\"\n                    primaryLabel=\"–ö –ø—É–±–ª–∏–∫–∞—Ü–∏–∏\"\n                    onLayout={handleFooterLayout}\n                />\n            </KeyboardAvoidingView>\n        </SafeAreaView>\n    );\n};\n\nconst styles = StyleSheet.create({\n    safeContainer: { flex: 1, backgroundColor: DESIGN_TOKENS.colors.background },\n    keyboardAvoid: { flex: 1 },\n    content: {\n        flex: 1,\n    },\n    contentContainer: {\n        paddingHorizontal: 8,\n        paddingBottom: 0,\n        paddingTop: DESIGN_TOKENS.spacing.sm,\n        alignItems: 'center',\n    },\n    contentInner: {\n        width: '100%',\n        maxWidth: 980,\n    },\n    progressHeader: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n    },\n    progressCardLabel: {\n        fontSize: DESIGN_TOKENS.typography.sizes.sm,\n        fontWeight: '700',\n        color: DESIGN_TOKENS.colors.text,\n    },\n    progressValue: {\n        fontSize: DESIGN_TOKENS.typography.sizes.sm,\n        color: DESIGN_TOKENS.colors.primaryDark,\n        fontWeight: '700',\n    },\n    card: {\n        marginTop: DESIGN_TOKENS.spacing.lg,\n        padding: DESIGN_TOKENS.spacing.lg,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        borderRadius: DESIGN_TOKENS.radii.md,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.border,\n        ...(Platform.OS === 'web'\n            ? ({ boxShadow: DESIGN_TOKENS.shadows.card } as any)\n            : (DESIGN_TOKENS.shadowsNative.light as any)),\n        overflow: 'hidden',\n    },\n    sectionTitle: {\n        fontSize: DESIGN_TOKENS.typography.sizes.md,\n        fontWeight: '700',\n        color: DESIGN_TOKENS.colors.text,\n        marginBottom: 4,\n    },\n    sectionHint: {\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        color: DESIGN_TOKENS.colors.textMuted,\n    },\n    editorLabel: {\n        fontSize: DESIGN_TOKENS.typography.sizes.sm,\n        fontWeight: '700',\n        color: DESIGN_TOKENS.colors.text,\n        marginBottom: 8,\n    },\n});\n\nexport default React.memo(TravelWizardStepDetails);\n","import React from 'react';\nimport { View, Text, Switch, StyleSheet, Platform } from 'react-native';\n\ninterface CheckboxComponentProps {\n    label: string;\n    value: boolean;\n    onChange: (value: boolean) => void;\n}\n\nconst CheckboxComponent: React.FC<CheckboxComponentProps> = ({ label, value, onChange }) => {\n    return (\n        <View style={styles.container}>\n            <Text style={styles.label} numberOfLines={1}>\n                {label}\n            </Text>\n            <Switch\n                value={value}\n                onValueChange={onChange}\n                thumbColor={Platform.OS === 'android' ? (value ? '#ff7f50' : '#f4f3f4') : undefined}\n                trackColor={{ false: '#ccc', true: '#ffb899' }}\n            />\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        marginBottom: 20,\n    },\n    label: {\n        flex: 1,\n        fontSize: 16,\n        color: '#333',\n        marginRight: 8,\n    },\n});\n\nexport default CheckboxComponent;\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { KeyboardAvoidingView, Platform, View, StyleSheet, Text, ScrollView, findNodeHandle, UIManager, LayoutChangeEvent } from 'react-native';\n\nimport FiltersUpsertComponent from '@/components/travel/FiltersUpsertComponent';\nimport TravelWizardHeader from '@/components/travel/TravelWizardHeader';\nimport TravelWizardFooter from '@/components/travel/TravelWizardFooter';\nimport { TravelFormData, Travel } from '@/src/types/types';\nimport { DESIGN_TOKENS } from '@/constants/designSystem';\n\ninterface TravelWizardStepExtrasProps {\n    currentStep: number;\n    totalSteps: number;\n    formData: TravelFormData;\n    setFormData: (data: TravelFormData) => void;\n    filters: any;\n    travelDataOld: Travel | null;\n    isSuperAdmin: boolean;\n    onManualSave: () => Promise<TravelFormData | void>;\n    onBack: () => void;\n    onNext: () => void;\n    stepMeta?: {\n        title?: string;\n        subtitle?: string;\n        tipTitle?: string;\n        tipBody?: string;\n        nextLabel?: string;\n    };\n    progress?: number;\n    autosaveBadge?: string;\n    focusAnchorId?: string | null;\n    onAnchorHandled?: () => void;\n}\n\nconst TravelWizardStepExtras: React.FC<TravelWizardStepExtrasProps> = ({\n    currentStep,\n    totalSteps,\n    formData,\n    setFormData,\n    filters,\n    travelDataOld,\n    isSuperAdmin,\n    onManualSave,\n    onBack,\n    onNext,\n    stepMeta,\n    progress = currentStep / totalSteps,\n    autosaveBadge,\n    focusAnchorId,\n    onAnchorHandled,\n}) => {\n    const progressValue = Math.min(Math.max(progress, 0), 1);\n    const progressPercent = Math.round(progressValue * 100);\n    const [footerHeight, setFooterHeight] = useState(0);\n\n    const handleFooterLayout = useCallback((event: LayoutChangeEvent) => {\n        const next = Math.ceil(event.nativeEvent.layout.height);\n        setFooterHeight(prev => (prev === next ? prev : next));\n    }, []);\n\n    const contentPaddingBottom = useMemo(() => {\n        return footerHeight > 0 ? footerHeight + 16 : 180;\n    }, [footerHeight]);\n\n    const scrollRef = useRef<ScrollView | null>(null);\n    const categoriesAnchorRef = useRef<View | null>(null);\n\n    useEffect(() => {\n        if (!focusAnchorId) return;\n        if (focusAnchorId !== 'travelwizard-extras-categories') return;\n\n        if (Platform.OS === 'web') {\n            onAnchorHandled?.();\n            return;\n        }\n\n        const scrollNode = scrollRef.current;\n        const anchorNode = categoriesAnchorRef.current;\n        if (!scrollNode || !anchorNode) {\n            onAnchorHandled?.();\n            return;\n        }\n\n        const scrollHandle = findNodeHandle(scrollNode);\n        const anchorHandle = findNodeHandle(anchorNode);\n        if (!scrollHandle || !anchorHandle) {\n            onAnchorHandled?.();\n            return;\n        }\n\n        setTimeout(() => {\n            UIManager.measureLayout(\n                anchorHandle,\n                scrollHandle,\n                () => onAnchorHandled?.(),\n                (_x, y) => {\n                    scrollRef.current?.scrollTo({ y: Math.max(y - 12, 0), animated: true });\n                    onAnchorHandled?.();\n                },\n            );\n        }, 50);\n    }, [focusAnchorId, onAnchorHandled]);\n\n    return (\n        <SafeAreaView style={styles.safeContainer}>\n            <KeyboardAvoidingView\n                style={styles.keyboardAvoid}\n                behavior={Platform.OS === 'ios' ? 'padding' : undefined}\n                keyboardVerticalOffset={0}\n            >\n                <TravelWizardHeader\n                    canGoBack={true}\n                    onBack={onBack}\n                    title={stepMeta?.title ?? '–î–æ–ø. –ø–∞—Ä–∞–º–µ—Ç—Ä—ã'}\n                    subtitle={stepMeta?.subtitle ?? `–®–∞–≥ ${currentStep} –∏–∑ ${totalSteps}`}\n                    progressPercent={progressPercent}\n                    autosaveBadge={autosaveBadge}\n                    tipTitle={stepMeta?.tipTitle}\n                    tipBody={stepMeta?.tipBody}\n                />\n                <ScrollView\n                    ref={scrollRef}\n                    style={styles.content}\n                    contentContainerStyle={[styles.contentContainer, { paddingBottom: contentPaddingBottom }]}\n                    keyboardShouldPersistTaps=\"handled\"\n                >\n                    <View style={styles.contentInner}>\n                        <View ref={categoriesAnchorRef} nativeID=\"travelwizard-extras-categories\" />\n                        <FiltersUpsertComponent\n                            filters={filters}\n                            formData={formData}\n                            setFormData={setFormData}\n                            travelDataOld={travelDataOld}\n                            isSuperAdmin={isSuperAdmin}\n                            onSave={onManualSave}\n                            showSaveButton={false}\n                            showPreviewButton={false}\n                            showPublishControls={false}\n                            showCountries={false}\n                            showCategories={true}\n                            showCoverImage={false}\n                            showAdditionalFields={true}\n                        />\n                    </View>\n                </ScrollView>\n\n                <TravelWizardFooter\n                    canGoBack={false}\n                    onPrimary={onNext}\n                    primaryLabel={stepMeta?.nextLabel ?? '–ö –ø—É–±–ª–∏–∫–∞—Ü–∏–∏'}\n                    onSave={onManualSave}\n                    saveLabel=\"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å\"\n                    onLayout={handleFooterLayout}\n                />\n            </KeyboardAvoidingView>\n        </SafeAreaView>\n    );\n};\n\nconst styles = StyleSheet.create({\n    safeContainer: { flex: 1, backgroundColor: DESIGN_TOKENS.colors.background },\n    keyboardAvoid: { flex: 1 },\n    content: {\n        flex: 1,\n    },\n    contentContainer: {\n        paddingHorizontal: 8,\n        paddingBottom: 0,\n        paddingTop: DESIGN_TOKENS.spacing.sm,\n        alignItems: 'center',\n    },\n    contentInner: {\n        width: '100%',\n        maxWidth: 980,\n    },\n});\n\nexport default React.memo(TravelWizardStepExtras);\n","import React, { useEffect } from 'react';\nimport {\n    View,\n    Text,\n    TextInput,\n    ScrollView,\n    StyleSheet,\n    Dimensions,\n    ActivityIndicator,\n    TouchableOpacity,\n    Platform,\n    Linking,\n} from 'react-native';\nimport { Button } from 'react-native-paper';\n\nimport MultiSelectField from '@/components/MultiSelectField';\nimport CheckboxComponent from '@/components/CheckboxComponent';\nimport ImageUploadComponent from '@/components/imageUpload/ImageUploadComponent';\nimport { TravelFormData, TravelFilters, Travel } from '@/src/types/types';\nimport { DESIGN_TOKENS } from '@/constants/designSystem';\nimport { METRICS } from '@/constants/layout';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width <= METRICS.breakpoints.tablet;\nconst MultiSelectFieldAny: any = MultiSelectField;\n\ninterface FiltersComponentProps {\n    filters: TravelFilters | null;\n    formData: TravelFormData | null;\n    setFormData: (data: TravelFormData) => void;\n    travelDataOld?: Travel | null;\n    onClose?: () => void;\n    isSuperAdmin?: boolean;\n    onSave: () => void;\n    showSaveButton?: boolean;\n    showPreviewButton?: boolean;\n    showPublishControls?: boolean;\n    showCountries?: boolean;\n    showCategories?: boolean;\n    showCoverImage?: boolean;\n    showAdditionalFields?: boolean;\n}\n\nconst FiltersUpsertComponent: React.FC<FiltersComponentProps> = ({\n                                                                     filters,\n                                                                     formData,\n                                                                     setFormData,\n                                                                     travelDataOld,\n                                                                     onClose,\n                                                                     isSuperAdmin = false,\n                                                                     onSave,\n                                                                     showSaveButton = true,\n                                                                     showPreviewButton = true,\n                                                                     showPublishControls = true,\n                                                                     showCountries = true,\n                                                                     showCategories = true,\n                                                                     showCoverImage = true,\n                                                                     showAdditionalFields = true,\n                                                                 }) => {\n    if (!formData || !filters) {\n        return (\n            <View style={styles.loaderContainer}>\n                <ActivityIndicator size=\"large\" color={DESIGN_TOKENS.colors.primary} />\n                <Text>–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤...</Text>\n            </View>\n        );\n    }\n\n    const form: any = formData;\n\n    useEffect(() => {\n        // –µ—Å–ª–∏ –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å ‚Äî —è–≤–Ω–æ —Ñ–∏–∫—Å–∏—Ä—É–µ–º publish=false,\n        // —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å–ª—É—á–∞–π–Ω–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¥–æ –º–æ–¥–µ—Ä–∞—Ü–∏–∏\n        if (!formData.id && formData.publish !== false) {\n            setFormData({ ...formData, publish: false });\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [formData.id]);\n\n    const handleResetFilters = () => {\n        setFormData({\n            ...(formData as any),\n            publish: false,\n            moderation: false,\n            countries: [],\n            categories: [],\n            transports: [],\n            complexity: [],\n            companions: [],\n            over_nights_stay: [],\n            month: [],\n            visa: false,\n            year: '',\n            number_peoples: '',\n            number_days: '',\n            budget: '',\n            travel_image_thumb_small_url: '', // –æ—á–∏—â–∞–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É\n        } as any);\n    };\n\n    const openPreview = () => {\n        if (!form.slug) return;\n        const url = `/travels/${form.slug}`;\n        if (Platform.OS === 'web') {\n            window.open(url, '_blank', 'noopener,noreferrer');\n        } else {\n            Linking.openURL(`https://metravel.by${url}`).catch(() => {});\n        }\n    };\n\n\n    return (\n        <ScrollView\n            contentContainerStyle={{ flexGrow: 1 }}\n            style={[styles.container, isMobile && { minHeight: '100%' }]}\n            keyboardShouldPersistTaps=\"handled\"\n        >\n            {onClose && isMobile && (\n                <TouchableOpacity onPress={() => onClose()} style={styles.closeIcon} hitSlop={{ top: 8, bottom: 8, left: 8, right: 8 }}>\n                    <Text style={styles.closeButtonText}>‚úñ</Text>\n                </TouchableOpacity>\n            )}\n\n            {showSaveButton && (\n                <Button\n                    mode=\"contained\"\n                    icon=\"content-save\"\n                    onPress={onSave}\n                    style={styles.saveButton}\n                    accessibilityRole=\"button\"\n                    accessibilityLabel=\"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è\"\n                >\n                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–π—á–∞—Å\n                </Button>\n            )}\n\n            {showPreviewButton && form.slug ? (\n                <Button\n                    mode=\"outlined\"\n                    icon=\"open-in-new\"\n                    onPress={openPreview}\n                    style={styles.floatingIconButton}\n                    accessibilityRole=\"link\"\n                    accessibilityLabel=\"–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –º–∞—Ä—à—Ä—É—Ç–∞\"\n                >\n                    –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä\n                </Button>\n            ) : null}\n\n\n            {showPublishControls && (\n                <>\n                    <CheckboxComponent\n                        label=\"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ —á–µ—Ä–Ω–æ–≤–∏–∫\"\n                        value={!formData.publish}\n                        onChange={(value) => setFormData({ ...formData, publish: !value })}\n                    />\n\n                    {isSuperAdmin && (\n                        <CheckboxComponent\n                            label=\"–ü—Ä–æ—à–µ–ª –º–æ–¥–µ—Ä–∞—Ü–∏—é\"\n                            value={formData.moderation ?? false}\n                            onChange={(value) => setFormData({ ...formData, moderation: value })}\n                        />\n                    )}\n                </>\n            )}\n\n            {showCoverImage && formData.id && (\n                <View style={styles.imageUploadWrapper}>\n                    <ImageUploadComponent\n                        collection=\"travelMainImage\"\n                        idTravel={formData.id}\n                        oldImage={\n                            form.travel_image_thumb_small_url?.length\n                                ? form.travel_image_thumb_small_url\n                                : (travelDataOld as any)?.travel_image_thumb_small_url ?? null\n                        }\n                    />\n                    <Text style={styles.coverHint}>\n                        –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (—Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω 16:9), –±–µ–∑ –∫–æ–ª–ª–∞–∂–µ–π –∏ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ.\n                    </Text>\n                </View>\n            )}\n\n            {showCountries && (\n                <MultiSelectFieldAny\n                    label=\"–°—Ç—Ä–∞–Ω—ã –¥–ª—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è *\"\n                    items={filters.countries}\n                    value={formData.countries ?? []}\n                    onChange={(countries: any) => setFormData({ ...formData, countries })}\n                    labelField=\"title_ru\"\n                    valueField=\"country_id\"\n                />\n            )}\n\n            {showCategories && (\n                <View nativeID=\"travelwizard-publish-categories\">\n                    <MultiSelectFieldAny\n                        label=\"–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π *\"\n                        items={filters.categories}\n                        value={formData.categories ?? []}\n                        onChange={(categories: any) => setFormData({ ...formData, categories })}\n                        labelField=\"name\"\n                        valueField=\"id\"\n                    />\n                </View>\n            )}\n\n            {showAdditionalFields && (\n                <>\n                    <MultiSelectFieldAny\n                        label=\"–°—Ä–µ–¥—Å—Ç–≤–∞ –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è\"\n                        items={filters.transports}\n                        value={formData.transports ?? []}\n                        onChange={(transports: any) => setFormData({ ...formData, transports })}\n                        labelField=\"name\"\n                        valueField=\"id\"\n                    />\n\n                    <MultiSelectFieldAny\n                        label=\"–§–∏–∑–∏—á–µ—Å–∫–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞\"\n                        items={filters.complexity}\n                        value={formData.complexity ?? []}\n                        onChange={(complexity: any) => setFormData({ ...formData, complexity })}\n                        labelField=\"name\"\n                        valueField=\"id\"\n                    />\n\n                    <MultiSelectFieldAny\n                        label=\"–ü—É—Ç–µ—à–µ—Å—Ç–≤—É–µ—Ç–µ —Å...\"\n                        items={filters.companions}\n                        value={formData.companions ?? []}\n                        onChange={(companions: any) => setFormData({ ...formData, companions })}\n                        labelField=\"name\"\n                        valueField=\"id\"\n                    />\n\n                    <MultiSelectFieldAny\n                        label=\"–ù–æ—á–ª–µ–≥...\"\n                        items={filters.over_nights_stay}\n                        value={formData.over_nights_stay ?? []}\n                        onChange={(over_nights_stay: any) => setFormData({ ...formData, over_nights_stay })}\n                        labelField=\"name\"\n                        valueField=\"id\"\n                    />\n\n                    <MultiSelectFieldAny\n                        label=\"–ú–µ—Å—è—Ü –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è\"\n                        items={filters.month}\n                        value={formData.month ?? []}\n                        onChange={(month: any) => setFormData({ ...formData, month })}\n                        labelField=\"name\"\n                        valueField=\"id\"\n                    />\n\n                    {renderNumericInput('–ì–æ–¥ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è', 'year')}\n                    <CheckboxComponent\n                        label=\"–¢—Ä–µ–±—É–µ—Ç—Å—è –≤–∏–∑–∞\"\n                        value={formData.visa ?? false}\n                        onChange={(visa) => setFormData({ ...formData, visa })}\n                    />\n                    {renderNumericInput('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤', 'number_peoples')}\n                    {renderNumericInput('–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–¥–Ω–µ–π)', 'number_days')}\n                    {renderNumericInput('–ë—é–¥–∂–µ—Ç (—Ä—É–±.)', 'budget')}\n                </>\n            )}\n        </ScrollView>\n    );\n\n    // –ü–æ–ª–µ, –ø—Ä–∏–Ω–∏–º–∞—é—â–µ–µ —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã\n    function renderNumericInput(label: string, field: keyof TravelFormData) {\n        const current = formData as TravelFormData;\n        return (\n            <View style={styles.inputGroup}>\n                <Text style={styles.label}>{label}</Text>\n                <TextInput\n                    style={styles.input}\n                    value={(current[field] as any)?.toString?.() ?? ''}\n                    onChangeText={(value) => {\n                        // —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã (—á—Ç–æ–±—ã –Ω–µ —Ä–∞–∑—ä–µ–∑–∂–∞–ª–∏—Å—å —Ç–∏–ø—ã –Ω–∞ –±—ç–∫–µ)\n                        const digits = value.replace(/[^\\d]/g, '');\n                        setFormData({ ...(current as any), [field]: digits } as TravelFormData);\n                    }}\n                    placeholder={`–í–≤–µ–¥–∏—Ç–µ ${label.toLowerCase()}`}\n                    keyboardType={Platform.select({ ios: 'number-pad', android: 'numeric', default: 'numeric' })}\n                    inputMode=\"numeric\"\n                />\n            </View>\n        );\n    }\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        padding: DESIGN_TOKENS.spacing.lg,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        flex: 1,\n    },\n    loaderContainer: { flex: 1, justifyContent: 'center', alignItems: 'center', padding: DESIGN_TOKENS.spacing.xxs },\n    imageUploadWrapper: { alignItems: 'center', marginVertical: 12 },\n    coverHint: {\n        marginTop: 8,\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        color: DESIGN_TOKENS.colors.textMuted,\n        textAlign: 'center',\n    },\n\n    inputGroup: { marginBottom: 12 },\n    input: {\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.border,\n        padding: DESIGN_TOKENS.spacing.sm,\n        borderRadius: DESIGN_TOKENS.radii.sm,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        color: DESIGN_TOKENS.colors.text,\n    },\n    label: {\n        fontWeight: DESIGN_TOKENS.typography.weights.semibold as any,\n        marginBottom: 4,\n        color: DESIGN_TOKENS.colors.text,\n    },\n\n    resetButton: { marginTop: DESIGN_TOKENS.spacing.lg, borderColor: DESIGN_TOKENS.colors.warning },\n\n    closeIcon: {\n        position: 'absolute',\n        top: -16,\n        right: -14,\n        backgroundColor: DESIGN_TOKENS.colors.danger,\n        borderRadius: 12,\n        width: 20,\n        height: 20,\n        justifyContent: 'center',\n        alignItems: 'center',\n        zIndex: 1,\n    },\n    closeButtonText: {\n        color: DESIGN_TOKENS.colors.textInverse,\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        lineHeight: 12,\n    },\n\n    saveButton: {\n        backgroundColor: DESIGN_TOKENS.colors.primary,\n        borderRadius: 12,\n        marginBottom: 12,\n    },\n    floatingIconButton: {\n        minWidth: 40,\n        borderRadius: 20,\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        elevation: 3,\n        marginBottom: 12,\n    },\n});\n\nexport default FiltersUpsertComponent;\n","import React, { useCallback, useMemo, useState, useEffect } from 'react';\nimport { KeyboardAvoidingView, Platform, ScrollView, View, Text, TouchableOpacity, StyleSheet, LayoutChangeEvent } from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { Icon } from 'react-native-paper';\nimport Toast from 'react-native-toast-message';\nimport { useRouter } from 'expo-router';\n\nimport FiltersUpsertComponent from '@/components/travel/FiltersUpsertComponent';\nimport TravelWizardHeader from '@/components/travel/TravelWizardHeader';\nimport TravelWizardFooter from '@/components/travel/TravelWizardFooter';\nimport { TravelFormData, Travel } from '@/src/types/types';\nimport { getModerationIssues, type ModerationIssue } from '@/utils/formValidation';\nimport { trackWizardEvent } from '@/src/utils/analytics';\nimport { DESIGN_TOKENS } from '@/constants/designSystem';\n\ninterface TravelWizardStepPublishProps {\n    currentStep: number;\n    totalSteps: number;\n    formData: TravelFormData;\n    setFormData: (data: TravelFormData) => void;\n    filters: any;\n    travelDataOld: Travel | null;\n    isSuperAdmin: boolean;\n    onManualSave: () => Promise<TravelFormData | void>;\n    onGoBack: () => void;\n    onFinish: () => void;\n    onNavigateToIssue?: (issue: ModerationIssue) => void;\n    stepMeta?: {\n        title?: string;\n        subtitle?: string;\n        tipTitle?: string;\n        tipBody?: string;\n        nextLabel?: string;\n    };\n    progress?: number;\n    autosaveBadge?: string;\n}\n\nconst TravelWizardStepPublish: React.FC<TravelWizardStepPublishProps> = ({\n    currentStep,\n    totalSteps,\n    formData,\n    setFormData,\n    filters,\n    travelDataOld,\n    isSuperAdmin,\n    onManualSave,\n    onGoBack,\n    onFinish,\n    onNavigateToIssue,\n    stepMeta,\n    progress = currentStep / totalSteps,\n    autosaveBadge,\n}) => {\n    const router = useRouter();\n    const progressValue = Math.min(Math.max(progress, 0), 1);\n    const progressPercent = Math.round(progressValue * 100);\n    const [footerHeight, setFooterHeight] = useState(0);\n    const [status, setStatus] = useState<'draft' | 'moderation'>(\n        formData.moderation ? 'moderation' : 'draft',\n    );\n\n    const checklist = useMemo(() => {\n        const hasName = !!formData.name && formData.name.trim().length > 0;\n        const hasDescription = !!formData.description && formData.description.trim().length > 0;\n        const hasCountries = Array.isArray(formData.countries) && formData.countries.length > 0;\n        const hasCategories = Array.isArray((formData as any).categories) && ((formData as any).categories as any[]).length > 0;\n        const hasRoute = Array.isArray((formData as any).coordsMeTravel)\n            ? ((formData as any).coordsMeTravel as any[]).length > 0\n            : Array.isArray((formData as any).markers)\n                ? ((formData as any).markers as any[]).length > 0\n                : false;\n        const galleryArr = Array.isArray((formData as any).gallery)\n            ? ((formData as any).gallery as any[])\n            : [];\n        const hasCover = !!(formData as any).travel_image_thumb_small_url;\n        const hasPhotos = hasCover || galleryArr.length > 0;\n\n        return [\n            { key: 'name', label: '–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ (–Ω–µ –º–µ–Ω–µ–µ 3 —Å–∏–º–≤–æ–ª–æ–≤)', ok: hasName },\n            { key: 'description', label: '–û–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç –∏ —á–µ–≥–æ –æ–∂–∏–¥–∞—Ç—å (–Ω–µ –º–µ–Ω–µ–µ 50 —Å–∏–º–≤–æ–ª–æ–≤)', ok: hasDescription },\n            { key: 'countries', label: '–°—Ç—Ä–∞–Ω—ã –º–∞—Ä—à—Ä—É—Ç–∞ (–º–∏–Ω–∏–º—É–º –æ–¥–Ω–∞, –≤—ã–±–∏—Ä–∞—é—Ç—Å—è –Ω–∞ —à–∞–≥–µ ‚Äú–ú–∞—Ä—à—Ä—É—Ç‚Äù)', ok: hasCountries },\n            { key: 'categories', label: '–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞ (–º–∏–Ω–∏–º—É–º –æ–¥–Ω–∞, –≤—ã–±–∏—Ä–∞—é—Ç—Å—è –Ω–∞ —à–∞–≥–µ ‚Äú–î–æ–ø. –ø–∞—Ä–∞–º–µ—Ç—Ä—ã‚Äù)', ok: hasCategories },\n            { key: 'route', label: '–ú–∞—Ä—à—Ä—É—Ç –Ω–∞ –∫–∞—Ä—Ç–µ (–º–∏–Ω–∏–º—É–º –æ–¥–Ω–∞ —Ç–æ—á–∫–∞ –Ω–∞ —à–∞–≥–µ ‚Äú–ú–∞—Ä—à—Ä—É—Ç‚Äù)', ok: hasRoute },\n            { key: 'photos', label: '–§–æ—Ç–æ –∏–ª–∏ –æ–±–ª–æ–∂–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –±–µ–∑ –∫–æ–ª–ª–∞–∂–µ–π)', ok: hasPhotos },\n        ];\n    }, [formData]);\n\n    const moderationIssues = useMemo(() => {\n        return getModerationIssues({\n            name: formData.name ?? '',\n            description: formData.description ?? '',\n            countries: formData.countries ?? [],\n            categories: (formData as any).categories ?? [],\n            coordsMeTravel: (formData as any).coordsMeTravel ?? (formData as any).markers ?? [],\n            gallery: (formData as any).gallery ?? [],\n            travel_image_thumb_small_url: (formData as any).travel_image_thumb_small_url ?? null,\n        } as any);\n    }, [formData]);\n\n    const moderationIssuesByKey = useMemo(() => {\n        const map = new Map<string, ModerationIssue>();\n        moderationIssues.forEach(issue => map.set(issue.key, issue));\n        return map;\n    }, [moderationIssues]);\n\n    const [missingForModeration, setMissingForModeration] = useState<ModerationIssue[]>([]);\n    const isNew = !formData.id;\n\n    const handleFooterLayout = useCallback((event: LayoutChangeEvent) => {\n        const next = Math.ceil(event.nativeEvent.layout.height);\n        setFooterHeight(prev => (prev === next ? prev : next));\n    }, []);\n\n    const contentPaddingBottom = useMemo(() => {\n        return footerHeight > 0 ? footerHeight + 16 : 220;\n    }, [footerHeight]);\n\n    useEffect(() => {\n        trackWizardEvent('wizard_step_view', {\n            step: currentStep,\n        });\n    }, [currentStep]);\n\n    const handleSaveDraft = async () => {\n        setFormData({\n            ...formData,\n            publish: false,\n            moderation: false,\n        });\n        setMissingForModeration([]);\n        await onManualSave();\n\n        const hasName = !!formData.name && formData.name.trim().length > 0;\n        const hasDescription = !!formData.description && formData.description.trim().length > 0;\n        const hasCountries = Array.isArray(formData.countries) && formData.countries.length > 0;\n        const hasRoute = Array.isArray((formData as any).coordsMeTravel)\n            ? ((formData as any).coordsMeTravel as any[]).length > 0\n            : Array.isArray((formData as any).markers)\n                ? ((formData as any).markers as any[]).length > 0\n                : false;\n        const galleryArr = Array.isArray((formData as any).gallery)\n            ? ((formData as any).gallery as any[])\n            : [];\n        const hasCover = !!(formData as any).travel_image_thumb_small_url;\n        const hasPhotos = hasCover || galleryArr.length > 0;\n\n        await trackWizardEvent('wizard_draft_saved', {\n            travel_id: formData.id ?? null,\n            step: currentStep,\n            fields_filled: {\n                name: hasName,\n                description: hasDescription,\n                countries: hasCountries,\n                markers: hasRoute,\n                photos: hasPhotos,\n            },\n        });\n\n        // –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º —à–∞–≥–µ –ª–æ–≥–∏—á–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –º–∞—Å—Ç–µ—Ä–∞\n        // –≤ —Ä–∞–∑–¥–µ–ª \"–ú–æ–∏ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è\", –≥–¥–µ –æ–Ω —É–≤–∏–¥–∏—Ç —á–µ—Ä–Ω–æ–≤–∏–∫.\n        router.replace('/metravel');\n    };\n\n    const handleSendToModeration = async () => {\n        const criticalMissing = getModerationIssues({\n            name: formData.name ?? '',\n            description: formData.description ?? '',\n            countries: formData.countries ?? [],\n            categories: (formData as any).categories ?? [],\n            coordsMeTravel: (formData as any).coordsMeTravel ?? (formData as any).markers ?? [],\n            gallery: (formData as any).gallery ?? [],\n            travel_image_thumb_small_url: (formData as any).travel_image_thumb_small_url ?? null,\n        } as any);\n        const missingLabels = criticalMissing.map(i => i.label);\n\n        await trackWizardEvent('wizard_moderation_attempt', {\n            missing_fields: missingLabels,\n            is_new: isNew,\n            is_edit: !isNew,\n            travel_id: formData.id ?? null,\n        });\n\n        if (criticalMissing.length > 0) {\n            setMissingForModeration(criticalMissing);\n            return;\n        }\n\n        setMissingForModeration([]);\n        setFormData({\n            ...formData,\n            moderation: true,\n        });\n\n        await trackWizardEvent('wizard_moderation_success', {\n            travel_id: formData.id ?? null,\n            filled_checklist_count: checklist.filter(item => item.ok).length,\n            total_checklist_count: checklist.length,\n        });\n\n        Toast.show({\n            type: 'success',\n            text1: '–ú–∞—Ä—à—Ä—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é',\n            text2: '–ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è –æ–Ω –ø–æ—è–≤–∏—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ ‚Äú–ú–æ–∏ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è‚Äù.',\n        });\n\n        await onFinish();\n        router.push('/metravel');\n    };\n\n    const handlePrimaryAction = () => {\n        if (status === 'draft') {\n            handleSaveDraft();\n        } else {\n            handleSendToModeration();\n        }\n    };\n\n    return (\n        <SafeAreaView style={styles.safeContainer}>\n            <KeyboardAvoidingView\n                style={styles.keyboardAvoid}\n                behavior={Platform.OS === 'ios' ? 'padding' : undefined}\n                keyboardVerticalOffset={0}\n            >\n                <TravelWizardHeader\n                    canGoBack={true}\n                    onBack={onGoBack}\n                    title={stepMeta?.title ?? '–ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è'}\n                    subtitle={stepMeta?.subtitle ?? `–®–∞–≥ ${currentStep} –∏–∑ ${totalSteps}`}\n                    progressPercent={progressPercent}\n                    autosaveBadge={autosaveBadge}\n                    tipTitle={stepMeta?.tipTitle}\n                    tipBody={stepMeta?.tipBody}\n                />\n                <ScrollView\n                    style={styles.content}\n                    contentContainerStyle={[styles.contentContainer, { paddingBottom: contentPaddingBottom }]}\n                    keyboardShouldPersistTaps=\"handled\"\n                >\n                    <View style={styles.contentInner}>\n                    <FiltersUpsertComponent\n                        filters={filters}\n                        formData={formData}\n                        setFormData={setFormData}\n                        travelDataOld={travelDataOld}\n                        isSuperAdmin={isSuperAdmin}\n                        onSave={onManualSave}\n                        showSaveButton={true}\n                        showPreviewButton={true}\n                        showPublishControls={false}\n                        showCountries={false}\n                        showCoverImage={false}\n                        showCategories={false}\n                        showAdditionalFields={false}\n                    />\n\n                    <View style={[styles.card, styles.statusCard]}>\n                        <Text style={styles.cardTitle}>–°—Ç–∞—Ç—É—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</Text>\n                        <View style={styles.statusOptions}>\n                            <TouchableOpacity\n                                style={[styles.statusOption, status === 'draft' && styles.statusOptionActive]}\n                                onPress={() => setStatus('draft')}\n                                activeOpacity={0.85}\n                            >\n                                <View style={styles.radioOuter}>\n                                    {status === 'draft' && <View style={styles.radioInner} />}\n                                </View>\n                                <View style={styles.statusTextCol}>\n                                    <Text style={styles.statusLabel}>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ —á–µ—Ä–Ω–æ–≤–∏–∫</Text>\n                                    <Text style={styles.statusHint}>\n                                        –ß–µ—Ä–Ω–æ–≤–∏–∫ –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –≤–∞–º. –ï–≥–æ –º–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω—è—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é –ø–æ–∑–∂–µ.\n                                    </Text>\n                                </View>\n                            </TouchableOpacity>\n\n                            <View style={styles.divider} />\n\n                            <TouchableOpacity\n                                style={[styles.statusOption, status === 'moderation' && styles.statusOptionActive]}\n                                onPress={() => setStatus('moderation')}\n                                activeOpacity={0.85}\n                            >\n                                <View style={styles.radioOuter}>\n                                    {status === 'moderation' && <View style={styles.radioInner} />}\n                                </View>\n                                <View style={styles.statusTextCol}>\n                                    <Text style={styles.statusLabel}>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é</Text>\n                                    <Text style={styles.statusHint}>\n                                        –ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç —Å—Ç–∞–Ω–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–º –∏ –ø–æ—è–≤–∏—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π.\n                                    </Text>\n                                </View>\n                            </TouchableOpacity>\n                        </View>\n                    </View>\n\n                    <View style={[styles.card, styles.checklistCard]}>\n                        <Text style={styles.cardTitle}>–ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏</Text>\n                    {checklist.map(item => {\n                        const issue = moderationIssuesByKey.get(item.key);\n                        const isClickable = !item.ok && !!issue && !!onNavigateToIssue;\n\n                        const RowWrapper: any = isClickable ? TouchableOpacity : View;\n                        return (\n                            <RowWrapper\n                                key={item.key}\n                                style={[styles.checklistRow, isClickable && styles.checklistRowClickable]}\n                                onPress={\n                                    isClickable\n                                        ? () => onNavigateToIssue?.(issue)\n                                        : undefined\n                                }\n                                disabled={!isClickable}\n                            >\n                                <View\n                                    style={[\n                                        styles.checkBadge,\n                                        item.ok ? styles.checkBadgeOk : styles.checkBadgeMissing,\n                                    ]}\n                                >\n                                    <Icon\n                                        source={item.ok ? 'check' : 'alert'}\n                                        size={14}\n                                        color={item.ok ? DESIGN_TOKENS.colors.successDark : DESIGN_TOKENS.colors.dangerDark}\n                                    />\n                                </View>\n                                <Text\n                                    style={[\n                                        styles.checklistLabel,\n                                        isClickable && styles.checklistLabelClickable,\n                                    ]}\n                                >\n                                    {item.label}\n                                </Text>\n                            </RowWrapper>\n                        );\n                    })}\n                    </View>\n\n                    {status === 'moderation' && missingForModeration.length > 0 && (\n                        <View style={[styles.card, styles.bannerError]}>\n                            <Text style={styles.bannerTitle}>–ù—É–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–¥ –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π</Text>\n                            <Text style={styles.bannerDescription}>\n                                –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ –ø—É–Ω–∫—Ç—ã —á–µ–∫-–ª–∏—Å—Ç–∞. –ë–µ–∑ –Ω–∏—Ö –º—ã –Ω–µ —Å–º–æ–∂–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é.\n                            </Text>\n                            {missingForModeration.map(issue => {\n                                const isClickable = !!onNavigateToIssue;\n                                const RowWrapper: any = isClickable ? TouchableOpacity : View;\n                                return (\n                                    <RowWrapper\n                                        key={issue.key}\n                                        style={[styles.checklistRow, isClickable && styles.checklistRowClickable]}\n                                        onPress={isClickable ? () => onNavigateToIssue?.(issue) : undefined}\n                                        disabled={!isClickable}\n                                        activeOpacity={0.85}\n                                    >\n                                        <View style={[styles.checkBadge, styles.checkBadgeMissing]}>\n                                            <Icon\n                                                source={'alert'}\n                                                size={14}\n                                                color={DESIGN_TOKENS.colors.dangerDark}\n                                            />\n                                        </View>\n                                        <Text style={[styles.checklistLabel, isClickable && styles.checklistLabelClickable]}>\n                                            {issue.label}\n                                        </Text>\n                                    </RowWrapper>\n                                );\n                            })}\n                        </View>\n                    )}\n                    </View>\n                </ScrollView>\n                <TravelWizardFooter\n                    canGoBack={false}\n                    onPrimary={handlePrimaryAction}\n                    primaryLabel={status === 'draft' ? '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫' : '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é'}\n                    onSave={status === 'moderation' ? handleSaveDraft : undefined}\n                    saveLabel=\"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ —á–µ—Ä–Ω–æ–≤–∏–∫\"\n                    onLayout={handleFooterLayout}\n                />\n            </KeyboardAvoidingView>\n        </SafeAreaView>\n    );\n};\n\nconst styles = StyleSheet.create({\n    safeContainer: { flex: 1, backgroundColor: DESIGN_TOKENS.colors.background },\n    keyboardAvoid: { flex: 1 },\n    content: {\n        flex: 1,\n        paddingHorizontal: 8,\n    },\n    contentContainer: {\n        paddingBottom: 0,\n        paddingTop: DESIGN_TOKENS.spacing.sm,\n        alignItems: 'center',\n    },\n    contentInner: {\n        width: '100%',\n        maxWidth: 980,\n    },\n    card: {\n        marginTop: DESIGN_TOKENS.spacing.lg,\n        padding: DESIGN_TOKENS.spacing.lg,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        borderRadius: DESIGN_TOKENS.radii.md,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.border,\n        ...(Platform.OS === 'web'\n            ? ({ boxShadow: DESIGN_TOKENS.shadows.card } as any)\n            : (DESIGN_TOKENS.shadowsNative.light as any)),\n    },\n    cardTitle: {\n        fontSize: DESIGN_TOKENS.typography.sizes.md,\n        fontWeight: '700',\n        color: DESIGN_TOKENS.colors.text,\n        marginBottom: DESIGN_TOKENS.spacing.sm,\n    },\n    statusCard: {},\n    statusOptions: {\n        gap: DESIGN_TOKENS.spacing.sm,\n    },\n    statusOption: {\n        flexDirection: 'row',\n        alignItems: 'flex-start',\n        paddingVertical: 10,\n        paddingHorizontal: 10,\n        borderRadius: DESIGN_TOKENS.radii.md,\n    },\n    statusOptionActive: {\n        backgroundColor: DESIGN_TOKENS.colors.primarySoft,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.borderAccent,\n    },\n    statusTextCol: {\n        flex: 1,\n        minWidth: 0,\n    },\n    divider: {\n        height: 1,\n        backgroundColor: DESIGN_TOKENS.colors.border,\n        opacity: 0.8,\n    },\n    radioOuter: {\n        width: 18,\n        height: 18,\n        borderRadius: 9,\n        borderWidth: 2,\n        borderColor: DESIGN_TOKENS.colors.primary,\n        alignItems: 'center',\n        justifyContent: 'center',\n        marginRight: 8,\n        marginTop: DESIGN_TOKENS.spacing.xxs,\n    },\n    radioInner: {\n        width: 10,\n        height: 10,\n        borderRadius: 5,\n        backgroundColor: DESIGN_TOKENS.colors.primary,\n    },\n    statusLabel: {\n        fontSize: DESIGN_TOKENS.typography.sizes.sm,\n        fontWeight: '600',\n        color: DESIGN_TOKENS.colors.text,\n    },\n    statusHint: {\n        fontSize: DESIGN_TOKENS.typography.sizes.xs,\n        color: DESIGN_TOKENS.colors.textMuted,\n        marginTop: DESIGN_TOKENS.spacing.xxs,\n        lineHeight: 16,\n    },\n    checklistCard: {},\n    checklistRow: {\n        flexDirection: 'row',\n        alignItems: 'flex-start',\n        paddingVertical: 8,\n    },\n    checklistRowClickable: {\n        borderRadius: DESIGN_TOKENS.radii.md,\n        paddingHorizontal: 8,\n    },\n    checkBadge: {\n        width: 20,\n        height: 20,\n        borderRadius: 10,\n        alignItems: 'center',\n        justifyContent: 'center',\n        marginRight: 10,\n        marginTop: 1,\n        borderWidth: 1,\n    },\n    checkBadgeOk: {\n        backgroundColor: DESIGN_TOKENS.colors.successSoft,\n        borderColor: DESIGN_TOKENS.colors.successLight,\n    },\n    checkBadgeMissing: {\n        backgroundColor: DESIGN_TOKENS.colors.errorSoft,\n        borderColor: DESIGN_TOKENS.colors.dangerLight,\n    },\n    checklistLabel: {\n        fontSize: DESIGN_TOKENS.typography.sizes.sm,\n        color: DESIGN_TOKENS.colors.text,\n        flex: 1,\n        lineHeight: 18,\n    },\n    checklistLabelClickable: {\n        textDecorationLine: 'underline',\n    },\n    bannerError: {\n        backgroundColor: DESIGN_TOKENS.colors.errorSoft,\n        borderColor: DESIGN_TOKENS.colors.dangerLight,\n    },\n    bannerTitle: {\n        fontSize: DESIGN_TOKENS.typography.sizes.sm,\n        fontWeight: '600',\n        color: DESIGN_TOKENS.colors.dangerDark,\n        marginBottom: 4,\n    },\n    bannerDescription: {\n        fontSize: DESIGN_TOKENS.typography.sizes.sm,\n        color: DESIGN_TOKENS.colors.dangerDark,\n        marginBottom: DESIGN_TOKENS.spacing.xs,\n    },\n});\n\nexport default React.memo(TravelWizardStepPublish);\n"],"x_facebook_sources":[[{"names":["<global>","UpsertTravel","useMemo$argument_0","useEffect$argument_0","setTimeout$argument_0","handleNavigateToIssue","handleAnchorHandled","showToast","handleSaveSuccess","handleSaveError","useImprovedAutoSave$argument_2.onSave","applySavedData","loadTravelData","<anonymous>","handleManualSave","handleFinishWizard","handleCountrySelect","handleCountryDeselect","formState.data.countries.filter$argument_0","setFormData","handleNextFromBasic","result.errors.map$argument_0","Button.props.onPress","STEP_CONFIG.find$argument_0","step1SubmitErrors.map$argument_0","handleMarkersUpdate","TravelWizardStepRoute.props.onBack","TravelWizardStepRoute.props.onNext","TravelWizardStepMedia.props.onBack","TravelWizardStepMedia.props.onNext","TravelWizardStepDetails.props.onBack","TravelWizardStepDetails.props.onNext","TravelWizardStepExtras.props.onBack","TravelWizardStepExtras.props.onNext","TravelWizardStepPublish.props.onGoBack","initFilters","getEmptyFormData","syncCountriesFromMarkers","map$argument_0","map.filter$argument_0","transformTravelToFormData","cleanEmptyFields","Object.entries.map$argument_0","normalizeTravelId"],"mappings":"AAA;eCqF;gCCQ,oCD;6BCC,+CD;oCCiB,iDD;cEW;KFE;cEE;mBCe;SDO;KFC;8CIE;KJG;4CKE;KLG;kCMG;KNK;0COG;KPM;wCQE;KRG;oBSQ;aTM;uCUO;KVS;uCWG;KXwD;cEE;SUE;SVe;eUQ;SVE;KFC;yCaE;KbmB;2CcE;KdE;cEG;KFI;4CeE;KfI;8CgBE;2ECC,sBD;KhBC;0FkBI;KlBO;4CmBE;8CCM,+BD;KnBiB;iCqB0B,uDrB;iCqBO,8DrB;sCsBU,iCtB;2BYK;KZW;2CYG;SZM;kDuBc,cvB;oCwBc;yDrBU;aqBE;SxBC;wByBc;iBzBM;wB0BC;iB1BQ;wB2BqB;iB3BM;wB4BC;iB5BQ;wB6BkB;iB7BM;wB8BC;iB9BQ;wB+BmB;iB/BM;wBgCC;iBhCQ;sBiCoB,uBjC;CDQ;AmCoD;CnCW;AoCE;CpCqC;AqCG;qBCI,mDD;wBEC,0BF;CrCM;AwCE;kDFgB,cE;CxCE;AyCE;gCCE;SDI;CzCE;A2CE;C3CU"}],[{"names":["<global>","validateName","validateStep","getModerationErrors","getModerationIssues.map$argument_0","getModerationIssues","validateDescription","validateCountries","validateCategories","validateMarkers","validateYear","validateDays","validatePeople","validateYouTubeLink","validateTravelForm","getFieldError","errors.find$argument_0"],"mappings":"AAA;OCsD;CDoB;OEU;CFsB;OGa;oDCI,cD;CHC;OKE;CLwE;OMK;CNc;OOK;CPQ;OQK;CRQ;OSK;CTQ;OUK;CVmB;OWK;CXkB;OYK;CZkB;OaK;CbY;OcK;CdkC;OeK;4BCC,sBD;CfE"}],[{"names":["<global>","generateClientId","sendAnalyticsEvent","trackWizardEvent"],"mappings":"AAA;yBCG,wDD;kCEE;CFmC;gCGE;CHK"}],[{"names":["<global>","useOptimizedFormState","useEffect$argument_0","<anonymous>","updateField","setState$argument_0","setTimeout$argument_0","updateFields","Object.keys.forEach$argument_0","validateField","validateAll","save","reset","clearErrors","setFieldError","getFieldError","isTouched","hasError"],"mappings":"AAA;OCsB;YC+B;WCC;KDI;GDC;kCGG;aCI;KDU;gDEQ;OFI;GHE;mCMG;aFC;mCGK,0BH;KEQ;GNC;oCQG;aJG;MIG;GRC;kCSE;aLE;MKI;GTC;YCG;oCIS;iBDI,yCC;mBDK;YCI;mBDK,0CC;KJI;WCE;KDI;GDC;2BUG;aNK,yCM;iBNO;UMI;iBNO,0CM;GVK;4BWG;GXW;kCYG;aRC,gDQ;GZC;oCaG;aTC;MSI;GbC;mBcsB,4Cd;eeC,2Cf;cgBC,wChB;CDE"}],[{"names":["<global>","useImprovedAutoSave","cleanup","useEffect$argument_0","handleOnline","setState$argument_0","handleOffline","<anonymous>","hasDataChanged","performSave","setTimeout$argument_0","performSave._catch$argument_0","saveNow","resetToOriginal","clearError","retrySave","updateBaseline"],"mappings":"AAA;OCwB;8BCiC;GDa;YEG;yBCC;eCE,qCD;KDC;0BGC;eDE,sCC;KHC;WIO;KJK;GFC;YEG;WIC;KJG;GFC;yBOG;GPE;kCQG;eJK;QII;eJa;QIM;iBJiB;UII;6CCG;4DCE;aDE;SDE;eJM;QIK;GRK;YEK;aE0B;KFS;oCOE;iCCmB;ODE;KPC;WIE;KJK;GFC;8BWG;GXO;sCYG;GZU;iCaG;aTC,kDS;GbC;gCcG;GdK;qCeG;GfM;CD0B"}],[{"names":["<global>","TravelWizardStepBasic","handleFooterLayout","setFooterHeight$argument_0","useMemo$argument_0","stepErrors.map$argument_0"],"mappings":"AAA;oEC2C;2CCwB;wBCE,qCD;KDC;yCGE;KHE;wCImB;yBJI;CDuC"}],[{"names":["<global>","ContentUpsertSection","useMemo$argument_0","useEffect$argument_0","handleChange","setFormData$argument_0","setTouchedFields$argument_0","getError","requiredFields.filter$argument_0","renderEditorSection","handleLayout","setFieldPositions$argument_0","TouchableOpacity.props.onPress","Modal.props.onRequestClose","<anonymous>","View.props.onLayout","TextInputComponent.props.onChange","renderEditorSection$argument_2"],"mappings":"AAA;kECoB;6BCiB;KDI;cEE;KFY;2CCW;KDQ;yCCE;KDO;0CCE;KDW;QGG;wBCC,oCD;6BEE,yCF;SHC;iCMK;KNG;iCCE;mDME;SNI;KDE;QCG,8DD;QQK;iCCU;kCCG,+BD;aDC;yCGoB,sCH;gDImB,uCJ;qDGK,uCH;qDGO,uCH;SRyD;cEI;KFK;cEE;qBWG;SXI;KFiB;kCc2B;8CJE,8BI;yBdC;sCeK,oCf;kCcW;8CJE,qCI;yBdC;4BgBK,uChB;gEgBQ,gChB;kEgBG,iChB;iFgBG,0ChB;CDI"}],[{"names":["<global>","TextInputComponent"],"mappings":"AAA;8DCoB;CD8D"}],[{"names":["<global>","useDebounce","<anonymous>","setTimeout$argument_0","sanitizeHtml","React.lazy$argument_0","WebEditor","useEffect$argument_0","fireChange","insertImage","uploadAndInsert","onDrop","onPaste","IconButton","Toolbar","IconButton.props.onPress","setShowHtml$argument_0","setFullscreen$argument_0","input.onchange","Loader","TextInput.props.onChangeText","QuillEditor.props.onChange","NativeEditor","onEdit","forwardRef$argument_0"],"mappings":"AAA;AC2B;uBCI;qCCE,4BD;KDC;CDC;AIE;CJU;sBKK,gEL;gDMiD;cCmB;KDI;cCI;KDE;cCE;eLiB,+CK;KDC;cCE;6BJE,sBI;eLC,qBK;KDC;mCEE;KFI;oCGE;KHO;wCIE;KJgB;cCE;uBIG;SJI;wBKC;SLG;eLG;SKG;KDC;kCOE;KPe;oBQE;6BCM,kDD;6BCK,kDD;6BCK;oCCE,OD;qBDC;6BCK;sCEE,OF;qBDC;6BCK;qBDM;6BCK;yCGK;yBHG;qBDE;KRK;cCE;KDI;mBaE;KbI;0BcW,wBd;0BeU,gCf;CNsB;mDsBE;cfW;KeE;cfE;6BJE,sBI;eLC,qBK;KeC;mBCE;KDG;CtBgB;0DwBE;CxBE"}],[{"names":["<global>","TravelWizardHeader","useMemo$argument_0","Pressable.props.onPress","setIsTipOpen$argument_0"],"mappings":"AAA;8DCkB;qCCiB,yBD;yBEK,mBC,OD,CF;yBEa,mBC,OD,CF;CDkF"}],[{"names":["<global>","TravelWizardFooter"],"mappings":"AAA;8DCiB;CD8F"}],[{"names":["<global>","React.lazy$argument_0","TravelWizardStepRoute","handleFooterLayout","setFooterHeight$argument_0","useMemo$argument_0","useEffect$argument_0","setTimeout$argument_0","UIManager.measureLayout$argument_2","UIManager.measureLayout$argument_3","parseCoordsPair","normalized.split.map$argument_0","handleMarkersChange","dismissCoachmark","reverseGeocode","handleAddManualPoint","find$argument_0","handleCountriesFilterChange","next.filter$argument_0","prev.filter$argument_0","filter$argument_0","handleNext","handleScrollToMarkers","Button.props.onPress","setIsManualPointVisible$argument_0","TextInput.props.onChangeText"],"mappings":"AAA;iBCY,mDD;oEEmC;2CC0B;wBCE,qCD;KDC;yCGE;KHE;uCGS,mCH;cIS;mBCyB;gBCI,yBD;gBEC;iBFG;SDE;KJC;4BQE;iBCU,aD;KRa;cIE;KJiB;gCUE;KVE;6BWE;KXQ;2BYE;KZK;iCaE;4DCiB,uCD;uBRsB,sCQ;KbQ;wCeE;kCCI,wBD;oCEC,wBF;0DGM;aHI;KfQ;uBmBE;KnBE;kCoBE;KpBK;6CqBuD,8BC,OD,CrB;0DuBa;6CvBO;qEqBiC,oCrB;CF0E"}],[{"names":["<global>","React.lazy$argument_0","TravelWizardStepMedia","handleFooterLayout","setFooterHeight$argument_0","useMemo$argument_0","useEffect$argument_0","setTimeout$argument_0","UIManager.measureLayout$argument_2","UIManager.measureLayout$argument_3","handleYoutubeChange"],"mappings":"AAA;iBCY,kDD;oEE6B;2CCmB;wBCE,qCD;KDC;yCGE;KHE;cIK;mBCuB;gBCI,yBD;gBEC;iBFG;SDE;KJC;gCQE;KRE;CF4F"}],[{"names":["<global>","YoutubeLinkComponent","useEffect$argument_0","handleChange","validateLink","setTimeout$argument_0","<anonymous>","handleBlur"],"mappings":"AAA;kECc;cCU;KDG;yBEE;KFM;yBGE;KHO;cCE;mCGM;SHE;eIE,2BJ;KDC;uBME;KNE;CDqC"}],[{"names":["<global>","TravelWizardStepDetails","handleFooterLayout","setFooterHeight$argument_0","useMemo$argument_0","handleChange","setFormData$argument_0","keys.forEach$argument_0","ArticleEditor.props.onChange","TextInputComponent.props.onChange","CheckboxComponent.props.onChange"],"mappings":"AAA;wEC+B;2CCgB;wBCE,qCD;KDC;yCGE;KHE;QGG,8DH;yBII;oBCC,oCD;KJC;+CGE;qBGG;SHW;KHE;0CO+C,uCP;0COY,wCP;0COY,iDP;0CQU,6CR;0CSS,2CT;CDiB"}],[{"names":["<global>","CheckboxComponent"],"mappings":"AAA;4DCS;CDc"}],[{"names":["<global>","TravelWizardStepExtras","handleFooterLayout","setFooterHeight$argument_0","useMemo$argument_0","useEffect$argument_0","setTimeout$argument_0","UIManager.measureLayout$argument_2","UIManager.measureLayout$argument_3"],"mappings":"AAA;sECkC;2CCqB;wBCE,qCD;KDC;yCGE;KHE;cIK;mBCuB;gBCI,yBD;gBEC;iBFG;SDE;KJC;CDwD"}],[{"names":["<global>","FiltersUpsertComponent","useEffect$argument_0","handleResetFilters","openPreview","Linking.openURL._catch$argument_0","TouchableOpacity.props.onPress","CheckboxComponent.props.onChange","MultiSelectFieldAny.props.onChange","renderNumericInput","TextInput.props.onChangeText"],"mappings":"AAA;gEC2C;cC2B;KDO;+BEE;KFmB;wBGE;+DCM,QD;KHE;2CKU,eL;kCMqC,wDN;sCMO,0DN;8BO4B,2DP;kCOY,6DP;kCOa,6DP;kCOS,6DP;kCOS,6DP;kCOS,yEP;kCOS,mDP;kCMS,4CN;IQW;kCCQ;qBDI;KRO;CDC"}],[{"names":["<global>","TravelWizardStepPublish","useMemo$argument_0","moderationIssues.forEach$argument_0","handleFooterLayout","setFooterHeight$argument_0","useEffect$argument_0","handleSaveDraft","handleSendToModeration","criticalMissing.map$argument_0","checklist.filter$argument_0","handlePrimaryAction","TouchableOpacity.props.onPress","checklist.map$argument_0","<anonymous>","missingForModeration.map$argument_0"],"mappings":"AAA;wECsC;8BCwB;KDwB;qCCE;KDU;0CCE;iCCE,kCD;KDE;2CGK;wBCE,qCD;KHC;yCCE;KDE;cKE;KLI;4BME;KNsC;mCOE;kDCU,YD;qDEsB,eF;KPY;gCUE;KVM;yCW8C,wBX;yCWkB,6BX;mCYkB;0CCW,gCD;qBZ2B;sDcS;+DDO,gCC;6BdgB;CDgB"}]],"names":["router","useRouter","id","useLocalSearchParams","userId","isAuthenticated","isSuperuser","useAuth","isSuperAdmin","isNew","windowWidth","useMemo","Dimensions","get","width","isMobile","METRICS","breakpoints","tablet","currentStep","setCurrentStep","useState","markers","setMarkers","travelDataOld","setTravelDataOld","markersUpdateTimeoutRef","useRef","filters","setFilters","isInitialLoading","setIsInitialLoading","hasAccess","setHasAccess","step1SubmitErrors","setStep1SubmitErrors","pendingIssueNavRef","focusAnchorId","setFocusAnchorId","initialFormData","getEmptyFormData","String","formDataRef","formState","useOptimizedFormState","debounce","validateOnChange","validationDebounce","useEffect","current","data","pending","step","anchorId","document","setTimeout","el","getElementById","scrollIntoView","behavior","block","handleNavigateToIssue","useCallback","issue","targetStep","handleAnchorHandled","showToast","message","type","Toast","show","text1","handleSaveSuccess","savedData","replace","handleSaveError","error","console","autosave","useImprovedAutoSave","onSave","async","cleanedData","obj","normalizeTravelId","Object","fromEntries","entries","map","key","value","saveFormData","onSuccess","onError","applySavedData","markersFromData","coordsMeTravel","syncedCountries","syncCountriesFromMarkers","countries","updateFields","loadTravelData","travelData","fetchTravel","Number","travelId","travelUserId","userIds","user","toString","currentUserIdStr","text2","transformed","transformTravelToFormData","finalData","updateBaseline","isMounted","filtersData","countryData","Promise","all","fetchFilters","fetchAllCountries","categories","companions","complexity","month","over_nights_stay","transports","categoryTravelAddress","handleManualSave","trackWizardEvent","is_new","is_edit","status","moderation","saveNow","handleFinishWizard","handleCountrySelect","countryId","includes","updateField","handleCountryDeselect","filter","setFormData","updater","next","handleNextFromBasic","result","validateStep","name","hadErrors","isValid","errorFields","errors","e","field","step_from","step_to","had_errors","error_fields","_jsxRuntime","jsx","_reactNativeSafeAreaContext","SafeAreaView","style","styles","safeContainer","children","jsxs","_View","default","loadingContainer","loadingSkeletonHeader","loadingSkeletonSubheader","loadingSkeletonBlock","redirect","encodeURIComponent","justifyContent","_reactNativePaper","Button","mode","onPress","push","saveButtonMobile","filterButton","stepMeta","STEP_CONFIG","find","progressValue","selectedCountryIds","isFiltersLoading","autosaveBadge","lastSaved","toLocaleTimeString","hour","minute","firstErrorFieldForContent","_TravelWizardStepBasic","totalSteps","formData","onManualSave","snackbarVisible","snackbarMessage","onDismissSnackbar","clearError","onGoNext","stepErrors","firstErrorField","autosaveStatus","progress","onAnchorHandled","handleMarkersUpdate","updatedMarkers","clearTimeout","_TravelWizardStepRoute","onCountrySelect","onCountryDeselect","onBack","onNext","_TravelWizardStepMedia","_TravelWizardStepDetails","_TravelWizardStepExtras","_TravelWizardStepPublish","onGoBack","onFinish","onNavigateToIssue","_react","t","WeakMap","r","n","__esModule","o","i","f","__proto__","has","set","hasOwnProperty","call","defineProperty","getOwnPropertyDescriptor","_interopRequireWildcard","_r","d","_StyleSheet","_interopRequireDefault","_Dimensions","_expoRouter","_reactNativeToastMessage","_travelsApi","_misc","_AuthContext","_formValidation","_analytics","_useOptimizedFormState","_useImprovedAutoSave","_designSystem","_layout","title","subtitle","tipTitle","tipBody","nextLabel","StyleSheet","create","flex","backgroundColor","DESIGN_TOKENS","colors","background","mainWrapper","flexDirection","mainWrapperMobile","contentColumn","filtersColumn","borderLeftWidth","padding","spacing","md","borderColor","border","filtersScroll","maxHeight","mobileFiltersWrapper","primary","borderRadius","radii","pill","minWidth","alignItems","paddingHorizontal","lg","gap","height","marginBottom","cities","budget","year","number_peoples","number_days","minus","plus","recommendation","description","publish","visa","thumbs200ForCollectionArr","travelImageThumbUrlArr","travelImageAddress","gallery","youtube_link","countryIds","travelAddressIds","travelAddressCity","travelAddressCountry","travelAddressAdress","travelAddressCategory","categoriesIds","existingCountries","markerCountryIds","Array","from","Set","m","country","travel","yearStr","daysStr","peoplesStr","c","isFinite","trimmed","trim","parsed","validateName","length","getModerationIssues","missing","undefined","label","validateDescription","validateCountries","validateCategories","validateMarkers","isArray","travel_image_thumb_small_url","validateYear","yearNum","parseInt","currentYear","Date","getFullYear","isNaN","validateDays","days","daysNum","validatePeople","people","peopleStr","peopleNum","validateYouTubeLink","link","test","nameError","descriptionError","countriesError","categoriesError","markersError","yearError","daysError","peopleError","youtubeError","sendAnalyticsEvent","eventName","eventParams","warn","params","initialData","options","onStart","state","setState","touched","isDirty","isSubmitting","originalDataRef","timeoutRef","validationTimeoutRef","mountedRef","prevState","newData","_isEqual","add","validateField","updates","newTouched","keys","forEach","validateAll","prev","save","Error","reset","dataToReset","clearErrors","setFieldError","getFieldError","isTouched","hasError","_isEqual2","originalData","maxRetries","retryDelay","enableRetry","retryCount","isOnline","retryTimeoutRef","lastSavedDataRef","latestDataRef","isOnlineRef","abortControllerRef","cleanup","abort","handleOnline","handleOffline","window","addEventListener","removeEventListener","performSave","dataToSave","retryAttempt","AbortController","saveError","catch","Math","pow","isEqual","resetToOriginal","retrySave","newBaseline","hasUnsavedChanges","canSave","isSaving","timeSinceLastSave","now","getTime","_KeyboardAvoidingView","_ScrollView","_Text","_ContentUpsertSection","_TravelWizardHeader","_TravelWizardFooter","windowHeight","isMobileDefault","FILTERS_SCROLL_MAX_HEIGHT","TravelWizardStepBasic","min","max","progressPercent","round","footerHeight","setFooterHeight","handleFooterLayout","event","ceil","nativeEvent","layout","contentPaddingBottom","keyboardAvoid","keyboardVerticalOffset","errorSummaryContainer","err","idx","errorSummaryText","errorSummaryHelper","contentContainerStyle","contentContainer","paddingBottom","keyboardShouldPersistTaps","contentInner","visibleFields","showProgress","canGoBack","onPrimary","primaryLabel","onLayout","Snackbar","visible","onDismiss","paddingTop","sm","maxWidth","paddingVertical","errorSoft","borderTopWidth","borderBottomWidth","dangerLight","fontSize","typography","sizes","xs","color","dangerDark","marginTop","_e","React","memo","_SafeAreaView","_Modal","_TouchableOpacity","_TextInputComponent","_ArticleEditor","ContentUpsertSection","validationErrors","setValidationErrors","touchedFields","setTouchedFields","fieldPositions","setFieldPositions","scrollRef","isDescriptionFullscreen","setIsDescriptionFullscreen","validateTravelForm","descriptionPlainLength","raw","descriptionPlainText","descriptionStatusText","handleChange","getError","formProgress","requiredFields","filledFields","idTravelStr","renderEditorSection","content","onChange","required","hint","fieldKey","isDescription","sectionEditor","y","editorHeader","editorLabel","editorHint","Fragment","descriptionPreview","activeOpacity","descriptionPreviewText","numberOfLines","descriptionPreviewFooter","descriptionCounterText","descriptionEditChip","descriptionEditChipText","animationType","presentationStyle","onRequestClose","modalSafeArea","modalHeader","hitSlop","top","bottom","left","right","modalHeaderAction","modalHeaderTitle","modalBody","idTravel","variant","descriptionStatusRow","autosaveRow","autosaveText","autosaveSuccess","autosaveError","errorContainer","errorText","scrollTo","animated","safeArea","container","showsVerticalScrollIndicator","ref","progressSection","progressHeader","progressLabel","progressBarContainer","progressBar","section","nativeID","val","xxs","surface","fontWeight","text","borderWidth","minHeight","lineHeight","primarySoft","borderAccent","overflow","boxShadow","shadows","card","textMuted","marginRight","successDark","danger","_TextInput","palette","TextInputComponent","secureTextEntry","placeholder","multiline","disabled","labelRow","input","inputError","inputDisabled","inputMultiline","onChangeText","toLowerCase","placeholderTextColor","editable","outlineWidth","outlineColor","outlineStyle","outlineOffset","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","transition","light","focus","medium","opacity","mutedBackground","cursor","textAlignVertical","borderLeftColor","_Alert","_MaterialIcons","win","useDebounce","fn","ms","timeout","fnRef","args","sanitizeHtml","html","QuillEditor","lazy","paths","href","querySelector","createElement","rel","head","appendChild","quillModulesDefault","toolbar","header","list","history","delay","maxStack","userOnly","clipboard","matchVisual","quillModulesCompact","WebEditor","onAutosave","autosaveDelay","editorRef","setHtml","fullscreen","setFullscreen","showHtml","setShowHtml","quillRef","tmpStoredRange","debouncedParentChange","innerHTML","removeChild","fireChange","clean","insertImage","url","editor","getEditor","range","getSelection","index","getLength","insertEmbed","setSelection","root","uploadAndInsert","form","FormData","append","file","res","uploadImage","Alert","alert","onDrop","dataTransfer","files","preventDefault","onPaste","clipboardData","IconButton","btn","accessibilityRole","accessibilityLabel","size","Toolbar","bar","row","undo","redo","v","sel","removeFormat","accept","onchange","click","Loader","loadBox","loadTxt","modules","editorArea","Suspense","fallback","theme","body","fullWrap","wrap","ArticleEditor","forwardRef","props","marginVertical","borderBottomColor","marginLeft","_useWindowDimensions","_Pressable","_vectorIcons","TravelWizardHeader","extraBelowProgress","useWindowDimensions","mobile","clamped","isTipOpen","setIsTipOpen","hasTip","resolvedTipTitle","TipTrigger","tipIconButton","tipIconButtonActive","Feather","textSubtle","tipToggleButton","tipToggleButtonActive","tipToggleText","tipToggleTextActive","BackButton","backButton","backButtonText","headerWrapper","headerWrapperMobile","headerRow","headerRowMobile","titleColumn","headerTitle","headerTitleMobile","headerSubtitle","headerSubtitleMobile","headerRightRow","autosaveBadgeText","mobileMetaRow","progressBarTrack","progressBarFill","tipPanel","tipPanelTitle","tipPanelBody","borderLight","surfaceMuted","alignSelf","primaryDark","footer","zIndex","sticky","footerMobileNative","position","footerMobileWeb","footerButton","marginHorizontal","footerSaveButton","mobileRow","mobileColumn","mobileButton","mobileButtonFull","footerSaveButtonMobile","footerButtonPlaceholder","TravelWizardFooter","saveLabel","primaryDisabled","isNarrowMobile","useSafeAreaInsets","_MultiSelectField","WebMapComponent","MultiSelectFieldAny","MultiSelectField","MAP_COACHMARK_STORAGE_KEY","TravelWizardStepRoute","markersListAnchorRef","countriesAnchorRef","hasAtLeastOnePoint","isCoachmarkVisible","setIsCoachmarkVisible","isManualPointVisible","setIsManualPointVisible","manualCoords","setManualCoords","manualLat","setManualLat","manualLng","setManualLng","countriesSyncedVisible","setCountriesSyncedVisible","parseCoordsPair","normalized","parts","split","p","Boolean","lat","lng","latOk","lngOk","dismissed","localStorage","getItem","handleMarkersChange","updated","reverseGeocode","response","fetch","json","mapHeader","mapHeaderMobile","mapTitle","mapHint","mapCount","coachmark","coachmarkTitle","coachmarkBody","dismissCoachmark","setItem","compact","manualPointRow","manualPointRowMobile","manualPointCard","manualCoordsWrapper","manualPointLabel","manualPointInput","inputMode","manualPointInputsRow","manualPointInputWrapper","manualPointActionsRow","parsedFromPair","address","derivedCountryId","display_name","countryName","foundCountry","title_ru","country_id","newMarker","image","filtersRow","filtersRowMobile","filterItem","filtersSkeleton","filtersSkeletonLabel","filtersSkeletonInput","items","values","added","removed","removedSet","markerCountry","labelField","valueField","mapContainer","mapContainerMobile","lazyFallback","lazyFallbackText","onMarkersChange","countrylist","nativeMapPlaceholder","nativeMapTitle","nativeMapBody","handleNext","syncBadge","successSoft","successLight","syncBadgeText","headerActions","infoSoft","infoLight","infoDark","surfaceElevated","_YoutubeLinkComponent","_ImageUploadComponent","GallerySectionLazy","TravelWizardStepMedia","coverAnchorRef","sectionTitle","sectionHint","coverWrapper","collection","oldImage","infoText","invalidInput","YoutubeLinkComponent","inputValue","setInputValue","localError","setLocalError","validateLink","displayError","onBlur","handleBlur","_CheckboxComponent","TravelWizardStepDetails","recommendationFieldsFilled","filled","total","progressCardLabel","_Switch","CheckboxComponent","onValueChange","thumbColor","trackColor","false","true","_FiltersUpsertComponent","TravelWizardStepExtras","categoriesAnchorRef","showSaveButton","showPreviewButton","showPublishControls","showCountries","showCategories","showCoverImage","showAdditionalFields","_ActivityIndicator","loaderContainer","imageUploadWrapper","coverHint","textAlign","inputGroup","weights","semibold","resetButton","warning","closeIcon","closeButtonText","textInverse","saveButton","floatingIconButton","FiltersUpsertComponent","onClose","flexGrow","icon","slug","openPreview","open","renderNumericInput","digits","keyboardType","TravelWizardStepPublish","setStatus","checklist","hasName","hasDescription","hasCountries","hasCategories","hasRoute","galleryArr","ok","moderationIssues","moderationIssuesByKey","Map","missingForModeration","setMissingForModeration","handleSaveDraft","hasPhotos","travel_id","fields_filled","photos","handleSendToModeration","criticalMissing","missingLabels","missing_fields","filled_checklist_count","item","total_checklist_count","statusCard","cardTitle","statusOptions","statusOption","statusOptionActive","radioOuter","radioInner","statusTextCol","statusLabel","statusHint","divider","checklistCard","isClickable","RowWrapper","TouchableOpacity","View","checklistRow","checklistRowClickable","checkBadge","checkBadgeOk","checkBadgeMissing","Icon","source","checklistLabel","checklistLabelClickable","bannerError","bannerTitle","bannerDescription","handlePrimaryAction","textDecorationLine"],"mappings":"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","debugId":"60862d05-2c56-4ca5-b1cd-44012320be08"}