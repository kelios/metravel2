__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t(r(d[1])),l=t(r(d[2])),n=t(r(d[3])),s=t(r(d[4])),c=t(r(d[5])),f=t(r(d[6])),u=t(r(d[7])),y=r(d[8]),x=r(d[9]);const h=({formData:t})=>{const o='dark'===(0,f.default)();if(!t)return(0,x.jsxs)(l.default,{style:[T.galleryContainer,o&&T.darkBackground],children:[(0,x.jsx)(c.default,{size:"large",color:"#6aaaaa"}),(0,x.jsx)(s.default,{style:[T.loadingText,o&&T.darkText],children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445..."})]});if(!t.id)return(0,x.jsx)(l.default,{style:[T.galleryContainer,o&&T.darkBackground],children:(0,x.jsx)(s.default,{style:[T.infoText,o&&T.darkText],children:"\u0413\u0430\u043b\u0435\u0440\u0435\u044f \u0441\u0442\u0430\u043d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u043f\u043e\u0441\u043b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f."})});const n=Array.isArray(t.gallery)?t.gallery:[];return(0,x.jsx)(l.default,{style:[T.galleryContainer,o&&T.darkBackground],children:(0,x.jsx)(u.default,{collection:"gallery",idTravel:t.id,initialImages:n})})},T=n.default.create({galleryContainer:{marginTop:y.DESIGN_TOKENS.spacing.xxs0,padding:15,backgroundColor:'#fff',borderRadius:10,shadowColor:'#000',shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3,alignItems:'center'},darkBackground:{backgroundColor:'#222'},loadingText:{marginTop:y.DESIGN_TOKENS.spacing.sm,fontSize:y.DESIGN_TOKENS.typography.sizes.md,color:'#555',textAlign:'center'},infoText:{fontSize:y.DESIGN_TOKENS.typography.sizes.md,fontWeight:'500',color:'#666',textAlign:'center'},emptyText:{fontSize:y.DESIGN_TOKENS.typography.sizes.md,fontWeight:'500',color:'#888',textAlign:'center',marginBottom:8},darkText:{color:'#ddd'}});e.default=o.default.memo(h)},2493,[23,4,315,145,132,407,445,2494,1013,2]);
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var t=(function(e,t){if("function"==typeof WeakMap)var r=new WeakMap,o=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var n,l,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(n=t?o:r){if(n.has(e))return n.get(e);n.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((l=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(l.get||l.set)?n(i,t,l):i[t]=e[t]);return i})(e,t)})(_r(d[1])),r=e(_r(d[2])),o=e(_r(d[3])),n=e(_r(d[4])),l=e(_r(d[5])),i=e(_r(d[6])),s=(e(_r(d[7])),e(_r(d[8]))),c=e(_r(d[9])),u=_r(d[10]),f=e(_r(d[11])),p=_r(d[12]),h=_r(d[13]),y=_r(d[14]);const x=e=>{if(!e)return e;try{return new URL(e).toString()}catch{const t="http://192.168.50.36".replace(/\/api\/?$/,'');if(!t)return e;try{return new URL(e,t).toString()}catch{return e}}};_e.default=({collection:e,idTravel:n,initialImages:h,maxImages:S=10})=>{const[T,j]=(0,t.useState)([]),[I,E]=(0,t.useState)([]),[N,C]=(0,t.useState)(!1),[D,z]=(0,t.useState)(!0),[_,k]=(0,t.useState)(!1),[w,O]=(0,t.useState)(null),v='dark'===(0,s.default)();(0,t.useEffect)(()=>{h?.length&&(j(h.map(e=>({...e,url:x(e.url)}))),E(h.map(()=>!1))),z(!1)},[h]);const G=(0,t.useCallback)(async t=>{if(T.length+t.length>S)return;C(!0);const r=[...I],o=t.map(async(t,o)=>{const l=T.length+o;r[l]=!0,E([...r]);try{const r=new FormData;r.append('file',t),r.append('collection',e),r.append('id',n);const o=await(0,p.uploadImage)(r);o?.url&&j(e=>[...e,{id:o.id,url:x(String(o.url))}])}finally{r[l]=!1,E([...r])}});await Promise.all(o),C(!1)},[T,I,e,n,S]),{getRootProps:K,getInputProps:P,isDragActive:W}=(0,u.useDropzone)({accept:{'image/*':[]},multiple:!0,disabled:!1,onDrop:e=>G(e)}),B=(0,t.useCallback)(()=>{const e=K(),{tabIndex:t,...r}=e;return{rootProps:r,tabIndex:t}},[K]);return(0,y.jsxs)(r.default,{style:[b.container,v&&b.darkContainer],children:[(0,y.jsxs)(r.default,{style:b.headerContainer,children:[(0,y.jsx)(o.default,{style:[b.galleryTitle,v&&b.darkText],children:"\ud83d\udcf7 \u0413\u0430\u043b\u0435\u0440\u0435\u044f"}),(0,y.jsxs)(o.default,{style:[b.imageCount,v&&b.darkText],children:["\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043e ",(0,y.jsx)(o.default,{style:b.highlight,children:T.length})," \u0438\u0437 ",S]})]}),(()=>{const{rootProps:e,tabIndex:t}=B();return(0,y.jsxs)(r.default,{...e,tabIndex:t,style:[b.dropzone,W&&b.activeDropzone,v&&b.darkDropzone],children:[(0,y.jsx)("input",{...P()}),(0,y.jsx)(o.default,{style:[b.dropzoneText,v&&b.darkText],children:W?'\u041e\u0442\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u0444\u0430\u0439\u043b\u044b...':'\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f'})]})})(),D?(0,y.jsx)(i.default,{size:"large",color:"#4b7c6f",style:b.loader}):T.length>0?(0,y.jsx)(r.default,{style:b.galleryGrid,children:T.map((e,t)=>(0,y.jsx)(r.default,{style:b.imageWrapper,children:I[t]?(0,y.jsx)(i.default,{size:"large",color:"#ffffff"}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c.default,{source:{uri:e.url},style:b.image,contentFit:"cover",loading:"lazy",alt:`Gallery image ${t+1}`}),(0,y.jsx)(l.default,{onPress:()=>{return t=e.id,O(t),void k(!0);var t},style:b.deleteButton,children:(0,y.jsx)(o.default,{style:b.deleteButtonText,children:"\u2716"})})]})},e.id))}):(0,y.jsx)(o.default,{style:[b.noImagesText,v&&b.darkText],children:"\u041d\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0445 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439"}),N&&(0,y.jsxs)(r.default,{style:b.uploadingOverlay,children:[(0,y.jsx)(i.default,{size:"large",color:"#ffffff"}),(0,y.jsx)(o.default,{style:b.uploadingText,children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f..."})]}),(0,y.jsx)(f.default,{visible:_,onClose:()=>k(!1),onConfirm:async()=>{if(w)try{await(0,p.deleteImage)(w),j(e=>e.filter(e=>e.id!==w))}finally{k(!1),O(null)}},title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",message:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435?",confirmText:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})};const b=n.default.create({container:{padding:h.DESIGN_TOKENS.spacing.xl,width:'100%'},darkContainer:{backgroundColor:'#222'},headerContainer:{flexDirection:'row',justifyContent:'space-between',alignItems:'center',marginBottom:h.DESIGN_TOKENS.spacing.sm,paddingVertical:8,borderBottomWidth:1,borderBottomColor:'#ddd'},galleryTitle:{fontSize:h.DESIGN_TOKENS.typography.sizes.xl,fontWeight:'bold',color:'#333'},imageCount:{fontSize:h.DESIGN_TOKENS.typography.sizes.sm,color:'#666'},highlight:{fontWeight:'bold',color:'#4b7c6f'},galleryGrid:{flexDirection:'row',flexWrap:'wrap',justifyContent:'space-between',gap:h.DESIGN_TOKENS.spacing.md},imageWrapper:{width:'30%',aspectRatio:1,borderRadius:10,overflow:'hidden',position:'relative'},image:{width:'100%',height:'100%',borderRadius:10},deleteButton:{position:'absolute',top:5,right:5,backgroundColor:'rgba(255, 0, 0, 0.8)',borderRadius:12,width:20,height:20,justifyContent:'center',alignItems:'center'},deleteButtonText:{color:'#fff',fontSize:h.DESIGN_TOKENS.typography.sizes.xs},dropzone:{width:'100%',padding:h.DESIGN_TOKENS.spacing.lg,borderWidth:2,borderRadius:10,borderColor:'#4b7c6f',backgroundColor:'#f0f0f0',alignItems:'center',marginBottom:h.DESIGN_TOKENS.spacing.xl},activeDropzone:{borderColor:'#2b5c53',backgroundColor:'#e0f2f1'},darkDropzone:{backgroundColor:'#333',borderColor:'#888'},dropzoneText:{fontSize:h.DESIGN_TOKENS.typography.sizes.sm,color:'#666'},darkText:{color:'#ddd'},noImagesText:{fontSize:h.DESIGN_TOKENS.typography.sizes.md,textAlign:'center',color:'#888',marginTop:h.DESIGN_TOKENS.spacing.xl},loader:{marginTop:h.DESIGN_TOKENS.spacing.xl},uploadingOverlay:{position:'absolute',top:0,left:0,right:0,bottom:0,backgroundColor:'rgba(0,0,0,0.5)',justifyContent:'center',alignItems:'center'},uploadingText:{color:'#fff',marginTop:h.DESIGN_TOKENS.spacing.sm}})},2494,[23,4,315,132,145,409,407,123,445,2495,3392,2496,1050,1013,2]);
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0,_e.generateSizes=function(e={}){const t={mobile:'100vw',tablet:'50vw',desktop:'33vw',...e};return[`(max-width: ${l.DESIGN_TOKENS.breakpoints.mobile}px) ${t.mobile}`,`(max-width: ${l.DESIGN_TOKENS.breakpoints.tablet}px) ${t.tablet}`,t.desktop].join(', ')},_e.generateSrcSet=function(e,t=[320,640,1024,1920]){return t.map(t=>`${`${e}?w=${t}&q=80&fm=webp`} ${t}w`).join(', ')};var t=(function(e,t){if("function"==typeof WeakMap)var o=new WeakMap,r=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var n,i,l={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return l;if(n=t?r:o){if(n.has(e))return n.get(e);n.set(e,l)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((i=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(i.get||i.set)?n(l,t,i):l[t]=e[t]);return l})(e,t)})(_r(d[1])),o=e(_r(d[2])),r=e(_r(d[3])),n=e(_r(d[4])),i=(e(_r(d[5])),_r(d[6])),l=_r(d[7]),c=_r(d[8]);function s({source:e,contentFit:r="cover",aspectRatio:s,width:f="100%",height:h,borderRadius:b=0,placeholder:p,priority:y="normal",loading:S="lazy",alt:w,onLoad:I,onError:j,style:E}){const[_,k]=(0,t.useState)(!0),[N,O]=(0,t.useState)(!1),v='high'===y?'high':'low'===y?'low':'auto';return(0,c.jsxs)(o.default,{style:[u.container,{width:f,height:h||(s?void 0:'100%'),aspectRatio:s,borderRadius:b},E],children:[(0,c.jsx)(i.Image,{source:e,contentFit:r,placeholder:p,transition:200,onLoad:()=>{k(!1),I?.()},onError:()=>{k(!1),O(!0),j?.()},style:[u.image,{borderRadius:b}],loading:S,fetchpriority:v,alt:w||'',decoding:'async',cachePolicy:"memory-disk",priority:y}),_&&!N&&(0,c.jsx)(o.default,{style:u.loadingContainer,testID:"optimized-image-loading",children:(0,c.jsx)(n.default,{size:"small",color:l.DESIGN_TOKENS.colors.primary})}),N&&(0,c.jsx)(o.default,{style:[u.errorContainer,{borderRadius:b}],testID:"optimized-image-error",children:(0,c.jsx)(o.default,{style:u.errorIcon,children:(0,c.jsx)(o.default,{style:u.errorIconInner})})})]})}const u=r.default.create({container:{position:'relative',overflow:'hidden',backgroundColor:l.DESIGN_TOKENS.colors.backgroundSecondary},image:{width:'100%',height:'100%'},loadingContainer:{...r.default.absoluteFillObject,justifyContent:'center',alignItems:'center',backgroundColor:l.DESIGN_TOKENS.colors.backgroundSecondary},errorContainer:{...r.default.absoluteFillObject,justifyContent:'center',alignItems:'center',backgroundColor:l.DESIGN_TOKENS.colors.mutedBackground},errorIcon:{width:48,height:48,borderRadius:24,backgroundColor:l.DESIGN_TOKENS.colors.disabled,justifyContent:'center',alignItems:'center'},errorIconInner:{width:24,height:2,backgroundColor:l.DESIGN_TOKENS.colors.disabledText,transform:[{rotate:'45deg'}]}});_e.default=(0,t.memo)(s)},2495,[23,4,315,145,407,123,1017,1013,2]);
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var t=(function(e,t){if("function"==typeof WeakMap)var o=new WeakMap,i=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var n,l,r={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return r;if(n=t?i:o){if(n.has(e))return n.get(e);n.set(e,r)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((l=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(l.get||l.set)?n(r,t,l):r[t]=e[t]);return r})(e,t)})(_r(d[1])),o=_r(d[2]),i=e(_r(d[3])),n=e(_r(d[4])),l=e(_r(d[5])),r=(e(_r(d[6])),e(_r(d[7]))),s=_r(d[8]),c=_r(d[9]),u=_r(d[10]),f=_r(d[11]),h=_r(d[12]);_e.default=({visible:e,onClose:i,onConfirm:p,title:S="\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435",message:x="\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c?",confirmText:y="\u0423\u0434\u0430\u043b\u0438\u0442\u044c",cancelText:E="\u041e\u0442\u043c\u0435\u043d\u0430"})=>{const w=(0,t.useRef)(null),N=(0,t.useRef)(null),{width:C}=(0,r.default)(),T=C<=f.METRICS.breakpoints.tablet;c.DESIGN_TOKENS.colors;return(0,s.useFocusTrap)(w,{enabled:e&&!0,initialFocus:N}),(0,t.useEffect)(()=>{if(!e)return;const t=e=>{'Escape'===e.key&&i()};return document.addEventListener('keydown',t),()=>document.removeEventListener('keydown',t)},[e,i]),(0,h.jsx)(o.Portal,{children:(0,h.jsxs)(o.Dialog,{visible:e,onDismiss:i,style:[b.dialog,{width:T?'95%':'90%',maxWidth:T?'95%':380,paddingVertical:T?16:20,paddingHorizontal:T?20:24}],role:'dialog','aria-modal':!0,'aria-labelledby':'dialog-title','aria-describedby':'dialog-message',children:[(0,h.jsx)(o.Dialog.Title,{style:b.dialogTitle,id:'dialog-title',children:S}),(0,h.jsx)(o.Dialog.Content,{children:(0,h.jsx)(n.default,{style:b.dialogText,id:'dialog-message',children:x})}),(0,h.jsxs)(o.Dialog.Actions,{style:[b.actionContainer,T&&b.actionContainerMobile],children:[(0,h.jsx)(l.default,{onPress:i,hitSlop:{top:8,bottom:8,left:8,right:8},style:[b.cancelButtonContainer,u.globalFocusStyles.focusable],accessibilityRole:"button",accessibilityLabel:E,ref:N,tabIndex:0,children:(0,h.jsx)(n.default,{style:b.cancelButton,children:E.toUpperCase()})}),(0,h.jsx)(l.default,{onPress:p,style:[b.deleteButtonContainer,u.globalFocusStyles.focusable],hitSlop:{top:8,bottom:8,left:8,right:8},accessibilityRole:"button",accessibilityLabel:y,tabIndex:0,children:(0,h.jsx)(n.default,{style:b.deleteButton,children:y.toUpperCase()})})]})]})})};const b=i.default.create({dialog:{alignSelf:'center',backgroundColor:c.DESIGN_TOKENS.colors.surface,borderRadius:c.DESIGN_TOKENS.radii.lg,elevation:3,shadowColor:'#1f1f1f',shadowOffset:{width:0,height:4},shadowOpacity:.14,shadowRadius:16,boxShadow:c.DESIGN_TOKENS.shadows.modal},dialogTitle:{fontWeight:'600',fontSize:18,color:c.DESIGN_TOKENS.colors.text,marginBottom:8},dialogText:{fontSize:16,color:c.DESIGN_TOKENS.colors.textMuted,marginBottom:20},actionContainer:{flexDirection:'row',justifyContent:'flex-end',alignItems:'center',gap:12},actionContainerMobile:{flexDirection:'column',width:'100%',gap:8},cancelButtonContainer:{minWidth:44,minHeight:44,justifyContent:'center',alignItems:'center',paddingHorizontal:16,paddingVertical:8,borderRadius:c.DESIGN_TOKENS.radii.md,transition:'all 0.2s cubic-bezier(0.4, 0, 0.2, 1)',cursor:'pointer',':hover':{backgroundColor:c.DESIGN_TOKENS.colors.primaryLight}},cancelButton:{fontSize:14,fontWeight:'500',color:c.DESIGN_TOKENS.colors.textMuted,textTransform:'uppercase',letterSpacing:.5},deleteButtonContainer:{backgroundColor:c.DESIGN_TOKENS.colors.danger,borderRadius:c.DESIGN_TOKENS.radii.md,paddingVertical:8,paddingHorizontal:16,minWidth:44,minHeight:44,justifyContent:'center',alignItems:'center',shadowColor:'#1f1f1f',shadowOffset:{width:0,height:2},shadowOpacity:.06,shadowRadius:6,elevation:2,transition:'all 0.2s cubic-bezier(0.4, 0, 0.2, 1)',cursor:'pointer',boxShadow:'0 2px 6px rgba(31, 31, 31, 0.06)',':hover':{backgroundColor:c.DESIGN_TOKENS.colors.dangerDark,transform:'translateY(-1px)',boxShadow:'0 3px 8px rgba(31, 31, 31, 0.12)'}},deleteButton:{fontSize:14,fontWeight:'600',color:'#fff',textTransform:'uppercase',letterSpacing:.5}})},2496,[23,4,2652,145,132,409,123,447,2497,1013,1015,985,2]);
__d(function(g,r,i,a,m,_e,d){var e=r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.useFocusTrap=function(e,n={}){const{enabled:u=!0,initialFocus:c,returnFocus:o}=n,s=(0,t.useRef)(null);(0,t.useEffect)(()=>{if(!u||!e.current)return;const t=e.current,n=t.querySelectorAll('a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])'),l=n[0],f=n[n.length-1];s.current=document.activeElement,c?.current?c.current.focus():l&&l.focus();const v=e=>{'Tab'===e.key&&(0!==n.length?e.shiftKey?document.activeElement===l&&(e.preventDefault(),f?.focus()):document.activeElement===f&&(e.preventDefault(),l?.focus()):e.preventDefault())},b=e=>{'Escape'===e.key&&o?.current&&o.current.focus()};return t.addEventListener('keydown',v),document.addEventListener('keydown',b),()=>{t.removeEventListener('keydown',v),document.removeEventListener('keydown',b),o?.current?o.current.focus():s.current&&s.current.focus()}},[u,e,c,o])};var t=r(d[1]);e(r(d[2]))},2497,[23,4,123]);
//# sourceMappingURL=/_expo/static/js/web/GallerySection-b3414a859b0a5af8f099f691a9245102.js.map
//# debugId=9b438973-84de-4cc8-97e3-9c901ada5d66