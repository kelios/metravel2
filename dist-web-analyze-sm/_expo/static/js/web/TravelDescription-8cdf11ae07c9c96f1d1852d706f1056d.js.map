{"version":3,"sources":["/components/travel/TravelDescription.tsx","/components/travel/StableContent.tsx","/components/CustomImageRenderer.tsx","/assets/travel-stamp.webp"],"sourcesContent":["import React, { memo, useEffect, useMemo, useState } from \"react\";\nimport {\n    ScrollView,\n    StyleSheet,\n    Text,\n    useWindowDimensions,\n    View,\n    Platform,\n    InteractionManager,\n} from \"react-native\";\nimport { Image as ExpoImage } from \"expo-image\";\nimport StableContent from \"@/components/travel/StableContent\";\nimport { DESIGN_TOKENS } from '@/constants/designSystem';\n\ninterface TravelDescriptionProps {\n    htmlContent: string;\n    title?: string;\n    noBox?: boolean;\n}\n\n/**\n * –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è:\n * - –ù–∞ web —Å—Ä–∞–∑—É –º–æ–Ω—Ç–∏—Ä—É–µ–º HTML (–∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ), –Ω–æ –∑–∞—Ä–∞–Ω–µ–µ –ø—Ä–∞–≤–∏–º –º–µ–¥–∏–∞:\n *    ‚Ä¢ –ø–µ—Ä–≤–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–µ –ø–æ–¥–Ω–∏–º–∞–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (LCP);\n *    ‚Ä¢ –≤—Å–µ–º img/iframe –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã/–ª–µ–Ω–∏–≤—É—é –∑–∞–≥—Ä—É–∑–∫—É (CLS‚Üì).\n * - –ù–∞ native –ø–∞—Ä—Å–∏–Ω–≥ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –¥–æ –∫–æ–Ω—Ü–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π.\n * - –ï—Å—Ç—å —Ñ–æ—Ä—Å–∞–∂–Ω—ã–π —Ç–∞–π–º–µ—Ä ‚Äî —á–µ—Ä–µ–∑ 2s –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ –º–æ–Ω—Ç–∏—Ä—É–µ–º.\n */\n\nconst LCP_INDEX = 0; // –ø–µ—Ä–≤–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ –∏–∑ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ ‚Äî –∫–∞–Ω–¥–∏–¥–∞—Ç –≤ LCP\n\nconst TravelDescription: React.FC<TravelDescriptionProps> = ({\n                                                                 htmlContent,\n                                                                 title,\n                                                                 noBox = false,\n                                                             }) => {\n    const { width, height } = useWindowDimensions();\n\n    // ‚úÖ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞\n    const pageHeight = useMemo(() => Math.round(height * 0.7), [height]);\n    const contentWidth = useMemo(() => {\n        // –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞\n        const maxContent = Math.min(width, 760);\n        // –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —à–∏—Ä–∏–Ω—ã\n        const padding = width >= 768 ? 64 : width >= 480 ? 40 : 32;\n        return Math.max(maxContent - padding, 220);\n    }, [width]);\n\n    // ---- —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ ----\n    const isEmptyHtml = useMemo(() => {\n        if (!htmlContent) return true;\n        const txt = String(htmlContent).trim().replace(/<[^>]+>/g, \"\");\n        return txt.length === 0;\n    }, [htmlContent]);\n\n    // –ù–∞ web ‚Äî —Å—Ä–∞–∑—É true, –Ω–∞ native ‚Äî –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ–º\n    const [canParseHtml, setCanParseHtml] = useState(Platform.OS === \"web\");\n\n    useEffect(() => {\n        let cancelled = false;\n        let timeoutId: any = null;\n\n        if (Platform.OS !== \"web\") {\n            const task = InteractionManager.runAfterInteractions(() => {\n                if (!cancelled) setCanParseHtml(true);\n            });\n\n            // –§–æ—Ä—Å–∞–∂: –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫ ‚Äî —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ 2s\n            timeoutId = setTimeout(() => {\n                if (!cancelled) setCanParseHtml(true);\n            }, 2000);\n\n            return () => {\n                cancelled = true;\n                task.cancel();\n                if (timeoutId) clearTimeout(timeoutId);\n            };\n        } else {\n            // –ù–∞ web –≤—Å—ë —É–∂–µ true; –Ω–æ –æ—Å—Ç–∞–≤–∏–º —Ñ–æ—Ä—Å–∞–∂ –Ω–∞ –≤—Å—è–∫–∏–π\n            timeoutId = setTimeout(() => {\n                if (!cancelled) setCanParseHtml(true);\n            }, 2000);\n            return () => {\n                cancelled = true;\n                if (timeoutId) clearTimeout(timeoutId);\n            };\n        }\n    }, [htmlContent]);\n\n    // --- HTML –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞: –ø–æ–¥–Ω–∏–º–∞–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç LCP –∏ —Ñ–∏–∫—Å–∏—Ä—É–µ–º –º–µ–¥–∏–∞ ---\n    const { preparedHtml, lcpSrc } = useMemo(() => {\n        if (!htmlContent) return { preparedHtml: htmlContent, lcpSrc: null as string | null };\n\n        // –ù–µ–±–æ–ª—å—à–æ–π –ø–∞—Ä—Å–µ—Ä –ø–æ —Ä–µ–≥—É–ª—è—Ä–∫–∞–º (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –Ω–∞—à–∏—Ö –∑–∞–¥–∞—á).\n        // 1) –°–æ–±–µ—Ä—ë–º –≤—Å–µ <img ...>\n        const imgRegex = /<img\\b[^>]*?>/gi;\n        const imgs = Array.from(htmlContent.matchAll(imgRegex)).map(m => m[0]);\n\n        let lcpCandidate: string | null = null;\n        let idx = 0;\n\n        let out = htmlContent\n          // –í–∏–¥–µ–æ-–æ–±–ª–µ–≥—á–∞–ª–∫–∏: YouTube iframe -> –ø–æ—Å—Ç–µ—Ä —Å –∫–Ω–æ–ø–∫–æ–π; iframe –ø–æ –∫–ª–∏–∫—É (web)\n          .replace(\n            /<iframe\\b[^>]*?(youtube\\.com|youtu\\.be)[^>]*><\\/iframe>/gi,\n            (tag) => {\n                // –ü—ã—Ç–∞–µ–º—Å—è –≤—ã—Ç–∞—â–∏—Ç—å id\n                const srcMatch = tag.match(/src=\"([^\"]+)\"/i);\n                const src = srcMatch ? srcMatch[1] : \"\";\n                const idMatch =\n                  src.match(/[?&]v=([a-z0-9_-]{6,})/i) ||\n                  src.match(/youtu\\.be\\/([a-z0-9_-]{6,})/i);\n                const vid = idMatch ? idMatch[1] : \"\";\n                if (!vid) return tag; // –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–ª–∏ ‚Äî –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å\n\n                // –õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –≤–∏–¥–∂–µ—Ç: –∫–∞—Ä—Ç–∏–Ω–∫–∞-–ø—Ä–µ–≤—å—é (–Ω–µ –¥–µ—Ä–≥–∞–µ—Ç —Ä–∞—Å–∫–ª–∞–¥–∫—É) + –∫–Ω–æ–ø–∫–∞\n                const poster = `https://i.ytimg.com/vi/${vid}/hqdefault.jpg`;\n                // –†–µ–∑–µ—Ä–≤–∏—Ä—É–µ–º –º–µ—Å—Ç–æ ~16:9, –º–æ–∂–Ω–æ –ø–æ–ø—Ä–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ style\n                return `\n<div class=\"yt-lite\" data-yt=\"${vid}\" style=\"position:relative;aspect-ratio:16/9;background:#000;overflow:hidden;border-radius:8px\">\n  <img src=\"${poster}\" alt=\"YouTube preview\" loading=\"lazy\" decoding=\"async\" style=\"width:100%;height:100%;object-fit:cover\" />\n  <div role=\"button\" tabindex=\"0\" aria-label=\"–°–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ\"\n       style=\"position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:transparent;cursor:pointer\">\n    <span style=\"width:68px;height:48px;background:rgba(0,0,0,.6);clip-path:polygon(20% 10%, 20% 90%, 85% 50%);\"></span>\n  </div>\n</div>`;\n            }\n          )\n          // 2) –ö–∞–∂–¥–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–µ: width/height (–µ—Å–ª–∏ –µ—Å—Ç—å), height:auto, lazy (–∫—Ä–æ–º–µ LCP), fetchpriority\n          .replace(imgRegex, (tag) => {\n              // src\n              const srcMatch = tag.match(/\\bsrc=\"([^\"]+)\"/i);\n              const src = srcMatch?.[1] ?? \"\";\n\n              // width/height –∏–∑ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ (WordPress –æ–±—ã—á–Ω–æ –ø—Ä–æ—Å—Ç–∞–≤–ª—è–µ—Ç)\n              const wMatch = tag.match(/\\bwidth=\"(\\d+)\"/i);\n              const hMatch = tag.match(/\\bheight=\"(\\d+)\"/i);\n              const w = wMatch ? parseInt(wMatch[1], 10) : undefined;\n              const h = hMatch ? parseInt(hMatch[1], 10) : undefined;\n\n              // –µ—Å–ª–∏ –Ω–µ—Ç —Ä–∞–∑–º–µ—Ä–æ–≤ ‚Äî –ø–æ–ø—Ä–æ–±—É–µ–º –≤—ã–¥–µ—Ä–Ω—É—Ç—å –∏–∑ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ ...-1200x800.jpg\n              let ww = w, hh = h;\n              if (!ww || !hh) {\n                  const wh = src.match(/[-_](\\d{2,5})x(\\d{2,5})\\.(jpg|jpeg|png|webp|avif)(\\?|$)/i);\n                  if (wh) {\n                      ww = ww || parseInt(wh[1], 10);\n                      hh = hh || parseInt(wh[2], 10);\n                  }\n              }\n\n              // –±–∞–∑–æ–≤—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã\n              const hasLoading = /\\bloading=/i.test(tag);\n              const hasDecoding = /\\bdecoding=/i.test(tag);\n              const hasFetchPriority = /\\bfetchpriority=/i.test(tag);\n\n              // —Å—Ç–∏–ª–∏\n              const styleMatch = tag.match(/\\bstyle=\"([^\"]*)\"/i);\n              const style = styleMatch?.[1] ?? \"\";\n              const styleWithHeightAuto =\n                style.includes(\"height\") ? style : (style ? `${style};height:auto` : \"height:auto\");\n\n              // LCP ‚Äî –ø–µ—Ä–≤–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ: high priority, –Ω–µ lazy\n              const isLcp = idx === LCP_INDEX;\n              if (isLcp && src) lcpCandidate = src;\n\n              const patched = tag\n                // –¥–æ–±–∞–≤–∏–º/–∑–∞–º–µ–Ω–∏–º style (height:auto)\n                .replace(styleMatch ? styleMatch[0] : \"\", \"\")\n                .replace(/>$/, ` style=\"${styleWithHeightAuto}\">`)\n                // —É—Å—Ç–∞–Ω–æ–≤–∏–º —Ä–∞–∑–º–µ—Ä—ã (–µ—Å–ª–∏ –≤—ã—á–∏—Å–ª–∏–ª–∏)\n                .replace(/\\bwidth=\"[^\"]*\"/i, \"\")\n                .replace(/\\bheight=\"[^\"]*\"/i, \"\")\n                .replace(/>$/, ww && hh ? ` width=\"${ww}\" height=\"${hh}\">` : \">\")\n                // loading/decoding/fetchpriority\n                .replace(/\\bloading=\"[^\"]*\"/i, \"\")\n                .replace(/\\bdecoding=\"[^\"]*\"/i, \"\")\n                .replace(/\\bfetchpriority=\"[^\"]*\"/i, \"\")\n                .replace(\n                  />$/,\n                  isLcp\n                    ? ` fetchpriority=\"high\" decoding=\"async\">`\n                    : ` loading=\"lazy\" decoding=\"async\" fetchpriority=\"low\">`\n                );\n\n              idx += 1;\n              return patched;\n          });\n\n        return { preparedHtml: out, lcpSrc: lcpCandidate };\n    }, [htmlContent]);\n\n    // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ LCP-–∫–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–∞ web (—É—Å–∫–æ—Ä—è–µ—Ç LCP)\n    useEffect(() => {\n        if (Platform.OS !== \"web\" || !lcpSrc) return;\n        const link = document.createElement(\"link\");\n        link.rel = \"preload\";\n        link.as = \"image\";\n        link.href = lcpSrc;\n        // –ü–æ–¥—Å—Ç—Ä–∞—Ö—É–µ–º—Å—è, –µ—Å–ª–∏ —ç—Ç–æ cross-origin\n        link.crossOrigin = \"anonymous\";\n        document.head.appendChild(link);\n        return () => {\n            document.head.removeChild(link);\n        };\n    }, [lcpSrc]);\n\n    // –ù–∞–≤–µ—Å–∏–º –¥–µ–ª–µ–≥–∞—Ç –Ω–∞ –ª–µ–≥–∫–∏–π YouTube (–∑–∞–≥—Ä—É–∑–∏—Ç—å iframe –ø–æ –∫–ª–∏–∫—É) ‚Äî —Ç–æ–ª—å–∫–æ web\n    useEffect(() => {\n        if (Platform.OS !== \"web\") return;\n\n        const handler = (e: any) => {\n            const root = (e.target as HTMLElement)?.closest?.(\".yt-lite\") as HTMLElement | null;\n            if (!root) return;\n            const vid = root.getAttribute(\"data-yt\");\n            if (!vid) return;\n\n            // –°–æ–∑–¥–∞–µ–º iframe —Ç–æ–ª—å–∫–æ –ø–æ –∫–ª–∏–∫—É\n            const iframe = document.createElement(\"iframe\");\n            iframe.width = \"560\";\n            iframe.height = \"315\";\n            iframe.src = `https://www.youtube.com/embed/${vid}?autoplay=1&rel=0`;\n            iframe.title = \"YouTube video\";\n            iframe.allow =\n              \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\";\n            iframe.allowFullscreen = true;\n            iframe.style.position = \"absolute\";\n            iframe.style.inset = \"0\";\n            iframe.style.width = \"100%\";\n            iframe.style.height = \"100%\";\n            root.innerHTML = \"\";\n            root.appendChild(iframe);\n        };\n\n        document.addEventListener(\"click\", handler, { passive: true });\n        return () => {\n            document.removeEventListener(\"click\", handler as any);\n        };\n    }, []);\n\n    const inner = (\n      <View style={styles.inner} pointerEvents=\"box-none\">\n          {/* –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —à—Ç–∞–º–ø ‚Äî –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏ –Ω–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∫–ª–∏–∫–∏ */}\n          <ExpoImage\n            source={require(\"@/assets/travel-stamp.webp\")}\n            style={styles.stamp}\n            accessibilityIgnoresInvertColors\n            accessible={false}\n            pointerEvents=\"none\"\n            cachePolicy=\"memory-disk\"\n            priority=\"low\"\n            contentFit=\"contain\"\n            transition={0}\n          />\n\n          {/* –ö–æ–Ω—Ç–µ–Ω—Ç */}\n          {isEmptyHtml ? (\n            <Text style={styles.placeholder}>–û–ø–∏—Å–∞–Ω–∏–µ —Å–∫–æ—Ä–æ –ø–æ—è–≤–∏—Ç—Å—è üôÇ</Text>\n          ) : canParseHtml ? (\n            <StableContent html={preparedHtml} contentWidth={contentWidth} />\n          ) : (\n            <Text style={styles.placeholder}>–ó–∞–≥—Ä—É–∂–∞–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ‚Ä¶</Text>\n          )}\n      </View>\n    );\n\n    return (\n      <View style={styles.wrapper} testID=\"travel-description\">\n          {noBox ? (\n            <ScrollView\n              style={styles.scrollArea}\n              contentContainerStyle={styles.scrollContent}\n              scrollEventThrottle={16}\n              showsVerticalScrollIndicator\n              keyboardShouldPersistTaps=\"handled\"\n              {...(Platform.OS === \"web\" ? ({ overScrollMode: \"never\" } as any) : {})}\n            >\n                {inner}\n            </ScrollView>\n          ) : (\n            <View style={[styles.fixedHeightBlock, { height: pageHeight }]}>\n                <ScrollView\n                  style={styles.scrollArea}\n                  contentContainerStyle={styles.scrollContent}\n                  scrollEventThrottle={16}\n                  showsVerticalScrollIndicator\n                  keyboardShouldPersistTaps=\"handled\"\n                  {...(Platform.OS === \"web\" ? ({ overScrollMode: \"never\" } as any) : {})}\n                >\n                    {inner}\n                </ScrollView>\n            </View>\n          )}\n      </View>\n    );\n};\n\nexport default memo(TravelDescription);\n\nconst styles = StyleSheet.create({\n    // ‚úÖ –†–ï–î–ò–ó–ê–ô–ù: –£–ª—É—á—à–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Å—Ç–∏–ª—è–º–∏\n    wrapper: {\n        alignSelf: \"center\",\n        width: \"100%\",\n        maxWidth: 760,\n        paddingHorizontal: Platform.select({ \n            web: 32, \n            default: 16  // ‚úÖ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø: –ú–µ–Ω—å—à–µ –æ—Ç—Å—Ç—É–ø—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö\n        }),\n        paddingTop: Platform.select({ \n            web: 32, \n            default: 24  // ‚úÖ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø: –ú–µ–Ω—å—à–µ –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö\n        }),\n        paddingBottom: Platform.select({ \n            web: 48, \n            default: 32  // ‚úÖ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø: –ú–µ–Ω—å—à–µ –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö\n        }),\n        backgroundColor: \"transparent\",\n    },\n\n    inner: {\n        position: \"relative\",\n        paddingTop: 8,\n    },\n\n    placeholder: {\n        textAlign: \"center\",\n        color: \"#718096\",\n        fontSize: DESIGN_TOKENS.typography.sizes.md,\n        paddingVertical: DESIGN_TOKENS.spacing.xxs,\n        fontFamily: \"Georgia\",\n    },\n\n    fixedHeightBlock: {\n        borderWidth: 1,\n        borderColor: \"rgba(0, 0, 0, 0.06)\",\n        borderRadius: Platform.select({ web: 16, default: 12 }),  // ‚úÖ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø: –ú–µ–Ω—å—à–µ —Ä–∞–¥–∏—É—Å –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö\n        backgroundColor: \"#FFF\",\n        overflow: \"hidden\",\n        shadowColor: \"#000\",\n        shadowOpacity: 0.08,\n        shadowRadius: Platform.select({ web: 12, default: 8 }),  // ‚úÖ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø: –ú–µ–Ω—å—à–µ —Ç–µ–Ω—å –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö\n        shadowOffset: { width: 0, height: 2 },\n        elevation: 2,\n    },\n\n    scrollArea: {},\n\n    scrollContent: {\n        paddingBottom: DESIGN_TOKENS.spacing.lg,\n    },\n\n    stamp: {\n        position: \"absolute\",\n        top: 8,\n        right: 8,\n        width: Platform.select({ web: 80, default: 60 }),  // ‚úÖ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø: –ú–µ–Ω—å—à–µ —à—Ç–∞–º–ø –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö\n        height: Platform.select({ web: 80, default: 60 }),\n        opacity: 0.15,\n        zIndex: 1,\n    },\n});\n","// components/travel/StableContent.tsx\nimport React, { memo, Suspense, useEffect, useMemo, useState } from \"react\";\nimport { View, StyleSheet, Linking, Platform, Text, Pressable } from \"react-native\";\nimport type { TDefaultRendererProps } from \"react-native-render-html\";\nimport { sanitizeRichText } from '@/src/utils/sanitizeRichText';\n\nconst LazyRenderHTML = React.lazy(() =>\n  import(\"react-native-render-html\").then((m: any) => ({ default: m.default }))\n);\nconst LazyInstagram = React.lazy(() =>\n  import(\"@/components/iframe/InstagramEmbed\").then((m: any) => ({ default: m.default }))\n);\nimport CustomImageRenderer from \"@/components/CustomImageRenderer\";\nimport { DESIGN_TOKENS } from '@/constants/designSystem';\n\ninterface StableContentProps {\n  html: string;\n  contentWidth: number;\n}\n\ntype IframeModelType = typeof import(\"@native-html/iframe-plugin\")[\"iframeModel\"];\n\nconst hasIframe = (html: string) => /<iframe[\\s/>]/i.test(html);\nconst isYouTube = (src: string) => /youtube\\.com|youtu\\.be/i.test(src);\nconst isInstagram = (src: string) => /instagram\\.com/i.test(src);\n\nconst extractFirstImgSrc = (html: string): string | null => {\n  const m = html.match(/<img\\b[^>]*\\bsrc=\"([^\"]+)\"/i);\n  return m?.[1] ?? null;\n};\n\nconst stripDangerousTags = (html: string) =>\n  html.replace(/<script[\\s\\S]*?<\\/script>/gi, \"\").replace(/<style[\\s\\S]*?<\\/style>/gi, \"\");\n\nconst normalizeImgTags = (html: string): string =>\n  html.replace(/<img\\b[^>]*?>/gi, (tag) => {\n    const src = tag.match(/\\bsrc=\"([^\"]+)\"/i)?.[1] ?? \"\";\n    let w = tag.match(/\\bwidth=\"(\\d+)\"/i)?.[1];\n    let h = tag.match(/\\bheight=\"(\\d+)\"/i)?.[1];\n    if (!w || !h) {\n      const wh = src.match(/[-_](\\d{2,5})x(\\d{2,5})\\.(?:jpe?g|png|webp|avif)(?:\\?|$)/i);\n      if (wh) {\n        w = w || wh[1];\n        h = h || wh[2];\n      }\n    }\n    const styleMatch = tag.match(/\\bstyle=\"([^\"]*)\"/i);\n    const style = styleMatch?.[1] ?? \"\";\n    const ensured = [\"display:block\", \"height:auto\", \"margin:0 auto\"].reduce(\n      (acc, rule) => (acc.includes(rule) ? acc : acc ? `${acc};${rule}` : rule),\n      style\n    );\n    let out = tag.replace(styleMatch ? styleMatch[0] : \"\", \"\").replace(/>$/, ` style=\"${ensured}\">`);\n    out = out.replace(/\\bwidth=\"[^\"]*\"/i, \"\").replace(/\\bheight=\"[^\"]*\"/i, \"\");\n    if (w && h) out = out.replace(/>$/, ` width=\"${w}\" height=\"${h}\">`);\n    out = out.replace(/\\bdecoding=\"[^\"]*\"/i, \"\").replace(/\\bfetchpriority=\"[^\"]*\"/i, \"\");\n    out = out.replace(/>$/, ` decoding=\"async\" fetchpriority=\"low\">`);\n    return out;\n  });\n\nconst replaceYouTubeIframes = (html: string): string =>\n  html.replace(/<iframe\\b[^>]*src=\"([^\"]+)\"[^>]*><\\/iframe>/gi, (full, src: string) => {\n    if (!isYouTube(src)) return full;\n    const id =\n      src.match(/[?&]v=([a-z0-9_-]{6,})/i)?.[1] ||\n      src.match(/youtu\\.be\\/([a-z0-9_-]{6,})/i)?.[1];\n    if (!id) return full;\n    return `\n<div class=\"yt-lite\" data-yt=\"${id}\"\n     style=\"position:relative;aspect-ratio:16/9;background:#000;border-radius:12px;overflow:hidden;margin:16px 0\">\n  <img src=\"https://i.ytimg.com/vi/${id}/hqdefault.jpg\"\n       alt=\"YouTube preview\" loading=\"lazy\" decoding=\"async\"\n       style=\"width:100%;height:100%;object-fit:cover;display:block\"/>\n  <div role=\"button\" tabindex=\"0\" aria-label=\"–°–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ\"\n    style=\"position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:transparent;cursor:pointer\">\n    <span style=\"width:68px;height:48px;background:rgba(0,0,0,.6);clip-path:polygon(20% 10%,20% 90%,85% 50%);\"></span>\n  </div>\n</div>`;\n  });\n\nconst appendClass = (attrs: string, className: string) => {\n  if (!attrs) return ` class=\"${className}\"`;\n  if (/\\bclass=\"/i.test(attrs)) {\n    return attrs.replace(/class=\"([^\"]*)\"/i, (_, current) => `class=\"${`${current} ${className}`.trim()}\"`);\n  }\n  return `${attrs} class=\"${className}\"`;\n};\n\nconst stripTags = (value: string) => value.replace(/<[^>]+>/g, \"\");\n\nconst decodeEntities = (value: string) =>\n  value\n    .replace(/&nbsp;/gi, \" \")\n    .replace(/&amp;/gi, \"&\")\n    .replace(/&lt;/gi, \"<\")\n    .replace(/&gt;/gi, \">\")\n    .replace(/&quot;/gi, '\"')\n    .replace(/&#39;/gi, \"'\")\n    .replace(/&#x27;/gi, \"'\");\n\nconst encodeEntities = (value: string) =>\n  value\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&#39;\");\n\nconst sliceText = (text: string, limit: number) => {\n  const chars = Array.from(text);\n  if (chars.length <= limit) {\n    return { text, truncated: false };\n  }\n  return {\n    text: chars.slice(0, limit).join(\"\").trimEnd(),\n    truncated: true,\n  };\n};\n\nconst truncateInstagramCaptions = (html: string) => {\n  return html.replace(/<p([^>]*)>([\\s\\S]*?)<\\/p>/gi, (match, attrs = \"\", inner = \"\") => {\n    const plain = decodeEntities(stripTags(inner)).trim();\n    if (!plain.startsWith(\"@\") || plain.length <= 100) return match;\n\n    const handleMatch = inner.match(/^(\\s*@\\s*(?:<a[\\s\\S]+?<\\/a>|[\\w.@]+))(.*)$/i);\n    let nextInner = inner;\n    if (handleMatch) {\n      const handleHtml = handleMatch[1];\n      const restHtml = handleMatch[2] || \"\";\n      const handlePlain = decodeEntities(stripTags(handleHtml)).trim();\n      const restPlain = decodeEntities(stripTags(restHtml)).trim();\n      const remaining = Math.max(0, 100 - handlePlain.length - 1);\n      const { text, truncated } = sliceText(restPlain, remaining);\n      const spacer = text ? \"&nbsp;\" : \"\";\n      nextInner = `${handleHtml}${spacer}<span class=\"instagram-caption-text\">${encodeEntities(\n        text\n      )}${truncated ? \"‚Ä¶\" : \"\"}</span>`;\n    } else {\n      const { text, truncated } = sliceText(plain, 100);\n      nextInner = `${encodeEntities(text)}${truncated ? \"‚Ä¶\" : \"\"}`;\n    }\n\n    return `<p${appendClass(attrs, \"instagram-caption\")}>${nextInner}</p>`;\n  });\n};\n\nconst prepareHtml = (html: string) => {\n  const safe = sanitizeRichText(html);\n  const normalized = replaceYouTubeIframes(normalizeImgTags(stripDangerousTags(safe)));\n  return truncateInstagramCaptions(normalized);\n};\n\nconst WEB_RICH_TEXT_CLASS = \"travel-rich-text\";\nconst WEB_RICH_TEXT_STYLES_ID = \"travel-rich-text-styles\";\nconst WEB_RICH_TEXT_STYLES = `\n.${WEB_RICH_TEXT_CLASS} {\n  font-family: \"Georgia\", \"Times New Roman\", serif;\n  font-size: 17px;\n  line-height: 1.7;\n  color: #1a1a1a;\n  text-align: justify;\n  hyphens: auto;\n  width: 100%;\n  max-width: 900px;\n  margin: 0 auto;\n  padding: DESIGN_TOKENS.spacing.smpx 0 24px;\n}\n.${WEB_RICH_TEXT_CLASS} p {\n  margin: 0 0 1.25em;\n}\n.${WEB_RICH_TEXT_CLASS} h1,\n.${WEB_RICH_TEXT_CLASS} h2,\n.${WEB_RICH_TEXT_CLASS} h3 {\n  color: #111a2b;\n  line-height: 1.3;\n  margin: 1.6em 0 0.7em;\n}\n.${WEB_RICH_TEXT_CLASS} h1 { font-size: clamp(1.8rem, 2vw, 2.6rem); }\n.${WEB_RICH_TEXT_CLASS} h2 { font-size: clamp(1.5rem, 1.6vw, 2.1rem); }\n.${WEB_RICH_TEXT_CLASS} h3 { font-size: clamp(1.25rem, 1.2vw, 1.6rem); }\n.${WEB_RICH_TEXT_CLASS} ul,\n.${WEB_RICH_TEXT_CLASS} ol {\n  margin: 0 0 1.3em 1.6em;\n  padding: 0;\n}\n.${WEB_RICH_TEXT_CLASS} li { margin-bottom: 0.4em; }\n.${WEB_RICH_TEXT_CLASS} img {\n  display: block;\n  width: 100%;\n  max-width: 100%;\n  max-height: 55vh;\n  object-fit: cover;\n  border-radius: 22px;\n  margin: DESIGN_TOKENS.spacing.xxs2px 0 26px;\n  box-shadow: 0 18px 46px rgba(15, 23, 42, 0.16);\n  border: 6px solid rgba(255, 255, 255, 0.14);\n  background: #fafafa;\n}\n.${WEB_RICH_TEXT_CLASS} img + img,\n.${WEB_RICH_TEXT_CLASS} figure + figure {\n  margin-top: 28px;\n}\n.${WEB_RICH_TEXT_CLASS} img + p,\n.${WEB_RICH_TEXT_CLASS} p + img,\n.${WEB_RICH_TEXT_CLASS} figure + p,\n.${WEB_RICH_TEXT_CLASS} p + figure {\n  margin-top: 24px;\n}\n.${WEB_RICH_TEXT_CLASS} figure {\n  margin: 30px auto;\n  width: min(660px, 100%);\n  text-align: center;\n}\n.${WEB_RICH_TEXT_CLASS} figure img {\n  margin-bottom: 12px;\n}\n.${WEB_RICH_TEXT_CLASS} .image-strip {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));\n  gap: DESIGN_TOKENS.spacing.xxs0px;\n  margin: DESIGN_TOKENS.spacing.xxs8px 0;\n}\n.${WEB_RICH_TEXT_CLASS} .image-strip img {\n  width: 100%;\n  margin: 0;\n  box-shadow: 0 15px 30px rgba(15, 23, 42, 0.15);\n}\n.${WEB_RICH_TEXT_CLASS} figure {\n  margin: 0;\n}\n.${WEB_RICH_TEXT_CLASS} figcaption {\n  text-align: center;\n  font-size: 0.9rem;\n  color: rgba(15, 23, 42, 0.8);\n  margin-top: 8px;\n  font-weight: 600;\n  letter-spacing: 0.01em;\n}\n.${WEB_RICH_TEXT_CLASS} iframe,\n.${WEB_RICH_TEXT_CLASS} .yt-lite {\n  display: block;\n  max-width: 100%;\n  border-radius: 18px;\n  overflow: hidden;\n  margin: DESIGN_TOKENS.spacing.xxs4px 0;\n  box-shadow: 0 18px 40px rgba(15, 23, 42, 0.12);\n}\n.${WEB_RICH_TEXT_CLASS}::after {\n  content: \"\";\n  display: block;\n  clear: both;\n}\n/* Instagram wrapper - –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è –≤—Å–µ—Ö Instagram embed'–æ–≤ */\n.${WEB_RICH_TEXT_CLASS} .instagram-wrapper,\n.${WEB_RICH_TEXT_CLASS} .instagram-media {\n  width: 100% !important;\n  max-width: 100% !important;\n  min-width: 0 !important;\n  margin: DESIGN_TOKENS.spacing.xxs4px auto !important;\n  border-radius: 18px !important;\n  overflow: hidden !important;\n  box-shadow: 0 18px 40px rgba(15, 23, 42, 0.12);\n  position: relative;\n  display: block;\n}\n\n/* Instagram iframe - –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é —à–∏—Ä–∏–Ω—É, –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ */\n.${WEB_RICH_TEXT_CLASS} .instagram-wrapper iframe,\n.${WEB_RICH_TEXT_CLASS} .instagram-embed,\n.${WEB_RICH_TEXT_CLASS} .instagram-media iframe,\n.${WEB_RICH_TEXT_CLASS} iframe.ql-video[src*=\"instagram.com\"],\n.${WEB_RICH_TEXT_CLASS} iframe[src*=\"instagram.com\"] {\n  width: 100% !important;\n  max-width: 100% !important;\n  height: auto !important;\n  min-height: 0 !important;\n  aspect-ratio: 4 / 5 !important;\n  border: none !important;\n  border-radius: 18px !important;\n  display: block !important;\n  margin: 0 !important;\n  padding: 0 !important;\n  overflow: hidden !important;\n}\n\n/* –°–∫—Ä—ã—Ç–∏–µ –ª–∏—à–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ Instagram embed —á–µ—Ä–µ–∑ CSS */\n/* –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∏–∑-–∑–∞ CORS –º—ã –Ω–µ –º–æ–∂–µ–º –Ω–∞–ø—Ä—è–º—É—é –∏–∑–º–µ–Ω—è—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ iframe,\n   –Ω–æ –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CSS –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –ø–æ–≤–µ—Ä—Ö iframe */\n.${WEB_RICH_TEXT_CLASS} .instagram-wrapper::before,\n.${WEB_RICH_TEXT_CLASS} .instagram-wrapper::after {\n  display: none !important;\n}\n\n/* –ü–æ–ø—ã—Ç–∫–∞ —Å–∫—Ä—ã—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –ø–æ–≤–µ—Ä—Ö iframe */\n/* –≠—Ç–∏ —Å—Ç–∏–ª–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º, –∫–æ—Ç–æ—Ä—ã–µ Instagram –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –≤ DOM */\n.${WEB_RICH_TEXT_CLASS} .instagram-wrapper + *,\n.${WEB_RICH_TEXT_CLASS} .instagram-wrapper ~ * {\n  /* –°–∫—Ä—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ—Å–ª–µ wrapper, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω—ã Instagram —Å–∫—Ä–∏–ø—Ç–æ–º */\n}\n\n/* –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã –∏ –≥—Ä–∞–Ω–∏—Ü—ã */\n.${WEB_RICH_TEXT_CLASS} .instagram-wrapper {\n  background: transparent !important;\n  padding: 0 !important;\n}\n\n/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */\n@media (max-width: 900px) {\n  .${WEB_RICH_TEXT_CLASS} {\n    text-align: left;\n    hyphens: unset;\n  }\n  .${WEB_RICH_TEXT_CLASS} img {\n    border-width: 4px;\n    margin: DESIGN_TOKENS.spacing.lgpx 0 22px;\n    box-shadow: 0 10px 26px rgba(15, 23, 42, 0.14);\n  }\n}\n\n/* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–¥–ø–∏—Å–µ–π Instagram */\n.${WEB_RICH_TEXT_CLASS} .instagram-caption {\n  font-size: 14px;\n  color: #6b7280;\n  line-height: 1.5;\n  margin-top: 8px;\n  margin-bottom: 20px;\n  text-align: center;\n}\n.${WEB_RICH_TEXT_CLASS} .instagram-caption-text {\n  display: inline;\n}\n`;\n\nconst StableContent: React.FC<StableContentProps> = memo(({ html, contentWidth }) => {\n  const [iframeModel, setIframeModel] = useState<IframeModelType | null>(null);\n  const prepared = useMemo(() => prepareHtml(html), [html]);\n\n  // –±–∞–∑–æ–≤–∞—è —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞ ‚Äî –ü–ò–ö–°–ï–õ–ò, –Ω–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç!\n  const BASE_FONT_SIZE = Platform.select({ ios: 16, android: 16, default: 17 })!;\n  const BASE_LINE_HEIGHT = Math.round(BASE_FONT_SIZE * 1.55); // ~1.55em\n\n  useEffect(() => {\n    if (Platform.OS !== \"web\") return;\n    const first = extractFirstImgSrc(prepared);\n    if (!first) return;\n    const link = document.createElement(\"link\");\n    link.rel = \"preload\";\n    link.as = \"image\";\n    link.href = first;\n    link.crossOrigin = \"anonymous\";\n    document.head.appendChild(link);\n    return () => document.head.removeChild(link);\n  }, [prepared]);\n\n  useEffect(() => {\n    let cancelled = false;\n    if (hasIframe(prepared)) {\n      import(\"@native-html/iframe-plugin\")\n        .then((m) => !cancelled && setIframeModel(m.iframeModel))\n        .catch(() => setIframeModel(null));\n    } else setIframeModel(null);\n    return () => {\n      cancelled = true;\n    };\n  }, [prepared]);\n\n  useEffect(() => {\n    if (Platform.OS !== \"web\") return;\n    const onClick = (e: any) => {\n      const root = (e.target as HTMLElement)?.closest?.(\".yt-lite\") as HTMLElement | null;\n      if (!root) return;\n      const vid = root.getAttribute(\"data-yt\");\n      if (!vid) return;\n      const iframe = document.createElement(\"iframe\");\n      iframe.width = \"560\";\n      iframe.height = \"315\";\n      iframe.src = `https://www.youtube.com/embed/${vid}?autoplay=1&rel=0`;\n      iframe.title = \"YouTube video\";\n      iframe.allow =\n        \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\";\n      // @ts-ignore\n      iframe.allowFullscreen = true;\n      Object.assign(iframe.style, {\n        position: \"absolute\",\n        inset: \"0\",\n        width: \"100%\",\n        height: \"100%\",\n        border: \"0\",\n      });\n      root.innerHTML = \"\";\n      root.appendChild(iframe);\n    };\n    document.addEventListener(\"click\", onClick, { passive: true });\n    return () => document.removeEventListener(\"click\", onClick as any);\n  }, []);\n\n  const renderers = useMemo(() => {\n    return {\n      img: (props: TDefaultRendererProps) => {\n        try {\n          // @ts-ignore\n          return <CustomImageRenderer {...props} contentWidth={contentWidth} />;\n        } catch {\n          const { TDefaultRenderer, ...rest } = props;\n          return <TDefaultRenderer {...rest} />;\n        }\n      },\n      iframe: (props: TDefaultRendererProps) => {\n        const attrs = (props.tnode?.attributes || {}) as any;\n        const src: string = attrs.src || \"\";\n\n        if (!src) {\n          const { TDefaultRenderer, ...rest } = props;\n          return <TDefaultRenderer {...rest} />;\n        }\n\n        if (isInstagram(src)) {\n          const url = src.replace(\"/embed/captioned/\", \"/\").split(\"?\")[0];\n          const wrapperStyle = Platform.OS === \"web\" \n            ? [styles.instagramEmbedWrapper, styles.instagramEmbedWrapperWeb]\n            : styles.instagramEmbedWrapper;\n          return (\n            <View style={wrapperStyle}>\n              <Suspense fallback={<Text>Instagram‚Ä¶</Text>}>\n                <LazyInstagram url={url} />\n              </Suspense>\n            </View>\n          );\n        }\n\n        if (isYouTube(src)) {\n          if (Platform.OS !== \"web\") {\n            const open = () => Linking.openURL(src).catch(() => {});\n            return (\n              <Pressable onPress={open} style={styles.ytStub}>\n                <Text style={styles.ytStubText}>–°–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ YouTube</Text>\n              </Pressable>\n            );\n          }\n          const { TDefaultRenderer, ...rest } = props;\n          return <TDefaultRenderer {...rest} />;\n        }\n\n        const { TDefaultRenderer, ...rest } = props;\n        return <TDefaultRenderer {...rest} />;\n      },\n    };\n  }, [contentWidth]);\n\n  // –í–ù–ò–ú–ê–ù–ò–ï: lineHeight –∑–∞–¥–∞—ë–º —á–µ—Ä–µ–∑ baseStyle (px). –í tagsStyles –Ω–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º.\n  const baseStyle = useMemo(\n    () => ({\n      color: \"#1a1a1a\",\n      fontSize: BASE_FONT_SIZE,\n      lineHeight: BASE_LINE_HEIGHT,\n    }),\n    [BASE_FONT_SIZE, BASE_LINE_HEIGHT]\n  );\n\n  const tagsStyles = useMemo(\n    () => ({\n      // ‚úÖ –£–õ–£–ß–®–ï–ù–ò–ï: –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏\n      p: { \n        marginTop: 12, \n        marginBottom: 12, \n        lineHeight: Math.round(BASE_FONT_SIZE * 1.6), // –ú–µ–∂—Å—Ç—Ä–æ—á–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª 1.6\n      },\n      strong: { fontWeight: \"700\" }, // ‚úÖ –ë–æ–ª–µ–µ –∂–∏—Ä–Ω—ã–π –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è\n      em: { fontStyle: \"italic\", color: \"#4a5568\" }, // ‚úÖ –ù–µ–º–Ω–æ–≥–æ –¥—Ä—É–≥–æ–π —Ü–≤–µ—Ç –¥–ª—è –∫—É—Ä—Å–∏–≤–∞\n\n      // ‚úÖ –£–õ–£–ß–®–ï–ù–ò–ï: –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –∏–µ—Ä–∞—Ä—Ö–∏–µ–π\n      h1: { \n        fontSize: BASE_FONT_SIZE + 12, // ~28-29px\n        lineHeight: Math.round((BASE_FONT_SIZE + 12) * 1.3), \n        fontWeight: \"700\", \n        marginTop: DESIGN_TOKENS.spacing.xxs4,\n        marginBottom: DESIGN_TOKENS.spacing.lg,\n        color: \"#1a202c\", // ‚úÖ –ë–æ–ª–µ–µ —Ç–µ–º–Ω—ã–π —Ü–≤–µ—Ç\n      },\n      h2: { \n        fontSize: BASE_FONT_SIZE + 8, // ~24-25px\n        lineHeight: Math.round((BASE_FONT_SIZE + 8) * 1.34), \n        fontWeight: \"700\", \n        marginTop: DESIGN_TOKENS.spacing.xxs0,\n        marginBottom: 12,\n        color: \"#1a202c\",\n      },\n      h3: { \n        fontSize: BASE_FONT_SIZE + 4, // ~20-21px\n        lineHeight: Math.round((BASE_FONT_SIZE + 4) * 1.38), \n        fontWeight: \"700\", \n        marginTop: 18,\n        marginBottom: DESIGN_TOKENS.spacing.sm,\n        color: \"#2d3748\",\n      },\n\n      // ‚úÖ –£–õ–£–ß–®–ï–ù–ò–ï: –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏\n      ul: { \n        marginVertical: 12, \n        paddingLeft: DESIGN_TOKENS.spacing.xxs4, // ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø\n      },\n      ol: {\n        marginVertical: 12,\n        paddingLeft: DESIGN_TOKENS.spacing.xxs4,\n      },\n      li: { \n        marginVertical: DESIGN_TOKENS.spacing.xs, // ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏\n        lineHeight: Math.round(BASE_FONT_SIZE * 1.6),\n      },\n\n      figure: {\n        margin: 0,\n        padding: 0,\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        display: \"flex\",\n        flexDirection: \"column\",\n      },\n      figcaption: {\n        textAlign: \"center\",\n        fontSize: BASE_FONT_SIZE - 2,\n        opacity: 0.75,\n        marginTop: DESIGN_TOKENS.spacing.xs,      // –ù–ï –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî –Ω–µ –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ñ–æ—Ç–æ\n        lineHeight: Math.round((BASE_FONT_SIZE - 2) * 1.4),\n      },\n\n      img: {\n        maxWidth: \"100%\",\n        width: \"100%\",\n        height: \"auto\",\n        borderRadius: 12,\n        marginVertical: 12,\n        display: \"block\",\n        alignSelf: \"stretch\",\n        boxShadow: Platform.OS === \"web\" ? \"0 2px 8px rgba(0,0,0,0.05)\" : undefined,\n      },\n\n      iframe: {\n        width: \"100%\",\n        height: Math.round(contentWidth * 0.5625),\n        display: \"block\",\n        borderRadius: 12,\n        overflow: \"hidden\",\n        marginVertical: 14,\n      },\n    }),\n    [BASE_FONT_SIZE, BASE_LINE_HEIGHT, contentWidth]\n  );\n\n  const customHTMLElementModels = useMemo(\n    () => (iframeModel ? { iframe: iframeModel } : undefined),\n    [iframeModel]\n  );\n\n  const handleLinkPress = (_: any, href?: string) => {\n    if (!href) return;\n    if (/^https?:\\/\\//i.test(href)) {\n      Linking.openURL(href).catch(() => {});\n    } else if (href.startsWith(\"/\") && Platform.OS === \"web\") {\n      window.location.assign(href);\n    }\n  };\n\n  useEffect(() => {\n    if (Platform.OS !== \"web\") return;\n    if (document.getElementById(WEB_RICH_TEXT_STYLES_ID)) return;\n    const style = document.createElement(\"style\");\n    style.id = WEB_RICH_TEXT_STYLES_ID;\n    style.textContent = WEB_RICH_TEXT_STYLES;\n    document.head.appendChild(style);\n  }, []);\n\n  // –û–±—Ä–∞–±–æ—Ç–∫–∞ Instagram iframe'–æ–≤, –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –Ω–∞–ø—Ä—è–º—É—é –≤ HTML\n  useEffect(() => {\n    if (Platform.OS !== \"web\") return;\n\n    let processing = false;\n    let timeoutId: ReturnType<typeof setTimeout> | null = null;\n\n    const processInstagramEmbeds = () => {\n      // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã\n      if (processing) return;\n      processing = true;\n\n      try {\n        const richTextContainer = document.querySelector(`.${WEB_RICH_TEXT_CLASS}`);\n        if (!richTextContainer) {\n          processing = false;\n          return;\n        }\n\n        // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ iframe'—ã —Å Instagram, –∫–æ—Ç–æ—Ä—ã–µ –µ—â—ë –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã\n        const instagramIframes = richTextContainer.querySelectorAll(\n          'iframe[src*=\"instagram.com\"]:not(.instagram-processed), iframe.ql-video[src*=\"instagram.com\"]:not(.instagram-processed)'\n        );\n\n        instagramIframes.forEach((iframe) => {\n          // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –æ–±—ë—Ä–Ω—É—Ç –ª–∏ —É–∂–µ\n          if (iframe.parentElement?.classList.contains('instagram-wrapper')) {\n            iframe.classList.add('instagram-processed');\n            return;\n          }\n\n          // –°–æ–∑–¥–∞—ë–º –æ–±—ë—Ä—Ç–∫—É\n          const wrapper = document.createElement('div');\n          wrapper.className = 'instagram-wrapper';\n          \n          // –ü–µ—Ä–µ–º–µ—â–∞–µ–º iframe –≤ –æ–±—ë—Ä—Ç–∫—É\n          iframe.parentNode?.insertBefore(wrapper, iframe);\n          wrapper.appendChild(iframe);\n          \n          // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å—ã –∫ iframe\n          iframe.classList.add('instagram-embed', 'instagram-processed');\n        });\n\n        // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º blockquote.instagram-media (–µ—Å–ª–∏ –µ—Å—Ç—å)\n        const instagramBlockquotes = richTextContainer.querySelectorAll(\n          'blockquote.instagram-media:not(.instagram-processed)'\n        );\n\n        instagramBlockquotes.forEach((blockquote) => {\n          // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ —É –Ω–µ–≥–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏\n          blockquote.classList.add('instagram-wrapper', 'instagram-processed');\n        });\n      } catch (error) {\n        // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏\n        if (__DEV__) {\n          console.warn('[StableContent] Error processing Instagram embeds:', error);\n        }\n      } finally {\n        processing = false;\n      }\n    };\n\n    // Debounced –≤–µ—Ä—Å–∏—è –¥–ª—è MutationObserver\n    const debouncedProcess = () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n      timeoutId = setTimeout(() => {\n        processInstagramEmbeds();\n        timeoutId = null;\n      }, 300);\n    };\n\n    // –í—ã–ø–æ–ª–Ω—è–µ–º —Å—Ä–∞–∑—É\n    processInstagramEmbeds();\n\n    // –ò—Å–ø–æ–ª—å–∑—É–µ–º MutationObserver –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö embed'–æ–≤\n    // –ù–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –Ω–µ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö\n    const observer = new MutationObserver((mutations) => {\n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –Ω–æ–≤—ã–µ iframe'—ã\n      const hasNewIframes = mutations.some((mutation) => {\n        return Array.from(mutation.addedNodes).some((node) => {\n          if (node.nodeType === Node.ELEMENT_NODE) {\n            const el = node as Element;\n            return (\n              el.tagName === 'IFRAME' && \n              (el.getAttribute('src')?.includes('instagram.com') || \n               el.classList.contains('ql-video'))\n            ) || \n            el.querySelector?.('iframe[src*=\"instagram.com\"]');\n          }\n          return false;\n        });\n      });\n\n      if (hasNewIframes) {\n        debouncedProcess();\n      }\n    });\n\n    const richTextContainer = document.querySelector(`.${WEB_RICH_TEXT_CLASS}`);\n    if (richTextContainer) {\n      observer.observe(richTextContainer, {\n        childList: true,\n        subtree: true,\n      });\n    }\n\n    // –¢–∞–∫–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ—Å–ª–µ –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ (–¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö embed'–æ–≤)\n    const initialTimeoutId = setTimeout(processInstagramEmbeds, 1000);\n\n    return () => {\n      observer.disconnect();\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n      clearTimeout(initialTimeoutId);\n    };\n  }, [prepared]);\n\n  if (Platform.OS === \"web\") {\n    return (\n      <div\n        className={WEB_RICH_TEXT_CLASS}\n        dangerouslySetInnerHTML={{ __html: prepared }}\n      />\n    );\n  }\n\n  return (\n    <View style={styles.htmlWrapper}>\n      <Suspense fallback={null}>\n        <LazyRenderHTML\n          key={prepared.length}\n          source={{ html: prepared }}\n          contentWidth={contentWidth}\n          {...(customHTMLElementModels ? { customHTMLElementModels } : {})}\n          renderers={renderers as any}\n          defaultTextProps={{ selectable: Platform.OS !== \"web\" }}\n          onLinkPress={handleLinkPress}\n          baseStyle={baseStyle as any}\n          tagsStyles={tagsStyles as any}\n          ignoredDomTags={[\"script\", \"style\"]}\n        />\n      </Suspense>\n    </View>\n  );\n});\n\nexport default StableContent;\n\nconst styles = StyleSheet.create({\n  htmlWrapper: {\n    flexDirection: \"column\",\n    width: \"100%\",\n    alignSelf: \"center\",\n  },\n  ytStub: {\n    marginVertical: DESIGN_TOKENS.spacing.sm,\n    aspectRatio: 16 / 9,\n    backgroundColor: \"#eee\",\n    borderRadius: 12,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  ytStubText: {\n    color: \"#111\",\n    fontSize: DESIGN_TOKENS.typography.sizes.sm,\n  },\n  instagramEmbedWrapper: {\n    marginVertical: 14,\n    width: \"100%\",\n    maxWidth: \"100%\",\n    alignSelf: \"stretch\",\n    overflow: \"hidden\",\n  },\n  instagramEmbedWrapperWeb: {\n    width: \"100vw\",\n    maxWidth: \"100vw\",\n    marginLeft: \"calc(50% - 50vw)\",\n    marginRight: \"calc(50% - 50vw)\",\n  },\n});\n","import React, { useEffect, useMemo, useState } from \"react\";\nimport {\n  View,\n  Platform,\n  useWindowDimensions,\n  StyleSheet,\n  Image as RNImage,\n  Text,\n} from \"react-native\";\nimport { CustomRendererProps } from \"react-native-render-html\";\nimport { Image as ExpoImage } from \"expo-image\";\n\ninterface CustomImageRendererProps extends CustomRendererProps<any> {\n  contentWidth: number;\n  tnode: any;\n}\n\nconst MAX_WIDTH = 800;\nconst MAX_IMAGE_HEIGHT = 480;\nconst H_PADDING = 16;\n\n/* ‚îÄ helpers ‚îÄ */\nconst pickSrc = (tnode: any) => {\n  const a = tnode?.attributes || {};\n  const raw = a.src || a[\"data-src\"] || \"\";\n  if (!raw && a.srcset) {\n    const first = String(a.srcset).split(\",\")[0]?.trim().split(/\\s+/)[0];\n    return first || \"\";\n  }\n  return raw;\n};\n\nconst isPrivateHost = (host: string) =>\n  host === \"localhost\" ||\n  host.endsWith(\".local\") ||\n  /^127\\.|^10\\.|^192\\.168\\.|^172\\.(1[6-9]|2\\d|3[0-1])\\./.test(host);\n\nconst normalizeUrl = (url: string) => {\n  let u = (url || \"\").trim();\n  if (!u) return u;\n  if (u.startsWith(\"//\")) {\n    const proto = typeof window !== \"undefined\" ? window.location.protocol : \"https:\";\n    u = `${proto}${u}`;\n  }\n  try {\n    const parsed = new URL(u, typeof window !== \"undefined\" ? window.location.href : \"http://localhost\");\n    if (!isPrivateHost(parsed.hostname) && parsed.protocol === \"http:\") {\n      parsed.protocol = \"https:\";\n      return parsed.toString();\n    }\n    return parsed.toString();\n  } catch { return u; }\n};\n\n/* ‚îÄ component ‚îÄ */\nconst CustomImageRenderer = ({ tnode, contentWidth }: CustomImageRendererProps) => {\n  const raw = pickSrc(tnode);\n  if (!raw) return null;\n\n  const src = useMemo(() => normalizeUrl(raw), [raw]);\n\n  const attW = tnode.attributes?.width ? Number(tnode.attributes.width) : undefined;\n  const attH = tnode.attributes?.height ? Number(tnode.attributes.height) : undefined;\n\n  // üîé –µ—Å–ª–∏ —ç—Ç–æ –º–µ–ª–∫–∞—è –∏–∫–æ–Ω–∫–∞ ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º (–¥–∞—ë—Ç ¬´–±–µ–ª—ã–µ –∫–≤–∞–¥—Ä–∞—Ç—ã¬ª –∏ –ª–æ–º–∞–µ—Ç —Ç–µ–∫—Å—Ç—ã)\n  if ((attW && attW <= 32) || (attH && attH <= 32)) {\n    return null;\n  }\n\n  const attrAR = attW && attH && attH > 0 ? attW / attH : null;\n\n  const { width: winW } = useWindowDimensions();\n  const maxFrameWidth = useMemo(\n    () => Math.min(contentWidth || winW || MAX_WIDTH, MAX_WIDTH, (winW || MAX_WIDTH) - H_PADDING * 2),\n    [contentWidth, winW]\n  );\n\n  const [ar, setAr] = useState<number | null>(attrAR ?? null);\n  const [err, setErr] = useState(false);\n  const [imageLoaded, setImageLoaded] = useState(false);\n\n  useEffect(() => {\n    let mounted = true;\n\n    if (attrAR) { setAr(attrAR); return () => { mounted = false; }; }\n\n    if (Platform.OS === \"web\") {\n      const img = new (window as any).Image();\n      (img as any).decoding = \"async\";\n      (img as any).loading = \"lazy\";\n      img.onload = () => { if (mounted && img.naturalWidth && img.naturalHeight) setAr(img.naturalWidth / img.naturalHeight); };\n      img.onerror = () => { if (mounted) setAr(null); };\n      img.src = src;\n      return () => { mounted = false; };\n    }\n\n    RNImage.getSize(\n      src,\n      (w, h) => { if (mounted && h > 0) setAr(w / h); },\n      () => { if (mounted) setAr(null); }\n    );\n\n    return () => { mounted = false; };\n  }, [src, attrAR]);\n\n  const aspect = ar && ar > 0 ? ar : 16 / 9;\n\n  const { boxWidth, boxHeight } = useMemo(() => {\n    const heightIfFullWidth = maxFrameWidth / aspect;\n    if (heightIfFullWidth > MAX_IMAGE_HEIGHT) {\n      return { boxWidth: MAX_IMAGE_HEIGHT * aspect, boxHeight: MAX_IMAGE_HEIGHT };\n    }\n    return { boxWidth: maxFrameWidth, boxHeight: heightIfFullWidth };\n  }, [maxFrameWidth, aspect]);\n\n  // ‚úÖ FIX: –£–±—Ä–∞–ª–∏ fetchpriority –∏–∑ webAttrs, —Ç–∞–∫ –∫–∞–∫ ExpoImage –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç—Ç–æ—Ç –ø—Ä–æ–ø\n  // –î–ª—è –≤–µ–±–∞ ExpoImage –∏—Å–ø–æ–ª—å–∑—É–µ—Ç priority prop –≤–º–µ—Å—Ç–æ fetchpriority\n  const webAttrs =\n    Platform.OS === \"web\"\n      ? ({\n        loading: \"lazy\",\n        decoding: \"async\",\n        referrerPolicy: \"no-referrer\",\n        sizes: `(min-width: ${MAX_WIDTH}px) ${MAX_WIDTH}px, 100vw`,\n      } as any)\n      : {};\n\n  return (\n    <View style={[styles.container, { width: boxWidth }]}>\n      <View style={{ width: boxWidth, height: boxHeight, position: 'relative' }}>\n        {!imageLoaded && !err && (\n          <View pointerEvents=\"none\" style={[StyleSheet.absoluteFillObject, styles.skeleton]}>\n            <View style={[styles.placeholder, { width: boxWidth, height: boxHeight }]} />\n          </View>\n        )}\n\n        <ExpoImage\n          source={{ uri: src }}\n          style={[StyleSheet.absoluteFillObject, styles.image]}\n          contentFit=\"contain\"\n          transition={200}\n          cachePolicy=\"disk-memory\"\n          priority={Platform.OS === 'web' ? 'low' : 'normal'}\n          recyclingKey={src}\n          onLoad={() => { setImageLoaded(true); }}\n          onError={() => { setErr(true); }}\n          {...webAttrs}\n        />\n\n        {err && (\n          <View style={[StyleSheet.absoluteFillObject, styles.errorContainer]}>\n            <Text style={styles.errorText}>üì∑</Text>\n            <Text style={styles.errorMessage}>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å</Text>\n          </View>\n        )}\n      </View>\n    </View>\n  );\n};\n\nexport default React.memo(CustomImageRenderer);\n\n/* ‚îÄ styles ‚îÄ */\nconst styles = StyleSheet.create({\n  container: {\n    marginVertical: 16,\n    alignItems: \"center\",\n    paddingHorizontal: H_PADDING,\n    ...Platform.select({\n      web: {\n        contain: 'layout style paint',\n      } as any,\n    }),\n  },\n  image: {\n    borderRadius: 8,\n    ...(Platform.OS === \"web\"\n      ? ({ transition: \"opacity 0.3s ease-in-out\" } as any)\n      : null),\n  },\n  skeleton: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: \"#f5f5f5\",\n    borderRadius: 8,\n  },\n  placeholder: {\n    backgroundColor: '#e5e5e5',\n    borderRadius: 8,\n  },\n  errorContainer: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: \"transparent\",\n  },\n  errorText: { fontSize: 32, marginBottom: 8 },\n  errorMessage: { fontSize: 14, color: \"#6c757d\", textAlign: \"center\" },\n});\n",""],"x_facebook_sources":[[{"names":["<global>","TravelDescription","useMemo$argument_0","useEffect$argument_0","InteractionManager.runAfterInteractions$argument_0","setTimeout$argument_0","<anonymous>","Array.from.map$argument_0","htmlContent.replace$argument_1","htmlContent.replace.replace$argument_1","handler"],"mappings":"AAA;4DC+B;+BCQ,8BD;iCCC;KDM;gCCG;KDI;cEK;iECK;aDE;mCEG;aFE;mBGE;aHI;mCEG;aFE;mBGC;aHG;KFE;6CCG;oEKM,SL;YMS;aNqB;6BOG;WPyD;KDG;cEG;eGS;SHE;KFC;cEG;wBOG;SPqB;eGG;SHE;KFC;CDyD"}],[{"names":["<global>","React.lazy$argument_0","import.then$argument_0","hasIframe","isYouTube","isInstagram","extractFirstImgSrc","stripDangerousTags","normalizeImgTags","html.replace$argument_1","reduce$argument_0","replaceYouTubeIframes","appendClass","attrs.replace$argument_1","stripTags","decodeEntities","encodeEntities","sliceText","truncateInstagramCaptions","prepareHtml","memo$argument_0","useMemo$argument_0","useEffect$argument_0","<anonymous>","import.then._catch$argument_0","onClick","img","iframe","open","Linking.openURL._catch$argument_0","handleLinkPress","processInstagramEmbeds","instagramIframes.forEach$argument_0","instagramBlockquotes.forEach$argument_0","debouncedProcess","setTimeout$argument_0","MutationObserver$argument_0","mutations.some$argument_0","Array.from.some$argument_0"],"mappings":"AAA;kCCM;0CCC,oCD,CD;iCCE;oDCC,oCD,CD;kBGY,6CH;kBIC,oDJ;oBKC,4CL;2BME;CNG;2BOE;0FPC;yBQE;kCCC;MCc,yED;GDS,CR;8BWE;gEFC;GEiB,CX;oBYE;6CCG,6DD;CZG;kBcE,gDd;uBeE;6BfQ;uBgBE;2BhBM;kBiBE;CjBS;kCkBE;qDTC;GSuB;ClBC;oBmBE;CnBI;yDoBuL;2BCE,uBD;YEM;WCU,qCD;GFC;YEE;cpBI,kDoB;eEC,0BF;WCE;KDE;GFC;YEE;oBGE;KHuB;WCE,2DD;GFC;4BCE;WKE;OLQ;cMC;yBCyB,iCC,QD,CD;ONa;GDE;ICI;MDI;ICK;MDqF;ICK,yDD;0BUI;kCDG,QC;GVI;YEE;GFO;YEG;mCSM;iCCiB;SDiB;qCEO;SFG;KTS;6BYG;6BCI;ODG;KZC;0CcO;2CCE;oDCC;SDW;ODC;KdK;WCa;KDM;GFC;CpB6B"}],[{"names":["<global>","pickSrc","isPrivateHost","normalizeUrl","CustomImageRenderer","useMemo$argument_0","useEffect$argument_0","<anonymous>","img.onload","img.onerror","RNImage.getSize$argument_1","RNImage.getSize$argument_2","ExpoImage.props.onLoad","ExpoImage.props.onError"],"mappings":"AAA;gBCsB;CDQ;sBEE;mEFG;qBGE;CHe;4BIG;sBCI,uBD;ICc,iGD;YEQ;wCCG,0BD;mBEM,4GF;oBGC,mCH;aCE,0BD;MIK,iDJ;MKC,mCL;WCG,0BD;GFC;0CCI;GDM;kBQ+B,+BR;mBSC,uBT;CJa"}],null],"names":["_react","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_interopRequireWildcard","_r","d","_ScrollView","_interopRequireDefault","_StyleSheet","_Text","_useWindowDimensions","_View","_expoImage","_StableContent","_designSystem","_jsxRuntime","TravelDescription","htmlContent","title","noBox","width","height","useWindowDimensions","pageHeight","useMemo","Math","round","contentWidth","maxContent","min","padding","max","isEmptyHtml","String","trim","replace","length","canParseHtml","setCanParseHtml","useState","useEffect","cancelled","timeoutId","setTimeout","clearTimeout","preparedHtml","lcpSrc","imgRegex","Array","from","matchAll","map","m","lcpCandidate","idx","tag","srcMatch","match","src","idMatch","vid","wMatch","hMatch","ww","parseInt","undefined","hh","wh","test","styleMatch","style","styleWithHeightAuto","includes","isLcp","patched","link","document","createElement","rel","as","href","crossOrigin","head","appendChild","removeChild","handler","root","target","closest","getAttribute","iframe","allow","allowFullscreen","position","inset","innerHTML","addEventListener","passive","removeEventListener","inner","jsxs","styles","pointerEvents","children","jsx","Image","source","require","stamp","accessibilityIgnoresInvertColors","accessible","cachePolicy","priority","contentFit","transition","placeholder","html","wrapper","testID","scrollArea","contentContainerStyle","scrollContent","scrollEventThrottle","showsVerticalScrollIndicator","keyboardShouldPersistTaps","overScrollMode","fixedHeightBlock","_e","memo","StyleSheet","create","alignSelf","maxWidth","paddingHorizontal","paddingTop","paddingBottom","backgroundColor","textAlign","color","fontSize","DESIGN_TOKENS","typography","sizes","md","paddingVertical","spacing","xxs","fontFamily","borderWidth","borderColor","borderRadius","overflow","shadowColor","shadowOpacity","shadowRadius","shadowOffset","elevation","lg","top","right","opacity","zIndex","_sanitizeRichText","_CustomImageRenderer","LazyInstagram","React","lazy","paths","then","hasIframe","isYouTube","isInstagram","extractFirstImgSrc","stripDangerousTags","normalizeImgTags","w","h","ensured","reduce","acc","rule","out","replaceYouTubeIframes","full","id","appendClass","attrs","className","_","current","stripTags","value","decodeEntities","encodeEntities","sliceText","text","limit","chars","truncated","slice","join","trimEnd","truncateInstagramCaptions","plain","startsWith","handleMatch","nextInner","handleHtml","restHtml","handlePlain","restPlain","remaining","prepareHtml","safe","sanitizeRichText","normalized","WEB_RICH_TEXT_CLASS","WEB_RICH_TEXT_STYLES_ID","WEB_RICH_TEXT_STYLES","StableContent","iframeModel","setIframeModel","prepared","BASE_LINE_HEIGHT","first","catch","onClick","assign","border","img","props","TDefaultRenderer","rest","tnode","attributes","url","split","wrapperStyle","instagramEmbedWrapper","instagramEmbedWrapperWeb","Suspense","fallback","lineHeight","p","marginTop","marginBottom","strong","fontWeight","em","fontStyle","h1","xxs4","h2","xxs0","h3","sm","ul","marginVertical","paddingLeft","ol","li","xs","figure","margin","alignItems","justifyContent","display","flexDirection","figcaption","boxShadow","getElementById","textContent","processing","processInstagramEmbeds","richTextContainer","querySelector","querySelectorAll","forEach","parentElement","classList","contains","add","parentNode","insertBefore","blockquote","error","observer","MutationObserver","mutations","some","mutation","addedNodes","node","nodeType","Node","ELEMENT_NODE","el","tagName","observe","childList","subtree","initialTimeoutId","disconnect","dangerouslySetInnerHTML","__html","htmlWrapper","ytStub","aspectRatio","ytStubText","marginLeft","marginRight","MAX_WIDTH","pickSrc","a","raw","srcset","normalizeUrl","u","window","location","protocol","parsed","URL","host","hostname","endsWith","toString","CustomImageRenderer","attW","Number","attH","attrAR","winW","maxFrameWidth","ar","setAr","err","setErr","imageLoaded","setImageLoaded","mounted","decoding","loading","onload","naturalWidth","naturalHeight","onerror","aspect","boxWidth","boxHeight","heightIfFullWidth","webAttrs","referrerPolicy","container","absoluteFillObject","skeleton","uri","image","recyclingKey","onLoad","onError","errorContainer","errorText","errorMessage","contain"],"mappings":"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","debugId":"2e360aa7-57d7-49c3-92d3-3e06f23846b8"}