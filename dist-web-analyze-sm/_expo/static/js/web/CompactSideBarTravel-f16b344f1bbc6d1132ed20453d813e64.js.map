{"version":3,"sources":["/components/travel/CompactSideBarTravel.tsx","/components/WeatherWidget.tsx"],"sourcesContent":["// components/travel/CompactSideBarTravel.tsx\nimport React, { memo, Suspense, useCallback, useMemo, useState, lazy } from \"react\";\nimport {\n  View,\n  StyleSheet,\n  Linking,\n  Pressable,\n  ScrollView,\n  Platform,\n  useWindowDimensions,\n  ActivityIndicator,\n  DeviceEventEmitter,\n  Alert,\n} from \"react-native\";\nimport { Image as ExpoImage } from \"expo-image\";\nimport { MaterialIcons, MaterialCommunityIcons, Feather } from \"@expo/vector-icons\";\nimport { Text } from \"react-native-paper\";\nimport type { Travel } from \"@/src/types/types\";\nimport { buildTravelSectionLinks, type TravelSectionLink } from \"@/components/travel/sectionLinks\";\nimport WeatherWidget from \"@/components/WeatherWidget\";\n// ✅ УЛУЧШЕНИЕ: Импорт утилит для оптимизации изображений\nimport { optimizeImageUrl, buildVersionedImageUrl, getOptimalImageSize } from \"@/utils/imageOptimization\";\nimport type { BookSettings } from \"@/components/export/BookSettingsModal\";\nimport { useSingleTravelExport } from \"@/components/travel/hooks/useSingleTravelExport\";\nimport { DESIGN_TOKENS } from '@/constants/designSystem';\n\nconst Fallback = () => (\n  <View style={styles.fallback}>\n    <ActivityIndicator size=\"small\" color=\"#6B4F4F\" />\n  </View>\n);\n\nconst BookSettingsModalLazy = lazy(() => import(\"@/components/export/BookSettingsModal\"));\n\nconst openUrl = (url: string) => {\n  if (Platform.OS === \"web\") {\n    window.open(url, \"_blank\", \"noopener\");\n  } else {\n    Linking.openURL(url);\n  }\n};\n\n// универсальный эмиттер \"открой секцию\"\nconst emitOpenSection = (key: string) => {\n  if (Platform.OS === \"web\") {\n    // @ts-ignore\n    window.dispatchEvent(new CustomEvent(\"open-section\", { detail: { key } }));\n  } else {\n    DeviceEventEmitter.emit(\"open-section\", key);\n  }\n};\n\ntype SideBarProps = {\n  refs: Record<string, React.RefObject<View>>;\n  travel: Travel;\n  isMobile: boolean;\n  onNavigate: (key: keyof SideBarProps[\"refs\"]) => void;\n  closeMenu: () => void;\n  isSuperuser: boolean;\n  storedUserId?: string | null;\n  activeSection?: string; // ✅ УЛУЧШЕНИЕ: Активная секция при скролле\n  links?: TravelSectionLink[];\n};\n\nfunction CompactSideBarTravel({\n                                refs,\n                                travel,\n                                isMobile,\n                                onNavigate,\n                                closeMenu,\n                                isSuperuser,\n                                storedUserId,\n                                activeSection: externalActiveSection, // ✅ УЛУЧШЕНИЕ: Внешняя активная секция\n                                links,\n}: SideBarProps) {\n  const { width } = useWindowDimensions();\n  const isTablet = width >= 768 && width < 1024;\n  const [active, setActive] = useState<string>(\"\");\n  const [showSettingsModal, setShowSettingsModal] = useState(false);\n  const {\n    pdfExport,\n    lastSettings,\n    settingsSummary,\n    handleOpenPrintBookWithSettings,\n  } = useSingleTravelExport(travel);\n\n  // ✅ УЛУЧШЕНИЕ: Используем внешнюю активную секцию, если она передана, иначе локальную\n  const currentActive = externalActiveSection !== undefined ? externalActiveSection : active;\n\n  const setActiveNavigateAndOpen = useCallback(\n    (key: keyof typeof refs) => {\n      const k = String(key);\n      setActive(k);\n      onNavigate(key); // скролл\n      emitOpenSection(k); // раскрыть секцию\n      if (isMobile) closeMenu();\n    },\n    [onNavigate, isMobile, closeMenu]\n  );\n\n  // Надёжная проверка права редактирования (типы могут отличаться)\n  const canEdit = useMemo(() => {\n    const a = String(storedUserId ?? \"\");\n    const b = String((travel as any).userIds ?? (travel as any).userId ?? \"\");\n    return !!(isSuperuser || (a && b && a === b));\n  }, [isSuperuser, storedUserId, travel]);\n\n  // ── Безопасные текстовые поля (ничего \"null\"/\"undefined\" не рендерим) ──\n  const userName = (travel as any).userName || \"\";\n  const countryName = (travel as any).countryName || \"\";\n  const monthName = (travel as any).monthName || \"\"; // напр. \"Май\"\n  const yearStr =\n    travel && (travel as any).year != null ? String((travel as any).year) : \"\";\n  const numberDays =\n    travel && (travel as any).number_days != null\n      ? Number((travel as any).number_days)\n      : null;\n  const daysText =\n    numberDays != null && Number.isFinite(numberDays)\n      ? `• ${numberDays} дн.`\n      : \"\";\n\n  const titleLine = [userName, countryName].filter(Boolean).join(\" | \");\n  const whenLine = [monthName, yearStr].filter(Boolean).join(\" \");\n\n  const viewsSafe =\n    (travel as any).countUnicIpView != null\n      ? Number((travel as any).countUnicIpView)\n      : null;\n\n  const authorUserId = useMemo(() => {\n    const ownerId = (travel as any).userIds ?? (travel as any).userId ?? (travel as any).user?.id ?? null;\n    if (ownerId == null) return null;\n    const v = String(ownerId).trim();\n    return v ? v : null;\n  }, [travel]);\n\n  const handleOpenAuthorProfile = useCallback(() => {\n    if (!authorUserId) return;\n    openUrl(`/user/${authorUserId}`);\n  }, [authorUserId]);\n\n  // ✅ УЛУЧШЕНИЕ: Оптимизация URL аватара\n  const avatarUri = useMemo(() => {\n    const rawUri = (travel as any).user?.avatar;\n    if (!rawUri) return \"\";\n    \n    const versionedUrl = buildVersionedImageUrl(\n      rawUri,\n      (travel as any).updated_at,\n      travel.id\n    );\n    \n    // Оптимальный размер для аватара (72x72)\n    const avatarSize = 72;\n    const optimalSize = getOptimalImageSize(avatarSize, avatarSize);\n    \n    return optimizeImageUrl(versionedUrl, {\n      width: optimalSize.width,\n      height: optimalSize.height,\n      format: 'webp',\n      quality: 85,\n      fit: 'cover',\n    }) || versionedUrl;\n  }, [(travel as any).user?.avatar, (travel as any).updated_at, travel.id]);\n\n  // Извлекаем координаты из travelAddress\n  const firstCoord = useMemo(() => {\n    if (travel.travelAddress && Array.isArray(travel.travelAddress) && travel.travelAddress.length > 0) {\n      const first = travel.travelAddress[0] as any;\n      return first?.coord || first?.coordsMeTravel?.[0] || null;\n    }\n    return null;\n  }, [travel.travelAddress]);\n\n  // Извлекаем категории\n  const categories = useMemo(() => {\n    if (travel.travelAddress && Array.isArray(travel.travelAddress)) {\n      const cats = new Set<string>();\n      travel.travelAddress.forEach((addr: any) => {\n        if (addr?.categoryName) {\n          // ✅ ИСПРАВЛЕНИЕ: Обрабатываем случай, когда categoryName может быть объектом с {id, name}\n          let categoryNameStr: string;\n          if (typeof addr.categoryName === 'string') {\n            categoryNameStr = addr.categoryName;\n          } else if (addr.categoryName && typeof addr.categoryName === 'object' && 'name' in addr.categoryName) {\n            categoryNameStr = String(addr.categoryName.name || '');\n          } else {\n            categoryNameStr = String(addr.categoryName || '');\n          }\n          \n          const parts = categoryNameStr.split(',').map(s => s.trim()).filter(Boolean);\n          parts.forEach(cat => cats.add(cat));\n        }\n      });\n      return Array.from(cats);\n    }\n    return [];\n  }, [travel.travelAddress]);\n\n  // ✅ УЛУЧШЕНИЕ: Группировка пунктов меню по категориям\n  const navLinks = useMemo(\n    () => (Array.isArray(links) && links.length ? links : buildTravelSectionLinks(travel)),\n    [links, travel],\n  );\n\n  const handleUserTravels = () =>\n    openUrl(`/?user_id=${(travel as any).userIds ?? (travel as any).userId}`);\n  const handleEdit = () => canEdit && openUrl(`/travel/${travel.id}`);\n\n  const handleOpenExport = useCallback(() => {\n    if (Platform.OS !== 'web') {\n      Alert.alert?.('Недоступно', 'Экспорт PDF доступен только в веб-версии');\n      return;\n    }\n    setShowSettingsModal(true);\n  }, []);\n\n  const handleSaveSettings = useCallback(\n    async (settings: BookSettings) => {\n      // \"Сохранить PDF\" переводим на новый HTML-поток печати (книга в новой вкладке + печать браузера)\n      await handleOpenPrintBookWithSettings(settings);\n      setShowSettingsModal(false);\n    },\n    [handleOpenPrintBookWithSettings]\n  );\n\n  const handlePreviewSettings = useCallback(\n    async (settings: BookSettings) => {\n      // Превью так же идёт через HTML-книгу\n      await handleOpenPrintBookWithSettings(settings);\n      setShowSettingsModal(false);\n    },\n    [handleOpenPrintBookWithSettings]\n  );\n  \n  return (\n    <View style={styles.root}>\n        <ScrollView\n        style={[\n          styles.menu,\n          { \n            width: Platform.OS === 'web' \n              ? (isMobile ? '100%' : isTablet ? 260 : 280)\n              : '100%', // Native-платформы — полная ширина\n          },\n        ]}\n        contentContainerStyle={{ \n          paddingBottom: isMobile ? 80 : 32,\n          paddingLeft: Platform.OS === 'web' ? 16 : 10, // ✅ UX: Отступ слева\n          paddingRight: Platform.OS === 'web' ? 8 : 10, // ✅ UX: Меньший отступ справа\n        }}\n        showsHorizontalScrollIndicator={false}\n      >\n        {isMobile && (\n          <View style={styles.closeTopBar}>\n            <Pressable\n              onPress={closeMenu}\n              style={({ pressed }) => [\n                styles.closeTopBtn,\n                pressed && styles.closeTopBtnPressed,\n              ]}\n              accessibilityRole=\"button\"\n              accessibilityLabel=\"Закрыть меню\"\n              hitSlop={8}\n            >\n              <MaterialIcons name=\"close\" size={20} color=\"#111827\" />\n            </Pressable>\n          </View>\n        )}\n        {/* ✅ РЕДИЗАЙН: Компактная карточка автора */}\n        <View style={styles.card}>\n          <View style={styles.cardRow}>\n            <View style={styles.avatarWrap}>\n              {avatarUri ? (\n                <ExpoImage\n                  source={{ uri: avatarUri }}\n                  style={styles.avatar}\n                  contentFit=\"cover\"\n                  cachePolicy=\"memory-disk\"\n                  priority=\"low\"\n                  transition={200}\n                  placeholder={require(\"@/assets/placeholder.webp\")}\n                  // ✅ УЛУЧШЕНИЕ: Lazy loading для web\n                  {...(Platform.OS === \"web\"\n                    ? ({ loading: \"lazy\" } as any)\n                    : {})}\n                />\n              ) : (\n                <MaterialIcons name=\"image\" size={60} color=\"#ccc\" />\n              )}\n              {/* ✅ РЕДИЗАЙН: Компактное отображение просмотров */}\n              {viewsSafe != null && Number.isFinite(viewsSafe) && (\n                <View style={styles.viewsRow}>\n                  {/* ✅ УЛУЧШЕНИЕ: Нейтральный серый */}\n                  <Feather name=\"eye\" size={12} color=\"#6b7280\" />\n                  <Text style={styles.viewsTxt}>\n                    {new Intl.NumberFormat(\"ru-RU\").format(viewsSafe)}\n                  </Text>\n                </View>\n              )}\n            </View>\n\n            <View style={{ flex: 1 }}>\n              <View style={styles.userRow}>\n                {titleLine ? (\n                  <Pressable\n                    onPress={handleOpenAuthorProfile}\n                    disabled={!authorUserId}\n                    accessibilityRole={authorUserId ? 'button' : undefined}\n                    accessibilityLabel={authorUserId ? `Открыть профиль автора ${userName || 'Пользователь'}` : undefined}\n                    style={({ pressed }) => [styles.userNameWrap, pressed && authorUserId ? { opacity: 0.9 } : null]}\n                    {...Platform.select({ web: authorUserId ? { cursor: 'pointer' } : {} })}\n                  >\n                    <Text style={styles.userName} numberOfLines={1}>\n                      {titleLine}\n                    </Text>\n                  </Pressable>\n                ) : (\n                  <View />\n                )}\n                <View style={styles.actionsRow}>\n                  {canEdit && (\n                    <Pressable\n                      onPress={handleEdit}\n                      hitSlop={6}\n                      accessibilityRole=\"button\"\n                      accessibilityLabel=\"Редактировать путешествие\"\n                      style={({ pressed }) => [\n                        styles.actionBtn,\n                        pressed && styles.actionBtnPressed,\n                      ]}\n                    >\n                      <MaterialIcons name=\"edit\" size={18} color=\"#2F332E\" />\n                    </Pressable>\n                  )}\n\n                  {Platform.OS === 'web' && (\n                    <Pressable\n                      onPress={handleOpenExport}\n                      hitSlop={8}\n                      disabled={pdfExport.isGenerating}\n                      accessibilityRole=\"button\"\n                      accessibilityLabel=\"Экспорт в PDF\"\n                      style={({ pressed }) => [\n                        styles.actionBtn,\n                        styles.actionBtnPdf,\n                        pressed && !pdfExport.isGenerating ? styles.actionBtnPressed : null,\n                        pdfExport.isGenerating ? styles.actionBtnDisabled : null,\n                      ]}\n                    >\n                      {pdfExport.isGenerating ? (\n                        <ActivityIndicator size=\"small\" color=\"#b83a3a\" />\n                      ) : (\n                        <MaterialCommunityIcons name=\"file-pdf-box\" size={18} color=\"#b83a3a\" />\n                      )}\n                    </Pressable>\n                  )}\n                </View>\n              </View>\n\n              {/* ✅ РЕДИЗАЙН: Компактная ключевая информация */}\n              {whenLine && (\n                <View style={styles.keyInfoRow}>\n                  {/* ✅ УЛУЧШЕНИЕ: Нейтральный серый */}\n                  <MaterialIcons name=\"calendar-today\" size={14} color=\"#6b7280\" />\n                  <Text style={styles.userYear}>{whenLine}</Text>\n                </View>\n              )}\n\n              {daysText && (\n                <View style={styles.keyInfoRow}>\n                  {/* ✅ УЛУЧШЕНИЕ: Нейтральный серый */}\n                  <MaterialIcons name=\"schedule\" size={14} color=\"#6b7280\" />\n                  <Text style={styles.userDays}>{daysText}</Text>\n                </View>\n              )}\n            </View>\n          </View>\n\n          {/* Ключевая информация */}\n          <View style={styles.infoSection}>\n            {/* ✅ РЕДИЗАЙН: Компактная информация - убираем лишние элементы для максимальной компактности */}\n            {categories.length > 0 && (\n              <View style={styles.infoRow}>\n                {/* ✅ УЛУЧШЕНИЕ: Нейтральный серый */}\n                <MaterialIcons name=\"category\" size={14} color=\"#6b7280\" />\n                <View style={[styles.categoriesWrap, { marginLeft: DESIGN_TOKENS.spacing.xs, flex: 1 }]}>\n                  {categories.slice(0, 2).map((cat, idx) => (\n                    <View key={idx} style={styles.categoryTagWrapper}>\n                      <Text style={styles.categoryTag} numberOfLines={1}>\n                        {cat}\n                      </Text>\n                    </View>\n                  ))}\n                  {categories.length > 2 && (\n                    <Text style={styles.categoryMore}>+{categories.length - 2}</Text>\n                  )}\n                </View>\n              </View>\n            )}\n            \n            {/* Координаты и город показываем только если нет категорий или если места достаточно */}\n            {!categories.length && firstCoord && (\n              <Pressable\n                style={styles.infoRow}\n                onPress={() => {\n                  if (Platform.OS === \"web\") {\n                    navigator.clipboard?.writeText(firstCoord).then(() => {\n                      alert(\"Координаты скопированы!\");\n                    });\n                  }\n                }}\n                accessibilityRole=\"button\"\n                accessibilityLabel=\"Координаты\"\n              >\n                {/* ✅ УЛУЧШЕНИЕ: Нейтральный серый */}\n                <MaterialIcons name=\"place\" size={14} color=\"#6b7280\" />\n                <Text style={[styles.infoText, { marginLeft: DESIGN_TOKENS.spacing.xs, flex: 1 }]} numberOfLines={1}>\n                  {firstCoord}\n                </Text>\n                {Platform.OS === \"web\" && (\n                  <MaterialIcons name=\"content-copy\" size={12} color=\"#9ca3af\" style={{ marginLeft: DESIGN_TOKENS.spacing.xs }} />\n                )}\n              </Pressable>\n            )}\n          </View>\n        </View>\n\n        {/* ✅ УЛУЧШЕНИЕ: Группировка пунктов меню с разделителями */}\n        {navLinks.map(({ key, icon, label }, index) => {\n          // Определяем, нужно ли добавить разделитель перед пунктом\n          const shouldAddDivider = \n            (index > 0 && \n             // Разделитель между галереей/видео/описанием и рекомендациями/плюсами/минусами\n             ((key === \"recommendation\" || key === \"plus\") && \n              navLinks[index - 1]?.key !== \"description\" && \n              navLinks[index - 1]?.key !== \"recommendation\")) ||\n            // Разделитель перед навигацией (карта, координаты)\n            (key === \"map\" && index > 0) ||\n            // Разделитель перед \"Популярное\"\n            (key === \"popular\" && index > 0);\n\n          return (\n            <React.Fragment key={key}>\n              {shouldAddDivider && <View style={styles.linkDivider} />}\n              <Pressable\n                style={({ pressed }) => [\n                  styles.link,\n                  currentActive === key && styles.linkActive, // ✅ Используем currentActive\n                  pressed && styles.linkPressed,\n                ]}\n                onPress={() => setActiveNavigateAndOpen(key as keyof typeof refs)}\n                android_ripple={{ color: \"#E7DAC6\" }}\n                accessibilityRole=\"button\"\n                accessibilityLabel={label}\n                accessibilityState={{ selected: currentActive === key }}\n              >\n                {/* ✅ УЛУЧШЕНИЕ: Нейтральный темно-серый для активного */}\n                <MaterialIcons\n                  name={icon as any}\n                  size={Platform.select({\n                    default: 18, // Мобильные\n                    web: isTablet ? 20 : 18, // Планшеты и десктоп\n                  })}\n                  color={currentActive === key ? \"#1f2937\" : \"#2F332E\"}\n                />\n                <Text style={[\n                  styles.linkTxt, \n                  isTablet && { fontSize: DESIGN_TOKENS.typography.sizes.sm }, // Уменьшено с 15\n                  currentActive === key && styles.linkTxtActive,\n                ]}>\n                  {label}\n                </Text>\n              </Pressable>\n            </React.Fragment>\n          );\n        })}\n\n        {userName ? (\n          <Pressable\n            onPress={handleUserTravels}\n            accessibilityRole=\"link\"\n            accessibilityLabel={`Путешествия автора ${userName}`}\n          >\n            <Text style={styles.allTravels}>Путешествия {userName}</Text>\n          </Pressable>\n        ) : null}\n\n        <Suspense fallback={<Fallback />}>\n          <WeatherWidget points={travel.travelAddress as any} />\n        </Suspense>\n      </ScrollView>\n\n      {Platform.OS === \"web\" && (\n        <Suspense fallback={<Fallback />}>\n          <BookSettingsModalLazy\n            visible={showSettingsModal}\n            onClose={() => setShowSettingsModal(false)}\n            onSave={handleSaveSettings}\n            onPreview={handlePreviewSettings}\n            defaultSettings={lastSettings}\n            travelCount={1}\n            userName={travel.userName || undefined}\n            mode=\"preview\"\n          />\n        </Suspense>\n      )}\n\n      {isMobile && (\n        <View style={styles.closeBar}>\n          <Pressable\n            onPress={closeMenu}\n            style={({ pressed }) => [\n              styles.closeBtn,\n              pressed && styles.closeBtnPressed,\n            ]}\n            accessibilityRole=\"button\"\n            accessibilityLabel=\"Закрыть меню\"\n          >\n            <MaterialIcons name=\"close\" size={20} color=\"#fff\" />\n            <Text style={styles.closeTxt}>Закрыть</Text>\n          </Pressable>\n        </View>\n      )}\n    </View>\n  );\n}\n\nexport default memo(CompactSideBarTravel);\n\nconst styles = StyleSheet.create({\n  root: { \n    flex: 1, \n    backgroundColor: \"#fff\",\n    ...(Platform.OS === \"web\" ? { \n      // На web прокрутка должна быть общей для страницы,\n      // поэтому убираем собственный scroll/100vh/position: fixed\n      position: \"relative\" as any,\n    } : {}),\n  },\n  // ✅ РЕДИЗАЙН: Компактное меню с уменьшенными отступами\n  menu: { \n    paddingTop: Platform.select({\n      ios: 10,\n      android: 10,\n      web: 12,\n    }),\n    alignSelf: \"flex-start\", // ✅ UX: Прижато к левому краю\n    ...(Platform.OS === 'web' ? { \n      maxWidth: 400, \n      overflowX: 'hidden' as any,\n      width: '100%',\n    } : {}), // ✅ UX: Прижато к левому краю\n  },\n\n  // ✅ РЕДИЗАЙН: Компактная карточка автора\n  card: {\n    backgroundColor: \"#ffffff\",\n    borderRadius: 12,\n    padding: Platform.select({\n      default: 10, // Мобильные\n      web: 10, // Десктоп - уменьшено\n    }),\n    marginBottom: Platform.select({\n      default: 8, // Мобильные\n      web: 10, // Десктоп - уменьшено\n    }),\n    shadowColor: \"#000\",\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.02, // ✅ УЛУЧШЕНИЕ: Упрощенная тень\n    shadowRadius: 4,\n    elevation: 1, // ✅ УЛУЧШЕНИЕ: Уменьшено с 4\n    borderWidth: 0.5, // ✅ УЛУЧШЕНИЕ: Уменьшено с 1\n    borderColor: \"rgba(0, 0, 0, 0.06)\",\n    width: '100%',\n    maxWidth: '100%',\n  },\n  cardRow: { \n    flexDirection: \"row\", \n    alignItems: \"flex-start\", // Изменено с center для лучшего выравнивания\n    marginBottom: DESIGN_TOKENS.spacing.sm, // Уменьшено с 12\n  },\n  avatarWrap: { \n    marginRight: DESIGN_TOKENS.spacing.sm, // Уменьшено с 14\n    alignItems: \"center\",\n  },\n  // ✅ РЕДИЗАЙН: Компактная аватарка\n  avatar: { \n    width: Platform.select({\n      default: 48, // Мобильные\n      web: 48, // Десктоп - уменьшено\n    }),\n    height: Platform.select({\n      default: 48, // Мобильные\n      web: 48, // Десктоп - уменьшено\n    }),\n    borderRadius: Platform.select({\n      default: 24, // Мобильные\n      web: 24, // Десктоп - уменьшено\n    }),\n    borderWidth: 0.5, // ✅ УЛУЧШЕНИЕ: Уменьшено с 2\n    borderColor: \"rgba(0, 0, 0, 0.06)\",\n    shadowColor: \"#000\",\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.02, // ✅ УЛУЧШЕНИЕ: Упрощенная тень\n    shadowRadius: 2,\n    elevation: 1, // ✅ УЛУЧШЕНИЕ: Уменьшено с 2\n  },\n  // ✅ РЕДИЗАЙН: Компактное отображение просмотров\n  viewsRow: { \n    flexDirection: \"row\", \n    alignItems: \"center\", \n    marginTop: DESIGN_TOKENS.spacing.xs,\n    paddingHorizontal: Platform.select({\n      default: 6, // Мобильные\n      web: 8, // Десктоп\n    }),\n    paddingVertical: Platform.select({\n      default: 3, // Мобильные\n      web: 4, // Десктоп\n    }),\n    backgroundColor: \"rgba(0, 0, 0, 0.02)\", // ✅ УЛУЧШЕНИЕ: Нейтральный фон\n    borderRadius: 8,\n    borderWidth: 0.5, // ✅ УЛУЧШЕНИЕ: Уменьшено с 1\n    borderColor: \"rgba(0, 0, 0, 0.06)\",\n  },\n  viewsTxt: { \n    marginLeft: 4,\n    fontSize: Platform.select({\n      default: 10, // Мобильные\n      web: 11, // Десктоп\n    }),\n    color: \"#6b7280\", // ✅ УЛУЧШЕНИЕ: Нейтральный серый\n    fontFamily: \"Georgia\", \n    fontWeight: \"700\",\n  },\n  \n  infoSection: {\n    marginTop: 8, // Ещё более компактно\n    paddingTop: 8, // Ещё более компактно\n    borderTopWidth: 1,\n    borderTopColor: \"#e5e7eb\",\n  },\n  // ✅ РЕДИЗАЙН: Компактные информационные строки\n  infoRow: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingVertical: Platform.select({\n      default: 4, // Мобильные\n      web: 5, // Десктоп - уменьшено\n    }),\n    paddingHorizontal: Platform.select({\n      default: 6, // Мобильные\n      web: 8, // Десктоп - уменьшено\n    }),\n    marginBottom: 6,\n    backgroundColor: \"rgba(0, 0, 0, 0.02)\",\n    borderRadius: 10,\n    borderWidth: 0.5, // ✅ УЛУЧШЕНИЕ: Уменьшено с 1\n    borderColor: \"rgba(0, 0, 0, 0.06)\",\n  },\n  infoText: {\n    fontSize: DESIGN_TOKENS.typography.sizes.sm, // Уменьшено с 14\n    color: \"#374151\",\n    fontFamily: \"Georgia\",\n    fontWeight: \"500\",\n  },\n  categoriesWrap: {\n    flex: 1,\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    alignItems: \"center\",\n  },\n  // ✅ РЕДИЗАЙН: Компактные категории\n  categoryTagWrapper: {\n    marginRight: 4, // Уменьшено с 6\n    marginBottom: 3, // Уменьшено с 4\n  },\n  categoryTag: {\n    fontSize: Platform.select({\n      default: 9, // Мобильные\n      web: 10, // Десктоп\n    }),\n    color: \"#6b7280\", // ✅ УЛУЧШЕНИЕ: Нейтральный серый\n    backgroundColor: \"rgba(0, 0, 0, 0.02)\", // ✅ УЛУЧШЕНИЕ: Нейтральный фон\n    paddingHorizontal: Platform.select({\n      default: 6, // Мобильные\n      web: 8, // Десктоп\n    }),\n    paddingVertical: Platform.select({\n      default: 3, // Мобильные\n      web: 4, // Десктоп\n    }),\n    borderRadius: 8,\n    fontFamily: \"Georgia\",\n    fontWeight: \"600\",\n    borderWidth: 0.5, // ✅ УЛУЧШЕНИЕ: Уменьшено с 1\n    borderColor: \"rgba(0, 0, 0, 0.06)\",\n    maxWidth: 90,\n  },\n  categoryMore: {\n    fontSize: DESIGN_TOKENS.typography.sizes.xs, // Уменьшено с 11\n    color: \"#9ca3af\",\n    fontFamily: \"Georgia\",\n    fontWeight: \"500\",\n    marginLeft: 3, // Уменьшено с 4\n  },\n\n  userRow: { \n    flexDirection: \"row\", \n    alignItems: \"center\", \n    justifyContent: \"space-between\", \n    flexWrap: 'wrap',\n    rowGap: 6,\n    marginBottom: DESIGN_TOKENS.spacing.xs, // Уменьшено с 8\n  },\n  actionsRow: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: DESIGN_TOKENS.spacing.sm,\n    marginLeft: 'auto',\n    flexShrink: 0,\n    alignSelf: 'flex-end',\n  },\n  actionBtn: {\n    width: 32,\n    height: 32,\n    borderRadius: 10,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.03)',\n    borderWidth: 0.5,\n    borderColor: 'rgba(0, 0, 0, 0.08)',\n    ...Platform.select({\n      web: {\n        cursor: 'pointer' as any,\n      },\n      default: {},\n    }),\n  },\n  actionBtnPdf: {\n    backgroundColor: 'rgba(185, 28, 28, 0.06)',\n    borderColor: 'rgba(185, 28, 28, 0.2)',\n  },\n  actionBtnPressed: {\n    transform: [{ scale: 0.96 }],\n    opacity: 0.9,\n  },\n  actionBtnDisabled: {\n    opacity: 0.6,\n  },\n  userNameWrap: {\n    flexGrow: 1,\n    flexShrink: 1,\n    minWidth: 0,\n  },\n  userName: { \n    fontSize: DESIGN_TOKENS.typography.sizes.sm, // Уменьшено с 16\n    fontWeight: \"700\", \n    color: \"#1f2937\", \n    fontFamily: \"Georgia\", \n    flexShrink: 1,\n    lineHeight: 18, // Добавлено для компактности\n  },\n  // ✅ РЕДИЗАЙН: Компактная ключевая информация\n  keyInfoRow: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: 5, // Уменьшено с 6\n    marginTop: 4, // Уменьшено с 6\n    paddingVertical: DESIGN_TOKENS.spacing.xxs, // Уменьшено с 4\n  },\n  userYear: { \n    fontSize: DESIGN_TOKENS.typography.sizes.sm, // Уменьшено с 15\n    fontWeight: \"600\", \n    color: \"#1f2937\", \n    fontFamily: \"Georgia\",\n    lineHeight: 16,\n  },\n  userDays: { \n    fontSize: DESIGN_TOKENS.typography.sizes.xs, // Уменьшено с 14\n    fontWeight: \"600\",\n    color: \"#374151\", \n    fontFamily: \"Georgia\",\n    lineHeight: 15,\n  },\n  exportSummary: {\n    fontSize: DESIGN_TOKENS.typography.sizes.xs,\n    color: \"#6b7280\",\n    marginTop: 4,\n  },\n\n  // ✅ РЕДИЗАЙН: Компактные пункты меню\n  link: { \n    flexDirection: \"row\", \n    alignItems: \"center\", \n    paddingVertical: Platform.select({\n      default: 6, // Мобильные\n      web: 7, // Десктоп - уменьшено\n    }),\n    paddingHorizontal: Platform.select({\n      default: 8, // Мобильные\n      web: 10, // Десктоп - уменьшено\n    }),\n    borderRadius: 8,\n    marginBottom: 2,\n    width: '100%',\n    maxWidth: '100%',\n    ...Platform.select({\n      web: {\n        cursor: 'pointer' as any,\n      },\n      default: {},\n    }),\n  },\n  linkPressed: { backgroundColor: \"rgba(0, 0, 0, 0.02)\", transform: [{ scale: 0.98 }] },\n  linkActive: { \n    backgroundColor: \"rgba(0, 0, 0, 0.04)\", // ✅ УЛУЧШЕНИЕ: Нейтральный фон\n    borderLeftWidth: 2, // ✅ УЛУЧШЕНИЕ: Уменьшено с 3\n    borderLeftColor: \"#1f2937\", // ✅ УЛУЧШЕНИЕ: Нейтральный темно-серый\n    shadowColor: \"#000\",\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.02, // ✅ УЛУЧШЕНИЕ: Упрощенная тень\n    shadowRadius: 2,\n    elevation: 1,\n  },\n  linkTxt: { \n    marginLeft: Platform.select({\n      default: 6, // Мобильные\n      web: 8, // Десктоп - уменьшено\n    }),\n    fontSize: Platform.select({\n      default: 11, // Мобильные\n      web: 12, // Десктоп - уменьшено\n    }),\n    fontFamily: \"Georgia\", \n    color: \"#2F332E\",\n    fontWeight: \"600\",\n    lineHeight: 18,\n  },\n  linkTxtActive: {\n    color: \"#1f2937\", // ✅ УЛУЧШЕНИЕ: Нейтральный темно-серый\n    fontWeight: \"700\",\n  },\n  linkDivider: {\n    height: 1,\n    backgroundColor: \"#e5e7eb\",\n    marginVertical: 8, // Уменьшено с 12\n    marginHorizontal: 12, // Уменьшено с 16\n  },\n\n  allTravels: {\n    marginTop: DESIGN_TOKENS.spacing.md,\n    fontSize: DESIGN_TOKENS.typography.sizes.sm,\n    textAlign: \"center\",\n    fontWeight: \"500\",\n    color: \"#B87034\",\n    fontFamily: \"Georgia\",\n    width: '100%',\n    paddingHorizontal: DESIGN_TOKENS.spacing.md,\n  },\n\n  closeBar: {\n    position: \"absolute\",\n    bottom: 0,\n    left: 0,\n    right: 0,\n    backgroundColor: \"#2F332E\",\n    paddingVertical: DESIGN_TOKENS.spacing.lg,\n    alignItems: \"center\",\n  },\n  closeBtn: { flexDirection: \"row\", alignItems: \"center\" },\n  closeBtnPressed: { opacity: 0.7 },\n  closeTxt: { color: \"#fff\", fontSize: DESIGN_TOKENS.typography.sizes.md, fontFamily: \"Georgia\", marginLeft: 8 },\n\n  closeTopBar: {\n    alignItems: \"flex-end\",\n    marginBottom: DESIGN_TOKENS.spacing.sm,\n    paddingRight: 4,\n  },\n  closeTopBtn: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingVertical: 4,\n    paddingHorizontal: 8,\n    borderRadius: 999,\n    backgroundColor: \"rgba(15, 23, 42, 0.04)\",\n  },\n  closeTopBtnPressed: {\n    opacity: 0.7,\n  },\n  closeTopTxt: {\n    marginLeft: 6,\n    fontSize: DESIGN_TOKENS.typography.sizes.sm,\n    color: \"#111827\",\n    fontFamily: \"Georgia\",\n  },\n\n  fallback: { paddingVertical: 40, alignItems: \"center\" },\n});\n","import React, { useEffect, useState, useRef } from 'react';\nimport { Platform, View, Text, StyleSheet, Image } from 'react-native';\n\ntype Props = {\n    points: { coord: string; address?: string }[];\n    countryName?: string;\n};\n\ntype DailyForecast = {\n    date: string;\n    temperatureMin: number;\n    temperatureMax: number;\n    condition: string;\n    icon: string;\n};\n\nexport default function WeatherWidget({ points, countryName }: Props) {\n    const [forecast, setForecast] = useState<DailyForecast[]>([]);\n    const [locationLabel, setLocationLabel] = useState<string>('');\n    const [isTitleTruncated, setIsTitleTruncated] = useState(false);\n    const [showFullTitle, setShowFullTitle] = useState(false);\n    const titleRef = useRef<Text>(null);\n\n    useEffect(() => {\n        if (Platform.OS !== 'web' || !points?.length) return;\n\n        const [latStr, lonStr] = points[0].coord.split(',').map((s) => s.trim());\n        const lat = parseFloat(latStr);\n        const lon = parseFloat(lonStr);\n        if (isNaN(lat) || isNaN(lon)) return;\n\n        const rawAddress = points[0]?.address ?? '';\n        const addressParts = rawAddress.split(',').map(part => part.trim());\n        const locationParts = addressParts.slice(0, 3).filter(Boolean);\n        if (countryName) locationParts.push(countryName);\n        const fullLabel = locationParts.join(', ');\n        setLocationLabel(fullLabel);\n\n        // Check if title will be truncated\n        setTimeout(() => {\n            if (titleRef.current) {\n                const element = titleRef.current as unknown as HTMLElement;\n                setIsTitleTruncated(element.scrollWidth > element.clientWidth);\n            }\n        }, 100);\n\n        const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=temperature_2m_max,temperature_2m_min,weather_code&timezone=auto`;\n\n        fetch(url)\n          .then(res => res.json())\n          .then(data => {\n              const dates = data?.daily?.time ?? [];\n              const tempMax = data?.daily?.temperature_2m_max ?? [];\n              const tempMin = data?.daily?.temperature_2m_min ?? [];\n              const codes = data?.daily?.weather_code ?? [];\n              const forecastData: DailyForecast[] = dates.slice(0, 3).map((date: string, i: number) => ({\n                  date,\n                  temperatureMin: tempMin[i],\n                  temperatureMax: tempMax[i],\n                  condition: weatherDescriptions[codes[i]] ?? 'Неизвестно',\n                  icon: iconFromCode(codes[i]),\n              }));\n              setForecast(forecastData);\n          })\n          .catch(() => {});\n    }, [points, countryName]);\n\n    if (Platform.OS !== 'web' || !forecast.length || !locationLabel) return null;\n\n    return (\n      <View style={styles.wrapper}>\n          <View style={styles.titleContainer}>\n              <Text\n                ref={titleRef}\n                style={styles.title}\n                numberOfLines={1}\n                ellipsizeMode=\"tail\"\n                onMouseEnter={() => isTitleTruncated && setShowFullTitle(true)}\n                onMouseLeave={() => setShowFullTitle(false)}\n              >\n                  Погода в {locationLabel}\n              </Text>\n              {showFullTitle && isTitleTruncated && (\n                <View style={styles.tooltip}>\n                    <Text style={styles.tooltipText}>Погода в {locationLabel}</Text>\n                </View>\n              )}\n          </View>\n\n          <View style={styles.forecastContainer}>\n              {forecast.map((day, index) => (\n                <View key={day.date} style={[\n                    styles.forecastItem,\n                    index === forecast.length - 1 && styles.lastItem\n                ]}>\n                    <View style={styles.dateIconContainer}>\n                        <Text style={styles.date}>{formatDateShort(day.date)}</Text>\n                        <Image\n                          source={{ uri: day.icon }}\n                          style={styles.icon}\n                          {...(Platform.OS === 'web' ? { loading: 'lazy' } : {})}\n                        />\n                    </View>\n                    <View style={styles.tempContainer}>\n                        <Text style={styles.tempMax}>{Math.round(day.temperatureMax)}°</Text>\n                        <Text style={styles.tempMin}>/{Math.round(day.temperatureMin)}°</Text>\n                    </View>\n                    <Text style={styles.desc} numberOfLines={1} ellipsizeMode=\"tail\">\n                        {day.condition}\n                    </Text>\n                </View>\n              ))}\n          </View>\n      </View>\n    );\n}\n\nfunction formatDateShort(dateStr: string): string {\n    const date = new Date(dateStr);\n    return date.toLocaleDateString('ru-RU', { weekday: 'short', day: 'numeric' });\n}\n\nconst styles = StyleSheet.create({\n    wrapper: {\n        width: '100%',\n        maxWidth: '100%',\n        backgroundColor: '#fff',\n        borderRadius: 10,\n        padding: 8, // ✅ UX: Ещё более компактный\n        marginBottom: 12,\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 1 },\n        shadowOpacity: 0.05,\n        shadowRadius: 3,\n        elevation: 1,\n        borderWidth: 1,\n        borderColor: '#f0f0f0',\n        marginTop: 8,\n        overflow: 'hidden',\n    },\n    titleContainer: {\n        position: 'relative',\n        marginBottom: 12, // ✅ UX: Уменьшено с 16\n    },\n    title: {\n        fontSize: 14, // ✅ UX: Уменьшено с 16 для компактности\n        fontWeight: '600',\n        fontFamily: 'Roboto-Medium',\n        color: '#1a1a1a',\n        cursor: 'default',\n        width: '100%',\n        flexWrap: 'wrap',\n    },\n    tooltip: {\n        position: 'absolute',\n        top: '100%',\n        left: 0,\n        backgroundColor: '#333',\n        paddingHorizontal: 8,\n        paddingVertical: 4,\n        borderRadius: 4,\n        zIndex: 1000,\n        marginTop: 4,\n    },\n    tooltipText: {\n        color: '#fff',\n        fontSize: 12,\n        fontFamily: 'Roboto-Regular',\n    },\n    forecastContainer: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        gap: 4, // ✅ UX: Ещё более компактный\n    },\n    forecastItem: {\n        flex: 1,\n        alignItems: 'center',\n        paddingVertical: 1,\n    },\n    lastItem: {\n        marginRight: 0,\n    },\n    dateIconContainer: {\n        alignItems: 'center',\n        marginBottom: 6, // ✅ UX: Уменьшено с 8\n    },\n    date: {\n        fontSize: 11, // ✅ UX: Уменьшено с 13\n        fontWeight: '500',\n        fontFamily: 'Roboto-Medium',\n        color: '#666',\n        marginBottom: 4, // ✅ UX: Уменьшено с 6\n        textAlign: 'center',\n    },\n    icon: {\n        width: 32, // ✅ UX: Уменьшено с 36\n        height: 32, // ✅ UX: Уменьшено с 36\n    },\n    tempContainer: {\n        flexDirection: 'row',\n        alignItems: 'flex-start',\n        marginBottom: 2, // ✅ UX: Уменьшено с 4\n    },\n    tempMax: {\n        fontSize: 14, // ✅ UX: Уменьшено с 16\n        fontWeight: '600',\n        fontFamily: 'Roboto-Medium',\n        color: '#1a1a1a',\n    },\n    tempMin: {\n        fontSize: 12, // ✅ UX: Уменьшено с 14\n        fontWeight: '400',\n        fontFamily: 'Roboto-Regular',\n        color: '#666',\n    },\n    desc: {\n        fontSize: 10, // ✅ UX: Уменьшено с 12 для компактности\n        color: '#888',\n        fontFamily: 'Roboto-Regular',\n        textAlign: 'center',\n        maxWidth: '100%',\n    },\n});\n\nconst weatherDescriptions: Record<number, string> = {\n    0: 'Ясно',\n    1: 'Преим. ясно',\n    2: 'Переменная облачность',\n    3: 'Пасмурно',\n    45: 'Туман',\n    48: 'Инейный туман',\n    51: 'Мелкий дождь',\n    53: 'Умеренный дождь',\n    55: 'Сильный дождь',\n    56: 'Ледяной дождь',\n    57: 'Сильный ледяной дождь',\n    61: 'Слабый дождь',\n    63: 'Умеренный дождь',\n    65: 'Сильный дождь',\n    66: 'Ледяной дождь',\n    67: 'Сильный ледяной дождь',\n    71: 'Слабый снег',\n    73: 'Умеренный снег',\n    75: 'Сильный снег',\n    77: 'Снежная крупа',\n    80: 'Слабый ливень',\n    81: 'Умеренный ливень',\n    82: 'Сильный ливень',\n    85: 'Слабый снег',\n    86: 'Сильный снег',\n    95: 'Гроза',\n    96: 'Гроза с градом',\n    99: 'Сильная гроза',\n};\n\nfunction iconFromCode(code: number): string {\n    if (code === 0) return 'https://cdn-icons-png.flaticon.com/512/869/869869.png';\n    if (code <= 2) return 'https://cdn-icons-png.flaticon.com/512/1163/1163661.png';\n    if (code <= 3) return 'https://cdn-icons-png.flaticon.com/512/414/414825.png';\n    if (code >= 45 && code < 60) return 'https://cdn-icons-png.flaticon.com/512/4005/4005901.png';\n    if (code >= 60 && code < 70) return 'https://cdn-icons-png.flaticon.com/512/3075/3075858.png';\n    if (code >= 80) return 'https://cdn-icons-png.flaticon.com/512/1146/1146869.png';\n    return 'https://cdn-icons-png.flaticon.com/512/1163/1163624.png';\n}"],"x_facebook_sources":[[{"names":["<global>","Fallback","lazy$argument_0","openUrl","emitOpenSection","CompactSideBarTravel","setActiveNavigateAndOpen","useMemo$argument_0","handleOpenAuthorProfile","travel.travelAddress.forEach$argument_0","categoryNameStr.split.map$argument_0","parts.forEach$argument_0","handleUserTravels","handleEdit","handleOpenExport","handleSaveSettings","handlePreviewSettings","Pressable.props.style","categories.slice.map$argument_0","Pressable.props.onPress","navigator.clipboard.writeText.then$argument_0","navLinks.map$argument_0","BookSettingsModalLazy.props.onClose"],"mappings":"AAA;iBC0B;CDI;mCEE,qDF;gBGE;CHM;wBIG;CJO;AKc;IC0B;KDM;0BEK;GFI;+BEyB;GFK;8CGE;GHG;4BEG;GFqB;6BEG;GFM;6BEG;mCEG;uDCY,aD;wBEC,oBF;OFE;GFI;IEI,sFF;4BOI;6EPC;qBQC,gDR;uCSE;GTM;IUG;KVI;IWK;KXI;qBY0B;eZG;2BYkD,yFZ;6BYiB;uBZG;6BYa;uBZK;8CauC;mBbM;yBcY;oECE;qBDE;iBdE;sBgBkB;uBJiB;iBII;yBFC,wDE;ShByB;qBiBqB,iCjB;mBYe;aZG;CLW"}],[{"names":["<global>","WeatherWidget","useEffect$argument_0","points._.coord.split.map$argument_0","rawAddress.split.map$argument_0","setTimeout$argument_0","fetch.then$argument_0","fetch.then.then$argument_0","dates.slice.map$argument_0","fetch.then.then._catch$argument_0","Text.props.onMouseEnter","Text.props.onMouseLeave","forecast.map$argument_0","formatDateShort","iconFromCode"],"mappings":"AAA;eCgB;cCO;gECG,eD;uDEM,mBF;mBGO;SHK;gBIK,iBJ;gBKC;0ECK;gBDM;WLE;iBOC,QP;KDC;8BSY,gDT;8BUC,6BV;4BWY;eXqB;CDI;AaE;CbG;AcuI"}]],"names":["_react","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_interopRequireWildcard","_r","d","_View","_interopRequireDefault","_StyleSheet","_Pressable","_ScrollView","_useWindowDimensions","_ActivityIndicator","_expoImage","_vectorIcons","_reactNativePaper","_sectionLinks","_WeatherWidget","_imageOptimization","_useSingleTravelExport","_designSystem","_jsxRuntime","Fallback","jsx","style","styles","fallback","children","size","color","BookSettingsModalLazy","lazy","paths","openUrl","url","window","open","emitOpenSection","key","dispatchEvent","CustomEvent","detail","CompactSideBarTravel","refs","travel","isMobile","onNavigate","closeMenu","isSuperuser","storedUserId","activeSection","externalActiveSection","links","width","useWindowDimensions","isTablet","active","setActive","useState","showSettingsModal","setShowSettingsModal","pdfExport","lastSettings","settingsSummary","handleOpenPrintBookWithSettings","useSingleTravelExport","currentActive","undefined","setActiveNavigateAndOpen","useCallback","k","String","canEdit","useMemo","a","b","userIds","userId","userName","countryName","monthName","yearStr","year","numberDays","number_days","Number","daysText","isFinite","titleLine","filter","Boolean","join","whenLine","viewsSafe","countUnicIpView","authorUserId","ownerId","user","id","v","trim","handleOpenAuthorProfile","avatarUri","rawUri","avatar","versionedUrl","buildVersionedImageUrl","updated_at","optimalSize","getOptimalImageSize","optimizeImageUrl","height","format","quality","fit","firstCoord","travelAddress","Array","isArray","length","first","coord","coordsMeTravel","categories","cats","Set","forEach","addr","categoryName","categoryNameStr","name","split","map","s","cat","add","from","navLinks","buildTravelSectionLinks","handleOpenExport","handleSaveSettings","async","settings","handlePreviewSettings","jsxs","root","menu","contentContainerStyle","paddingBottom","paddingLeft","paddingRight","showsHorizontalScrollIndicator","closeTopBar","onPress","pressed","closeTopBtn","closeTopBtnPressed","accessibilityRole","accessibilityLabel","hitSlop","MaterialIcons","card","cardRow","avatarWrap","Image","source","uri","contentFit","cachePolicy","priority","transition","placeholder","require","loading","viewsRow","Feather","Text","viewsTxt","Intl","NumberFormat","flex","userRow","disabled","userNameWrap","opacity","cursor","numberOfLines","actionsRow","handleEdit","actionBtn","actionBtnPressed","isGenerating","actionBtnPdf","actionBtnDisabled","MaterialCommunityIcons","keyInfoRow","userYear","userDays","infoSection","infoRow","categoriesWrap","marginLeft","DESIGN_TOKENS","spacing","xs","slice","idx","categoryTagWrapper","categoryTag","categoryMore","navigator","clipboard","writeText","then","alert","infoText","icon","label","index","shouldAddDivider","Fragment","linkDivider","link","linkActive","linkPressed","android_ripple","accessibilityState","selected","linkTxt","fontSize","typography","sizes","sm","linkTxtActive","handleUserTravels","allTravels","Suspense","points","visible","onClose","onSave","onPreview","defaultSettings","travelCount","mode","closeBar","closeBtn","closeBtnPressed","closeTxt","_e","memo","StyleSheet","create","backgroundColor","position","paddingTop","alignSelf","maxWidth","overflowX","borderRadius","padding","marginBottom","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","borderWidth","borderColor","flexDirection","alignItems","marginRight","marginTop","paddingHorizontal","paddingVertical","fontFamily","fontWeight","borderTopWidth","borderTopColor","flexWrap","justifyContent","rowGap","gap","flexShrink","transform","scale","flexGrow","minWidth","lineHeight","xxs","exportSummary","borderLeftWidth","borderLeftColor","marginVertical","marginHorizontal","md","textAlign","bottom","left","right","lg","closeTopTxt","forecast","setForecast","locationLabel","setLocationLabel","isTitleTruncated","setIsTitleTruncated","showFullTitle","setShowFullTitle","titleRef","useRef","useEffect","latStr","lonStr","lat","parseFloat","lon","isNaN","locationParts","address","part","push","fullLabel","setTimeout","current","element","scrollWidth","clientWidth","fetch","res","json","data","dates","daily","time","tempMax","temperature_2m_max","tempMin","temperature_2m_min","codes","weather_code","forecastData","date","temperatureMin","temperatureMax","condition","weatherDescriptions","iconFromCode","catch","wrapper","titleContainer","_Text","ref","title","ellipsizeMode","onMouseEnter","onMouseLeave","tooltip","tooltipText","forecastContainer","day","forecastItem","lastItem","dateIconContainer","formatDateShort","_Image","tempContainer","Math","round","desc","dateStr","Date","toLocaleDateString","weekday","overflow","top","zIndex","code"],"mappings":"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","debugId":"385ce31a-d34c-4fd8-8cc0-c4a153db40a6"}