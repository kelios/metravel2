{"version":3,"sources":["/components/PersonalizedRecommendations.tsx"],"sourcesContent":["import React, { useMemo, memo, useCallback, useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, ScrollView, useWindowDimensions, Platform, Pressable } from 'react-native';\nimport { MaterialIcons } from '@expo/vector-icons';\nimport { useFavorites } from '@/context/FavoritesContext';\nimport { useRouter } from 'expo-router';\nimport { useAuth } from '@/context/AuthContext';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n// ✅ ДИЗАЙН: Импорт максимально легкой и воздушной палитры\nimport { AIRY_COLORS } from '@/constants/airyColors';\nimport { DESIGN_TOKENS } from '@/constants/designSystem';\nimport TabTravelCard from '@/components/listTravel/TabTravelCard';\nimport { METRICS } from '@/constants/layout';\n\nconst COLLAPSED_KEY = 'personalization_collapsed';\n\ninterface PersonalizedRecommendationsProps {\n    forceVisible?: boolean;\n    onVisibilityChange?: (visible: boolean) => void;\n    showHeader?: boolean;\n    onlyRecommendations?: boolean;\n}\n\nfunction PersonalizedRecommendations({ forceVisible, onVisibilityChange, showHeader = true, onlyRecommendations = false }: PersonalizedRecommendationsProps) {\n    const { favorites, viewHistory, getRecommendations } = useFavorites();\n    const { isAuthenticated } = useAuth();\n    const router = useRouter();\n    const { width } = useWindowDimensions();\n    const isMobile = width <= METRICS.breakpoints.tablet;\n    \n    const [isCollapsed, setIsCollapsed] = useState(false);\n    const [isInitialized, setIsInitialized] = useState(false);\n\n    // Проверяем состояние сворачивания при монтировании\n    useEffect(() => {\n        const checkCollapsed = async () => {\n            if (Platform.OS === 'web') {\n                const collapsed = sessionStorage.getItem(COLLAPSED_KEY) === 'true';\n                setIsCollapsed(collapsed);\n            } else {\n                const collapsed = await AsyncStorage.getItem(COLLAPSED_KEY);\n                setIsCollapsed(collapsed === 'true');\n            }\n            setIsInitialized(true);\n        };\n        checkCollapsed();\n    }, []);\n\n    const handleCollapse = useCallback(() => {\n        setIsCollapsed(true);\n        if (Platform.OS === 'web') {\n            sessionStorage.setItem(COLLAPSED_KEY, 'true');\n        } else {\n            AsyncStorage.setItem(COLLAPSED_KEY, 'true');\n        }\n        // Уведомляем родителя о сворачивании\n        if (onVisibilityChange) {\n            onVisibilityChange(false);\n        }\n    }, [onVisibilityChange]);\n\n    const handleExpand = useCallback(() => {\n        setIsCollapsed(false);\n        if (Platform.OS === 'web') {\n            sessionStorage.removeItem(COLLAPSED_KEY);\n        } else {\n            AsyncStorage.removeItem(COLLAPSED_KEY);\n        }\n        // Уведомляем родителя о разворачивании\n        if (onVisibilityChange) {\n            onVisibilityChange(true);\n        }\n    }, [onVisibilityChange]);\n\n    // ✅ ИСПРАВЛЕНИЕ: Показываем только алгоритмические рекомендации (не дублируем избранное и историю)\n    const recommendations = useMemo(() => {\n        if (!isAuthenticated) return [];\n        const raw = getRecommendations();\n        if (onlyRecommendations) {\n            return raw;\n        }\n        // getRecommendations возвращает избранное, отсортированное по дате\n        // Здесь исключаем элементы, которые уже отображаются в «Избранном», чтобы не дублировать карточки\n        return raw.filter(item => !favorites.some(f => f.id === item.id && f.type === item.type));\n    }, [favorites, isAuthenticated, getRecommendations, onlyRecommendations]);\n\n    const containerStyles = useMemo(() => [\n        styles.container,\n        !showHeader && styles.containerCompact,\n    ], [showHeader]);\n\n    // ВАЖНО: все хуки должны быть вызваны до условных возвратов\n    const handleItemPress = useCallback((url: string) => {\n        if (Platform.OS === 'web') {\n            window.location.href = url;\n        } else {\n            router.push(url as any);\n        }\n    }, [router]);\n\n    const handleLoginPress = useCallback(() => {\n        router.push('/login' as any);\n    }, [router]);\n\n    const renderItem = useCallback((item: typeof recommendations[0]) => {\n        return (\n            <TabTravelCard\n                key={`${item.type}-${item.id}`}\n                item={{\n                    id: item.id,\n                    title: item.title,\n                    imageUrl: item.imageUrl,\n                    city: (item as any).city ?? null,\n                    country: (item as any).country ?? null,\n                }}\n                onPress={() => handleItemPress(item.url)}\n            />\n        );\n    }, [handleItemPress]);\n\n    const hasFavorites = !onlyRecommendations && favorites && favorites.length > 0;\n    const hasHistory = !onlyRecommendations && viewHistory && viewHistory.length > 0;\n\n    // Условные возвраты после всех хуков\n    if (!isInitialized) return null;\n    \n    // Если forceVisible установлен, используем его напрямую\n    if (forceVisible !== undefined) {\n        if (forceVisible === false) {\n            return null;\n        }\n        // forceVisible === true - показываем компонент\n    } else {\n        // Если forceVisible не установлен, используем локальное состояние isCollapsed\n        if (isCollapsed) {\n            return (\n                <View style={styles.collapsedContainer}>\n                    <Pressable \n                        onPress={handleExpand}\n                        style={styles.expandButton}\n                        hitSlop={{ top: 10, bottom: 10, left: 10, right: 10 }}\n                    >\n                        <MaterialIcons name=\"expand-more\" size={20} color=\"#6b8e7f\" />\n                        <Text style={styles.expandButtonText}>Персонализация</Text>\n                    </Pressable>\n                </View>\n            );\n        }\n    }\n\n    if (!isAuthenticated) {\n        return (\n            <View style={containerStyles}>\n                {showHeader && (\n                    <>\n                        <View style={styles.header}>\n                            <View style={[styles.iconContainer, { backgroundColor: '#f0f9f9' }]}>\n                                <MaterialIcons name=\"star\" size={24} color=\"#6b8e7f\" />\n                            </View>\n                            <View style={styles.titleContainer}>\n                                <Text style={styles.title}>Рекомендации для вас</Text>\n                                <View style={styles.badgeContainer}>\n                                    <Text style={styles.badgeText}>Для вас</Text>\n                                </View>\n                            </View>\n                            {/* ✅ ИСПРАВЛЕНИЕ: Убрана кнопка сворачивания, так как она уже есть в RecommendationsTabs */}\n                        </View>\n                        <Text style={styles.subtitle}>Персональные рекомендации на основе ваших интересов</Text>\n                    </>\n                )}\n                    <View style={[styles.promptCard, isMobile ? styles.promptCardMobile : styles.promptCardDesktop]}>\n                        <View style={styles.promptLead}>\n                            <View style={styles.promptIcon}>\n                                <MaterialIcons name=\"login\" size={28} color=\"#6b8e7f\" />\n                            </View>\n                            <View style={styles.promptCopy}>\n                                <Text style={[styles.promptText, !isMobile && styles.promptTextDesktop]}>\n                                    Войдите, чтобы получать персональные рекомендации и сохранять понравившиеся маршруты\n                                </Text>\n                            </View>\n                        </View>\n                        <Pressable \n                            style={[styles.loginButton, !isMobile && styles.loginButtonInline]}\n                            onPress={handleLoginPress}\n                            android_ripple={{ color: 'rgba(74, 140, 140, 0.1)' }}\n                        >\n                            <Text style={styles.loginButtonText}>Войти или зарегистрироваться</Text>\n                            <MaterialIcons name=\"arrow-forward\" size={18} color=\"#6b8e7f\" style={{ marginLeft: 6 }} />\n                        </Pressable>\n                    </View>\n                </View>\n        );\n    }\n\n    // ✅ ИСПРАВЛЕНИЕ: Показываем пустое состояние\n    // - если onlyRecommendations=true: когда нет recommendations\n    // - иначе: когда нет избранного, истории и рекомендаций\n    if (onlyRecommendations ? recommendations.length === 0 : (!hasFavorites && !hasHistory && recommendations.length === 0)) {\n        return (\n            <View style={containerStyles}>\n                {showHeader && (\n                    <>\n                        <View style={styles.header}>\n                            <View style={[styles.iconContainer, { backgroundColor: AIRY_COLORS.primaryLight }]}>\n                                <MaterialIcons name=\"star\" size={24} color={AIRY_COLORS.primary} />\n                            </View>\n                            <View style={styles.titleContainer}>\n                                <Text style={styles.title}>Рекомендации для вас</Text>\n                                <View style={styles.badgeContainer}>\n                                    <Text style={styles.badgeText}>Для вас</Text>\n                                </View>\n                            </View>\n                            {/* ✅ ИСПРАВЛЕНИЕ: Убрана кнопка сворачивания, так как она уже есть в RecommendationsTabs */}\n                        </View>\n                        <Text style={styles.subtitle}>Рекомендации на основе ваших интересов</Text>\n                    </>\n                )}\n                <View style={[styles.emptyCard, isMobile ? styles.promptCardMobile : styles.promptCardDesktop]}>\n                    <View style={styles.promptLead}>\n                        <View style={styles.promptIcon}>\n                            <MaterialIcons name=\"explore\" size={28} color=\"#6b7280\" />\n                        </View>\n                        <View style={styles.promptCopy}>\n                            <Text style={[styles.emptyText, !isMobile && styles.promptTextDesktop]}>\n                                Начните просматривать путешествия и добавлять их в избранное, чтобы получать персональные рекомендации\n                            </Text>\n                        </View>\n                    </View>\n                </View>\n            </View>\n        );\n    }\n\n    return (\n        <View style={containerStyles}>\n            {showHeader && (\n                <>\n                    <View style={styles.header}>\n                        <View style={[styles.iconContainer, { backgroundColor: '#fff5eb' }]}> \n                            <MaterialIcons name=\"star\" size={24} color={AIRY_COLORS.primary} />\n                        </View>\n                        <View style={styles.titleContainer}>\n                            <Text style={styles.title}>Рекомендации для вас</Text>\n                            <View style={styles.badgeContainer}>\n                                <Text style={styles.badgeText}>Для вас</Text>\n                            </View>\n                        </View>\n                        {/* ✅ ИСПРАВЛЕНИЕ: Убрана кнопка сворачивания, так как она уже есть в RecommendationsTabs */}\n                    </View>\n                    <Text style={styles.subtitle}>Рекомендации на основе ваших интересов</Text>\n                </>\n            )}\n\n            {hasFavorites && (\n                <View style={styles.section}>\n                    <Text style={styles.sectionTitle}>Избранное</Text>\n                    <ScrollView\n                        horizontal\n                        showsHorizontalScrollIndicator={false}\n                        contentContainerStyle={styles.scrollContent}\n                        removeClippedSubviews={Platform.OS !== \"web\"}\n                        decelerationRate=\"fast\"\n                    >\n                        {favorites.map(item => renderItem(item as any))}\n                    </ScrollView>\n                </View>\n            )}\n\n            {hasHistory && (\n                <View style={styles.section}>\n                    <Text style={styles.sectionTitle}>Недавно просмотрено</Text>\n                    <ScrollView\n                        horizontal\n                        showsHorizontalScrollIndicator={false}\n                        contentContainerStyle={styles.scrollContent}\n                        removeClippedSubviews={Platform.OS !== \"web\"}\n                        decelerationRate=\"fast\"\n                    >\n                        {viewHistory.map(item => renderItem(item as any))}\n                    </ScrollView>\n                </View>\n            )}\n\n            {recommendations.length > 0 && (\n                <View style={styles.section}>\n                    <Text style={styles.sectionTitle}>Рекомендации</Text>\n                    <ScrollView\n                        horizontal\n                        showsHorizontalScrollIndicator={false}\n                        contentContainerStyle={styles.scrollContent}\n                        removeClippedSubviews={Platform.OS !== \"web\"}\n                        decelerationRate=\"fast\"\n                    >\n                        {recommendations.map(item => renderItem(item))}\n                    </ScrollView>\n                </View>\n            )}\n        </View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        marginVertical: 8, // ✅ МИНИМАЛИСТИЧНЫЙ ДИЗАЙН: Меньше отступов\n        padding: 12, // ✅ МИНИМАЛИСТИЧНЫЙ ДИЗАЙН: Меньше padding\n        backgroundColor: 'transparent', // ✅ МИНИМАЛИСТИЧНЫЙ ДИЗАЙН: Прозрачный фон\n        borderRadius: 12, // ✅ МИНИМАЛИСТИЧНЫЙ ДИЗАЙН: Меньше радиус\n        borderWidth: 0, // ✅ МИНИМАЛИСТИЧНЫЙ ДИЗАЙН: Без границы\n        borderColor: 'transparent',\n        shadowColor: 'transparent',\n        shadowOffset: { width: 0, height: 0 },\n        shadowOpacity: 0,\n        shadowRadius: 0,\n        elevation: 0,\n    },\n    containerCompact: {\n        marginVertical: 0,\n        padding: 0,\n        paddingTop: 8,\n        paddingBottom: 4,\n    },\n    section: {\n        marginBottom: 16,\n    },\n    header: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        marginBottom: 8,\n    },\n    iconContainer: {\n        width: 36,\n        height: 36,\n        borderRadius: 10,\n        backgroundColor: '#fef2f2',\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    titleContainer: {\n        flex: 1,\n        flexDirection: 'row',\n        alignItems: 'center',\n        marginLeft: 10,\n        gap: 8,\n    },\n    title: {\n        fontSize: 15, // ✅ МИНИМАЛИСТИЧНЫЙ ДИЗАЙН: Меньше размер\n        fontWeight: '600', // ✅ МИНИМАЛИСТИЧНЫЙ ДИЗАЙН: Меньше жирность\n        color: '#1a202c',\n        letterSpacing: -0.1,\n    },\n    badgeContainer: {\n        backgroundColor: 'rgba(74, 140, 140, 0.1)', // ✅ МИНИМАЛИСТИЧНЫЙ ДИЗАЙН: Прозрачный фон\n        borderRadius: 8,\n        paddingHorizontal: 8,\n        paddingVertical: 3,\n    },\n    badgeText: {\n        fontSize: 11,\n        fontWeight: '600',\n        color: '#4a8c8c', // ✅ МИНИМАЛИСТИЧНЫЙ ДИЗАЙН: Цвет текста вместо белого\n        letterSpacing: 0.1,\n    },\n    subtitle: {\n        fontSize: 13,\n        color: '#4a5568',\n        marginLeft: 0,\n        marginBottom: 12,\n    },\n    sectionTitle: {\n        fontSize: 14,\n        fontWeight: '600',\n        color: '#1a202c',\n        marginBottom: 8,\n    },\n    countBadge: {\n        backgroundColor: '#fee2e2',\n        borderRadius: 12,\n        paddingHorizontal: 10,\n        paddingVertical: 4,\n        minWidth: 32,\n        alignItems: 'center',\n    },\n    count: {\n        fontSize: 14,\n        color: '#ef4444',\n        fontWeight: '700',\n    },\n    scrollContent: {\n        paddingHorizontal: 4,\n        paddingVertical: 4,\n    },\n    item: {\n        width: 168,\n        backgroundColor: '#ffffff',\n        borderRadius: 16,\n        overflow: 'hidden',\n        shadowColor: '#1f1f1f',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.08,\n        shadowRadius: 8,\n        elevation: 3,\n        // ✅ УЛУЧШЕНИЕ: Убрана граница, используется только тень\n        marginRight: 12,\n        transform: [{ scale: 1 }],\n    },\n    itemMobile: {\n        width: 140,\n    },\n    itemImage: {\n        width: '100%',\n        height: 96,\n        backgroundColor: '#f3f4f6',\n    },\n    itemImagePlaceholder: {\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: DESIGN_TOKENS.colors.mutedBackground,\n    },\n    itemContent: {\n        padding: 10,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n    },\n    itemTitle: {\n        fontSize: 13,\n        fontWeight: '600',\n        color: DESIGN_TOKENS.colors.text,\n        marginBottom: 6,\n        lineHeight: 18,\n        letterSpacing: -0.1,\n    },\n    itemMeta: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: DESIGN_TOKENS.colors.backgroundSecondary,\n        paddingHorizontal: 8,\n        paddingVertical: 4,\n        borderRadius: 8,\n        alignSelf: 'flex-start',\n    },\n    itemMetaText: {\n        fontSize: 12,\n        color: DESIGN_TOKENS.colors.primary,\n        fontWeight: '600',\n    },\n    historyBadge: {\n        position: 'absolute',\n        top: 10,\n        right: 10,\n        backgroundColor: DESIGN_TOKENS.colors.surface,\n        borderRadius: 14,\n        padding: 6,\n        shadowColor: '#1f1f1f',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.06,\n        shadowRadius: 6,\n        elevation: 2,\n        borderWidth: 1,\n        borderColor: DESIGN_TOKENS.colors.border,\n        ...Platform.select({\n            web: {\n                boxShadow: '0 2px 6px rgba(31, 31, 31, 0.06)',\n            },\n        }),\n    },\n    promptCard: {\n        backgroundColor: '#fdf8f3',\n        borderRadius: 16,\n        padding: 16,\n        borderWidth: 1,\n        borderColor: 'rgba(255, 159, 90, 0.25)',\n    },\n    promptCardMobile: {\n        alignItems: 'flex-start',\n    },\n    promptCardDesktop: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n    },\n    promptLead: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        flex: 1,\n    },\n    promptCopy: {\n        flex: 1,\n        marginLeft: 12,\n    },\n    promptIcon: {\n        width: 40,\n        height: 40,\n        borderRadius: 12,\n        backgroundColor: '#fff',\n        alignItems: 'center',\n        justifyContent: 'center',\n        borderWidth: 1,\n        borderColor: 'rgba(15,23,42,0.08)',\n    },\n    promptText: {\n        fontSize: 14,\n        color: '#6b7280',\n        textAlign: 'left',\n        lineHeight: 20,\n        fontWeight: '500',\n    },\n    promptTextDesktop: {\n        maxWidth: 520,\n    },\n    loginButton: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: '#ffffff',\n        borderWidth: 1,\n        borderColor: '#6b8e7f',\n        borderRadius: 12,\n        paddingVertical: 10,\n        paddingHorizontal: 18,\n        alignSelf: 'flex-start',\n        marginTop: 12,\n        ...Platform.select({\n            web: {\n                cursor: 'pointer',\n                transition: 'all 0.2s ease',\n            },\n        }),\n    },\n    loginButtonInline: {\n        marginLeft: 16,\n        marginTop: 0,\n    },\n    loginButtonText: {\n        fontSize: 14,\n        fontWeight: '600',\n        color: '#6b8e7f',\n        letterSpacing: -0.2,\n    },\n    emptyCard: {\n        backgroundColor: '#f9fafb',\n        borderRadius: 16,\n        padding: 16,\n        borderWidth: 1,\n        borderColor: 'rgba(15, 23, 42, 0.08)',\n    },\n    emptyText: {\n        fontSize: 14,\n        color: '#6b7280',\n        lineHeight: 20,\n        fontWeight: '500',\n    },\n    collapseButton: {\n        padding: 4,\n        marginLeft: 8,\n        ...Platform.select({\n            web: {\n                cursor: 'pointer',\n            },\n        }),\n    },\n    collapsedContainer: {\n        marginVertical: 8,\n        marginHorizontal: 4,\n        paddingVertical: 8,\n        paddingHorizontal: 12,\n        backgroundColor: '#f0f9f9',\n        borderRadius: 8,\n        borderWidth: 1,\n        borderColor: '#d1e7e7',\n    },\n    expandButton: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        paddingVertical: 4,\n        ...Platform.select({\n            web: {\n                cursor: 'pointer',\n            },\n        }),\n    },\n    expandButtonText: {\n        fontSize: 14,\n        fontWeight: '600',\n        color: '#6b8e7f',\n        marginLeft: 6,\n    },\n});\n\nexport default memo(PersonalizedRecommendations);\n\n"],"x_facebook_sources":[[{"names":["<global>","PersonalizedRecommendations","useEffect$argument_0","checkCollapsed","handleCollapse","handleExpand","useMemo$argument_0","raw.filter$argument_0","favorites.some$argument_0","handleItemPress","handleLoginPress","renderItem","TabTravelCard.props.onPress","favorites.map$argument_0","viewHistory.map$argument_0","recommendations.map$argument_0"],"mappings":"AAA;ACsB;cCW;+BCC;SDS;KDE;uCGE;KHW;qCIE;KJW;oCKG;0BCQ,wBC,6CD,CD;KLC;oCKE;KLG;wCQG;KRM;yCSE;KTE;mCUE;yBCW,+BD;KVG;uCYiJ,+BZ;yCae,+Bb;6Cce,wBd;CDM"}]],"names":["_react","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_interopRequireWildcard","_r","d","_View","_interopRequireDefault","_Text","_StyleSheet","_ScrollView","_useWindowDimensions","_Pressable","_vectorIcons","_FavoritesContext","_expoRouter","_AuthContext","_airyColors","_designSystem","_TabTravelCard","_layout","_jsxRuntime","COLLAPSED_KEY","PersonalizedRecommendations","forceVisible","onVisibilityChange","showHeader","onlyRecommendations","favorites","viewHistory","getRecommendations","useFavorites","isAuthenticated","useAuth","router","useRouter","width","useWindowDimensions","isMobile","METRICS","breakpoints","tablet","isCollapsed","setIsCollapsed","useState","isInitialized","setIsInitialized","useEffect","async","collapsed","sessionStorage","getItem","checkCollapsed","useCallback","setItem","handleExpand","removeItem","recommendations","useMemo","raw","filter","item","some","id","type","containerStyles","styles","container","containerCompact","handleItemPress","url","window","location","href","handleLoginPress","push","renderItem","jsx","title","imageUrl","city","country","onPress","hasFavorites","length","hasHistory","undefined","style","collapsedContainer","children","jsxs","expandButton","hitSlop","top","bottom","left","right","MaterialIcons","name","size","color","expandButtonText","Fragment","header","iconContainer","backgroundColor","AIRY_COLORS","primary","titleContainer","badgeContainer","badgeText","subtitle","section","sectionTitle","horizontal","showsHorizontalScrollIndicator","contentContainerStyle","scrollContent","removeClippedSubviews","decelerationRate","map","primaryLight","emptyCard","promptCardMobile","promptCardDesktop","promptLead","promptIcon","promptCopy","emptyText","promptTextDesktop","promptCard","promptText","loginButton","loginButtonInline","android_ripple","loginButtonText","marginLeft","StyleSheet","create","marginVertical","padding","borderRadius","borderWidth","borderColor","shadowColor","shadowOffset","height","shadowOpacity","shadowRadius","elevation","paddingTop","paddingBottom","marginBottom","flexDirection","alignItems","justifyContent","flex","gap","fontSize","fontWeight","letterSpacing","paddingHorizontal","paddingVertical","countBadge","minWidth","count","overflow","marginRight","transform","scale","itemMobile","itemImage","itemImagePlaceholder","DESIGN_TOKENS","colors","mutedBackground","itemContent","surface","itemTitle","text","lineHeight","itemMeta","backgroundSecondary","alignSelf","itemMetaText","historyBadge","position","border","boxShadow","textAlign","maxWidth","marginTop","cursor","transition","collapseButton","marginHorizontal","_e","memo"],"mappings":"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","debugId":"69f23e9d-1d20-4e9d-b4c1-4a26135f1b6e"}