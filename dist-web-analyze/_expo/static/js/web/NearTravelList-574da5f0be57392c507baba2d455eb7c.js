__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var t=(function(e,t){if("function"==typeof WeakMap)var o=new WeakMap,r=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var l,i,n={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return n;if(l=t?r:o){if(l.has(e))return l.get(e);l.set(e,n)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((i=(l=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(i.get||i.set)?l(n,t,i):n[t]=e[t]);return n})(e,t)})(_r(d[1])),o=e(_r(d[2])),r=e(_r(d[3])),l=e(_r(d[4])),i=e(_r(d[5])),n=e(_r(d[6])),s=e(_r(d[7])),c=e(_r(d[8])),u=(e(_r(d[9])),e(_r(d[10]))),h=e(_r(d[11])),S=_r(d[12]),f=_r(d[13]),p=e(_r(d[14])),E=e(_r(d[15])),N=_r(d[16]),y=_r(d[17]),x=_r(d[18]),b=_r(d[19]);const T='#f8f9fa',I=({value:e,onChange:t})=>(0,b.jsxs)(c.default,{style:C.container,children:[(0,b.jsx)(r.default,{onPress:()=>t('list'),style:({pressed:t})=>[C.button,'list'===e&&C.activeButton,t&&C.pressedButton,x.globalFocusStyles.focusable],accessibilityRole:"button",accessibilityLabel:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u043f\u0438\u0441\u043a\u043e\u043c",accessibilityState:{selected:'list'===e},children:(0,b.jsx)(i.default,{style:[C.text,'list'===e&&C.activeText],children:"\u0421\u043f\u0438\u0441\u043e\u043a"})}),(0,b.jsx)(r.default,{onPress:()=>t('map'),style:({pressed:t})=>[C.button,'map'===e&&C.activeButton,t&&C.pressedButton,x.globalFocusStyles.focusable],accessibilityRole:"button",accessibilityLabel:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0430 \u043a\u0430\u0440\u0442\u0435",accessibilityState:{selected:'map'===e},children:(0,b.jsx)(i.default,{style:[C.text,'map'===e&&C.activeText],children:"\u041a\u0430\u0440\u0442\u0430"})})]}),O=()=>(0,b.jsxs)(c.default,{style:K.card,children:[(0,b.jsx)(c.default,{style:K.image}),(0,b.jsxs)(c.default,{style:K.content,children:[(0,b.jsx)(c.default,{style:K.title}),(0,b.jsx)(c.default,{style:K.description}),(0,b.jsx)(c.default,{style:K.meta})]})]}),_=(0,t.memo)(({points:e,height:o=400,showRoute:r=!0})=>(0,t.useMemo)(()=>e.length>0,[e.length])?(0,b.jsxs)(c.default,{style:[G.mapContainer,{height:o}],children:[(0,b.jsx)(c.default,{style:G.mapHeader,children:(0,b.jsxs)(i.default,{style:G.mapTitle,children:["\ud83d\uddfa\ufe0f ",e.length," ",1===e.length?'\u0442\u043e\u0447\u043a\u0430':e.length<5?'\u0442\u043e\u0447\u043a\u0438':'\u0442\u043e\u0447\u0435\u043a'," \u043d\u0430 \u043a\u0430\u0440\u0442\u0435"]})}),(0,b.jsx)(c.default,{style:G.mapWrapper,children:(0,b.jsx)(E.default,{showRoute:r,travel:{data:e}})}),(0,b.jsx)(c.default,{style:G.mapFooter,children:(0,b.jsx)(i.default,{style:G.mapHint,children:"\ud83d\udd0d \u041f\u0440\u0438\u0431\u043b\u0438\u0436\u0430\u0439\u0442\u0435 \u0438 \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0430\u0439\u0442\u0435\u0441\u044c \u0434\u043b\u044f \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430"})})]}):(0,b.jsxs)(c.default,{style:[G.mapPlaceholder,{height:o}],children:[(0,b.jsx)(i.default,{style:G.placeholderIcon,children:"\ud83c\udf0d"}),(0,b.jsx)(i.default,{style:G.placeholderText,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043a\u0430\u0440\u0442\u044b..."})]})),D=(0,t.memo)(({travel:e,onLayout:l,onTravelsLoaded:E})=>{const[N,T]=(0,t.useState)([]),[D,C]=(0,t.useState)(!0),[K,j]=(0,t.useState)(null),[w,v]=(0,t.useState)('list'),[k,R]=(0,t.useState)(6),{width:z,height:M}=(0,s.default)(),B=((0,t.useRef)(null),(0,t.useRef)(null)),W=z<y.METRICS.breakpoints.tablet,H=z>=y.METRICS.breakpoints.tablet&&z<y.METRICS.breakpoints.largeTablet,L=(y.METRICS.breakpoints.largeTablet,(0,t.useMemo)(()=>W?320:H?400:500,[W,H])),F=(0,t.useMemo)(()=>W?'auto':H?500:600,[W,H]),A=((0,t.useMemo)(()=>W?1:H?2:3,[W,H]),(0,t.useMemo)(()=>W?6:H?8:12,[W,H]),(0,t.useMemo)(()=>W?4:H?6:8,[W,H])),P=(0,t.useRef)(!1),V=(0,t.useRef)(null),$=(0,t.useCallback)(async()=>{if(!e.id||P.current)return;V.current&&V.current.abort();const t=new AbortController;V.current=t,P.current=!0;const o=setTimeout(()=>{t.abort()},1e4);try{C(!0),j(null);const o=Number(e.id);if(!Number.isFinite(o))throw new Error('\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f');const r=await(0,f.fetchTravelsNear)(o);if(!t.signal.aborted){const e=Array.isArray(r)?r.slice(0,50):[];T(e),E?.(e)}}catch(e){if(t.signal.aborted)return;'AbortError'===e.name?j('\u041f\u0440\u0435\u0432\u044b\u0448\u0435\u043d\u043e \u0432\u0440\u0435\u043c\u044f \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443.'):j('\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u044b. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435.'),P.current=!1}finally{clearTimeout(o),t.signal.aborted||C(!1)}},[e.id]);(0,t.useEffect)(()=>{if(!e.id)return;P.current=!1;const t=setTimeout(()=>{$()},300);return()=>{clearTimeout(t),V.current&&V.current.abort()}},[e.id]),(0,t.useEffect)(()=>{N.length>0&&E&&E(N)},[N.length]);const U=(0,t.useMemo)(()=>{if(!N.length)return[];const e=[];for(let t=0;t<Math.min(N.length,20);t++){const o=N[t];if(o.points&&Array.isArray(o.points)){for(let t=0;t<o.points.length;t++){const r=o.points[t];if(!r?.coord)continue;const[l,i]=String(r.coord).split(',').map(e=>parseFloat(e.trim()));if(Number.isFinite(l)&&Number.isFinite(i)&&(e.push({id:`${o.id}-${t}`,coord:`${l},${i}`,address:r.address||o.title||'',travelImageThumbUrl:r.travelImageThumbUrl||o.travel_image_thumb_url||'',categoryName:r.categoryName||o.countryName||'',articleUrl:r.urlTravel}),e.length>=50))break}if(e.length>=50)break}}return e},[N]),Y=(0,t.useCallback)(()=>{k<N.length&&R(e=>Math.min(e+A,N.length))},[k,N.length,A]),q=(0,t.useCallback)(({item:e,index:t})=>(0,b.jsx)(c.default,{style:[G.travelItem,t%2!=0&&G.travelItemOdd],children:(0,b.jsx)(p.default,{travel:e,priority:t<6})}),[]),J=(0,t.useCallback)(e=>`travel-${e.id}`,[]);if(K)return(0,b.jsxs)(c.default,{style:G.errorContainer,onLayout:l,children:[(0,b.jsx)(i.default,{style:G.errorIcon,children:"\u26a0\ufe0f"}),(0,b.jsx)(i.default,{style:G.errorText,children:K}),(0,b.jsx)(n.default,{onPress:$,style:G.retryButton,accessibilityRole:"button",children:(0,b.jsx)(i.default,{style:G.retryButtonText,children:"\ud83d\udd04 \u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u043e\u043f\u044b\u0442\u043a\u0443"})})]});const Q=N.slice(0,k);return(0,b.jsxs)(c.default,{style:G.section,onLayout:l,children:[(0,b.jsxs)(c.default,{style:G.header,children:[(0,b.jsx)(S.Title,{style:G.title,children:"\u0420\u044f\u0434\u043e\u043c \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"}),(0,b.jsx)(i.default,{style:G.subtitle,children:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b \u0432 \u0440\u0430\u0434\u0438\u0443\u0441\u0435 ~60 \u043a\u043c"})]}),W?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(I,{value:w,onChange:v}),'list'===w?(0,b.jsx)(u.default,{data:Q,keyExtractor:J,renderItem:q,contentContainerStyle:G.mobileListContent,onEndReached:Y,onEndReachedThreshold:.2,showsVerticalScrollIndicator:!1,initialNumToRender:6,maxToRenderPerBatch:2,windowSize:3,ListFooterComponent:k<N.length?(0,b.jsx)(c.default,{style:G.loadMoreContainer,children:(0,b.jsx)(r.default,{onPress:Y,style:[G.loadMoreButton,x.globalFocusStyles.focusable],accessibilityRole:"button",accessibilityLabel:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0451 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0439",children:(0,b.jsx)(i.default,{style:G.loadMoreButtonText,children:"\ud83d\udce5 \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0451"})})}):D?(0,b.jsx)(c.default,{style:G.skeletonContainer,children:[1,2].map(e=>(0,b.jsx)(O,{},e))}):null}):(0,b.jsx)(c.default,{style:G.mobileMapColumn,children:(0,b.jsx)(_,{points:U,height:L,showRoute:!0})})]}):(0,b.jsxs)(c.default,{style:G.desktopContainer,children:[(0,b.jsx)(c.default,{style:[G.listColumn,{height:F}],children:(0,b.jsxs)(h.default,{ref:B,style:G.scrollView,contentContainerStyle:G.scrollContent,showsVerticalScrollIndicator:!0,nestedScrollEnabled:!0,children:[(0,b.jsx)(c.default,{style:G.travelsGrid,children:Q.map((e,t)=>(0,b.jsx)(c.default,{style:[G.travelItem,t%2!=0&&G.travelItemOdd],children:q({item:e,index:t})},J(e)))}),k<N.length&&(0,b.jsx)(c.default,{style:G.loadMoreContainer,children:(0,b.jsx)(n.default,{onPress:Y,style:G.loadMoreButton,children:(0,b.jsxs)(i.default,{style:G.loadMoreButtonText,children:["\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0451 ",Math.min(A,N.length-k)," \u0438\u0437 ",N.length-k]})})})]})}),(0,b.jsx)(c.default,{style:G.mapColumn,children:(0,b.jsx)(_,{points:U,height:L,showRoute:!0})})]}),D&&0===N.length&&(0,b.jsx)(c.default,{style:G.loadingOverlay,children:(0,b.jsxs)(c.default,{style:G.loadingContent,children:[(0,b.jsx)(o.default,{size:"large",color:"#ff8c49"}),(0,b.jsx)(i.default,{style:G.loadingText,children:"\u0418\u0449\u0435\u043c \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u044b\u0435 \u043c\u0435\u0441\u0442\u0430 \u0440\u044f\u0434\u043e\u043c..."})]})})]})});_e.default=D;const G=l.default.create({section:{marginTop:N.DESIGN_TOKENS.spacing.xxs4,marginBottom:40,paddingHorizontal:Math.max(16,'4%'),paddingVertical:N.DESIGN_TOKENS.spacing.xxs4,backgroundColor:T,borderRadius:20,width:'100%',maxWidth:1400,alignSelf:'center',shadowColor:'#000',shadowOffset:{width:0,height:4},shadowOpacity:.1,shadowRadius:12,elevation:4},header:{alignItems:'center',marginBottom:N.DESIGN_TOKENS.spacing.xxs4,paddingHorizontal:8},title:{fontSize:N.DESIGN_TOKENS.typography.sizes.xl,fontWeight:'700',color:'#2d3748',marginBottom:8,textAlign:'center',fontFamily:'System',letterSpacing:-.5},subtitle:{fontSize:N.DESIGN_TOKENS.typography.sizes.md,color:'#718096',textAlign:'center',fontWeight:'500'},desktopContainer:{flexDirection:'row',gap:N.DESIGN_TOKENS.spacing.xxs4,minHeight:600},listColumn:{flex:1.2,minHeight:500},mapColumn:{flex:1,minWidth:300},mobileMapColumn:{width:'100%'},scrollView:{flex:1},scrollContent:{flexGrow:1,paddingBottom:N.DESIGN_TOKENS.spacing.lg},travelsGrid:{flexDirection:'row',flexWrap:'wrap',gap:N.DESIGN_TOKENS.spacing.lg},travelItem:{flex:1,minWidth:280,maxWidth:'100%',marginBottom:N.DESIGN_TOKENS.spacing.lg},travelItemOdd:{opacity:.95},mobileListContent:{paddingBottom:N.DESIGN_TOKENS.spacing.lg},mapContainer:{backgroundColor:N.DESIGN_TOKENS.colors.surface,borderRadius:N.DESIGN_TOKENS.radii.md,overflow:'hidden',...N.DESIGN_TOKENS.shadowsNative.medium,borderWidth:1,borderColor:N.DESIGN_TOKENS.colors.borderLight},mapHeader:{paddingHorizontal:N.DESIGN_TOKENS.spacing.lg,paddingVertical:N.DESIGN_TOKENS.spacing.sm,backgroundColor:N.DESIGN_TOKENS.colors.backgroundSecondary,borderBottomWidth:1,borderBottomColor:N.DESIGN_TOKENS.colors.borderLight},mapTitle:{fontSize:N.DESIGN_TOKENS.typography.sizes.sm,fontWeight:N.DESIGN_TOKENS.typography.weights.semibold,color:N.DESIGN_TOKENS.colors.textSubtle,textAlign:'center'},mapWrapper:{flex:1,minHeight:300},mapFooter:{paddingHorizontal:N.DESIGN_TOKENS.spacing.lg,paddingVertical:N.DESIGN_TOKENS.spacing.xs,backgroundColor:N.DESIGN_TOKENS.colors.backgroundSecondary,borderTopWidth:1,borderTopColor:N.DESIGN_TOKENS.colors.borderLight},mapHint:{fontSize:N.DESIGN_TOKENS.typography.sizes.xs,color:N.DESIGN_TOKENS.colors.textMuted,textAlign:'center',fontStyle:'italic'},mapPlaceholder:{justifyContent:'center',alignItems:'center',backgroundColor:N.DESIGN_TOKENS.colors.backgroundSecondary,borderRadius:N.DESIGN_TOKENS.radii.md,borderWidth:2,borderColor:N.DESIGN_TOKENS.colors.borderLight,borderStyle:'dashed'},placeholderIcon:{fontSize:N.DESIGN_TOKENS.typography.sizes.xl,marginBottom:8},placeholderText:{fontSize:N.DESIGN_TOKENS.typography.sizes.sm,color:N.DESIGN_TOKENS.colors.textMuted,textAlign:'center'},loadMoreContainer:{padding:N.DESIGN_TOKENS.spacing.lg,alignItems:'center'},loadMoreButton:{backgroundColor:N.DESIGN_TOKENS.colors.surface,paddingHorizontal:N.DESIGN_TOKENS.spacing.xxs4,paddingVertical:12,borderRadius:N.DESIGN_TOKENS.radii.md,borderWidth:2,borderColor:N.DESIGN_TOKENS.colors.primary,shadowColor:'#000',shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:2,minHeight:44,transition:'all 0.2s ease',cursor:'pointer',':hover':{backgroundColor:N.DESIGN_TOKENS.colors.primarySoft,transform:'translateY(-1px)'}},loadMoreButtonText:{color:N.DESIGN_TOKENS.colors.primary,fontSize:N.DESIGN_TOKENS.typography.sizes.md,fontWeight:'600'},loadingOverlay:{...l.default.absoluteFillObject,backgroundColor:'rgba(248, 249, 250, 0.9)',justifyContent:'center',alignItems:'center',borderRadius:20},loadingContent:{alignItems:'center',gap:N.DESIGN_TOKENS.spacing.lg},loadingText:{fontSize:N.DESIGN_TOKENS.typography.sizes.md,color:'#4a5568',fontWeight:'500'},errorContainer:{justifyContent:'center',alignItems:'center',padding:N.DESIGN_TOKENS.spacing.xs0,backgroundColor:T,borderRadius:20,marginHorizontal:N.DESIGN_TOKENS.spacing.lg},errorIcon:{fontSize:N.DESIGN_TOKENS.typography.sizes.xl,marginBottom:N.DESIGN_TOKENS.spacing.lg},errorText:{fontSize:N.DESIGN_TOKENS.typography.sizes.md,color:'#e53e3e',textAlign:'center',marginBottom:N.DESIGN_TOKENS.spacing.xxs0,lineHeight:22},retryButton:{backgroundColor:N.DESIGN_TOKENS.colors.primary,paddingHorizontal:N.DESIGN_TOKENS.spacing.xxs4,paddingVertical:12,borderRadius:N.DESIGN_TOKENS.radii.md,shadowColor:'#000',shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:2,minHeight:44,transition:'all 0.2s ease',cursor:'pointer',':hover':{backgroundColor:'#3a7a7a',transform:'translateY(-1px)'}},retryButtonText:{color:N.DESIGN_TOKENS.colors.surface,fontSize:N.DESIGN_TOKENS.typography.sizes.md,fontWeight:'600'},skeletonContainer:{gap:N.DESIGN_TOKENS.spacing.lg,paddingHorizontal:8}}),C=l.default.create({container:{flexDirection:'row',backgroundColor:N.DESIGN_TOKENS.colors.mutedBackground,borderRadius:N.DESIGN_TOKENS.radii.lg,padding:N.DESIGN_TOKENS.spacing.xs,marginBottom:N.DESIGN_TOKENS.spacing.xxs0,alignSelf:'center',maxWidth:300},button:{flex:1,paddingVertical:12,paddingHorizontal:N.DESIGN_TOKENS.spacing.xxs0,borderRadius:N.DESIGN_TOKENS.radii.md,alignItems:'center',justifyContent:'center',minHeight:44,transition:'all 0.2s ease',cursor:'pointer',':hover':{backgroundColor:N.DESIGN_TOKENS.colors.primarySoft}},activeButton:{backgroundColor:N.DESIGN_TOKENS.colors.surface,shadowColor:'#000',shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:2},pressedButton:{transform:[{scale:.98}]},text:{fontSize:N.DESIGN_TOKENS.typography.sizes.md,fontWeight:'600',color:N.DESIGN_TOKENS.colors.textMuted},activeText:{color:N.DESIGN_TOKENS.colors.primary}}),K=l.default.create({card:{backgroundColor:'#fff',borderRadius:12,padding:N.DESIGN_TOKENS.spacing.md,marginBottom:N.DESIGN_TOKENS.spacing.lg,shadowColor:'#000',shadowOffset:{width:0,height:1},shadowOpacity:.05,shadowRadius:3,elevation:1},image:{width:'100%',height:120,backgroundColor:'#e2e8f0',borderRadius:8,marginBottom:12},content:{gap:N.DESIGN_TOKENS.spacing.sm},title:{height:16,backgroundColor:'#e2e8f0',borderRadius:4,width:'80%'},description:{height:12,backgroundColor:'#e2e8f0',borderRadius:4,width:'60%'},meta:{height:12,backgroundColor:'#e2e8f0',borderRadius:4,width:'40%'}})},2563,[23,4,407,422,145,132,409,447,315,123,313,322,2652,1758,2564,2565,1013,985,1015,2]);