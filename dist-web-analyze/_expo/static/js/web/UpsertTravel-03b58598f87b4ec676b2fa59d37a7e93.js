__d(function(g,_r,_i,a,_m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=function(){const e=(0,l.useRouter)(),{id:r}=(0,l.useLocalSearchParams)(),{userId:w,isAuthenticated:O,isSuperuser:z}=(0,f.useAuth)(),j=z,F=!r,W=(0,t.useMemo)(()=>n.default.get('window').width,[]),G=(0,t.useMemo)(()=>W<=C.METRICS.breakpoints.tablet,[W]),[K,R]=(0,t.useState)(1),[L,H]=(0,t.useState)([]),[P,V]=(0,t.useState)(null),$=(0,t.useRef)(null),[U,q]=(0,t.useState)(null),[J,Q]=(0,t.useState)(!0),[X,Y]=(0,t.useState)(!1),[Z,ee]=(0,t.useState)([]),te=(0,t.useRef)(null),[re,ae]=(0,t.useState)(null),oe=(0,t.useMemo)(()=>D(F?null:String(r)),[F,r]),ne=(0,t.useRef)(oe),se=(0,S.useOptimizedFormState)(oe,{debounce:5e3,validateOnChange:!0,validationDebounce:300});(0,t.useEffect)(()=>{ne.current=se.data},[se.data]),(0,t.useEffect)(()=>{const e=te.current;if(!e)return void(re&&ae(null));if(e.step!==K)return;const t=e.anchorId;ae(t??null),t&&'undefined'!=typeof document&&setTimeout(()=>{const e=document.getElementById(t);e&&'function'==typeof e.scrollIntoView&&e.scrollIntoView({behavior:'smooth',block:'start'}),te.current=null,ae(null)},50)},[K,re]);const ie=(0,t.useCallback)(e=>{te.current={step:e.targetStep,anchorId:e.anchorId},R(e.targetStep)},[]),le=(0,t.useCallback)(()=>{te.current=null,ae(null)},[]),ue=(0,t.useCallback)((e,t="success")=>{u.default.show({type:t,text1:e})},[]),de=(0,t.useCallback)(t=>{F&&t.id&&e.replace(`/travel/${t.id}`)},[F,e]),ce=(0,t.useCallback)(e=>{ue('\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f','error'),console.error('Autosave error:',e)},[ue]),pe=(0,b.useImprovedAutoSave)(se.data,oe,{debounce:5e3,onSave:async e=>{const t=(r={...e,id:B(e.id)},Object.fromEntries(Object.entries(r).map(([e,t])=>''===t?[e,null]:!1===t?[e,!1]:[e,t])));var r;return await(0,p.saveFormData)(t)},onSuccess:de,onError:ce}),fe=(0,t.useCallback)(e=>{const t=e.coordsMeTravel||[],r=M(t,e.countries||[]);se.updateFields({...e,countries:r}),H(t)},[]),me=(0,t.useCallback)(async t=>{try{const r=await(0,c.fetchTravel)(Number(t));if(!F&&r){const t=r.userIds||r.user?.id?.toString()||'',o=w?.toString()||'';if(!(t===o||j))return u.default.show({type:'error',text1:'\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430',text2:'\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u0432\u043e\u0438 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f'}),void e.replace('/');Y(!0)}else F&&Y(!0);const o=A(r),n=o.coordsMeTravel||[],s=M(n,o.countries||[]),i={...o,countries:s};V(r),se.updateFields(i),H(n),pe.updateBaseline(i)}catch(t){console.error('\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f:',t),u.default.show({type:'error',text1:'\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438',text2:'\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435'}),e.replace('/')}finally{Q(!1)}},[F,O,w,j,e,pe.updateBaseline]);(0,t.useEffect)(()=>{let e=!0;return(async()=>{try{const[t,r]=await Promise.all([(0,p.fetchFilters)(),(0,p.fetchAllCountries)()]);e&&q({...t,countries:r})}catch(t){console.error('\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432:',t),e&&q({countries:[],categories:[],companions:[],complexity:[],month:[],over_nights_stay:[],transports:[],categoryTravelAddress:[]})}})(),!F&&r?me(r):F&&(Y(!0),Q(!1)),()=>{e=!1}},[r,F,O,w,e,me]);const Se=(0,t.useCallback)(async()=>{try{await(0,_.trackWizardEvent)('wizard_manual_save',{step:K,is_new:F,is_edit:!F,status:se.data.moderation?'moderation':'draft'});const e=await pe.saveNow();return fe(e),ue('\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e'),e}catch(e){return ue('\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f','error'),void console.error('Manual save error:',e)}},[K,F,se.data.moderation,pe.saveNow,fe,ue]),be=(0,t.useCallback)(async()=>{await Se()},[Se]);(0,t.useEffect)(()=>{(0,_.trackWizardEvent)('wizard_step_view',{step:K})},[K]);const ge=(0,t.useCallback)(e=>{e&&!se.data.countries.includes(e)&&se.updateField('countries',[...se.data.countries,e])},[se.data.countries]),ve=(0,t.useCallback)(e=>{se.updateField('countries',se.data.countries.filter(t=>t!==e))},[se.data.countries]),ye=(0,t.useCallback)(e=>{if('function'==typeof e){const t=e(ne.current);se.updateFields(t)}else se.updateFields(e)},[]),he=(0,t.useCallback)(()=>{const e=(0,m.validateStep)(1,{name:se.data.name??''}),t=!e.isValid,r=e.errors.map(e=>e.field);if((0,_.trackWizardEvent)('wizard_step_next_click',{step_from:1,step_to:2,had_errors:t,error_fields:r}),!e.isValid)return ee(e.errors),void ue('\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f, \u0447\u0442\u043e\u0431\u044b \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u0434\u0430\u043b\u044c\u0448\u0435.','error');ee([]),R(2)},[se.data,ue]);if(J)return(0,N.jsx)(s.SafeAreaView,{style:T.safeContainer,children:(0,N.jsxs)(o.default,{style:T.loadingContainer,children:[(0,N.jsx)(o.default,{style:T.loadingSkeletonHeader}),(0,N.jsx)(o.default,{style:T.loadingSkeletonSubheader}),(0,N.jsx)(o.default,{style:T.loadingSkeletonBlock})]})});if(!X)return null;if(F&&!O){const t=encodeURIComponent('/travel/new');return(0,N.jsx)(s.SafeAreaView,{style:T.safeContainer,children:(0,N.jsxs)(o.default,{style:[T.loadingContainer,{justifyContent:'center'}],children:[(0,N.jsx)(i.Button,{mode:"contained",onPress:()=>e.push(`/login?redirect=${t}`),style:T.saveButtonMobile,children:"\u0412\u043e\u0439\u0442\u0438, \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442"}),(0,N.jsx)(i.Button,{mode:"outlined",onPress:()=>e.push(`/registration?redirect=${t}`),style:T.filterButton,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})})}const ke=I.find(e=>e.id===K),Ee=K/6,xe=U?.countries??[],we=se.data.countries??[],Ce=!U,Ne='saving'===pe.status||'debouncing'===pe.status?'\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c \u0447\u0435\u0440\u043d\u043e\u0432\u0438\u043a\u2026':'error'===pe.status?'\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u2014 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435':pe.lastSaved?`\u0427\u0435\u0440\u043d\u043e\u0432\u0438\u043a \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d ${pe.lastSaved.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})}`:'\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043f\u043e\u043a\u0430 \u043d\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b';if(1===K){const e=(()=>{const e=Z[0]?.field;return'name'===e?e:null})();return(0,N.jsx)(v.default,{currentStep:K,totalSteps:6,formData:se.data,setFormData:ye,isMobile:G,onManualSave:Se,snackbarVisible:'error'===pe.status,snackbarMessage:pe.error?.message||'',onDismissSnackbar:pe.clearError,onGoNext:he,stepErrors:Z.map(e=>e.message),firstErrorField:e,autosaveStatus:pe.status,autosaveBadge:Ne,stepMeta:ke,progress:Ee,focusAnchorId:re,onAnchorHandled:le})}if(2===K){const e=e=>{H(e),$.current&&clearTimeout($.current),$.current=setTimeout(()=>{se.updateField('coordsMeTravel',e)},1e3)};return(0,N.jsx)(y.default,{currentStep:K,totalSteps:6,markers:L,setMarkers:e,categoryTravelAddress:U?.categoryTravelAddress??[],countries:xe,travelId:se.data.id,selectedCountryIds:we,onCountrySelect:ge,onCountryDeselect:ve,onBack:()=>{(0,_.trackWizardEvent)('wizard_step_back_click',{step_from:2,step_to:1}),R(1)},onNext:()=>{(0,_.trackWizardEvent)('wizard_step_next_click',{step_from:2,step_to:3,had_errors:!1,error_fields:[]}),R(3)},isFiltersLoading:Ce,onManualSave:Se,stepMeta:ke,progress:Ee,autosaveBadge:Ne,focusAnchorId:re,onAnchorHandled:le})}if(3===K)return(0,N.jsx)(h.default,{currentStep:K,totalSteps:6,formData:se.data,setFormData:ye,travelDataOld:P,onManualSave:Se,onBack:()=>{(0,_.trackWizardEvent)('wizard_step_back_click',{step_from:3,step_to:2}),R(2)},onNext:()=>{(0,_.trackWizardEvent)('wizard_step_next_click',{step_from:3,step_to:4,had_errors:!1,error_fields:[]}),R(4)},stepMeta:ke,progress:Ee,autosaveBadge:Ne,focusAnchorId:re,onAnchorHandled:le});if(4===K)return(0,N.jsx)(k.default,{currentStep:K,totalSteps:6,formData:se.data,setFormData:ye,onManualSave:Se,onBack:()=>{(0,_.trackWizardEvent)('wizard_step_back_click',{step_from:4,step_to:3}),R(3)},onNext:()=>{(0,_.trackWizardEvent)('wizard_step_next_click',{step_from:4,step_to:5,had_errors:!1,error_fields:[]}),R(5)},stepMeta:ke,progress:Ee,autosaveBadge:Ne});if(5===K)return(0,N.jsx)(E.default,{currentStep:K,totalSteps:6,formData:se.data,setFormData:ye,filters:U,travelDataOld:P,isSuperAdmin:j,onManualSave:Se,onBack:()=>{(0,_.trackWizardEvent)('wizard_step_back_click',{step_from:5,step_to:4}),R(4)},onNext:()=>{(0,_.trackWizardEvent)('wizard_step_next_click',{step_from:5,step_to:6,had_errors:!1,error_fields:[]}),R(6)},stepMeta:ke,progress:Ee,autosaveBadge:Ne,focusAnchorId:re,onAnchorHandled:le});return(0,N.jsx)(x.default,{currentStep:K,totalSteps:6,formData:se.data,setFormData:ye,filters:U,travelDataOld:P,isSuperAdmin:j,onManualSave:Se,onGoBack:()=>R(5),onFinish:be,onNavigateToIssue:ie,stepMeta:ke,progress:Ee,autosaveBadge:Ne})};var t=(function(e,t){if("function"==typeof WeakMap)var r=new WeakMap,o=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var n,s,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(n=t?o:r){if(n.has(e))return n.get(e);n.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((s=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(s.get||s.set)?n(i,t,s):i[t]=e[t]);return i})(e,t)})(_r(d[1])),r=e(_r(d[2])),o=e(_r(d[3])),n=e(_r(d[4])),s=(e(_r(d[5])),_r(d[6])),i=_r(d[7]),l=_r(d[8]),u=e(_r(d[9])),c=_r(d[10]),p=_r(d[11]),f=_r(d[12]),m=_r(d[13]),_=_r(d[14]),S=_r(d[15]),b=_r(d[16]),v=e(_r(d[17])),y=e(_r(d[18])),h=e(_r(d[19])),k=e(_r(d[20])),E=e(_r(d[21])),x=e(_r(d[22])),w=_r(d[23]),C=_r(d[24]),N=_r(d[25]);const I=[{id:1,title:'\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f',subtitle:'\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0438 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f',tipTitle:'\u0421\u043e\u0432\u0435\u0442',tipBody:'\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u0438 \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0433\u043e \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f. \u041e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043f\u043e\u0437\u0436\u0435 \u2014 \u043e\u043d\u0438 \u043d\u0443\u0436\u043d\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u0438.',nextLabel:'\u0414\u0430\u043b\u0435\u0435: \u041c\u0430\u0440\u0448\u0440\u0443\u0442 (\u0448\u0430\u0433 2 \u0438\u0437 6)'},{id:2,title:'\u041c\u0430\u0440\u0448\u0440\u0443\u0442 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435',subtitle:'\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0442\u043e\u0447\u043a\u0438 \u0438 \u0441\u0442\u0440\u0430\u043d\u044b \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430',tipTitle:'\u041b\u0430\u0439\u0444\u0445\u0430\u043a',tipBody:'',nextLabel:'\u041a \u043c\u0435\u0434\u0438\u0430 (\u0448\u0430\u0433 3 \u0438\u0437 6)'},{id:3,title:'\u041c\u0435\u0434\u0438\u0430 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f',subtitle:'\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043e\u0431\u043b\u043e\u0436\u043a\u0443, \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u0438 \u0432\u0438\u0434\u0435\u043e \u2014 \u044d\u0442\u043e \u043f\u043e\u0432\u044b\u0448\u0430\u0435\u0442 \u0434\u043e\u0432\u0435\u0440\u0438\u0435 \u0438 \u043a\u043e\u043d\u0432\u0435\u0440\u0441\u0438\u044e',tipTitle:'\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430',tipBody:'\u0415\u0441\u043b\u0438 \u0435\u0441\u0442\u044c \u0432\u044b\u0431\u043e\u0440, \u043d\u0430\u0447\u043d\u0438\u0442\u0435 \u0441 \u043e\u0431\u043b\u043e\u0436\u043a\u0438: \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u044b\u0439 \u043a\u0430\u0434\u0440 \u0431\u0435\u0437 \u043a\u043e\u043b\u043b\u0430\u0436\u0435\u0439 \u043e\u0431\u044b\u0447\u043d\u043e \u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0441\u044f \u043b\u0443\u0447\u0448\u0435 \u0432 \u0441\u043f\u0438\u0441\u043a\u0430\u0445.',nextLabel:'\u041a \u0434\u0435\u0442\u0430\u043b\u044f\u043c (\u0448\u0430\u0433 4 \u0438\u0437 6)'},{id:4,title:'\u0414\u0435\u0442\u0430\u043b\u0438 \u0438 \u0441\u043e\u0432\u0435\u0442\u044b',subtitle:'\u041f\u043b\u044e\u0441\u044b/\u043c\u0438\u043d\u0443\u0441\u044b, \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u0438 \u0431\u044e\u0434\u0436\u0435\u0442 \u2014 \u0447\u0442\u043e\u0431\u044b \u043c\u0430\u0440\u0448\u0440\u0443\u0442 \u0431\u044b\u043b \u043f\u043e\u043b\u0435\u0437\u043d\u0435\u0435',tipTitle:'\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430',tipBody:'\u041a\u043e\u0440\u043e\u0442\u043a\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0438 \u0438 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u0438\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u043b\u0443\u0447\u0448\u0435, \u0447\u0435\u043c \u043e\u0431\u0449\u0438\u0439 \u0442\u0435\u043a\u0441\u0442. \u041f\u0438\u0448\u0438\u0442\u0435 \u0442\u0430\u043a, \u043a\u0430\u043a \u0441\u043e\u0432\u0435\u0442\u043e\u0432\u0430\u043b\u0438 \u0431\u044b \u0434\u0440\u0443\u0433\u0443.',nextLabel:'\u041a \u0434\u043e\u043f. \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c (\u0448\u0430\u0433 5 \u0438\u0437 6)'},{id:5,title:'\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b',subtitle:'\u0422\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442, \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c, \u0441\u0435\u0437\u043e\u043d\u043d\u043e\u0441\u0442\u044c, \u0432\u0438\u0437\u0430 \u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438',tipTitle:'\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430',tipBody:'\u042d\u0442\u0438 \u043f\u043e\u043b\u044f \u043d\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430 \u043f\u043e \u0448\u0430\u0433\u0430\u043c, \u043d\u043e \u043f\u043e\u043c\u043e\u0433\u0430\u044e\u0442 \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u044f\u043c \u043b\u0443\u0447\u0448\u0435 \u043f\u043e\u043d\u044f\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430.',nextLabel:'\u041a \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 (\u0448\u0430\u0433 6 \u0438\u0437 6)'},{id:6,title:'\u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f',subtitle:'\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u044c \u0438 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441 \u2014 \u0447\u0435\u0440\u043d\u043e\u0432\u0438\u043a \u0438\u043b\u0438 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u044f',tipTitle:'\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430',tipBody:'\u041f\u0435\u0440\u0435\u0434 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u0435\u0439 \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u0435\u0441\u0442\u044c \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435, \u0441\u0442\u0440\u0430\u043d\u044b, \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0430 \u0442\u043e\u0447\u043a\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430 \u0438 \u043e\u0431\u043b\u043e\u0436\u043a\u0430/\u0444\u043e\u0442\u043e.',nextLabel:'\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c'}];const T=r.default.create({safeContainer:{flex:1,backgroundColor:w.DESIGN_TOKENS.colors.background},mainWrapper:{flex:1,flexDirection:'row'},mainWrapperMobile:{flexDirection:'column'},contentColumn:{flex:1},filtersColumn:{width:320,borderLeftWidth:1,padding:w.DESIGN_TOKENS.spacing.md,borderColor:w.DESIGN_TOKENS.colors.border},filtersScroll:{maxHeight:'80%'},mobileFiltersWrapper:{padding:w.DESIGN_TOKENS.spacing.md},saveButtonMobile:{backgroundColor:w.DESIGN_TOKENS.colors.primary,borderRadius:w.DESIGN_TOKENS.radii.pill,minWidth:150},filterButton:{borderColor:w.DESIGN_TOKENS.colors.primary,borderRadius:w.DESIGN_TOKENS.radii.pill,minWidth:100},loadingContainer:{flex:1,justifyContent:'center',alignItems:'stretch',paddingHorizontal:w.DESIGN_TOKENS.spacing.lg,gap:w.DESIGN_TOKENS.spacing.md},loadingSkeletonHeader:{height:20,borderRadius:6,backgroundColor:w.DESIGN_TOKENS.colors.border,marginBottom:4},loadingSkeletonSubheader:{height:14,borderRadius:6,backgroundColor:w.DESIGN_TOKENS.colors.border,width:'70%',marginBottom:12},loadingSkeletonBlock:{height:160,borderRadius:10,backgroundColor:w.DESIGN_TOKENS.colors.border}});function D(e){return{id:e||null,name:'',categories:[],transports:[],month:[],complexity:[],over_nights_stay:[],cities:[],countries:[],budget:'',year:'',number_peoples:'',number_days:'',minus:'',plus:'',recommendation:'',description:'',publish:!1,moderation:!1,visa:!1,coordsMeTravel:[],thumbs200ForCollectionArr:[],travelImageThumbUrlArr:[],travelImageAddress:[],gallery:[],youtube_link:'',companions:[],countryIds:[],travelAddressIds:[],travelAddressCity:[],travelAddressCountry:[],travelAddressAdress:[],travelAddressCategory:[],categoriesIds:[]}}function M(e,t){const r=Array.from(new Set((e||[]).map(e=>null!=e.country?String(e.country):null).filter(e=>!!e))),o=new Set([...t,...r]);return Array.from(o)}function A(e){const t=null!=e.year?String(e.year):'',r=null!=e.number_days?String(e.number_days):'',o=null!=e.number_peoples?String(e.number_peoples):'';return{...D(String(e.id)),...e,id:String(e.id),year:t,number_days:r,number_peoples:o,moderation:e.moderation??!1,publish:e.publish??!1,visa:e.visa??!1,companions:(e.companions||[]).map(e=>String(e))}}function B(e){if(null==e)return null;if('number'==typeof e)return Number.isFinite(e)?e:null;if('string'==typeof e){const t=e.trim();if(!t)return null;const r=Number(t);return Number.isFinite(r)?r:null}return null}},2470,[23,4,145,315,284,123,2622,2652,457,905,987,1050,888,2471,2472,2473,2474,2475,2481,2491,2498,2500,2502,1013,985,2]);
__d(function(g,r,_i,a,m,_e,d){function e(e){return e&&0!==e.trim().length?e.trim().length<3?{field:'name',message:'\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430'}:e.trim().length>200?{field:'name',message:'\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0442\u044c 200 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432'}:null:{field:'name',message:'\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f'}}function t(t,u){const o=[];e(t.name??void 0)&&o.push({key:'name',label:'\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435',targetStep:1,anchorId:'travelwizard-basic-name'});n(t.description??void 0)&&o.push({key:'description',label:'\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435',targetStep:1,anchorId:'travelwizard-basic-description'});l(t.countries??[])&&o.push({key:'countries',label:'\u0421\u0442\u0440\u0430\u043d\u044b (\u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0430)',targetStep:2,anchorId:'travelwizard-route-countries'});i(t.categories??[])&&o.push({key:'categories',label:'\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 (\u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0430)',targetStep:5,anchorId:'travelwizard-extras-categories'});s(Array.isArray(u)&&u.length>0?u:t.coordsMeTravel??[])&&o.push({key:'route',label:'\u041c\u0430\u0440\u0448\u0440\u0443\u0442 (\u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0430 \u0442\u043e\u0447\u043a\u0430)',targetStep:2,anchorId:'markers-list-root'});const c=t.gallery??[];return!!(t.travel_image_thumb_small_url&&t.travel_image_thumb_small_url.trim().length>0)||c.length>0||o.push({key:'photos',label:'\u0424\u043e\u0442\u043e \u0438\u043b\u0438 \u043e\u0431\u043b\u043e\u0436\u043a\u0430',targetStep:3,anchorId:'travelwizard-media-cover'}),o}function n(e){return e&&0!==e.trim().length?e.trim().length<50?{field:'description',message:'\u041e\u043f\u0438\u0448\u0438\u0442\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442 \u0447\u0443\u0442\u044c \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 (\u043c\u0438\u043d\u0438\u043c\u0443\u043c 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432), \u0447\u0442\u043e\u0431\u044b \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u043a\u0430\u043c \u0431\u044b\u043b\u043e \u043f\u043e\u043d\u044f\u0442\u043d\u043e, \u0447\u0435\u0433\u043e \u043e\u0436\u0438\u0434\u0430\u0442\u044c.'}:null:{field:'description',message:'\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f'}}function l(e){return e&&0!==e.length?null:{field:'countries',message:'\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u0443 \u0441\u0442\u0440\u0430\u043d\u0443'}}function i(e){return e&&0!==e.length?null:{field:'categories',message:'\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u0443 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e'}}function s(e){return e&&0!==e.length?null:{field:'coordsMeTravel',message:'\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u0443 \u0442\u043e\u0447\u043a\u0443 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435'}}function u(e){if(null==e)return null;const t='number'==typeof e?String(e):String(e??'').trim();if(0===t.length)return null;const n=parseInt(t,10),l=(new Date).getFullYear();return isNaN(n)||n<1900||n>l+1?{field:'year',message:`\u0413\u043e\u0434 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043e\u0442 1900 \u0434\u043e ${l+1}`}:null}function o(e){if(null==e)return null;const t='number'==typeof e?String(e):String(e??'').trim();if(0===t.length)return null;const n=parseInt(t,10);return isNaN(n)||n<1||n>365?{field:'number_days',message:'\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u043d\u0435\u0439 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043e\u0442 1 \u0434\u043e 365'}:null}function c(e){if(null==e)return null;const t='number'==typeof e?String(e):String(e??'').trim();if(0===t.length)return null;const n=parseInt(t,10);return isNaN(n)||n<1||n>100?{field:'number_peoples',message:'\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043b\u044e\u0434\u0435\u0439 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043e\u0442 1 \u0434\u043e 100'}:null}function p(e){if(!e||0===e.trim().length)return null;return/^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/.+$/.test(e.trim())?null:{field:'youtube_link',message:'\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0443\u044e \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 YouTube'}}Object.defineProperty(_e,"__esModule",{value:!0}),_e.getFieldError=function(e,t){const n=t.find(t=>t.field===e);return n?n.message:null},_e.getModerationErrors=function(e,n){return t(e,n).map(e=>e.label)},_e.getModerationIssues=t,_e.validateCategories=i,_e.validateCountries=l,_e.validateDays=o,_e.validateDescription=n,_e.validateMarkers=s,_e.validateName=e,_e.validatePeople=c,_e.validateStep=function(t,n,l){const i=[];if(1===t){const t=e(n.name??void 0);return t&&i.push(t),{isValid:0===i.length,errors:i}}return{isValid:!0,errors:[]}},_e.validateTravelForm=function(t){const h=[],f=e(t.name);f&&h.push(f);const v=n(t.description);v&&h.push(v);const b=l(t.countries);b&&h.push(b);const y=i(t.categories);y&&h.push(y);const _=s(t.coordsMeTravel);_&&h.push(_);const S=u(t.year);S&&h.push(S);const k=o(t.number_days);k&&h.push(k);const I=c(t.number_peoples);I&&h.push(I);const w=p(t.youtube_link);w&&h.push(w);return{isValid:0===h.length,errors:h}},_e.validateYear=u,_e.validateYouTubeLink=p},2471,[]);
__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.trackWizardEvent=e.sendAnalyticsEvent=void 0;const n=async(n,t={})=>{console.warn('GA4: Missing MEASUREMENT_ID or API_SECRET')};e.sendAnalyticsEvent=n;e.trackWizardEvent=async(t,s={})=>n(0,s)},2472,[]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.useOptimizedFormState=function(t,c={}){const{debounce:n=5e3,onSave:o,onSuccess:l,onError:b,onStart:S,validateOnChange:f=!0,validationDebounce:h=300}=c,[y,v]=(0,u.useState)({data:t,errors:{},touched:new Set,isDirty:!1,isValid:!0,isSubmitting:!1}),D=(0,u.useRef)(t),k=(0,u.useRef)(null),w=(0,u.useRef)(null),C=(0,u.useRef)(!0);(0,u.useEffect)(()=>()=>{C.current=!1,k.current&&clearTimeout(k.current),w.current&&clearTimeout(w.current)},[]);const E=(0,u.useCallback)((t,u)=>{v(c=>{const n={...c.data,[t]:u},o=!(0,s.default)(n,D.current);return{...c,data:n,touched:new Set(c.touched).add(t),isDirty:o}}),f&&h>0&&(w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{C.current&&V(t,u)},h))},[f,h]),T=(0,u.useCallback)(t=>{v(u=>{const c={...u.data,...t},n=!(0,s.default)(c,D.current),o=new Set(u.touched);return Object.keys(t).forEach(t=>o.add(t)),{...u,data:c,touched:o,isDirty:n}})},[]),V=(0,u.useCallback)((t,u)=>{v(u=>({...u,errors:{...u.errors,[t]:''}}))},[]),F=(0,u.useCallback)(()=>{v(t=>({...t,errors:{},isValid:!0}))},[]);(0,u.useEffect)(()=>{if(o&&y.isDirty)return k.current&&clearTimeout(k.current),S?.(),k.current=setTimeout(async()=>{if(C.current)try{v(t=>({...t,isSubmitting:!0}));const t=await o(y.data);C.current&&(D.current=t,v(t=>({...t,isDirty:!1,isSubmitting:!1})),l?.(t))}catch(t){C.current&&(v(t=>({...t,isSubmitting:!1})),b?.(t))}},n),()=>{k.current&&clearTimeout(k.current)}},[y.data,y.isDirty,n,o,l,b,S]);const p=(0,u.useCallback)(async()=>{if(!o)throw new Error('No onSave function provided');v(t=>({...t,isSubmitting:!0}));try{const t=await o(y.data);return C.current&&(D.current=t,v(t=>({...t,isDirty:!1,isSubmitting:!1})),l?.(t)),t}catch(t){throw C.current&&(v(t=>({...t,isSubmitting:!1})),b?.(t)),t}},[o,y.data,l,b]),O=(0,u.useCallback)(u=>{const s=u||t;D.current=s,v({data:s,errors:{},touched:new Set,isDirty:!1,isValid:!0,isSubmitting:!1})},[t]),R=(0,u.useCallback)(()=>{v(t=>({...t,errors:{},isValid:!0}))},[]),_=(0,u.useCallback)((t,u)=>{v(s=>({...s,errors:{...s.errors,[t]:u},isValid:!1}))},[]);return{data:y.data,errors:y.errors,touched:y.touched,isDirty:y.isDirty,isValid:y.isValid,isSubmitting:y.isSubmitting,updateField:E,updateFields:T,validateField:V,validateAll:F,save:p,reset:O,clearErrors:R,setFieldError:_,getFieldError:t=>y.errors[t]||'',isTouched:t=>y.touched.has(t),hasError:t=>!!y.errors[t]}};var u=r(d[1]),s=t(r(d[2]))},2473,[23,4,2056]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.useImprovedAutoSave=function(t,s,l){const{debounce:o=5e3,onSave:c,onSuccess:f,onError:v,onStart:w,maxRetries:S=3,retryDelay:C=1e3,enableRetry:y=!0}=l,[b,E]=(0,n.useState)({status:'idle',lastSaved:null,error:null,retryCount:0,isOnline:!0}),O=(0,n.useRef)(null),h=(0,n.useRef)(null),R=(0,n.useRef)(!0),T=(0,n.useRef)(s),k=(0,n.useRef)(t),L=(0,n.useRef)(!0),p=(0,n.useRef)(null),_=(0,n.useCallback)(()=>{O.current&&(clearTimeout(O.current),O.current=null),h.current&&(clearTimeout(h.current),h.current=null),p.current&&(p.current.abort(),p.current=null)},[]);(0,n.useEffect)(()=>{const t=()=>{L.current=!0,E(t=>({...t,isOnline:!0}))},n=()=>{L.current=!1,E(t=>({...t,isOnline:!1}))};return window.addEventListener('online',t),window.addEventListener('offline',n),()=>{window.removeEventListener('online',t),window.removeEventListener('offline',n)}},[]),(0,n.useEffect)(()=>()=>{R.current=!1,_()},[_]);const D=(0,n.useCallback)(async(t,n=0)=>{p.current=new AbortController;try{E(t=>({...t,status:'saving',error:null}));const n=await c(t);return R.current?(T.current=n,k.current=n,E(t=>({...t,status:'saved',lastSaved:new Date,error:null,retryCount:0})),f?.(n),n):n}catch(u){if(!R.current)return t;const s=u instanceof Error?u:new Error('Save failed');if(y&&n<S&&L.current)throw E(t=>({...t,error:s,retryCount:n+1})),h.current=setTimeout(()=>{R.current&&D(t,n+1).catch(()=>{})},C*Math.pow(2,n)),s;throw E(t=>({...t,status:'error',error:s,retryCount:0})),v?.(s),s}},[c,f,v,y,S,C]);(0,n.useEffect)(()=>{const n=(0,u.default)(t,T.current);if(!n)return k.current=t,O.current&&(clearTimeout(O.current),O.current=null),E(t=>'debouncing'===t.status?t:{...t,status:'debouncing',error:null}),O.current=setTimeout(()=>{if(!R.current)return;const t=k.current;(0,u.default)(t,T.current)||L.current&&(w?.(),D(t).catch(()=>{}))},o),()=>{O.current&&(clearTimeout(O.current),O.current=null)}},[t,o,D,w]);const A=(0,n.useCallback)(async()=>{if(!b.isOnline)throw new Error('Cannot save while offline');return _(),D(t)},[t,D,_,b.isOnline]),M=(0,n.useCallback)(()=>{_(),T.current=s,E({status:'idle',lastSaved:null,error:null,retryCount:0,isOnline:b.isOnline})},[s,_,b.isOnline]),N=(0,n.useCallback)(()=>{E(t=>({...t,error:null,status:'idle'}))},[]),j=(0,n.useCallback)(()=>{if('error'!==b.status||!b.error)throw new Error('No failed save to retry');return D(t)},[b.status,b.error,t,D]),x=(0,n.useCallback)(t=>{T.current=t,k.current=t},[]);return{status:b.status,lastSaved:b.lastSaved,error:b.error,retryCount:b.retryCount,isOnline:b.isOnline,hasUnsavedChanges:!(0,u.default)(t,T.current),saveNow:A,resetToOriginal:M,clearError:N,retrySave:j,updateBaseline:x,canSave:b.isOnline&&'saving'!==b.status,isSaving:'saving'===b.status,hasError:'error'===b.status,timeSinceLastSave:b.lastSaved?Date.now()-b.lastSaved.getTime():null}};var n=r(d[1]),u=t(r(d[2]))},2474,[23,4,2056]);
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var r=(function(e,r){if("function"==typeof WeakMap)var t=new WeakMap,o=new WeakMap;return(function(e,r){if(!r&&e&&e.__esModule)return e;var n,i,l={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return l;if(n=r?o:t){if(n.has(e))return n.get(e);n.set(e,l)}for(const r in e)"default"!==r&&{}.hasOwnProperty.call(e,r)&&((i=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,r))&&(i.get||i.set)?n(l,r,i):l[r]=e[r]);return l})(e,r)})(_r(d[1])),t=e(_r(d[2])),o=(e(_r(d[3])),e(_r(d[4]))),n=e(_r(d[5])),i=e(_r(d[6])),l=e(_r(d[7])),s=e(_r(d[8])),c=_r(d[9]),u=_r(d[10]),p=e(_r(d[11])),f=e(_r(d[12])),S=e(_r(d[13])),h=_r(d[14]),y=_r(d[15]),b=_r(d[16]);const{width:x,height:E}=s.default.get('window'),D=x<=y.METRICS.breakpoints.tablet,N=.8*E,v=({currentStep:e,totalSteps:n,formData:s,setFormData:h,isMobile:y=D,onManualSave:x,snackbarVisible:E,snackbarMessage:N,onDismissSnackbar:v,onGoNext:k,stepErrors:T,firstErrorField:M,autosaveStatus:j,autosaveBadge:I,focusAnchorId:O,onAnchorHandled:C,stepMeta:G,progress:w=e/n})=>{const W=Math.min(Math.max(w,0),1),K=Math.round(100*W),[P,A]=(0,r.useState)(0),B=(0,r.useCallback)(e=>{const r=Math.ceil(e.nativeEvent.layout.height);A(e=>e===r?e:r)},[]),H=(0,r.useMemo)(()=>P>0?P+16:180,[P]);return(0,b.jsx)(c.SafeAreaView,{style:_.safeContainer,children:(0,b.jsxs)(t.default,{style:_.keyboardAvoid,behavior:void 0,keyboardVerticalOffset:0,children:[(0,b.jsx)(f.default,{title:G?.title??'\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f',subtitle:G?.subtitle??`\u0428\u0430\u0433 ${e} \u0438\u0437 ${n}`,progressPercent:K,autosaveBadge:I,tipTitle:G?.tipTitle,tipBody:G?.tipBody}),T&&T.length>0&&(0,b.jsxs)(i.default,{style:_.errorSummaryContainer,children:[T.map((e,r)=>(0,b.jsxs)(l.default,{style:_.errorSummaryText,children:["\u2022 ",e]},r)),(0,b.jsx)(l.default,{style:_.errorSummaryHelper,children:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044f \u2014 \u0431\u0435\u0437 \u043d\u0438\u0445 \u043c\u0430\u0440\u0448\u0440\u0443\u0442 \u043d\u0435\u043b\u044c\u0437\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u044e."})]}),(0,b.jsx)(i.default,{style:[_.mainWrapper,y&&_.mainWrapperMobile],children:(0,b.jsx)(o.default,{style:_.contentColumn,contentContainerStyle:[_.contentContainer,{paddingBottom:H}],keyboardShouldPersistTaps:"handled",children:(0,b.jsx)(i.default,{style:_.contentInner,children:(0,b.jsx)(p.default,{formData:s,setFormData:h,firstErrorField:M,autosaveStatus:j,focusAnchorId:O,onAnchorHandled:C,visibleFields:['name','description'],showProgress:!1})})})}),(0,b.jsx)(S.default,{canGoBack:!1,onPrimary:k,primaryLabel:G?.nextLabel??'\u0414\u0430\u043b\u0435\u0435',onSave:x,onLayout:B}),(0,b.jsx)(u.Snackbar,{visible:E,onDismiss:v,children:N})]})})},_=n.default.create({safeContainer:{flex:1,backgroundColor:h.DESIGN_TOKENS.colors.background},keyboardAvoid:{flex:1},mainWrapper:{flex:1,flexDirection:'row'},mainWrapperMobile:{flexDirection:'column'},contentColumn:{flex:1},filtersScroll:{maxHeight:N},mobileFiltersWrapper:{padding:h.DESIGN_TOKENS.spacing.md},contentContainer:{paddingHorizontal:8,paddingTop:h.DESIGN_TOKENS.spacing.sm,alignItems:'center'},contentInner:{width:'100%',maxWidth:980},errorSummaryContainer:{paddingHorizontal:h.DESIGN_TOKENS.spacing.lg,paddingVertical:8,backgroundColor:h.DESIGN_TOKENS.colors.errorSoft,borderTopWidth:1,borderBottomWidth:1,borderColor:h.DESIGN_TOKENS.colors.dangerLight},errorSummaryText:{fontSize:h.DESIGN_TOKENS.typography.sizes.xs,color:h.DESIGN_TOKENS.colors.dangerDark},errorSummaryHelper:{marginTop:4,fontSize:h.DESIGN_TOKENS.typography.sizes.xs,color:h.DESIGN_TOKENS.colors.dangerDark}});_e.default=r.default.memo(v)},2475,[23,4,414,123,322,145,315,132,284,2622,2652,2476,2479,2480,1013,985,2]);
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var r=(function(e,r){if("function"==typeof WeakMap)var t=new WeakMap,o=new WeakMap;return(function(e,r){if(!r&&e&&e.__esModule)return e;var s,i,n={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return n;if(s=r?o:t){if(s.has(e))return s.get(e);s.set(e,n)}for(const r in e)"default"!==r&&{}.hasOwnProperty.call(e,r)&&((i=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,r))&&(i.get||i.set)?s(n,r,i):n[r]=e[r]);return n})(e,r)})(_r(d[1])),t=e(_r(d[2])),o=e(_r(d[3])),s=e(_r(d[4])),i=e(_r(d[5])),n=e(_r(d[6])),l=e(_r(d[7])),c=e(_r(d[8])),u=(e(_r(d[9])),e(_r(d[10])),e(_r(d[11]))),S=e(_r(d[12])),p=_r(d[13]),E=_r(d[14]),f=(_r(d[15]),_r(d[16]));const N=({formData:e,setFormData:s,firstErrorField:E,autosaveStatus:N,focusAnchorId:y,onAnchorHandled:x,visibleFields:T,showProgress:_=!0})=>{const[b,D]=(0,r.useState)([]),[I,O]=(0,r.useState)(new Set),[G,K]=(0,r.useState)({}),j=(0,r.useRef)(null),[v,w]=(0,r.useState)(!1),C=(0,r.useMemo)(()=>!1,[]);(0,r.useEffect)(()=>{const r=(0,p.validateTravelForm)({name:e.name,description:e.description,countries:e.countries,categories:e.categories,year:e.year,number_days:e.number_days,number_peoples:e.number_peoples,youtube_link:e.youtube_link});D(r.errors)},[e.name,e.description,e.countries,e.categories,e.year,e.number_days,e.number_peoples,e.youtube_link]);const z=(0,r.useMemo)(()=>{const r=e.description??'';return String(r).replace(/<[^>]*>/g,' ').replace(/&nbsp;/gi,' ').replace(/\s+/g,' ').trim().length},[e.description]),k=(0,r.useMemo)(()=>{const r=e.description??'';return String(r).replace(/<[^>]*>/g,' ').replace(/&nbsp;/gi,' ').replace(/\s+/g,' ').trim()},[e.description]),H=(0,r.useMemo)(()=>0===z?'\u041e\u043f\u0438\u0448\u0438\u0442\u0435, \u0434\u043b\u044f \u043a\u043e\u0433\u043e \u044d\u0442\u043e\u0442 \u043c\u0430\u0440\u0448\u0440\u0443\u0442, \u0447\u0442\u043e \u0432 \u043d\u0451\u043c \u0433\u043b\u0430\u0432\u043d\u043e\u0435 \u0438 \u0447\u0435\u0433\u043e \u043e\u0436\u0438\u0434\u0430\u0442\u044c. \u041c\u0438\u043d\u0438\u043c\u0443\u043c 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432.':z<50?'\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u043e\u043a\u0430 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0435. \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 (\u043c\u0438\u043d\u0438\u043c\u0443\u043c 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432).':z<=150?'\u0425\u043e\u0440\u043e\u0448\u0435\u0435 \u043a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435. \u041c\u043e\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0447\u0443\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0434\u0435\u0442\u0430\u043b\u0435\u0439 (\u043f\u043e \u0436\u0435\u043b\u0430\u043d\u0438\u044e).':'\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u044b\u043c.',[z]),P=(0,r.useCallback)((e,r)=>{s(t=>({...t,[e]:r})),O(r=>new Set(r).add(e))},[s]),B=(0,r.useCallback)(e=>I.has(e)?(0,p.getFieldError)(e,b):null,[I,b]),M=(0,r.useMemo)(()=>{const r=['name','description','countries','categories'],t=r.filter(r=>{const t=e[r];return Array.isArray(t)?t.length>0:t&&String(t).trim().length>0});return Math.round(t.length/r.length*100)},[e]),W=(0,r.useMemo)(()=>null!=e?.id?String(e.id):void 0,[e?.id]),R=(0,r.useCallback)((e,r,s,i=null,u=!1,p,E)=>{const y=E??('\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435'===e?'description':void 0),x='\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435'===e;return(0,f.jsxs)(t.default,{style:h.sectionEditor,onLayout:e=>{if(!y)return;const r=e.nativeEvent.layout.y;K(e=>({...e,[y]:r}))},children:[(0,f.jsxs)(t.default,{style:h.editorHeader,children:[(0,f.jsxs)(n.default,{style:h.editorLabel,children:[e,u&&(0,f.jsx)(n.default,{style:h.required,children:" *"})]}),p&&(0,f.jsx)(n.default,{style:h.editorHint,children:p})]}),x&&C?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(c.default,{style:h.descriptionPreview,activeOpacity:.9,onPress:()=>w(!0),children:[(0,f.jsx)(n.default,{style:h.descriptionPreviewText,numberOfLines:4,children:k.length>0?k:p??'\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\u2026'}),(0,f.jsxs)(t.default,{style:h.descriptionPreviewFooter,children:[(0,f.jsxs)(n.default,{style:h.descriptionCounterText,children:[z," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"]}),(0,f.jsx)(t.default,{style:h.descriptionEditChip,children:(0,f.jsx)(n.default,{style:h.descriptionEditChipText,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})})]})]}),(0,f.jsx)(l.default,{visible:v,animationType:"slide",presentationStyle:"fullScreen",onRequestClose:()=>w(!1),children:(0,f.jsxs)(o.default,{style:h.modalSafeArea,children:[(0,f.jsxs)(t.default,{style:h.modalHeader,children:[(0,f.jsx)(c.default,{onPress:()=>w(!1),hitSlop:{top:10,bottom:10,left:10,right:10},children:(0,f.jsx)(n.default,{style:h.modalHeaderAction,children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})}),(0,f.jsx)(n.default,{style:h.modalHeaderTitle,children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,f.jsx)(c.default,{onPress:()=>w(!1),hitSlop:{top:10,bottom:10,left:10,right:10},children:(0,f.jsx)(n.default,{style:h.modalHeaderAction,children:"\u0413\u043e\u0442\u043e\u0432\u043e"})})]}),(0,f.jsx)(t.default,{style:h.modalBody,children:(0,f.jsx)(S.default,{label:e,content:r??'',onChange:s,idTravel:W,variant:"default"},`description-fullscreen-${W??'new'}`)})]})})]}):(0,f.jsx)(S.default,{label:e,content:r??'',onChange:s,idTravel:W,variant:x?'default':'compact'},`${e}-${W??'new'}`),x&&(0,f.jsxs)(t.default,{style:h.descriptionStatusRow,children:[(0,f.jsx)(n.default,{style:h.descriptionStatusText,children:H}),(0,f.jsxs)(n.default,{style:h.descriptionCounterText,children:[z," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"]})]}),x&&N&&(0,f.jsxs)(t.default,{style:h.autosaveRow,children:['saving'===N&&(0,f.jsx)(n.default,{style:h.autosaveText,children:"\u0410\u0432\u0442\u043e\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435\u2026"}),'saved'===N&&(0,f.jsx)(n.default,{style:h.autosaveSuccess,children:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"}),'error'===N&&(0,f.jsx)(n.default,{style:h.autosaveError,children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437 \u0438\u043b\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442."})]}),i&&(0,f.jsx)(t.default,{style:h.errorContainer,children:(0,f.jsx)(n.default,{style:h.errorText,children:i})})]})},[z,k,H,W,v,C]);return(0,r.useEffect)(()=>{if(!E)return;const e=G[E];null!=e&&j.current&&j.current.scrollTo({y:Math.max(e-40,0),animated:!0})},[E,G]),(0,r.useEffect)(()=>{if(!y)return;const e='travelwizard-basic-name'===y?'name':'travelwizard-basic-description'===y?'description':null;e&&x?.()},[G,y,x]),(0,f.jsx)(o.default,{style:h.safeArea,children:(0,f.jsxs)(i.default,{contentContainerStyle:h.container,keyboardShouldPersistTaps:"handled",showsVerticalScrollIndicator:!1,ref:j,children:[_&&(0,f.jsxs)(t.default,{style:h.progressSection,children:[(0,f.jsxs)(t.default,{style:h.progressHeader,children:[(0,f.jsx)(n.default,{style:h.progressLabel,children:"\u041f\u0440\u043e\u0433\u0440\u0435\u0441\u0441 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),(0,f.jsxs)(n.default,{style:h.progressPercent,children:[M,"%"]})]}),(0,f.jsx)(t.default,{style:h.progressBarContainer,children:(0,f.jsx)(t.default,{style:[h.progressBar,{width:`${M}%`}]})})]}),(null==T||T.includes('name'))&&(0,f.jsx)(t.default,{style:h.section,nativeID:"travelwizard-basic-name",onLayout:e=>{const r=e.nativeEvent.layout.y;K(e=>({...e,name:r}))},children:(0,f.jsx)(u.default,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:e.name??'',onChange:e=>P('name',e),error:B('name'),required:!0,hint:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u0438 \u043f\u043e\u043d\u044f\u0442\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 (\u043d\u0435 \u043c\u0435\u043d\u0435\u0435 3 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432). \u041f\u043e \u043d\u0435\u043c\u0443 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u043a\u0438 \u0431\u0443\u0434\u0443\u0442 \u0438\u0441\u043a\u0430\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442."})}),(null==T||T.includes('description'))&&(0,f.jsx)(t.default,{nativeID:"travelwizard-basic-description",onLayout:e=>{const r=e.nativeEvent.layout.y;K(e=>({...e,description:r}))},children:R('\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435',e.description,e=>P('description',e),B('description'),!0,'\u041e\u043f\u0438\u0448\u0438\u0442\u0435, \u0434\u043b\u044f \u043a\u043e\u0433\u043e \u044d\u0442\u043e\u0442 \u043c\u0430\u0440\u0448\u0440\u0443\u0442, \u0447\u0442\u043e \u0432 \u043d\u0451\u043c \u0433\u043b\u0430\u0432\u043d\u043e\u0435 \u0438 \u0447\u0435\u0433\u043e \u043e\u0436\u0438\u0434\u0430\u0442\u044c. \u041c\u0438\u043d\u0438\u043c\u0443\u043c 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432.')}),(null==T||T.includes('plus'))&&R('\u041f\u043b\u044e\u0441\u044b',e.plus,e=>P('plus',e),null,!1,'\u0427\u0442\u043e \u0432\u0430\u043c \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u043b\u043e\u0441\u044c \u0432 \u044d\u0442\u043e\u043c \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0438'),(null==T||T.includes('minus'))&&R('\u041c\u0438\u043d\u0443\u0441\u044b',e.minus,e=>P('minus',e),null,!1,'\u0427\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0443\u043b\u0443\u0447\u0448\u0438\u0442\u044c'),(null==T||T.includes('recommendation'))&&R('\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438',e.recommendation,e=>P('recommendation',e),null,!1,'\u0412\u0430\u0448\u0438 \u0441\u043e\u0432\u0435\u0442\u044b \u0434\u043b\u044f \u0434\u0440\u0443\u0433\u0438\u0445 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u043a\u043e\u0432')]})})},h=s.default.create({safeArea:{flex:1,backgroundColor:E.DESIGN_TOKENS.colors.background},container:{padding:E.DESIGN_TOKENS.spacing.xxs,paddingBottom:40},modalSafeArea:{flex:1,backgroundColor:E.DESIGN_TOKENS.colors.background},modalHeader:{paddingHorizontal:E.DESIGN_TOKENS.spacing.md,paddingVertical:E.DESIGN_TOKENS.spacing.sm,borderBottomWidth:1,borderColor:E.DESIGN_TOKENS.colors.border,flexDirection:'row',alignItems:'center',justifyContent:'space-between',backgroundColor:E.DESIGN_TOKENS.colors.surface},modalHeaderTitle:{fontSize:E.DESIGN_TOKENS.typography.sizes.md,fontWeight:'700',color:E.DESIGN_TOKENS.colors.text},modalHeaderAction:{fontSize:E.DESIGN_TOKENS.typography.sizes.sm,fontWeight:'600',color:E.DESIGN_TOKENS.colors.primary},modalBody:{flex:1,padding:E.DESIGN_TOKENS.spacing.xxs},descriptionPreview:{borderWidth:1,borderColor:E.DESIGN_TOKENS.colors.border,backgroundColor:E.DESIGN_TOKENS.colors.surface,borderRadius:12,padding:E.DESIGN_TOKENS.spacing.md,minHeight:140},descriptionPreviewText:{fontSize:E.DESIGN_TOKENS.typography.sizes.sm,color:E.DESIGN_TOKENS.colors.text,lineHeight:18,marginBottom:E.DESIGN_TOKENS.spacing.sm},descriptionPreviewFooter:{flexDirection:'row',alignItems:'center',justifyContent:'space-between'},descriptionEditChip:{paddingHorizontal:E.DESIGN_TOKENS.spacing.sm,paddingVertical:E.DESIGN_TOKENS.spacing.xxs,borderRadius:999,backgroundColor:E.DESIGN_TOKENS.colors.primarySoft,borderWidth:1,borderColor:E.DESIGN_TOKENS.colors.borderAccent},descriptionEditChipText:{fontSize:E.DESIGN_TOKENS.typography.sizes.xs,fontWeight:'600',color:E.DESIGN_TOKENS.colors.primary},progressSection:{marginBottom:E.DESIGN_TOKENS.spacing.xs,padding:E.DESIGN_TOKENS.spacing.lg,backgroundColor:E.DESIGN_TOKENS.colors.surface,borderRadius:12,borderWidth:1,borderColor:E.DESIGN_TOKENS.colors.border},progressHeader:{flexDirection:'row',justifyContent:'space-between',alignItems:'center',marginBottom:8},progressLabel:{fontSize:E.DESIGN_TOKENS.typography.sizes.sm,fontWeight:'600',color:E.DESIGN_TOKENS.colors.text},progressPercent:{fontSize:E.DESIGN_TOKENS.typography.sizes.md,fontWeight:'700',color:E.DESIGN_TOKENS.colors.primary},progressBarContainer:{height:8,backgroundColor:E.DESIGN_TOKENS.colors.border,borderRadius:4,overflow:'hidden'},progressBar:{height:'100%',backgroundColor:E.DESIGN_TOKENS.colors.primary,borderRadius:4},section:{marginBottom:E.DESIGN_TOKENS.spacing.xxs,backgroundColor:E.DESIGN_TOKENS.colors.surface,borderRadius:E.DESIGN_TOKENS.radii.md,padding:E.DESIGN_TOKENS.spacing.lg,borderWidth:1,borderColor:E.DESIGN_TOKENS.colors.border,boxShadow:E.DESIGN_TOKENS.shadows.card},descriptionStatusRow:{marginTop:8,flexDirection:'row',justifyContent:'space-between',alignItems:'center'},descriptionStatusText:{flex:1,fontSize:E.DESIGN_TOKENS.typography.sizes.xs,color:E.DESIGN_TOKENS.colors.textMuted,marginRight:8},descriptionCounterText:{fontSize:E.DESIGN_TOKENS.typography.sizes.xs,fontWeight:'600',color:E.DESIGN_TOKENS.colors.text},autosaveRow:{marginTop:4},autosaveText:{fontSize:E.DESIGN_TOKENS.typography.sizes.xs,color:E.DESIGN_TOKENS.colors.textMuted},autosaveSuccess:{fontSize:E.DESIGN_TOKENS.typography.sizes.xs,color:E.DESIGN_TOKENS.colors.successDark},autosaveError:{fontSize:E.DESIGN_TOKENS.typography.sizes.xs,color:E.DESIGN_TOKENS.colors.dangerDark},sectionEditor:{marginBottom:E.DESIGN_TOKENS.spacing.xxs,paddingBottom:E.DESIGN_TOKENS.spacing.xs,backgroundColor:E.DESIGN_TOKENS.colors.surface,borderRadius:E.DESIGN_TOKENS.radii.md,padding:E.DESIGN_TOKENS.spacing.lg,borderWidth:1,borderColor:E.DESIGN_TOKENS.colors.border,boxShadow:E.DESIGN_TOKENS.shadows.card},editorHeader:{marginBottom:12},editorLabel:{fontSize:E.DESIGN_TOKENS.typography.sizes.sm,fontWeight:'600',color:E.DESIGN_TOKENS.colors.text,marginBottom:4},required:{color:E.DESIGN_TOKENS.colors.danger},editorHint:{fontSize:E.DESIGN_TOKENS.typography.sizes.xs,color:E.DESIGN_TOKENS.colors.textMuted,marginTop:4},errorContainer:{marginTop:8,flexDirection:'row',alignItems:'center',gap:E.DESIGN_TOKENS.spacing.xs},errorText:{fontSize:E.DESIGN_TOKENS.typography.sizes.xs,color:E.DESIGN_TOKENS.colors.danger}});_e.default=r.default.memo(N)},2476,[23,4,315,428,145,322,132,415,409,123,284,2477,2478,2471,1013,985,2]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t(r(d[1])),l=t(r(d[2])),n=t(r(d[3])),u=t(r(d[4])),s=t(r(d[5])),c=(t(r(d[6])),r(d[7])),f=r(d[8]);const h=c.DESIGN_TOKENS.colors,x=({label:t,value:o,onChange:l,secureTextEntry:c=!1,placeholder:x,error:p,hint:w,required:y=!1,multiline:S=!1,numberOfLines:C=1,disabled:E=!1})=>(0,f.jsxs)(s.default,{style:b.container,children:[t&&(0,f.jsx)(s.default,{style:b.labelRow,children:(0,f.jsxs)(n.default,{style:b.label,children:[t,y&&(0,f.jsx)(n.default,{style:b.required,children:" *"})]})}),(0,f.jsx)(u.default,{style:[b.input,p&&b.inputError,E&&b.inputDisabled,S&&b.inputMultiline],value:o,onChangeText:l,placeholder:x||`\u0412\u0432\u0435\u0434\u0438\u0442\u0435 ${t?.toLowerCase?.()||''}`,placeholderTextColor:h.textMuted,secureTextEntry:c,multiline:S,numberOfLines:C,editable:!E,outlineWidth:0,':focus':{borderColor:p?'#ef4444':h.primary,outlineWidth:2,outlineColor:p?'#ef4444':h.primary,outlineStyle:'solid',outlineOffset:2}}),w&&!p&&(0,f.jsx)(n.default,{style:b.hint,children:w}),p&&(0,f.jsx)(s.default,{style:b.errorContainer,children:(0,f.jsx)(n.default,{style:b.errorText,children:p})})]}),b=l.default.create({container:{marginBottom:16},labelRow:{marginBottom:6},label:{fontSize:14,color:h.text,fontWeight:'600'},required:{color:h.danger},input:{borderRadius:12,paddingHorizontal:14,paddingVertical:12,fontSize:15,backgroundColor:h.surface,color:h.text,minHeight:44,shadowColor:'#1f1f1f',shadowOffset:{width:0,height:1},shadowOpacity:.04,shadowRadius:3,elevation:1,transition:'all 0.2s cubic-bezier(0.4, 0, 0.2, 1)',boxShadow:c.DESIGN_TOKENS.shadows.light,':focus':{boxShadow:`0 0 0 3px ${h.focus}, ${c.DESIGN_TOKENS.shadows.medium}`}},inputError:{backgroundColor:h.dangerLight,boxShadow:`0 0 0 2px ${h.danger}, ${c.DESIGN_TOKENS.shadows.light}`},inputDisabled:{opacity:.6,backgroundColor:h.mutedBackground,color:h.textMuted,cursor:'not-allowed'},inputMultiline:{minHeight:100,textAlignVertical:'top'},hint:{fontSize:12,color:h.textMuted,marginTop:4},errorContainer:{flexDirection:'row',alignItems:'center',gap:6,marginTop:6,padding:10,backgroundColor:h.dangerLight,borderRadius:8,borderLeftWidth:3,borderLeftColor:h.danger},errorText:{fontSize:13,color:h.dangerDark,fontWeight:'500',flex:1}});e.default=o.default.memo(x)},2477,[23,4,145,132,432,315,123,1013,2]);
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var t=(function(e,t){if("function"==typeof WeakMap)var r=new WeakMap,n=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var l,o,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(l=t?n:r){if(l.has(e))return l.get(e);l.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((o=(l=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?l(i,t,o):i[t]=e[t]);return i})(e,t)})(_r(d[1])),r=e(_r(d[2])),n=e(_r(d[3])),l=e(_r(d[4])),o=e(_r(d[5])),i=e(_r(d[6])),s=e(_r(d[7])),c=e(_r(d[8])),u=e(_r(d[9])),f=(e(_r(d[10])),e(_r(d[11]))),p=_r(d[12]),h=_r(d[13]),b=_r(d[14]);const x=window;function y(e,r=300){const n=(0,t.useRef)(),l=(0,t.useRef)(e);return l.current=e,(0,t.useCallback)((...e)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>l.current(...e),r)},[r])}function w(e){if(!e)return'';let t=String(e);return t=t.replace(/ style="[^"]*"/gi,''),t=t.replace(/ (color|face|size)="[^"]*"/gi,''),t=t.replace(/ class="[^"]*"/gi,''),t=t.replace(/<!--[\s\S]*?-->/g,''),t}const v=x?t.default.lazy(async()=>({default:(await _r(d[16])(d[15],d.paths)).default})):void 0;if(x){const e='https://cdn.jsdelivr.net/npm/react-quill@2/dist/quill.snow.css';if(!x.document.querySelector(`link[href="${e}"]`)){const t=x.document.createElement('link');t.rel='stylesheet',t.href=e,x.document.head.appendChild(t)}}const j={toolbar:[['bold','italic','underline','strike'],[{header:[1,2,3,!1]}],[{list:'ordered'},{list:'bullet'}],['link','image'],['clean']],history:{delay:2e3,maxStack:100,userOnly:!0},clipboard:{matchVisual:!1}},k={toolbar:[['bold','italic','underline'],[{list:'bullet'}],['link'],['clean']],history:{delay:2e3,maxStack:100,userOnly:!0},clipboard:{matchVisual:!1}},E=({label:e="\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",placeholder:l="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\u2026",content:E,onChange:q,onAutosave:S,autosaveDelay:T=5e3,idTravel:L,editorRef:P,variant:M="default"})=>{const[_,R]=(0,t.useState)(E),[W,D]=(0,t.useState)(!1),[H,z]=(0,t.useState)(!1),O=(0,t.useRef)(null),A=(0,t.useRef)(null),{isAuthenticated:B}=(0,h.useAuth)();(0,t.useEffect)(()=>{P&&('function'==typeof P?P(O.current):P.current=O.current)});const V=y(q,250);(0,t.useEffect)(()=>{E!==_&&R(E)},[E]),(0,t.useEffect)(()=>{if(!x)return;const e=x.document.createElement('style');return e.innerHTML="\n      :root{--bg:#fff;--fg:#333;--bar:#f5f5f5}\n      @media(prefers-color-scheme:dark){:root{--bg:#1e1e1e;--fg:#e0e0e0;--bar:#2a2a2a}}\n      .ql-editor{background:var(--bg);color:var(--fg)}\n      .ql-toolbar{background:var(--bar);position:sticky;top:0;z-index:10;max-width:100%}\n      .ql-toolbar.ql-snow{display:flex;flex-wrap:wrap;gap:6px;align-items:center}\n      .ql-toolbar.ql-snow .ql-formats{display:flex;flex-wrap:wrap;gap:4px;margin-right:6px}\n      .ql-toolbar.ql-snow .ql-picker{max-width:100%}\n      .ql-toolbar.ql-snow button{flex:0 0 auto}\n      .ql-container{max-width:100%}\n      .ql-editor{max-width:100%;overflow-wrap:anywhere}\n      .ql-editor img{max-width:100%;height:auto;max-height:60vh;display:block;margin:12px auto;object-fit:contain}\n    ",x.document.head.appendChild(e),()=>{x.document.head.removeChild(e)}},[]),(0,t.useEffect)(()=>{if(!S)return;const e=setTimeout(()=>S(_),T);return()=>clearTimeout(e)},[_,S,T]);const F=(0,t.useCallback)(e=>{const t=w(e);R(t),V(t)},[V]),I=(0,t.useCallback)(e=>{if(!O.current)return;const t=O.current.getEditor(),r=t.getSelection()||{index:t.getLength(),length:0};t.insertEmbed(r.index,'image',e),t.setSelection(r.index+1,0,'silent'),F(t.root.innerHTML)},[F]),$=(0,t.useCallback)(async e=>{if(B)try{const t=new FormData;t.append('file',e),t.append('collection','description'),L&&t.append('id',L);const r=await(0,p.uploadImage)(t);if(!r?.url)throw new Error('no url');I(r.url)}catch{s.default.alert('\u041e\u0448\u0438\u0431\u043a\u0430','\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435')}else s.default.alert('\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f','\u0412\u043e\u0439\u0434\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f')},[L,I,B]);(0,t.useEffect)(()=>{if(!O.current)return;const e=O.current.getEditor().root,t=e=>{e.dataTransfer?.files?.length&&(e.preventDefault(),$(e.dataTransfer.files[0]))},r=e=>{const t=Array.from(e.clipboardData?.files??[])[0];t&&(e.preventDefault(),$(t))};return e.addEventListener('drop',t),e.addEventListener('paste',r),()=>{e.removeEventListener('drop',t),e.removeEventListener('paste',r)}},[$]);const G=t.default.memo(function({name:e,onPress:t,label:r}){return(0,b.jsx)(o.default,{onPress:t,style:C.btn,accessibilityRole:"button",accessibilityLabel:r,children:(0,b.jsx)(f.default,{name:e,size:20,color:"#555"})})}),J=()=>(0,b.jsxs)(r.default,{style:C.bar,children:[(0,b.jsx)(n.default,{style:C.label,children:e}),(0,b.jsxs)(r.default,{style:C.row,children:[(0,b.jsx)(G,{name:"undo",onPress:()=>O.current?.getEditor().history.undo(),label:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"}),(0,b.jsx)(G,{name:"redo",onPress:()=>O.current?.getEditor().history.redo(),label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"}),(0,b.jsx)(G,{name:"code",onPress:()=>{A.current=O.current?.getEditor().getSelection()??null,z(e=>!e)},label:H?'\u0421\u043a\u0440\u044b\u0442\u044c HTML-\u043a\u043e\u0434':'\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c HTML-\u043a\u043e\u0434'}),(0,b.jsx)(G,{name:W?'fullscreen-exit':'fullscreen',onPress:()=>{A.current=O.current?.getEditor().getSelection()??null,D(e=>!e)},label:W?'\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u043f\u043e\u043b\u043d\u043e\u044d\u043a\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0430':'\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u043e\u043b\u043d\u043e\u044d\u043a\u0440\u0430\u043d\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c'}),(0,b.jsx)(G,{name:"format-clear",onPress:()=>{if(!O.current)return;const e=O.current.getEditor(),t=e.getSelection()||{index:0,length:e.getLength()};e.removeFormat(t.index,t.length),F(e.root.innerHTML)},label:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),(0,b.jsx)(G,{name:"image",onPress:()=>{if(!x)return;const e=x.document.createElement('input');e.type='file',e.accept='image/*',e.onchange=()=>{const t=e.files?.[0];t&&$(t)},e.click()},label:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"})]})]});(0,t.useEffect)(()=>{!W&&!H&&A.current&&O.current&&O.current.getEditor().setSelection(A.current,'silent')},[W,H]);const K=()=>(0,b.jsx)(r.default,{style:C.loadBox,children:(0,b.jsx)(n.default,{style:C.loadTxt,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u2026"})});if(!v)return(0,b.jsx)(K,{});const N='compact'===M?k:j,Q=H?(0,b.jsx)(i.default,{style:C.html,multiline:!0,value:_,onChangeText:e=>F(e),placeholder:l,placeholderTextColor:"#999"}):(0,b.jsx)(t.Suspense,{fallback:(0,b.jsx)(K,{}),children:(0,b.jsx)(v,{ref:O,theme:"snow",value:_,onChange:e=>F(e),modules:N,placeholder:l,style:C.editor})}),U=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(J,{}),Q]});return W?(0,b.jsx)(c.default,{visible:!0,animationType:"slide",children:(0,b.jsx)(u.default,{style:C.fullWrap,children:U})}):(0,b.jsx)(r.default,{style:C.wrap,children:U})},q=(0,t.forwardRef)((e,t)=>(0,b.jsx)(E,{...e,editorRef:t}));_e.default=t.default.memo(q);const C=l.default.create({wrap:{borderWidth:1,borderColor:'#ddd',borderRadius:6,marginVertical:8,backgroundColor:'var(--bg)',width:'100%',maxWidth:'100%',overflow:'hidden'},bar:{flexDirection:'row',justifyContent:'space-between',alignItems:'center',paddingHorizontal:12,paddingVertical:8,borderBottomWidth:1,borderBottomColor:'#ddd',backgroundColor:'var(--bar)'},label:{fontSize:15,fontWeight:'600',color:'var(--fg)'},row:{flexDirection:'row'},btn:{marginLeft:12,padding:4},editor:{minHeight:200},html:{minHeight:200,padding:12,fontSize:14,color:'var(--fg)'},loadBox:{padding:20,alignItems:'center',justifyContent:'center'},loadTxt:{color:'#999'},fullWrap:{flex:1,backgroundColor:'var(--bg)'}})},2478,{"0":23,"1":4,"2":315,"3":132,"4":145,"5":409,"6":432,"7":308,"8":415,"9":428,"10":123,"11":1986,"12":1050,"13":888,"14":2,"15":3540,"16":1756,"paths":{"3540":"/_expo/static/js/web/index-ca6a7fdfdce0792b67dc44925e7e95ef.js"}});
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var o=(function(e,o){if("function"==typeof WeakMap)var t=new WeakMap,r=new WeakMap;return(function(e,o){if(!o&&e&&e.__esModule)return e;var l,i,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(l=o?r:t){if(l.has(e))return l.get(e);l.set(e,s)}for(const o in e)"default"!==o&&{}.hasOwnProperty.call(e,o)&&((i=(l=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,o))&&(i.get||i.set)?l(s,o,i):s[o]=e[o]);return s})(e,o)})(_r(d[1])),t=e(_r(d[2])),r=e(_r(d[3])),l=e(_r(d[4])),i=e(_r(d[5])),s=e(_r(d[6])),n=(e(_r(d[7])),_r(d[8])),c=_r(d[9]),u=_r(d[10]);const S=({canGoBack:e=!1,onBack:r,title:S,subtitle:N,progressPercent:p,autosaveBadge:b,extraBelowProgress:f,tipTitle:h,tipBody:T})=>{const{width:I}=(0,i.default)(),_=I<=c.DESIGN_TOKENS.breakpoints.mobile,x=Math.min(Math.max(p,0),100),[D,O]=(0,o.useState)(!1),G=!!T&&T.trim().length>0,y=(0,o.useMemo)(()=>h??'\u0421\u043e\u0432\u0435\u0442',[h]),K=G?_?(0,u.jsx)(s.default,{onPress:()=>O(e=>!e),style:[E.tipIconButton,D&&E.tipIconButtonActive],accessibilityRole:"button",accessibilityLabel:D?'\u0421\u043a\u0440\u044b\u0442\u044c \u0441\u043e\u0432\u0435\u0442':'\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u043e\u0432\u0435\u0442',children:(0,u.jsx)(n.Feather,{name:"info",size:16,color:D?c.DESIGN_TOKENS.colors.primary:c.DESIGN_TOKENS.colors.textSubtle})}):(0,u.jsxs)(s.default,{onPress:()=>O(e=>!e),style:[E.tipToggleButton,D&&E.tipToggleButtonActive],accessibilityRole:"button",accessibilityLabel:D?'\u0421\u043a\u0440\u044b\u0442\u044c \u0441\u043e\u0432\u0435\u0442':'\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u043e\u0432\u0435\u0442',cursor:'pointer',children:[(0,u.jsx)(n.Feather,{name:"info",size:16,color:D?c.DESIGN_TOKENS.colors.primary:c.DESIGN_TOKENS.colors.textSubtle}),(0,u.jsx)(l.default,{style:[E.tipToggleText,D&&E.tipToggleTextActive],numberOfLines:1,children:y})]}):null,B=e?(0,u.jsxs)(s.default,{onPress:r,style:E.backButton,accessibilityRole:"button",accessibilityLabel:"\u041d\u0430\u0437\u0430\u0434",disabled:!r,cursor:'pointer',children:[(0,u.jsx)(n.Feather,{name:"arrow-left",size:16,color:c.DESIGN_TOKENS.colors.text}),(0,u.jsx)(l.default,{style:E.backButtonText,children:"\u041d\u0430\u0437\u0430\u0434"})]}):null;return(0,u.jsxs)(t.default,{style:[E.headerWrapper,_&&E.headerWrapperMobile],children:[(0,u.jsxs)(t.default,{style:[E.headerRow,_&&E.headerRowMobile],children:[B,(0,u.jsxs)(t.default,{style:E.titleColumn,children:[(0,u.jsx)(l.default,{style:[E.headerTitle,_&&E.headerTitleMobile],numberOfLines:2,children:S}),(0,u.jsx)(l.default,{style:[E.headerSubtitle,_&&E.headerSubtitleMobile],numberOfLines:2,children:N})]}),_?null:(0,u.jsxs)(t.default,{style:E.headerRightRow,children:[K,b?(0,u.jsx)(t.default,{style:E.autosaveBadge,children:(0,u.jsx)(l.default,{style:E.autosaveBadgeText,children:b})}):null]})]}),_&&(b||K)?(0,u.jsxs)(t.default,{style:E.mobileMetaRow,children:[b?(0,u.jsx)(t.default,{style:E.autosaveBadge,children:(0,u.jsx)(l.default,{style:E.autosaveBadgeText,children:b})}):null,K]}):null,(0,u.jsx)(t.default,{style:E.progressBarTrack,children:(0,u.jsx)(t.default,{style:[E.progressBarFill,{width:`${x}%`}]})}),!_&&(0,u.jsxs)(l.default,{style:E.progressLabel,children:["\u0413\u043e\u0442\u043e\u0432\u043e \u043d\u0430 ",x,"%"]}),G&&D?(0,u.jsxs)(t.default,{style:E.tipPanel,children:[(0,u.jsx)(l.default,{style:E.tipPanelTitle,children:y}),(0,u.jsx)(l.default,{style:E.tipPanelBody,children:T})]}):null,f]})},E=r.default.create({headerWrapper:{paddingHorizontal:c.DESIGN_TOKENS.spacing.md,paddingTop:8,paddingBottom:8,backgroundColor:c.DESIGN_TOKENS.colors.surface,borderBottomWidth:1,borderBottomColor:c.DESIGN_TOKENS.colors.borderLight},headerWrapperMobile:{paddingHorizontal:c.DESIGN_TOKENS.spacing.sm,paddingTop:6,paddingBottom:6,backgroundColor:c.DESIGN_TOKENS.colors.surface,borderBottomWidth:1,borderBottomColor:c.DESIGN_TOKENS.colors.borderLight},headerRow:{flexDirection:'row',alignItems:'center',gap:c.DESIGN_TOKENS.spacing.sm},headerRowMobile:{flexDirection:'column',alignItems:'stretch',gap:c.DESIGN_TOKENS.spacing.xs},headerRightRow:{flexDirection:'row',alignItems:'center',gap:c.DESIGN_TOKENS.spacing.xs},backButton:{flexDirection:'row',alignItems:'center',gap:6,height:34,paddingHorizontal:10,borderRadius:c.DESIGN_TOKENS.radii.pill,backgroundColor:c.DESIGN_TOKENS.colors.surfaceMuted,borderWidth:1,borderColor:c.DESIGN_TOKENS.colors.borderLight},backButtonText:{fontSize:12,fontWeight:'700',color:c.DESIGN_TOKENS.colors.text},titleColumn:{flex:1,minWidth:0},headerTitle:{fontSize:18,fontWeight:'700',color:c.DESIGN_TOKENS.colors.text,marginBottom:4},headerTitleMobile:{fontSize:17,marginBottom:2},headerSubtitle:{fontSize:12,color:c.DESIGN_TOKENS.colors.textMuted},headerSubtitleMobile:{fontSize:12},autosaveBadge:{paddingHorizontal:c.DESIGN_TOKENS.spacing.sm,paddingVertical:c.DESIGN_TOKENS.spacing.xxs,borderRadius:c.DESIGN_TOKENS.radii.pill,backgroundColor:c.DESIGN_TOKENS.colors.primarySoft},mobileMetaRow:{marginTop:0,alignSelf:'flex-start',flexDirection:'row',alignItems:'center',gap:c.DESIGN_TOKENS.spacing.xs},autosaveBadgeText:{fontSize:11,color:c.DESIGN_TOKENS.colors.primaryDark,fontWeight:'600'},tipIconButton:{width:28,height:28,borderRadius:10,alignItems:'center',justifyContent:'center',backgroundColor:c.DESIGN_TOKENS.colors.surfaceMuted,borderWidth:1,borderColor:c.DESIGN_TOKENS.colors.borderLight},tipIconButtonActive:{backgroundColor:c.DESIGN_TOKENS.colors.primarySoft,borderColor:c.DESIGN_TOKENS.colors.primary},tipToggleButton:{flexDirection:'row',alignItems:'center',gap:6,paddingHorizontal:10,height:34,borderRadius:c.DESIGN_TOKENS.radii.pill,backgroundColor:c.DESIGN_TOKENS.colors.surfaceMuted,borderWidth:1,borderColor:c.DESIGN_TOKENS.colors.borderLight},tipToggleButtonActive:{backgroundColor:c.DESIGN_TOKENS.colors.primarySoft,borderColor:c.DESIGN_TOKENS.colors.primary},tipToggleText:{fontSize:12,fontWeight:'600',color:c.DESIGN_TOKENS.colors.textSubtle},tipToggleTextActive:{color:c.DESIGN_TOKENS.colors.primary},progressBarTrack:{marginTop:6,width:'100%',height:4,borderRadius:c.DESIGN_TOKENS.radii.pill,backgroundColor:c.DESIGN_TOKENS.colors.borderLight},progressBarFill:{height:4,borderRadius:c.DESIGN_TOKENS.radii.pill,backgroundColor:c.DESIGN_TOKENS.colors.primary},progressLabel:{marginTop:6,fontSize:c.DESIGN_TOKENS.typography.sizes.xs,color:c.DESIGN_TOKENS.colors.textMuted},tipPanel:{marginTop:c.DESIGN_TOKENS.spacing.sm,padding:c.DESIGN_TOKENS.spacing.sm,borderRadius:c.DESIGN_TOKENS.radii.md,backgroundColor:c.DESIGN_TOKENS.colors.surfaceMuted,borderWidth:1,borderColor:c.DESIGN_TOKENS.colors.borderLight},tipPanelTitle:{fontSize:12,fontWeight:'700',color:c.DESIGN_TOKENS.colors.text,marginBottom:4},tipPanelBody:{fontSize:12,color:c.DESIGN_TOKENS.colors.textMuted,lineHeight:16}});_e.default=o.default.memo(S)},2479,[23,4,315,145,132,447,422,123,2651,1013,2]);
__d(function(g,r,i,a,m,e,d){var o=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;o(r(d[1]));var t=o(r(d[2])),n=o(r(d[3])),l=(o(r(d[4])),o(r(d[5]))),s=r(d[6]),u=r(d[7]),c=r(d[8]),f=r(d[9]);const b=n.default.create({footer:{flexDirection:'row',alignItems:'center',justifyContent:'space-between',paddingHorizontal:c.DESIGN_TOKENS.spacing.lg,paddingVertical:12,borderTopWidth:1,borderColor:c.DESIGN_TOKENS.colors.border,backgroundColor:c.DESIGN_TOKENS.colors.surface,zIndex:c.DESIGN_TOKENS.zIndex.sticky},footerMobileNative:{position:'absolute',left:0,right:0,bottom:0},footerMobileWeb:{position:'sticky',left:0,right:0,bottom:0},footerButton:{flex:1,marginHorizontal:4},footerSaveButton:{marginLeft:4},mobileRow:{flexDirection:'row',alignItems:'center',justifyContent:'space-between',width:'100%'},mobileColumn:{flexDirection:'column',width:'100%',gap:8},mobileButton:{flex:1,marginHorizontal:4},mobileButtonFull:{width:'100%',marginHorizontal:0},footerSaveButtonMobile:{marginTop:6,alignSelf:'center'},footerButtonPlaceholder:{flex:1,marginHorizontal:4}});e.default=({canGoBack:o=!0,onBack:n,onPrimary:B,onSave:x,primaryLabel:h,saveLabel:y="\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",primaryDisabled:S=!1,onLayout:j})=>{const{width:p}=(0,l.default)(),v=p<=c.DESIGN_TOKENS.breakpoints.mobile,N=p<=380;(0,u.useSafeAreaInsets)();return(0,f.jsx)(t.default,{style:[b.footer,v&&b.footerMobileWeb,null],onLayout:j,children:v?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(t.default,{style:N?b.mobileColumn:b.mobileRow,children:[o?(0,f.jsx)(s.Button,{mode:"outlined",onPress:n,style:N?b.mobileButtonFull:b.mobileButton,children:"\u041d\u0430\u0437\u0430\u0434"}):(0,f.jsx)(t.default,{style:b.footerButtonPlaceholder}),(0,f.jsx)(s.Button,{mode:"contained",onPress:B,style:N?b.mobileButtonFull:b.mobileButton,disabled:S,children:h})]}),(0,f.jsx)(s.Button,{mode:"text",onPress:x,style:b.footerSaveButtonMobile,disabled:!x,children:y})]}):(0,f.jsxs)(f.Fragment,{children:[o?(0,f.jsx)(s.Button,{mode:"outlined",onPress:n,style:b.footerButton,children:"\u041d\u0430\u0437\u0430\u0434"}):(0,f.jsx)(t.default,{style:b.footerButtonPlaceholder}),(0,f.jsx)(s.Button,{mode:"contained",onPress:B,style:b.footerButton,disabled:S,children:h}),(0,f.jsx)(s.Button,{mode:"text",onPress:x,style:b.footerSaveButton,disabled:!x,children:y})]})})}},2480,[23,4,315,145,123,447,2652,2622,1013,2]);
__d(function(g,_r,_i,a,_m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var t=(function(e,t){if("function"==typeof WeakMap)var o=new WeakMap,n=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var r,l,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(r=t?n:o){if(r.has(e))return r.get(e);r.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((l=(r=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(l.get||l.set)?r(i,t,l):i[t]=e[t]);return i})(e,t)})(_r(d[1])),o=_r(d[2]),n=e(_r(d[3])),r=e(_r(d[4])),l=e(_r(d[5])),i=e(_r(d[6])),s=e(_r(d[7])),c=e(_r(d[8])),u=(e(_r(d[9])),e(_r(d[10])),e(_r(d[11])),e(_r(d[12]))),S=_r(d[13]),p=e(_r(d[14])),f=e(_r(d[15])),m=e(_r(d[16])),N=_r(d[17]),E=_r(d[18]);const h=t.default.lazy(()=>_r(d[20])(d[19],d.paths)),y=m.default,x='travelWizardRouteMapCoachmarkDismissed',I=({currentStep:e,totalSteps:l,markers:m,setMarkers:I,categoryTravelAddress:b,countries:_,travelId:D,selectedCountryIds:O,onCountrySelect:G,onCountryDeselect:K,onBack:j,onNext:k,isFiltersLoading:C,onManualSave:v,stepMeta:w,progress:B=e/l,autosaveBadge:M,focusAnchorId:z,onAnchorHandled:P})=>{const{width:R}=(0,u.default)(),W=R<=N.DESIGN_TOKENS.breakpoints.mobile,[H,L]=(0,t.useState)(0),F=(0,t.useCallback)(e=>{const t=Math.ceil(e.nativeEvent.layout.height);L(e=>e===t?e:t)},[]),A=(0,t.useMemo)(()=>H>0?H+16:180,[H]),V=(0,t.useRef)(null),$=(0,t.useRef)(null),q=(0,t.useRef)(null),J=Math.min(Math.max(B,0),1),Q=Math.round(100*J),U=(0,t.useMemo)(()=>m&&m.length>0,[m]),[X,Y]=(0,t.useState)(!1),[Z,ee]=(0,t.useState)(!1),[te,oe]=(0,t.useState)(''),[ae,ne]=(0,t.useState)(''),[re,le]=(0,t.useState)(''),[ie,se]=(0,t.useState)(!1);(0,t.useEffect)(()=>{z&&('markers-list-root'!==z&&'travelwizard-route-countries'!==z||P?.())},[z,P]);const de=e=>{const t=String(e||'').trim();if(!t)return null;const o=t.split(/[\s,;]+/).map(e=>e.trim()).filter(Boolean);if(o.length<2)return null;const n=Number(o[0]),r=Number(o[1]),l=Number.isFinite(n)&&n>=-90&&n<=90,i=Number.isFinite(r)&&r>=-180&&r<=180;return l&&i?{lat:n,lng:r}:null};(0,t.useEffect)(()=>{if(U)Y(!1);else try{const e='1'===window.localStorage.getItem(x);Y(!e)}catch{Y(!0)}},[U]);const ce=e=>{I(e)},ue=async(e,t)=>{const o=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&addressdetails=1`);return await o.json()};return(0,E.jsx)(o.SafeAreaView,{style:T.safeContainer,children:(0,E.jsxs)(n.default,{style:T.keyboardAvoid,behavior:void 0,keyboardVerticalOffset:0,children:[(0,E.jsx)(p.default,{canGoBack:!0,onBack:j,title:w?.title??'\u041c\u0430\u0440\u0448\u0440\u0443\u0442 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f',subtitle:w?.subtitle??`\u0428\u0430\u0433 ${e} \u0438\u0437 ${l}`,progressPercent:Q,autosaveBadge:M,tipTitle:w?.tipTitle,tipBody:w?.tipBody}),(0,E.jsx)(s.default,{ref:V,style:T.content,contentContainerStyle:[T.contentContainer,{paddingBottom:A}],keyboardShouldPersistTaps:"handled",children:(0,E.jsxs)(r.default,{style:T.contentInner,children:[(0,E.jsxs)(r.default,{style:T.card,children:[(0,E.jsxs)(r.default,{style:[T.mapHeader,W&&T.mapHeaderMobile],children:[(0,E.jsxs)(r.default,{style:{flex:1},children:[(0,E.jsx)(i.default,{style:T.mapTitle,children:"\u041a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0442\u043e\u0447\u043a\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430"}),(0,E.jsx)(i.default,{style:T.mapHint,children:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0442\u043e\u0447\u043a\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435. \u0414\u043b\u044f \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0430 \u0442\u043e\u0447\u043a\u0430."})]}),(0,E.jsxs)(i.default,{style:T.mapCount,children:["\u0422\u043e\u0447\u0435\u043a: ",m?.length??0]})]}),X&&!U&&(0,E.jsxs)(r.default,{style:T.coachmark,children:[(0,E.jsxs)(r.default,{style:{flex:1},children:[(0,E.jsx)(i.default,{style:T.coachmarkTitle,children:"\u041a\u0430\u043a \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0435\u0440\u0432\u0443\u044e \u0442\u043e\u0447\u043a\u0443"}),(0,E.jsx)(i.default,{style:T.coachmarkBody,children:"\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u043f\u043e \u043a\u0430\u0440\u0442\u0435 \u2014 \u0442\u043e\u0447\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438."})]}),(0,E.jsx)(S.Button,{mode:"text",onPress:()=>{Y(!1);try{window.localStorage.setItem(x,'1')}catch{}},compact:!0,children:"\u041f\u043e\u043d\u044f\u0442\u043d\u043e"})]}),(0,E.jsx)(r.default,{style:[T.manualPointRow,W&&T.manualPointRowMobile],children:(0,E.jsx)(S.Button,{mode:Z?'contained':'outlined',onPress:()=>ee(e=>!e),compact:!0,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0447\u043a\u0443 \u0432\u0440\u0443\u0447\u043d\u0443\u044e"})}),Z&&(0,E.jsxs)(r.default,{style:T.manualPointCard,children:[(0,E.jsxs)(r.default,{style:T.manualCoordsWrapper,children:[(0,E.jsx)(i.default,{style:T.manualPointLabel,children:"\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b (lat, lng)"}),(0,E.jsx)(c.default,{value:te,onChangeText:e=>{oe(e);const t=de(e);t&&(ne(String(t.lat)),le(String(t.lng)))},placeholder:"49.609645, 18.845693",style:T.manualPointInput,inputMode:"text"})]}),(0,E.jsxs)(r.default,{style:T.manualPointInputsRow,children:[(0,E.jsxs)(r.default,{style:T.manualPointInputWrapper,children:[(0,E.jsx)(i.default,{style:T.manualPointLabel,children:"\u0428\u0438\u0440\u043e\u0442\u0430"}),(0,E.jsx)(c.default,{value:ae,onChangeText:ne,placeholder:"\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 53.90",style:T.manualPointInput,inputMode:"decimal"})]}),(0,E.jsxs)(r.default,{style:T.manualPointInputWrapper,children:[(0,E.jsx)(i.default,{style:T.manualPointLabel,children:"\u0414\u043e\u043b\u0433\u043e\u0442\u0430"}),(0,E.jsx)(c.default,{value:re,onChangeText:le,placeholder:"\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 27.56",style:T.manualPointInput,inputMode:"decimal"})]})]}),(0,E.jsxs)(r.default,{style:T.manualPointActionsRow,children:[(0,E.jsx)(S.Button,{mode:"contained",onPress:async()=>{const e=de(te),t=e?.lat??Number(ae),o=e?.lng??Number(re),n=Number.isFinite(t)&&t>=-90&&t<=90,r=Number.isFinite(o)&&o>=-180&&o<=180;if(!n||!r)return;let l='',i=null;try{const e=await ue(t,o);l=e?.display_name||'';const n=e?.address?.country||'';if(n){const e=(_||[]).find(e=>e?.title_ru===n);e?.country_id&&(i=e.country_id)}}catch{}const s={id:null,lat:t,lng:o,address:l,categories:[],image:'',country:i?Number(i):null};i&&!O.includes(i)&&(G(i),se(!0),setTimeout(()=>se(!1),3e3)),ce([...m||[],s]),oe(''),ne(''),le(''),ee(!1)},compact:!0,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),(0,E.jsx)(S.Button,{mode:"text",onPress:()=>ee(!1),compact:!0,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]}),(0,E.jsxs)(r.default,{style:[T.filtersRow,W&&T.filtersRowMobile],children:[(0,E.jsx)(r.default,{ref:q,nativeID:"travelwizard-route-countries"}),(0,E.jsx)(r.default,{style:T.filterItem,children:C?(0,E.jsxs)(r.default,{style:T.filtersSkeleton,children:[(0,E.jsx)(r.default,{style:T.filtersSkeletonLabel}),(0,E.jsx)(r.default,{style:T.filtersSkeletonInput})]}):(0,E.jsx)(y,{label:"\u0421\u0442\u0440\u0430\u043d\u044b \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430",items:_,value:O,onChange:e=>{const t=O||[],o=e||[],n=o.filter(e=>!t.includes(e)),r=t.filter(e=>!o.includes(e));if(n.forEach(G),r.length){const e=new Set(r.map(String)),t=(m||[]).filter(t=>{const o=t?.country;return null==o||!e.has(String(o))});t.length!==(m||[]).length&&I(t)}r.forEach(K)},labelField:"title_ru",valueField:"country_id"})})]})]}),(0,E.jsxs)(r.default,{style:T.card,children:[(0,E.jsx)(r.default,{ref:$,nativeID:"markers-list-root"}),(0,E.jsx)(r.default,{style:[T.mapContainer,W&&T.mapContainerMobile],children:h?(0,E.jsx)(t.Suspense,{fallback:(0,E.jsx)(r.default,{style:T.lazyFallback,children:(0,E.jsx)(i.default,{style:T.lazyFallbackText,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043a\u0430\u0440\u0442\u044b\u2026"})}),children:(0,E.jsx)(h,{markers:m||[],onMarkersChange:ce,categoryTravelAddress:b,countrylist:_,onCountrySelect:G,onCountryDeselect:K,travelId:D??void 0})}):(0,E.jsxs)(r.default,{style:T.nativeMapPlaceholder,children:[(0,E.jsx)(i.default,{style:T.nativeMapTitle,children:"\u041a\u0430\u0440\u0442\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0432 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435"}),(0,E.jsx)(i.default,{style:T.nativeMapBody,children:"\u041d\u0430 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u043e\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0442\u043e\u0447\u043a\u0438 \u0432\u0440\u0443\u0447\u043d\u0443\u044e (\u043a\u043d\u043e\u043f\u043a\u0430 \u0432\u044b\u0448\u0435) \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442."})]})})]})]})}),(0,E.jsx)(f.default,{canGoBack:!1,onPrimary:()=>{k()},primaryLabel:"\u041a \u043c\u0435\u0434\u0438\u0430",onSave:v,saveLabel:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442",onLayout:F})]})})},T=l.default.create({safeContainer:{flex:1,backgroundColor:N.DESIGN_TOKENS.colors.background},keyboardAvoid:{flex:1},syncBadge:{marginTop:8,alignSelf:'flex-start',paddingHorizontal:N.DESIGN_TOKENS.spacing.sm,paddingVertical:N.DESIGN_TOKENS.spacing.xxs,borderRadius:999,backgroundColor:N.DESIGN_TOKENS.colors.successSoft,borderWidth:1,borderColor:N.DESIGN_TOKENS.colors.successLight},syncBadgeText:{fontSize:N.DESIGN_TOKENS.typography.sizes.xs,color:N.DESIGN_TOKENS.colors.successDark,fontWeight:'700'},headerActions:{marginTop:8,flexDirection:'row',justifyContent:'flex-end'},content:{flex:1,paddingHorizontal:8},contentContainer:{paddingBottom:0,paddingTop:N.DESIGN_TOKENS.spacing.sm,alignItems:'center'},contentInner:{width:'100%',maxWidth:980},card:{marginTop:N.DESIGN_TOKENS.spacing.lg,padding:N.DESIGN_TOKENS.spacing.lg,backgroundColor:N.DESIGN_TOKENS.colors.surface,borderRadius:N.DESIGN_TOKENS.radii.md,borderWidth:1,borderColor:N.DESIGN_TOKENS.colors.border,boxShadow:N.DESIGN_TOKENS.shadows.card,overflow:'hidden'},mapHeader:{paddingTop:2,paddingBottom:10,flexDirection:'row',justifyContent:'space-between',alignItems:'center'},mapHeaderMobile:{paddingTop:10,paddingBottom:8,alignItems:'flex-start',gap:N.DESIGN_TOKENS.spacing.sm},coachmark:{marginBottom:8,padding:N.DESIGN_TOKENS.spacing.md,borderRadius:N.DESIGN_TOKENS.radii.md,backgroundColor:N.DESIGN_TOKENS.colors.infoSoft,borderWidth:1,borderColor:N.DESIGN_TOKENS.colors.infoLight,flexDirection:'row',alignItems:'center',gap:N.DESIGN_TOKENS.spacing.sm},coachmarkTitle:{fontSize:N.DESIGN_TOKENS.typography.sizes.sm,fontWeight:'700',color:N.DESIGN_TOKENS.colors.infoDark,marginBottom:2},coachmarkBody:{fontSize:N.DESIGN_TOKENS.typography.sizes.sm,color:N.DESIGN_TOKENS.colors.text},manualPointRow:{paddingBottom:8,flexDirection:'row',justifyContent:'flex-start'},manualPointRowMobile:{paddingBottom:10},manualPointCard:{marginBottom:8,padding:N.DESIGN_TOKENS.spacing.md,borderRadius:N.DESIGN_TOKENS.radii.md,backgroundColor:N.DESIGN_TOKENS.colors.surfaceElevated,borderWidth:1,borderColor:N.DESIGN_TOKENS.colors.border},manualCoordsWrapper:{marginBottom:N.DESIGN_TOKENS.spacing.sm},manualPointInputsRow:{flexDirection:'row',gap:N.DESIGN_TOKENS.spacing.sm},manualPointInputWrapper:{flex:1},manualPointLabel:{fontSize:N.DESIGN_TOKENS.typography.sizes.xs,color:N.DESIGN_TOKENS.colors.textMuted,marginBottom:6,fontWeight:'600'},manualPointInput:{borderWidth:1,borderColor:N.DESIGN_TOKENS.colors.border,borderRadius:10,paddingHorizontal:N.DESIGN_TOKENS.spacing.md,paddingVertical:10,fontSize:N.DESIGN_TOKENS.typography.sizes.sm,backgroundColor:N.DESIGN_TOKENS.colors.surface},manualPointActionsRow:{marginTop:N.DESIGN_TOKENS.spacing.sm,flexDirection:'row',justifyContent:'flex-end',gap:N.DESIGN_TOKENS.spacing.sm},mapTitle:{fontSize:N.DESIGN_TOKENS.typography.sizes.md,fontWeight:'600',color:N.DESIGN_TOKENS.colors.text,marginBottom:N.DESIGN_TOKENS.spacing.xxs},mapHint:{fontSize:N.DESIGN_TOKENS.typography.sizes.xs,color:N.DESIGN_TOKENS.colors.textMuted},mapCount:{fontSize:N.DESIGN_TOKENS.typography.sizes.xs,fontWeight:'600',color:N.DESIGN_TOKENS.colors.primary},mapContainer:{marginTop:4,paddingHorizontal:N.DESIGN_TOKENS.spacing.md,paddingBottom:N.DESIGN_TOKENS.spacing.lg},mapContainerMobile:{marginTop:6,paddingBottom:N.DESIGN_TOKENS.spacing.md},lazyFallback:{padding:N.DESIGN_TOKENS.spacing.lg,borderRadius:N.DESIGN_TOKENS.radii.md,backgroundColor:N.DESIGN_TOKENS.colors.surface,borderWidth:1,borderColor:N.DESIGN_TOKENS.colors.border,alignItems:'center',justifyContent:'center',minHeight:240},lazyFallbackText:{fontSize:N.DESIGN_TOKENS.typography.sizes.sm,color:N.DESIGN_TOKENS.colors.textMuted,fontWeight:'600'},nativeMapPlaceholder:{padding:N.DESIGN_TOKENS.spacing.lg,borderRadius:N.DESIGN_TOKENS.radii.md,backgroundColor:N.DESIGN_TOKENS.colors.surface,borderWidth:1,borderColor:N.DESIGN_TOKENS.colors.border},nativeMapTitle:{fontSize:N.DESIGN_TOKENS.typography.sizes.md,fontWeight:'700',color:N.DESIGN_TOKENS.colors.text,marginBottom:6},nativeMapBody:{fontSize:N.DESIGN_TOKENS.typography.sizes.sm,color:N.DESIGN_TOKENS.colors.textMuted,lineHeight:18},filtersRow:{paddingHorizontal:N.DESIGN_TOKENS.spacing.md,paddingBottom:8},filtersRowMobile:{paddingBottom:10},filterItem:{flex:1},filtersSkeleton:{marginTop:4,paddingVertical:4},filtersSkeletonLabel:{width:120,height:12,borderRadius:4,backgroundColor:N.DESIGN_TOKENS.colors.borderLight,marginBottom:8},filtersSkeletonInput:{width:'100%',height:40,borderRadius:8,backgroundColor:N.DESIGN_TOKENS.colors.borderLight}});_e.default=t.default.memo(I)},2481,{"0":23,"1":4,"2":2622,"3":414,"4":315,"5":145,"6":132,"7":322,"8":432,"9":123,"10":299,"11":209,"12":447,"13":2652,"14":2479,"15":2480,"16":1995,"17":1013,"18":2,"19":2482,"20":1756,"paths":{"2482":"/_expo/static/js/web/WebMapComponent-1776bc0c50e42b3fb1799b1fbdce0d74.js"}});
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var t=(function(e,t){if("function"==typeof WeakMap)var o=new WeakMap,l=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var n,r,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(n=t?l:o){if(n.has(e))return n.get(e);n.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?n(i,t,r):i[t]=e[t]);return i})(e,t)})(_r(d[1])),o=_r(d[2]),l=e(_r(d[3])),n=(e(_r(d[4])),e(_r(d[5]))),r=e(_r(d[6])),i=e(_r(d[7])),s=e(_r(d[8])),c=(e(_r(d[9])),e(_r(d[10])),e(_r(d[11]))),u=e(_r(d[12])),f=e(_r(d[13])),S=e(_r(d[14])),p=_r(d[15]),h=_r(d[16]);const y=t.default.lazy(()=>_r(d[18])(d[17],d.paths)),_=({currentStep:e,totalSteps:r,formData:p,setFormData:_,travelDataOld:N,onManualSave:b,onBack:T,onNext:x,stepMeta:v,progress:I=e/r,autosaveBadge:O,focusAnchorId:D,onAnchorHandled:j})=>{const k=Math.min(Math.max(I,0),1),G=Math.round(100*k),[K,z]=(0,t.useState)(0),M=(0,t.useCallback)(e=>{const t=Math.ceil(e.nativeEvent.layout.height);z(e=>e===t?e:t)},[]),w=(0,t.useMemo)(()=>K>0?K+16:180,[K]),C=(0,t.useRef)(null),B=(0,t.useRef)(null);(0,t.useEffect)(()=>{D&&'travelwizard-media-cover'===D&&j?.()},[D,j]);return(0,h.jsx)(o.SafeAreaView,{style:E.safeContainer,children:(0,h.jsxs)(l.default,{style:E.keyboardAvoid,behavior:void 0,keyboardVerticalOffset:0,children:[(0,h.jsx)(f.default,{canGoBack:!0,onBack:T,title:v?.title??'\u041c\u0435\u0434\u0438\u0430 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f',subtitle:v?.subtitle??`\u0428\u0430\u0433 ${e} \u0438\u0437 ${r}`,progressPercent:G,autosaveBadge:O,tipTitle:v?.tipTitle,tipBody:v?.tipBody}),(0,h.jsx)(s.default,{ref:C,style:E.content,contentContainerStyle:[E.contentContainer,{paddingBottom:w}],keyboardShouldPersistTaps:"handled",children:(0,h.jsxs)(n.default,{style:E.contentInner,children:[(0,h.jsxs)(n.default,{ref:B,style:E.section,nativeID:"travelwizard-media-cover",children:[(0,h.jsx)(i.default,{style:E.sectionTitle,children:"\u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),(0,h.jsx)(i.default,{style:E.sectionHint,children:"\u041e\u0431\u043b\u043e\u0436\u043a\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0441\u043f\u0438\u0441\u043a\u0430\u0445 \u0438 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f."}),p.id?(0,h.jsx)(n.default,{style:E.coverWrapper,children:(0,h.jsx)(u.default,{collection:"travelMainImage",idTravel:p.id,oldImage:p.travel_image_thumb_small_url?.length?p.travel_image_thumb_small_url:N?.travel_image_thumb_small_url??null})}):(0,h.jsx)(i.default,{style:E.infoText,children:"\u0427\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0431\u043b\u043e\u0436\u043a\u0443, \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435 \u0447\u0435\u0440\u043d\u043e\u0432\u0438\u043a (\u043a\u043d\u043e\u043f\u043a\u0430 \xab\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c\xbb \u0432\u043d\u0438\u0437\u0443)."})]}),(0,h.jsxs)(n.default,{style:E.section,children:[(0,h.jsx)(i.default,{style:E.sectionTitle,children:"\u0413\u0430\u043b\u0435\u0440\u0435\u044f \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f"}),(0,h.jsx)(i.default,{style:E.sectionHint,children:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u043f\u043e\u0432\u044b\u0448\u0430\u044e\u0442 \u0434\u043e\u0432\u0435\u0440\u0438\u0435 \u0438 \u043f\u043e\u043c\u043e\u0433\u0430\u044e\u0442 \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u044f\u043c \u043b\u0443\u0447\u0448\u0435 \u043f\u043e\u043d\u044f\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c 3\u201310 \u0441\u043d\u0438\u043c\u043a\u043e\u0432."}),y?(0,h.jsx)(t.Suspense,{fallback:(0,h.jsx)(n.default,{style:E.lazyFallback,children:(0,h.jsx)(i.default,{style:E.lazyFallbackText,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0433\u0430\u043b\u0435\u0440\u0435\u0438\u2026"})}),children:(0,h.jsx)(y,{formData:p,travelDataOld:N})}):null]}),(0,h.jsx)(n.default,{style:E.section,children:(0,h.jsx)(c.default,{label:"\u0412\u0438\u0434\u0435\u043e \u043e \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0438 (YouTube-\u0441\u0441\u044b\u043b\u043a\u0430)",value:p.youtube_link??'',onChange:e=>{_({...p,youtube_link:e})},hint:"\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0440\u043e\u043b\u0438\u043a \u043d\u0430 YouTube, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: https://www.youtube.com/watch?v=..."})})]})}),(0,h.jsx)(S.default,{canGoBack:!1,onPrimary:x,onSave:b,primaryLabel:"\u041a \u0434\u0435\u0442\u0430\u043b\u044f\u043c",onLayout:M})]})})},E=r.default.create({safeContainer:{flex:1,backgroundColor:p.DESIGN_TOKENS.colors.background},keyboardAvoid:{flex:1},content:{flex:1},contentContainer:{paddingHorizontal:8,paddingBottom:0,paddingTop:p.DESIGN_TOKENS.spacing.sm,alignItems:'center'},contentInner:{width:'100%',maxWidth:980},section:{marginTop:p.DESIGN_TOKENS.spacing.lg,padding:p.DESIGN_TOKENS.spacing.lg,backgroundColor:p.DESIGN_TOKENS.colors.surface,borderRadius:p.DESIGN_TOKENS.radii.md,borderWidth:1,borderColor:p.DESIGN_TOKENS.colors.border,boxShadow:p.DESIGN_TOKENS.shadows.card},lazyFallback:{marginTop:8,padding:p.DESIGN_TOKENS.spacing.md,borderRadius:p.DESIGN_TOKENS.radii.md,backgroundColor:p.DESIGN_TOKENS.colors.surface,borderWidth:1,borderColor:p.DESIGN_TOKENS.colors.border,alignItems:'center',justifyContent:'center'},lazyFallbackText:{fontSize:p.DESIGN_TOKENS.typography.sizes.sm,color:p.DESIGN_TOKENS.colors.textMuted,fontWeight:'600'},sectionTitle:{fontSize:p.DESIGN_TOKENS.typography.sizes.md,fontWeight:'700',color:p.DESIGN_TOKENS.colors.text,marginBottom:4},sectionHint:{fontSize:p.DESIGN_TOKENS.typography.sizes.xs,color:p.DESIGN_TOKENS.colors.textMuted,marginBottom:8},coverWrapper:{marginTop:8,alignItems:'center'},infoText:{marginTop:8,fontSize:p.DESIGN_TOKENS.typography.sizes.sm,color:p.DESIGN_TOKENS.colors.textMuted}});_e.default=t.default.memo(_)},2491,{"0":23,"1":4,"2":2622,"3":414,"4":123,"5":315,"6":145,"7":132,"8":322,"9":299,"10":209,"11":2492,"12":2484,"13":2479,"14":2480,"15":1013,"16":2,"17":2493,"18":1756,"paths":{"2493":"/_expo/static/js/web/GallerySection-b3414a859b0a5af8f099f691a9245102.js"}});
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var t=(function(e,t){if("function"==typeof WeakMap)var r=new WeakMap,o=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var n,l,u={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return u;if(n=t?o:r){if(n.has(e))return n.get(e);n.set(e,u)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((l=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(l.get||l.set)?n(u,t,l):u[t]=e[t]);return u})(e,t)})(_r(d[1])),r=e(_r(d[2])),o=e(_r(d[3])),n=e(_r(d[4])),l=e(_r(d[5])),u=(e(_r(d[6])),_r(d[7])),i=_r(d[8]);const f=u.DESIGN_TOKENS.colors,c=r.default.create({container:{marginBottom:16},label:{marginBottom:6,fontSize:14,fontWeight:'600',color:f.text},hint:{fontSize:12,color:f.textMuted,marginBottom:6},input:{borderWidth:1,borderColor:f.border,borderRadius:8,paddingHorizontal:12,paddingVertical:10,fontSize:15,backgroundColor:f.surface,color:f.text,minHeight:44,transition:'border-color 0.2s ease'},invalidInput:{borderColor:'#ef4444'},errorContainer:{marginTop:4},errorText:{fontSize:12,color:'#ef4444'}});_e.default=({label:e,value:r,onChange:u,error:s,hint:p})=>{const[h,b]=(0,t.useState)(r),[y,x]=(0,t.useState)(null);(0,t.useEffect)(()=>{b(r),x(null)},[r]);const v=e=>{if(!e.trim())return null;return/^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/(watch\?v=|shorts\/)?[A-Za-z0-9_-]{11}/.test(e.trim())?null:'\u041d\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 YouTube'};(0,t.useEffect)(()=>{if(!h||!h.trim())return void x(null);const e=setTimeout(()=>{x(v(h))},400);return()=>clearTimeout(e)},[h]);const _=s??y??null;return(0,i.jsxs)(l.default,{style:c.container,children:[(0,i.jsx)(o.default,{style:c.label,children:e}),p&&!_&&(0,i.jsx)(o.default,{style:c.hint,children:p}),(0,i.jsx)(n.default,{style:[c.input,_&&c.invalidInput],value:h,onChangeText:e=>{b(e),u(e),y&&x(null)},onBlur:()=>{x(v(h))},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 YouTube",placeholderTextColor:f.textMuted,outlineWidth:0,':focus':{borderColor:_?'#ef4444':f.primary}}),_&&(0,i.jsx)(l.default,{style:c.errorContainer,children:(0,i.jsx)(o.default,{style:c.errorText,children:_})})]})}},2492,[23,4,145,132,432,315,123,1013,2]);
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var t=(function(e,t){if("function"==typeof WeakMap)var o=new WeakMap,n=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var r,l,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(r=t?n:o){if(r.has(e))return r.get(e);r.set(e,s)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((l=(r=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(l.get||l.set)?r(s,t,l):s[t]=e[t]);return s})(e,t)})(_r(d[1])),o=_r(d[2]),n=e(_r(d[3])),r=(e(_r(d[4])),e(_r(d[5]))),l=e(_r(d[6])),s=e(_r(d[7])),i=e(_r(d[8])),c=e(_r(d[9])),u=e(_r(d[10])),f=e(_r(d[11])),p=e(_r(d[12])),h=e(_r(d[13])),S=_r(d[14]),y=_r(d[15]);const x=({currentStep:e,totalSteps:l,formData:S,setFormData:x,onBack:b,onNext:N,onManualSave:j,stepMeta:v,progress:T=e/l,autosaveBadge:_})=>{const O=Math.min(Math.max(T,0),1),D=Math.round(100*O),[I,G]=(0,t.useState)(0),K=(0,t.useCallback)(e=>{const t=Math.ceil(e.nativeEvent.layout.height);G(e=>e===t?e:t)},[]),C=(0,t.useMemo)(()=>I>0?I+16:180,[I]),k=(0,t.useMemo)(()=>null!=S?.id?String(S.id):void 0,[S?.id]),M=(e,t)=>{x(o=>({...o,[e]:t}))},w=(0,t.useMemo)(()=>{const e=['plus','minus','recommendation','budget','visa'];let t=0;return e.forEach(e=>{const o=S[e];'visa'!==e?Array.isArray(o)?o.length>0&&(t+=1):o&&String(o).trim().length>0&&(t+=1):!0!==o&&!1!==o||(t+=1)}),{filled:t,total:e.length}},[S]);return(0,y.jsx)(o.SafeAreaView,{style:E.safeContainer,children:(0,y.jsxs)(n.default,{style:E.keyboardAvoid,behavior:void 0,keyboardVerticalOffset:0,children:[(0,y.jsx)(p.default,{canGoBack:!0,onBack:b,title:v?.title??'\u0414\u0435\u0442\u0430\u043b\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430',subtitle:v?.subtitle??`\u0428\u0430\u0433 ${e} \u0438\u0437 ${l}`,progressPercent:D,autosaveBadge:_,tipTitle:v?.tipTitle,tipBody:v?.tipBody}),(0,y.jsx)(i.default,{style:E.content,contentContainerStyle:[E.contentContainer,{paddingBottom:C}],keyboardShouldPersistTaps:"handled",children:(0,y.jsxs)(r.default,{style:E.contentInner,children:[(0,y.jsx)(r.default,{style:E.card,children:(0,y.jsxs)(r.default,{style:E.progressHeader,children:[(0,y.jsx)(s.default,{style:E.progressCardLabel,children:"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044f"}),(0,y.jsxs)(s.default,{style:E.progressValue,children:[w.filled," \u0438\u0437 ",w.total," \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"]})]})}),(0,y.jsxs)(r.default,{style:E.card,children:[(0,y.jsx)(s.default,{style:E.sectionTitle,children:"\u0414\u043b\u044f \u043a\u043e\u0433\u043e \u044d\u0442\u043e \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435"}),(0,y.jsx)(s.default,{style:E.sectionHint,children:"\u041e\u043f\u0438\u0448\u0438\u0442\u0435 \u043f\u043b\u044e\u0441\u044b \u0438 \u043c\u0438\u043d\u0443\u0441\u044b \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430, \u0432\u0430\u0448\u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u0438 \u043b\u0430\u0439\u0444\u0445\u0430\u043a\u0438. \u042d\u0442\u043e \u043f\u043e\u0432\u044b\u0448\u0430\u0435\u0442 \u0446\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f \u0434\u043b\u044f \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u0435\u0439."})]}),(0,y.jsxs)(r.default,{style:E.card,children:[(0,y.jsx)(s.default,{style:E.editorLabel,children:"\u041f\u043b\u044e\u0441\u044b"}),(0,y.jsx)(c.default,{label:"\u041f\u043b\u044e\u0441\u044b",content:S.plus??'',onChange:e=>M('plus',e),idTravel:k,variant:"compact"},`plus-${k??'new'}`)]}),(0,y.jsxs)(r.default,{style:E.card,children:[(0,y.jsx)(s.default,{style:E.editorLabel,children:"\u041c\u0438\u043d\u0443\u0441\u044b"}),(0,y.jsx)(c.default,{label:"\u041c\u0438\u043d\u0443\u0441\u044b",content:S.minus??'',onChange:e=>M('minus',e),idTravel:k,variant:"compact"},`minus-${k??'new'}`)]}),(0,y.jsxs)(r.default,{style:E.card,children:[(0,y.jsx)(s.default,{style:E.editorLabel,children:"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u0438 \u043b\u0430\u0439\u0444\u0445\u0430\u043a\u0438"}),(0,y.jsx)(c.default,{label:"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438",content:S.recommendation??'',onChange:e=>M('recommendation',e),idTravel:k,variant:"compact"},`rec-${k??'new'}`)]}),(0,y.jsx)(r.default,{style:E.card,children:(0,y.jsx)(u.default,{label:"\u0411\u044e\u0434\u0436\u0435\u0442 (\u0441\u0443\u043c\u043c\u0430 \u0438\u043b\u0438 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d)",value:S.budget?.toString?.()??'',onChange:e=>M('budget',e),hint:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: 700\u2013900 \u20ac \u043d\u0430 \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430 \u0431\u0435\u0437 \u043f\u0435\u0440\u0435\u043b\u0451\u0442\u0430"})}),(0,y.jsx)(r.default,{style:E.card,children:(0,y.jsx)(f.default,{label:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0432\u0438\u0437\u0430",value:S.visa??!1,onChange:e=>M('visa',e)})})]})}),(0,y.jsx)(h.default,{canGoBack:!1,onPrimary:N,onSave:j,saveLabel:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",primaryLabel:"\u041a \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438",onLayout:K})]})})},E=l.default.create({safeContainer:{flex:1,backgroundColor:S.DESIGN_TOKENS.colors.background},keyboardAvoid:{flex:1},content:{flex:1},contentContainer:{paddingHorizontal:8,paddingBottom:0,paddingTop:S.DESIGN_TOKENS.spacing.sm,alignItems:'center'},contentInner:{width:'100%',maxWidth:980},progressHeader:{flexDirection:'row',justifyContent:'space-between',alignItems:'center'},progressCardLabel:{fontSize:S.DESIGN_TOKENS.typography.sizes.sm,fontWeight:'700',color:S.DESIGN_TOKENS.colors.text},progressValue:{fontSize:S.DESIGN_TOKENS.typography.sizes.sm,color:S.DESIGN_TOKENS.colors.primaryDark,fontWeight:'700'},card:{marginTop:S.DESIGN_TOKENS.spacing.lg,padding:S.DESIGN_TOKENS.spacing.lg,backgroundColor:S.DESIGN_TOKENS.colors.surface,borderRadius:S.DESIGN_TOKENS.radii.md,borderWidth:1,borderColor:S.DESIGN_TOKENS.colors.border,boxShadow:S.DESIGN_TOKENS.shadows.card,overflow:'hidden'},sectionTitle:{fontSize:S.DESIGN_TOKENS.typography.sizes.md,fontWeight:'700',color:S.DESIGN_TOKENS.colors.text,marginBottom:4},sectionHint:{fontSize:S.DESIGN_TOKENS.typography.sizes.xs,color:S.DESIGN_TOKENS.colors.textMuted},editorLabel:{fontSize:S.DESIGN_TOKENS.typography.sizes.sm,fontWeight:'700',color:S.DESIGN_TOKENS.colors.text,marginBottom:8}});_e.default=t.default.memo(x)},2498,[23,4,2622,414,123,315,145,132,322,2478,2477,2499,2479,2480,1013,2]);
__d(function(g,r,i,a,m,e,d){var l=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;l(r(d[1]));var t=l(r(d[2])),n=l(r(d[3])),o=l(r(d[4])),c=l(r(d[5])),f=(l(r(d[6])),r(d[7]));const u=c.default.create({container:{flexDirection:'row',alignItems:'center',marginBottom:20},label:{flex:1,fontSize:16,color:'#333',marginRight:8}});e.default=({label:l,value:c,onChange:s})=>(0,f.jsxs)(t.default,{style:u.container,children:[(0,f.jsx)(n.default,{style:u.label,numberOfLines:1,children:l}),(0,f.jsx)(o.default,{value:c,onValueChange:s,thumbColor:void 0,trackColor:{false:'#ccc',true:'#ffb899'}})]})},2499,[23,4,315,132,430,145,123,2]);
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var t=(function(e,t){if("function"==typeof WeakMap)var o=new WeakMap,n=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var r,s,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(r=t?n:o){if(r.has(e))return r.get(e);r.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((s=(r=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(s.get||s.set)?r(i,t,s):i[t]=e[t]);return i})(e,t)})(_r(d[1])),o=_r(d[2]),n=e(_r(d[3])),r=(e(_r(d[4])),e(_r(d[5]))),s=e(_r(d[6])),i=e(_r(d[7])),l=(e(_r(d[8])),e(_r(d[9])),e(_r(d[10]))),u=e(_r(d[11])),c=e(_r(d[12])),f=_r(d[13]),p=_r(d[14]);const h=({currentStep:e,totalSteps:s,formData:f,setFormData:h,filters:y,travelDataOld:b,isSuperAdmin:x,onManualSave:w,onBack:S,onNext:k,stepMeta:j,progress:B=e/s,autosaveBadge:M,focusAnchorId:_,onAnchorHandled:C})=>{const D=Math.min(Math.max(B,0),1),O=Math.round(100*D),[P,A]=(0,t.useState)(0),I=(0,t.useCallback)(e=>{const t=Math.ceil(e.nativeEvent.layout.height);A(e=>e===t?e:t)},[]),E=(0,t.useMemo)(()=>P>0?P+16:180,[P]),T=(0,t.useRef)(null),N=(0,t.useRef)(null);return(0,t.useEffect)(()=>{_&&'travelwizard-extras-categories'===_&&C?.()},[_,C]),(0,p.jsx)(o.SafeAreaView,{style:v.safeContainer,children:(0,p.jsxs)(n.default,{style:v.keyboardAvoid,behavior:void 0,keyboardVerticalOffset:0,children:[(0,p.jsx)(u.default,{canGoBack:!0,onBack:S,title:j?.title??'\u0414\u043e\u043f. \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b',subtitle:j?.subtitle??`\u0428\u0430\u0433 ${e} \u0438\u0437 ${s}`,progressPercent:O,autosaveBadge:M,tipTitle:j?.tipTitle,tipBody:j?.tipBody}),(0,p.jsx)(i.default,{ref:T,style:v.content,contentContainerStyle:[v.contentContainer,{paddingBottom:E}],keyboardShouldPersistTaps:"handled",children:(0,p.jsxs)(r.default,{style:v.contentInner,children:[(0,p.jsx)(r.default,{ref:N,nativeID:"travelwizard-extras-categories"}),(0,p.jsx)(l.default,{filters:y,formData:f,setFormData:h,travelDataOld:b,isSuperAdmin:x,onSave:w,showSaveButton:!1,showPreviewButton:!1,showPublishControls:!1,showCountries:!1,showCategories:!0,showCoverImage:!1,showAdditionalFields:!0})]})}),(0,p.jsx)(c.default,{canGoBack:!1,onPrimary:k,primaryLabel:j?.nextLabel??'\u041a \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438',onSave:w,saveLabel:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onLayout:I})]})})},v=s.default.create({safeContainer:{flex:1,backgroundColor:f.DESIGN_TOKENS.colors.background},keyboardAvoid:{flex:1},content:{flex:1},contentContainer:{paddingHorizontal:8,paddingBottom:0,paddingTop:f.DESIGN_TOKENS.spacing.sm,alignItems:'center'},contentInner:{width:'100%',maxWidth:980}});_e.default=t.default.memo(h)},2500,[23,4,2622,414,123,315,145,322,299,209,2501,2479,2480,1013,2]);
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var t=(function(e,t){if("function"==typeof WeakMap)var o=new WeakMap,l=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var n,r,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(n=t?l:o){if(n.has(e))return n.get(e);n.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?n(i,t,r):i[t]=e[t]);return i})(e,t)})(_r(d[1])),o=e(_r(d[2])),l=e(_r(d[3])),n=e(_r(d[4])),r=e(_r(d[5])),i=e(_r(d[6])),s=e(_r(d[7])),u=e(_r(d[8])),c=e(_r(d[9])),p=(e(_r(d[10])),e(_r(d[11])),_r(d[12])),h=e(_r(d[13])),b=e(_r(d[14])),f=e(_r(d[15])),_=_r(d[16]),S=_r(d[17]),v=_r(d[18]);const{width:x}=s.default.get('window'),y=x<=S.METRICS.breakpoints.tablet,E=h.default,N=i.default.create({container:{padding:_.DESIGN_TOKENS.spacing.lg,backgroundColor:_.DESIGN_TOKENS.colors.surface,flex:1},loaderContainer:{flex:1,justifyContent:'center',alignItems:'center',padding:_.DESIGN_TOKENS.spacing.xxs},imageUploadWrapper:{alignItems:'center',marginVertical:12},coverHint:{marginTop:8,fontSize:_.DESIGN_TOKENS.typography.sizes.xs,color:_.DESIGN_TOKENS.colors.textMuted,textAlign:'center'},inputGroup:{marginBottom:12},input:{borderWidth:1,borderColor:_.DESIGN_TOKENS.colors.border,padding:_.DESIGN_TOKENS.spacing.sm,borderRadius:_.DESIGN_TOKENS.radii.sm,backgroundColor:_.DESIGN_TOKENS.colors.surface,color:_.DESIGN_TOKENS.colors.text},label:{fontWeight:_.DESIGN_TOKENS.typography.weights.semibold,marginBottom:4,color:_.DESIGN_TOKENS.colors.text},resetButton:{marginTop:_.DESIGN_TOKENS.spacing.lg,borderColor:_.DESIGN_TOKENS.colors.warning},closeIcon:{position:'absolute',top:-16,right:-14,backgroundColor:_.DESIGN_TOKENS.colors.danger,borderRadius:12,width:20,height:20,justifyContent:'center',alignItems:'center',zIndex:1},closeButtonText:{color:_.DESIGN_TOKENS.colors.textInverse,fontSize:_.DESIGN_TOKENS.typography.sizes.xs,lineHeight:12},saveButton:{backgroundColor:_.DESIGN_TOKENS.colors.primary,borderRadius:12,marginBottom:12},floatingIconButton:{minWidth:40,borderRadius:20,justifyContent:'center',alignItems:'center',backgroundColor:_.DESIGN_TOKENS.colors.surface,elevation:3,marginBottom:12}});_e.default=({filters:e,formData:i,setFormData:s,travelDataOld:h,onClose:S,isSuperAdmin:x=!1,onSave:I,showSaveButton:j=!0,showPreviewButton:C=!0,showPublishControls:T=!0,showCountries:O=!0,showCategories:D=!0,showCoverImage:w=!0,showAdditionalFields:G=!0})=>{if(!i||!e)return(0,v.jsxs)(o.default,{style:N.loaderContainer,children:[(0,v.jsx)(u.default,{size:"large",color:_.DESIGN_TOKENS.colors.primary}),(0,v.jsx)(l.default,{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432..."})]});const K=i;(0,t.useEffect)(()=>{i.id||!1===i.publish||s({...i,publish:!1})},[i.id]);return(0,v.jsxs)(r.default,{contentContainerStyle:{flexGrow:1},style:[N.container,y&&{minHeight:'100%'}],keyboardShouldPersistTaps:"handled",children:[S&&y&&(0,v.jsx)(c.default,{onPress:()=>S(),style:N.closeIcon,hitSlop:{top:8,bottom:8,left:8,right:8},children:(0,v.jsx)(l.default,{style:N.closeButtonText,children:"\u2716"})}),j&&(0,v.jsx)(p.Button,{mode:"contained",icon:"content-save",onPress:I,style:N.saveButton,accessibilityRole:"button",accessibilityLabel:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0441\u0435\u0439\u0447\u0430\u0441"}),C&&K.slug?(0,v.jsx)(p.Button,{mode:"outlined",icon:"open-in-new",onPress:()=>{if(!K.slug)return;const e=`/travels/${K.slug}`;window.open(e,'_blank','noopener,noreferrer')},style:N.floatingIconButton,accessibilityRole:"link",accessibilityLabel:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430",children:"\u041f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"}):null,T&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(b.default,{label:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u043a \u0447\u0435\u0440\u043d\u043e\u0432\u0438\u043a",value:!i.publish,onChange:e=>s({...i,publish:!e})}),x&&(0,v.jsx)(b.default,{label:"\u041f\u0440\u043e\u0448\u0435\u043b \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u044e",value:i.moderation??!1,onChange:e=>s({...i,moderation:e})})]}),w&&i.id&&(0,v.jsxs)(o.default,{style:N.imageUploadWrapper,children:[(0,v.jsx)(f.default,{collection:"travelMainImage",idTravel:i.id,oldImage:K.travel_image_thumb_small_url?.length?K.travel_image_thumb_small_url:h?.travel_image_thumb_small_url??null}),(0,v.jsx)(l.default,{style:N.coverHint,children:"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 (\u0441\u043e\u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u0435 \u0441\u0442\u043e\u0440\u043e\u043d 16:9), \u0431\u0435\u0437 \u043a\u043e\u043b\u043b\u0430\u0436\u0435\u0439 \u0438 \u0442\u0435\u043a\u0441\u0442\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0435."})]}),O&&(0,v.jsx)(E,{label:"\u0421\u0442\u0440\u0430\u043d\u044b \u0434\u043b\u044f \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f *",items:e.countries,value:i.countries??[],onChange:e=>s({...i,countries:e}),labelField:"title_ru",valueField:"country_id"}),D&&(0,v.jsx)(o.default,{nativeID:"travelwizard-publish-categories",children:(0,v.jsx)(E,{label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0439 *",items:e.categories,value:i.categories??[],onChange:e=>s({...i,categories:e}),labelField:"name",valueField:"id"})}),G&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(E,{label:"\u0421\u0440\u0435\u0434\u0441\u0442\u0432\u0430 \u043f\u0435\u0440\u0435\u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f",items:e.transports,value:i.transports??[],onChange:e=>s({...i,transports:e}),labelField:"name",valueField:"id"}),(0,v.jsx)(E,{label:"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0430",items:e.complexity,value:i.complexity??[],onChange:e=>s({...i,complexity:e}),labelField:"name",valueField:"id"}),(0,v.jsx)(E,{label:"\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0443\u0435\u0442\u0435 \u0441...",items:e.companions,value:i.companions??[],onChange:e=>s({...i,companions:e}),labelField:"name",valueField:"id"}),(0,v.jsx)(E,{label:"\u041d\u043e\u0447\u043b\u0435\u0433...",items:e.over_nights_stay,value:i.over_nights_stay??[],onChange:e=>s({...i,over_nights_stay:e}),labelField:"name",valueField:"id"}),(0,v.jsx)(E,{label:"\u041c\u0435\u0441\u044f\u0446 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f",items:e.month,value:i.month??[],onChange:e=>s({...i,month:e}),labelField:"name",valueField:"id"}),F('\u0413\u043e\u0434 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f','year'),(0,v.jsx)(b.default,{label:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0432\u0438\u0437\u0430",value:i.visa??!1,onChange:e=>s({...i,visa:e})}),F('\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432','number_peoples'),F('\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c (\u0434\u043d\u0435\u0439)','number_days'),F('\u0411\u044e\u0434\u0436\u0435\u0442 (\u0440\u0443\u0431.)','budget')]})]});function F(e,t){const r=i;return(0,v.jsxs)(o.default,{style:N.inputGroup,children:[(0,v.jsx)(l.default,{style:N.label,children:e}),(0,v.jsx)(n.default,{style:N.input,value:r[t]?.toString?.()??'',onChangeText:e=>{const o=e.replace(/[^\d]/g,'');s({...r,[t]:o})},placeholder:`\u0412\u0432\u0435\u0434\u0438\u0442\u0435 ${e.toLowerCase()}`,keyboardType:'numeric',inputMode:"numeric"})]})}}},2501,[23,4,315,132,432,322,145,284,407,409,123,401,2652,1995,2499,2484,1013,985,2]);
__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var t=(function(e,t){if("function"==typeof WeakMap)var r=new WeakMap,o=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var s,l,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(s=t?o:r){if(s.has(e))return s.get(e);s.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((l=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(l.get||l.set)?s(i,t,l):i[t]=e[t]);return i})(e,t)})(_r(d[1])),r=e(_r(d[2])),o=(e(_r(d[3])),e(_r(d[4]))),s=e(_r(d[5])),l=e(_r(d[6])),i=e(_r(d[7])),n=e(_r(d[8])),c=_r(d[9]),u=_r(d[10]),h=e(_r(d[11])),y=_r(d[12]),f=e(_r(d[13])),S=e(_r(d[14])),p=e(_r(d[15])),_=_r(d[16]),k=_r(d[17]),E=_r(d[18]),b=_r(d[19]);const N=({currentStep:e,totalSteps:n,formData:N,setFormData:O,filters:x,travelDataOld:v,isSuperAdmin:D,onManualSave:I,onGoBack:G,onFinish:j,onNavigateToIssue:K,stepMeta:w,progress:C=e/n,autosaveBadge:M})=>{const A=(0,y.useRouter)(),z=Math.min(Math.max(C,0),1),B=Math.round(100*z),[L,W]=(0,t.useState)(0),[R,P]=(0,t.useState)(N.moderation?'moderation':'draft'),H=(0,t.useMemo)(()=>{const e=!!N.name&&N.name.trim().length>0,t=!!N.description&&N.description.trim().length>0,r=Array.isArray(N.countries)&&N.countries.length>0,o=Array.isArray(N.categories)&&N.categories.length>0,s=Array.isArray(N.coordsMeTravel)?N.coordsMeTravel.length>0:!!Array.isArray(N.markers)&&N.markers.length>0,l=Array.isArray(N.gallery)?N.gallery:[];return[{key:'name',label:'\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430 (\u043d\u0435 \u043c\u0435\u043d\u0435\u0435 3 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)',ok:e},{key:'description',label:'\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u043a\u043e\u0433\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442 \u0438 \u0447\u0435\u0433\u043e \u043e\u0436\u0438\u0434\u0430\u0442\u044c (\u043d\u0435 \u043c\u0435\u043d\u0435\u0435 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)',ok:t},{key:'countries',label:'\u0421\u0442\u0440\u0430\u043d\u044b \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430 (\u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0430, \u0432\u044b\u0431\u0438\u0440\u0430\u044e\u0442\u0441\u044f \u043d\u0430 \u0448\u0430\u0433\u0435 \u201c\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u201d)',ok:r},{key:'categories',label:'\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430 (\u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0430, \u0432\u044b\u0431\u0438\u0440\u0430\u044e\u0442\u0441\u044f \u043d\u0430 \u0448\u0430\u0433\u0435 \u201c\u0414\u043e\u043f. \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u201d)',ok:o},{key:'route',label:'\u041c\u0430\u0440\u0448\u0440\u0443\u0442 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435 (\u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0430 \u0442\u043e\u0447\u043a\u0430 \u043d\u0430 \u0448\u0430\u0433\u0435 \u201c\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u201d)',ok:s},{key:'photos',label:'\u0424\u043e\u0442\u043e \u0438\u043b\u0438 \u043e\u0431\u043b\u043e\u0436\u043a\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430 (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435, \u0431\u0435\u0437 \u043a\u043e\u043b\u043b\u0430\u0436\u0435\u0439)',ok:!!N.travel_image_thumb_small_url||l.length>0}]},[N]),F=(0,t.useMemo)(()=>(0,_.getModerationIssues)({name:N.name??'',description:N.description??'',countries:N.countries??[],categories:N.categories??[],coordsMeTravel:N.coordsMeTravel??N.markers??[],gallery:N.gallery??[],travel_image_thumb_small_url:N.travel_image_thumb_small_url??null}),[N]),V=(0,t.useMemo)(()=>{const e=new Map;return F.forEach(t=>e.set(t.key,t)),e},[F]),[$,q]=(0,t.useState)([]),J=!N.id,Q=(0,t.useCallback)(e=>{const t=Math.ceil(e.nativeEvent.layout.height);W(e=>e===t?e:t)},[]),U=(0,t.useMemo)(()=>L>0?L+16:220,[L]);(0,t.useEffect)(()=>{(0,k.trackWizardEvent)('wizard_step_view',{step:e})},[e]);const X=async()=>{O({...N,publish:!1,moderation:!1}),q([]),await I();const t=!!N.name&&N.name.trim().length>0,r=!!N.description&&N.description.trim().length>0,o=Array.isArray(N.countries)&&N.countries.length>0,s=Array.isArray(N.coordsMeTravel)?N.coordsMeTravel.length>0:!!Array.isArray(N.markers)&&N.markers.length>0,l=Array.isArray(N.gallery)?N.gallery:[],i=!!N.travel_image_thumb_small_url||l.length>0;await(0,k.trackWizardEvent)('wizard_draft_saved',{travel_id:N.id??null,step:e,fields_filled:{name:t,description:r,countries:o,markers:s,photos:i}}),A.replace('/metravel')},Y=async()=>{const e=(0,_.getModerationIssues)({name:N.name??'',description:N.description??'',countries:N.countries??[],categories:N.categories??[],coordsMeTravel:N.coordsMeTravel??N.markers??[],gallery:N.gallery??[],travel_image_thumb_small_url:N.travel_image_thumb_small_url??null}),t=e.map(e=>e.label);await(0,k.trackWizardEvent)('wizard_moderation_attempt',{missing_fields:t,is_new:J,is_edit:!J,travel_id:N.id??null}),e.length>0?q(e):(q([]),O({...N,moderation:!0}),await(0,k.trackWizardEvent)('wizard_moderation_success',{travel_id:N.id??null,filled_checklist_count:H.filter(e=>e.ok).length,total_checklist_count:H.length}),h.default.show({type:'success',text1:'\u041c\u0430\u0440\u0448\u0440\u0443\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u043d\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u044e',text2:'\u041f\u043e\u0441\u043b\u0435 \u043e\u0434\u043e\u0431\u0440\u0435\u043d\u0438\u044f \u043e\u043d \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u201c\u041c\u043e\u0438 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f\u201d.'}),await j(),A.push('/metravel'))};return(0,b.jsx)(c.SafeAreaView,{style:T.safeContainer,children:(0,b.jsxs)(r.default,{style:T.keyboardAvoid,behavior:void 0,keyboardVerticalOffset:0,children:[(0,b.jsx)(S.default,{canGoBack:!0,onBack:G,title:w?.title??'\u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f',subtitle:w?.subtitle??`\u0428\u0430\u0433 ${e} \u0438\u0437 ${n}`,progressPercent:B,autosaveBadge:M,tipTitle:w?.tipTitle,tipBody:w?.tipBody}),(0,b.jsx)(o.default,{style:T.content,contentContainerStyle:[T.contentContainer,{paddingBottom:U}],keyboardShouldPersistTaps:"handled",children:(0,b.jsxs)(s.default,{style:T.contentInner,children:[(0,b.jsx)(f.default,{filters:x,formData:N,setFormData:O,travelDataOld:v,isSuperAdmin:D,onSave:I,showSaveButton:!0,showPreviewButton:!0,showPublishControls:!1,showCountries:!1,showCoverImage:!1,showCategories:!1,showAdditionalFields:!1}),(0,b.jsxs)(s.default,{style:[T.card,T.statusCard],children:[(0,b.jsx)(l.default,{style:T.cardTitle,children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438"}),(0,b.jsxs)(s.default,{style:T.statusOptions,children:[(0,b.jsxs)(i.default,{style:[T.statusOption,'draft'===R&&T.statusOptionActive],onPress:()=>P('draft'),activeOpacity:.85,children:[(0,b.jsx)(s.default,{style:T.radioOuter,children:'draft'===R&&(0,b.jsx)(s.default,{style:T.radioInner})}),(0,b.jsxs)(s.default,{style:T.statusTextCol,children:[(0,b.jsx)(l.default,{style:T.statusLabel,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u043a \u0447\u0435\u0440\u043d\u043e\u0432\u0438\u043a"}),(0,b.jsx)(l.default,{style:T.statusHint,children:"\u0427\u0435\u0440\u043d\u043e\u0432\u0438\u043a \u0432\u0438\u0434\u0435\u043d \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u0430\u043c. \u0415\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u0434\u043e\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u044e \u043f\u043e\u0437\u0436\u0435."})]})]}),(0,b.jsx)(s.default,{style:T.divider}),(0,b.jsxs)(i.default,{style:[T.statusOption,'moderation'===R&&T.statusOptionActive],onPress:()=>P('moderation'),activeOpacity:.85,children:[(0,b.jsx)(s.default,{style:T.radioOuter,children:'moderation'===R&&(0,b.jsx)(s.default,{style:T.radioInner})}),(0,b.jsxs)(s.default,{style:T.statusTextCol,children:[(0,b.jsx)(l.default,{style:T.statusLabel,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u044e"}),(0,b.jsx)(l.default,{style:T.statusHint,children:"\u041f\u043e\u0441\u043b\u0435 \u043e\u0434\u043e\u0431\u0440\u0435\u043d\u0438\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442 \u0441\u0442\u0430\u043d\u0435\u0442 \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u043c \u0438 \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u0432 \u0441\u043f\u0438\u0441\u043a\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0439."})]})]})]})]}),(0,b.jsxs)(s.default,{style:[T.card,T.checklistCard],children:[(0,b.jsx)(l.default,{style:T.cardTitle,children:"\u0427\u0435\u043a-\u043b\u0438\u0441\u0442 \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438"}),H.map(e=>{const t=V.get(e.key),r=!e.ok&&!!t&&!!K,o=r?i.default:s.default;return(0,b.jsxs)(o,{style:[T.checklistRow,r&&T.checklistRowClickable],onPress:r?()=>K?.(t):void 0,disabled:!r,children:[(0,b.jsx)(s.default,{style:[T.checkBadge,e.ok?T.checkBadgeOk:T.checkBadgeMissing],children:(0,b.jsx)(u.Icon,{source:e.ok?'check':'alert',size:14,color:e.ok?E.DESIGN_TOKENS.colors.successDark:E.DESIGN_TOKENS.colors.dangerDark})}),(0,b.jsx)(l.default,{style:[T.checklistLabel,r&&T.checklistLabelClickable],children:e.label})]},e.key)})]}),'moderation'===R&&$.length>0&&(0,b.jsxs)(s.default,{style:[T.card,T.bannerError],children:[(0,b.jsx)(l.default,{style:T.bannerTitle,children:"\u041d\u0443\u0436\u043d\u043e \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u0434 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u0435\u0439"}),(0,b.jsx)(l.default,{style:T.bannerDescription,children:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043e\u0442\u043c\u0435\u0447\u0435\u043d\u043d\u044b\u0435 \u043f\u0443\u043d\u043a\u0442\u044b \u0447\u0435\u043a-\u043b\u0438\u0441\u0442\u0430. \u0411\u0435\u0437 \u043d\u0438\u0445 \u043c\u044b \u043d\u0435 \u0441\u043c\u043e\u0436\u0435\u043c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442 \u043d\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u044e."}),$.map(e=>{const t=!!K,r=t?i.default:s.default;return(0,b.jsxs)(r,{style:[T.checklistRow,t&&T.checklistRowClickable],onPress:t?()=>K?.(e):void 0,disabled:!t,activeOpacity:.85,children:[(0,b.jsx)(s.default,{style:[T.checkBadge,T.checkBadgeMissing],children:(0,b.jsx)(u.Icon,{source:'alert',size:14,color:E.DESIGN_TOKENS.colors.dangerDark})}),(0,b.jsx)(l.default,{style:[T.checklistLabel,t&&T.checklistLabelClickable],children:e.label})]},e.key)})]})]})}),(0,b.jsx)(p.default,{canGoBack:!1,onPrimary:()=>{'draft'===R?X():Y()},primaryLabel:'draft'===R?'\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0447\u0435\u0440\u043d\u043e\u0432\u0438\u043a':'\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u044e',onSave:'moderation'===R?X:void 0,saveLabel:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u043a \u0447\u0435\u0440\u043d\u043e\u0432\u0438\u043a",onLayout:Q})]})})},T=n.default.create({safeContainer:{flex:1,backgroundColor:E.DESIGN_TOKENS.colors.background},keyboardAvoid:{flex:1},content:{flex:1,paddingHorizontal:8},contentContainer:{paddingBottom:0,paddingTop:E.DESIGN_TOKENS.spacing.sm,alignItems:'center'},contentInner:{width:'100%',maxWidth:980},card:{marginTop:E.DESIGN_TOKENS.spacing.lg,padding:E.DESIGN_TOKENS.spacing.lg,backgroundColor:E.DESIGN_TOKENS.colors.surface,borderRadius:E.DESIGN_TOKENS.radii.md,borderWidth:1,borderColor:E.DESIGN_TOKENS.colors.border,boxShadow:E.DESIGN_TOKENS.shadows.card},cardTitle:{fontSize:E.DESIGN_TOKENS.typography.sizes.md,fontWeight:'700',color:E.DESIGN_TOKENS.colors.text,marginBottom:E.DESIGN_TOKENS.spacing.sm},statusCard:{},statusOptions:{gap:E.DESIGN_TOKENS.spacing.sm},statusOption:{flexDirection:'row',alignItems:'flex-start',paddingVertical:10,paddingHorizontal:10,borderRadius:E.DESIGN_TOKENS.radii.md},statusOptionActive:{backgroundColor:E.DESIGN_TOKENS.colors.primarySoft,borderWidth:1,borderColor:E.DESIGN_TOKENS.colors.borderAccent},statusTextCol:{flex:1,minWidth:0},divider:{height:1,backgroundColor:E.DESIGN_TOKENS.colors.border,opacity:.8},radioOuter:{width:18,height:18,borderRadius:9,borderWidth:2,borderColor:E.DESIGN_TOKENS.colors.primary,alignItems:'center',justifyContent:'center',marginRight:8,marginTop:E.DESIGN_TOKENS.spacing.xxs},radioInner:{width:10,height:10,borderRadius:5,backgroundColor:E.DESIGN_TOKENS.colors.primary},statusLabel:{fontSize:E.DESIGN_TOKENS.typography.sizes.sm,fontWeight:'600',color:E.DESIGN_TOKENS.colors.text},statusHint:{fontSize:E.DESIGN_TOKENS.typography.sizes.xs,color:E.DESIGN_TOKENS.colors.textMuted,marginTop:E.DESIGN_TOKENS.spacing.xxs,lineHeight:16},checklistCard:{},checklistRow:{flexDirection:'row',alignItems:'flex-start',paddingVertical:8},checklistRowClickable:{borderRadius:E.DESIGN_TOKENS.radii.md,paddingHorizontal:8},checkBadge:{width:20,height:20,borderRadius:10,alignItems:'center',justifyContent:'center',marginRight:10,marginTop:1,borderWidth:1},checkBadgeOk:{backgroundColor:E.DESIGN_TOKENS.colors.successSoft,borderColor:E.DESIGN_TOKENS.colors.successLight},checkBadgeMissing:{backgroundColor:E.DESIGN_TOKENS.colors.errorSoft,borderColor:E.DESIGN_TOKENS.colors.dangerLight},checklistLabel:{fontSize:E.DESIGN_TOKENS.typography.sizes.sm,color:E.DESIGN_TOKENS.colors.text,flex:1,lineHeight:18},checklistLabelClickable:{textDecorationLine:'underline'},bannerError:{backgroundColor:E.DESIGN_TOKENS.colors.errorSoft,borderColor:E.DESIGN_TOKENS.colors.dangerLight},bannerTitle:{fontSize:E.DESIGN_TOKENS.typography.sizes.sm,fontWeight:'600',color:E.DESIGN_TOKENS.colors.dangerDark,marginBottom:4},bannerDescription:{fontSize:E.DESIGN_TOKENS.typography.sizes.sm,color:E.DESIGN_TOKENS.colors.dangerDark,marginBottom:E.DESIGN_TOKENS.spacing.xs}});_e.default=t.default.memo(N)},2502,[23,4,414,123,322,315,132,409,145,2622,2652,905,457,2501,2479,2480,2471,2472,1013,2]);